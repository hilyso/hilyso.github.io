{"meta":{"version":1,"warehouse":"4.0.2"},"models":{"Asset":[{"_id":"source/images/002.progress.md.01.png","path":"images/002.progress.md.01.png","modified":1,"renderable":0},{"_id":"source/images/002.progress.md.02.png","path":"images/002.progress.md.02.png","modified":1,"renderable":0},{"_id":"source/images/003.clamav.md.01.png","path":"images/003.clamav.md.01.png","modified":1,"renderable":0},{"_id":"source/images/003.clamav.md.02.png","path":"images/003.clamav.md.02.png","modified":1,"renderable":0},{"_id":"source/images/004.lvm.md.01.png","path":"images/004.lvm.md.01.png","modified":1,"renderable":0},{"_id":"source/images/004.lvm.md.02.png","path":"images/004.lvm.md.02.png","modified":1,"renderable":0},{"_id":"source/images/004.lvm.md.03.png","path":"images/004.lvm.md.03.png","modified":1,"renderable":0},{"_id":"source/images/004.lvm.md.04.png","path":"images/004.lvm.md.04.png","modified":1,"renderable":0},{"_id":"source/images/005.elasticsearch.md.01.png","path":"images/005.elasticsearch.md.01.png","modified":1,"renderable":0},{"_id":"source/images/005.elasticsearch.md.02.png","path":"images/005.elasticsearch.md.02.png","modified":1,"renderable":0},{"_id":"source/images/005.elasticsearch.md.03.png","path":"images/005.elasticsearch.md.03.png","modified":1,"renderable":0},{"_id":"source/images/005.elasticsearch.md.04.png","path":"images/005.elasticsearch.md.04.png","modified":1,"renderable":0},{"_id":"source/images/005.elasticsearch.md.05.png","path":"images/005.elasticsearch.md.05.png","modified":1,"renderable":0},{"_id":"source/images/005.elasticsearch.md.06.png","path":"images/005.elasticsearch.md.06.png","modified":1,"renderable":0},{"_id":"source/images/005.elasticsearch.md.07.png","path":"images/005.elasticsearch.md.07.png","modified":1,"renderable":0},{"_id":"source/images/005.elasticsearch.md.08.png","path":"images/005.elasticsearch.md.08.png","modified":1,"renderable":0},{"_id":"source/images/006.iptables.md.01.png","path":"images/006.iptables.md.01.png","modified":1,"renderable":0},{"_id":"source/images/006.iptables.md.02.png","path":"images/006.iptables.md.02.png","modified":1,"renderable":0},{"_id":"source/images/006.iptables.md.03.png","path":"images/006.iptables.md.03.png","modified":1,"renderable":0},{"_id":"source/images/007.system_info.md.01.png","path":"images/007.system_info.md.01.png","modified":1,"renderable":0},{"_id":"source/images/008.reset_password.md.01.png","path":"images/008.reset_password.md.01.png","modified":1,"renderable":0},{"_id":"source/images/009.openssh.md.01.png","path":"images/009.openssh.md.01.png","modified":1,"renderable":0},{"_id":"source/images/009.openssh.md.02.png","path":"images/009.openssh.md.02.png","modified":1,"renderable":0},{"_id":"source/images/009.openssh.md.03.png","path":"images/009.openssh.md.03.png","modified":1,"renderable":0},{"_id":"source/images/009.openssh.md.04.png","path":"images/009.openssh.md.04.png","modified":1,"renderable":0},{"_id":"source/images/009.openssh.md.05.png","path":"images/009.openssh.md.05.png","modified":1,"renderable":0},{"_id":"source/images/008.reset_password.md.02.png","path":"images/008.reset_password.md.02.png","modified":1,"renderable":0},{"_id":"source/images/009.openssh.md.06.png","path":"images/009.openssh.md.06.png","modified":1,"renderable":0},{"_id":"source/images/009.openssh.md.07.png","path":"images/009.openssh.md.07.png","modified":1,"renderable":0},{"_id":"source/images/012.docker_installation.md.01.png","path":"images/012.docker_installation.md.01.png","modified":1,"renderable":0},{"_id":"source/images/017.oracle.md.01.png","path":"images/017.oracle.md.01.png","modified":1,"renderable":0},{"_id":"source/images/017.oracle.md.02.png","path":"images/017.oracle.md.02.png","modified":1,"renderable":0},{"_id":"source/images/017.oracle.md.03.png","path":"images/017.oracle.md.03.png","modified":1,"renderable":0},{"_id":"source/images/017.oracle.md.04.png","path":"images/017.oracle.md.04.png","modified":1,"renderable":0},{"_id":"source/images/017.oracle.md.05.png","path":"images/017.oracle.md.05.png","modified":1,"renderable":0},{"_id":"source/images/017.oracle.md.06.png","path":"images/017.oracle.md.06.png","modified":1,"renderable":0},{"_id":"source/images/017.oracle.md.07.png","path":"images/017.oracle.md.07.png","modified":1,"renderable":0},{"_id":"source/images/017.oracle.md.08.png","path":"images/017.oracle.md.08.png","modified":1,"renderable":0},{"_id":"source/images/017.oracle.md.09.png","path":"images/017.oracle.md.09.png","modified":1,"renderable":0},{"_id":"source/images/017.oracle.md.11.png","path":"images/017.oracle.md.11.png","modified":1,"renderable":0},{"_id":"source/images/017.oracle.md.12.png","path":"images/017.oracle.md.12.png","modified":1,"renderable":0},{"_id":"source/images/017.oracle.md.13.png","path":"images/017.oracle.md.13.png","modified":1,"renderable":0},{"_id":"source/images/027.telnet.md.01.png","path":"images/027.telnet.md.01.png","modified":1,"renderable":0},{"_id":"source/images/017.oracle.md.10.png","path":"images/017.oracle.md.10.png","modified":1,"renderable":0},{"_id":"source/images/027.telnet.md.02.png","path":"images/027.telnet.md.02.png","modified":1,"renderable":0},{"_id":"source/images/028.docker_instances.md.01.png","path":"images/028.docker_instances.md.01.png","modified":1,"renderable":0},{"_id":"source/images/029.install_php7.4.33.md.01.png","path":"images/029.install_php7.4.33.md.01.png","modified":1,"renderable":0},{"_id":"source/images/029.install_php7.4.33.md.02.png","path":"images/029.install_php7.4.33.md.02.png","modified":1,"renderable":0},{"_id":"source/images/029.install_php7.4.33.md.03.png","path":"images/029.install_php7.4.33.md.03.png","modified":1,"renderable":0},{"_id":"source/images/031.ca.md.01.png","path":"images/031.ca.md.01.png","modified":1,"renderable":0},{"_id":"source/images/031.ca.md.02.png","path":"images/031.ca.md.02.png","modified":1,"renderable":0},{"_id":"source/images/031.ca.md.03.png","path":"images/031.ca.md.03.png","modified":1,"renderable":0},{"_id":"source/images/035.ssh_key.md.01.png","path":"images/035.ssh_key.md.01.png","modified":1,"renderable":0},{"_id":"source/images/036.openwrt_disk_expansion.md.01.png","path":"images/036.openwrt_disk_expansion.md.01.png","modified":1,"renderable":0},{"_id":"source/images/036.openwrt_disk_expansion.md.02.png","path":"images/036.openwrt_disk_expansion.md.02.png","modified":1,"renderable":0},{"_id":"source/images/034.redis.md.01.png","path":"images/034.redis.md.01.png","modified":1,"renderable":0},{"_id":"source/images/037.kvm.md.01.png","path":"images/037.kvm.md.01.png","modified":1,"renderable":0},{"_id":"source/images/037.kvm.md.02.png","path":"images/037.kvm.md.02.png","modified":1,"renderable":0},{"_id":"source/images/037.kvm.md.04.png","path":"images/037.kvm.md.04.png","modified":1,"renderable":0},{"_id":"source/images/040.openwrt_install_passwall.md.01.png","path":"images/040.openwrt_install_passwall.md.01.png","modified":1,"renderable":0},{"_id":"source/images/037.kvm.md.03.png","path":"images/037.kvm.md.03.png","modified":1,"renderable":0},{"_id":"source/images/040.openwrt_install_passwall.md.02.png","path":"images/040.openwrt_install_passwall.md.02.png","modified":1,"renderable":0},{"_id":"source/images/040.openwrt_install_passwall.md.03.png","path":"images/040.openwrt_install_passwall.md.03.png","modified":1,"renderable":0},{"_id":"source/images/040.openwrt_install_passwall.md.04.png","path":"images/040.openwrt_install_passwall.md.04.png","modified":1,"renderable":0},{"_id":"source/images/041.openwrt_install_frpc.md.01.png","path":"images/041.openwrt_install_frpc.md.01.png","modified":1,"renderable":0},{"_id":"source/images/041.openwrt_install_frpc.md.02.png","path":"images/041.openwrt_install_frpc.md.02.png","modified":1,"renderable":0},{"_id":"source/images/043.Cryptocurrency_Mining_Malware.md.01.png","path":"images/043.Cryptocurrency_Mining_Malware.md.01.png","modified":1,"renderable":0},{"_id":"source/images/043.Cryptocurrency_Mining_Malware.md.02.png","path":"images/043.Cryptocurrency_Mining_Malware.md.02.png","modified":1,"renderable":0},{"_id":"source/images/043.Cryptocurrency_Mining_Malware.md.03.png","path":"images/043.Cryptocurrency_Mining_Malware.md.03.png","modified":1,"renderable":0},{"_id":"source/images/043.Cryptocurrency_Mining_Malware.md.04.png","path":"images/043.Cryptocurrency_Mining_Malware.md.04.png","modified":1,"renderable":0},{"_id":"source/images/043.Cryptocurrency_Mining_Malware.md.05.png","path":"images/043.Cryptocurrency_Mining_Malware.md.05.png","modified":1,"renderable":0},{"_id":"source/images/043.Cryptocurrency_Mining_Malware.md.06.png","path":"images/043.Cryptocurrency_Mining_Malware.md.06.png","modified":1,"renderable":0},{"_id":"source/images/043.Cryptocurrency_Mining_Malware.md.07.png","path":"images/043.Cryptocurrency_Mining_Malware.md.07.png","modified":1,"renderable":0},{"_id":"source/images/043.Cryptocurrency_Mining_Malware.md.08.png","path":"images/043.Cryptocurrency_Mining_Malware.md.08.png","modified":1,"renderable":0},{"_id":"source/images/045.v2raya.md.000.png","path":"images/045.v2raya.md.000.png","modified":1,"renderable":0},{"_id":"source/images/045.v2raya.md.01.png","path":"images/045.v2raya.md.01.png","modified":1,"renderable":0},{"_id":"source/images/045.v2raya.md.02.png","path":"images/045.v2raya.md.02.png","modified":1,"renderable":0},{"_id":"source/images/045.v2raya.md.03.png","path":"images/045.v2raya.md.03.png","modified":1,"renderable":0},{"_id":"source/images/045.v2raya.md.00.png","path":"images/045.v2raya.md.00.png","modified":1,"renderable":0},{"_id":"source/images/046.docker_install_manual.md.01.png","path":"images/046.docker_install_manual.md.01.png","modified":1,"renderable":0},{"_id":"source/images/046.docker_install_manual.md.02.png","path":"images/046.docker_install_manual.md.02.png","modified":1,"renderable":0},{"_id":"source/images/047.docker_build_instances.md.01.png","path":"images/047.docker_build_instances.md.01.png","modified":1,"renderable":0},{"_id":"source/images/047.docker_build_instances.md.02.png","path":"images/047.docker_build_instances.md.02.png","modified":1,"renderable":0},{"_id":"source/images/047.docker_build_instances.md.03.png","path":"images/047.docker_build_instances.md.03.png","modified":1,"renderable":0},{"_id":"source/images/049.centos_downgrade.md.01.png","path":"images/049.centos_downgrade.md.01.png","modified":1,"renderable":0},{"_id":"source/images/050.registry_setup.md.01.png","path":"images/050.registry_setup.md.01.png","modified":1,"renderable":0},{"_id":"source/images/050.registry_setup.md.02.png","path":"images/050.registry_setup.md.02.png","modified":1,"renderable":0},{"_id":"source/images/051.MySQL_Install_Using_Generic_Binaries.md.01.png","path":"images/051.MySQL_Install_Using_Generic_Binaries.md.01.png","modified":1,"renderable":0},{"_id":"source/images/051.MySQL_Install_Using_Generic_Binaries.md.02.png","path":"images/051.MySQL_Install_Using_Generic_Binaries.md.02.png","modified":1,"renderable":0},{"_id":"source/images/052.MySQL_Installation_Uasing_Source.md.01.png","path":"images/052.MySQL_Installation_Uasing_Source.md.01.png","modified":1,"renderable":0},{"_id":"source/images/052.MySQL_Installation_Uasing_Source.md.02.png","path":"images/052.MySQL_Installation_Uasing_Source.md.02.png","modified":1,"renderable":0},{"_id":"source/images/055.Gitlab_Installation.md.01.png","path":"images/055.Gitlab_Installation.md.01.png","modified":1,"renderable":0},{"_id":"source/images/053.Prometheus_Installation.md.01.png","path":"images/053.Prometheus_Installation.md.01.png","modified":1,"renderable":0},{"_id":"source/images/055.Gitlab_Installation.md.02.png","path":"images/055.Gitlab_Installation.md.02.png","modified":1,"renderable":0},{"_id":"source/images/056.Harbor_Installation.md.01.png","path":"images/056.Harbor_Installation.md.01.png","modified":1,"renderable":0},{"_id":"source/images/055.Gitlab_Installation.md.03.png","path":"images/055.Gitlab_Installation.md.03.png","modified":1,"renderable":0},{"_id":"source/images/056.Harbor_Installation.md.02.png","path":"images/056.Harbor_Installation.md.02.png","modified":1,"renderable":0},{"_id":"source/images/057.Linux_Security_Policy.md.01.png","path":"images/057.Linux_Security_Policy.md.01.png","modified":1,"renderable":0},{"_id":"source/images/057.Linux_Security_Policy.md.02.png","path":"images/057.Linux_Security_Policy.md.02.png","modified":1,"renderable":0},{"_id":"source/images/059.samba.md.01.png","path":"images/059.samba.md.01.png","modified":1,"renderable":0},{"_id":"source/images/059.samba.md.02.png","path":"images/059.samba.md.02.png","modified":1,"renderable":0},{"_id":"source/images/059.samba.md.03.png","path":"images/059.samba.md.03.png","modified":1,"renderable":0},{"_id":"source/images/059.samba.md.04.png","path":"images/059.samba.md.04.png","modified":1,"renderable":0},{"_id":"source/images/059.samba.md.05.png","path":"images/059.samba.md.05.png","modified":1,"renderable":0},{"_id":"source/images/059.samba.md.06.png","path":"images/059.samba.md.06.png","modified":1,"renderable":0},{"_id":"source/images/060.highlight.md.01.png","path":"images/060.highlight.md.01.png","modified":1,"renderable":0},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":1,"renderable":1},{"_id":"themes/next/source/css/noscript.styl","path":"css/noscript.styl","modified":1,"renderable":1},{"_id":"themes/next/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":1,"renderable":1},{"_id":"themes/next/source/images/avatar.gif","path":"images/avatar.gif","modified":1,"renderable":1},{"_id":"themes/next/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":1,"renderable":1},{"_id":"themes/next/source/images/logo-algolia-nebula-blue-full.svg","path":"images/logo-algolia-nebula-blue-full.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/logo.svg","path":"images/logo.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":1,"renderable":1},{"_id":"themes/next/source/js/bookmark.js","path":"js/bookmark.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/comments-buttons.js","path":"js/comments-buttons.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/comments.js","path":"js/comments.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/config.js","path":"js/config.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/motion.js","path":"js/motion.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/next-boot.js","path":"js/next-boot.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/pjax.js","path":"js/pjax.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/schedule.js","path":"js/schedule.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/utils.js","path":"js/utils.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/schemes/muse.js","path":"js/schemes/muse.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/third-party/fancybox.js","path":"js/third-party/fancybox.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/third-party/pace.js","path":"js/third-party/pace.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/third-party/quicklink.js","path":"js/third-party/quicklink.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/third-party/analytics/baidu-analytics.js","path":"js/third-party/analytics/baidu-analytics.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/third-party/analytics/google-analytics.js","path":"js/third-party/analytics/google-analytics.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/third-party/analytics/growingio.js","path":"js/third-party/analytics/growingio.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/third-party/analytics/matomo.js","path":"js/third-party/analytics/matomo.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/third-party/comments/changyan.js","path":"js/third-party/comments/changyan.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/third-party/comments/disqus.js","path":"js/third-party/comments/disqus.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/third-party/comments/disqusjs.js","path":"js/third-party/comments/disqusjs.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/third-party/comments/gitalk.js","path":"js/third-party/comments/gitalk.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/third-party/comments/isso.js","path":"js/third-party/comments/isso.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/third-party/comments/livere.js","path":"js/third-party/comments/livere.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/third-party/comments/utterances.js","path":"js/third-party/comments/utterances.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/third-party/chat/chatra.js","path":"js/third-party/chat/chatra.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/third-party/chat/gitter.js","path":"js/third-party/chat/gitter.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/third-party/chat/tidio.js","path":"js/third-party/chat/tidio.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/third-party/math/katex.js","path":"js/third-party/math/katex.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/third-party/math/mathjax.js","path":"js/third-party/math/mathjax.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/third-party/search/algolia-search.js","path":"js/third-party/search/algolia-search.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/third-party/search/local-search.js","path":"js/third-party/search/local-search.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/third-party/statistics/lean-analytics.js","path":"js/third-party/statistics/lean-analytics.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/third-party/statistics/firestore.js","path":"js/third-party/statistics/firestore.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/third-party/tags/pdf.js","path":"js/third-party/tags/pdf.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/third-party/tags/mermaid.js","path":"js/third-party/tags/mermaid.js","modified":1,"renderable":1}],"Cache":[{"_id":"source/404/index.md","hash":"fcbd3c87e1d51c4adc7651626b261c4b4bb10626","modified":1679989366000},{"_id":"source/CentOS.back/index.md","hash":"e561ac1694943a8575f5e9feaea7038acd557b9b","modified":1677820499000},{"_id":"source/Database/index.md","hash":"7710738da8de52ed039bde71421224a8d3bae08e","modified":1681915232000},{"_id":"source/CI-CD/index.md","hash":"65d8012d62937b3d55fd8d712faf2b7a0d827fe5","modified":1696755855000},{"_id":"source/DevOps/index.md","hash":"06db1bdb5edbdf7725348cd554b6aec11c194011","modified":1677820500000},{"_id":"source/Docker/index.md","hash":"be4d183c091fa1f341263288a888fd2d49d113b2","modified":1677820501000},{"_id":"source/K8S/index.md","hash":"c598ceb6d44a77fe0c2b6cc30c0edb6f15fd0ecf","modified":1677820509000},{"_id":"source/KVM/index.md","hash":"7c97d771c38d0c422cbff1d2cca01ecd1ec22c53","modified":1681898387000},{"_id":"source/Linux/index.md","hash":"76f668de31a70ac167be393e36c0cd2b13a79cad","modified":1677820509000},{"_id":"source/Monitor/index.md","hash":"9e0ba885d9e139c5832e67850716753d4bdc041c","modified":1695798743000},{"_id":"source/MySQL/index.md","hash":"51486259a427a217d312d6e041fe7e442c884204","modified":1677820510000},{"_id":"source/NetWork/index.md","hash":"74031c67c6667ad937451227a5d2bf5f2dab1afe","modified":1677820512000},{"_id":"source/OpenWrt/index.md","hash":"9a85fe671efedd9f6c429b29aab605da136a526e","modified":1679996626000},{"_id":"source/Oracle/index.md","hash":"e18b918733b1b14adb331a47c737087fab28bb30","modified":1681491464000},{"_id":"source/RaspberryPi/index.md","hash":"343568eed29c20ec3ece5ecb4a367a14bb05bc6e","modified":1677820512000},{"_id":"source/Security/index.md","hash":"dc6f89bc557392981c6cb29dbcdbf205d6e71eed","modified":1677820513000},{"_id":"source/Ubuntu/index.md","hash":"4a04d19816d856f2722362f16c8a35be0d1d346f","modified":1677820515000},{"_id":"source/_posts/001.frp.md","hash":"be8ab3b545617a7c9947bbff83c40b415ff32309","modified":1677820516000},{"_id":"source/_posts/002.progress.md","hash":"85c7f6c5e29461cd6f82341c49fa12ea37bbcfc9","modified":1677820516000},{"_id":"source/_posts/003.clamav.md","hash":"5e53b4f19eb3b68dd4615a35061f7041126f8745","modified":1677820516000},{"_id":"source/_posts/004.lvm.md","hash":"916e15e727c8105c5c95e82b43702c7584e6862e","modified":1695715096000},{"_id":"source/_posts/005.elasticsearch.md","hash":"b8e2268da3a44b19393b47c8122869bf0fe52f0d","modified":1677820517000},{"_id":"source/_posts/006.iptables.md","hash":"f3a82563cabe164767d6acdd5c0e121914cf89a8","modified":1681784163000},{"_id":"source/_posts/007.system_monitor.md","hash":"bb50b3c64f1706bc704789f39829572242c06125","modified":1680088780000},{"_id":"source/_posts/008.reset_password.md","hash":"b8eb294d3a0a45bc4da31e55b2b9e23546a21e5f","modified":1677820517000},{"_id":"source/_posts/010.gcc_update.md","hash":"c1a01943683ad8388900e4bf603fc392f5fd6f54","modified":1677820518000},{"_id":"source/_posts/009.openssh.md","hash":"d7488ab48302f5a19df525443cda885ecd8c8da8","modified":1698658598000},{"_id":"source/_posts/011.apache-doris.md","hash":"850cd50d0097bd93bff3a5db622f4a7bb6f880d4","modified":1681915321000},{"_id":"source/_posts/012.docker_installation.md","hash":"148805bc6d454ba96500ad5e8a39f1e4ca832c30","modified":1697511636000},{"_id":"source/_posts/013.keepalived.md","hash":"8684aa6ac8d90692063151588d1d41400215fc2a","modified":1677820519000},{"_id":"source/_posts/014.linux_shell_redirect.md","hash":"2df198e7ca7b2f339cb9104758f09dd1e53b958f","modified":1677820519000},{"_id":"source/_posts/015.windows_route.md","hash":"d01ac49e4abea3c45cdd48a44823dbfa6bb9f37f","modified":1681788428000},{"_id":"source/_posts/016.take_ownership.md","hash":"4f829c7b4db6c3be8b510d4018be0ca0f390e80b","modified":1677820519000},{"_id":"source/_posts/017.Oracle.md","hash":"25b0115626d80e84060ff00240b7d03ba8b37d65","modified":1682046635000},{"_id":"source/_posts/018.mysql.md","hash":"fb3c6a2b1caccf749e7b6055081032a1b794e662","modified":1681915313000},{"_id":"source/_posts/019.sudo.md","hash":"c6b16dce1931983b33dba89e4d01776365c5f2c4","modified":1677820521000},{"_id":"source/_posts/020.mount.md","hash":"6cf5e7657fef57259e46157e65e385dbd57ab80c","modified":1677820522000},{"_id":"source/_posts/022.MySQL_backup.md","hash":"5ee9ecf48eed9de757344f3527fa73e7cb45e2f9","modified":1681915316000},{"_id":"source/_posts/021.CentOS-Base.repo.md","hash":"ea952d4bb44ba4cc61cb59294337a35baf439329","modified":1677820523000},{"_id":"source/_posts/023.access.md","hash":"6ab727ae9692374fc0e4313d0a8b8109a71d282b","modified":1677820524000},{"_id":"source/_posts/024.fstab.md","hash":"8691a17e77c0586e9f31b193061faee93b0e7f74","modified":1677820524000},{"_id":"source/_posts/025.ssh.md","hash":"02b8b806fab4be1baa2ff5e5e06c4ad5ecddba06","modified":1677820524000},{"_id":"source/_posts/026.xserver.md","hash":"a3a92425bfcfd81190077749c4a74334065e64b5","modified":1677820525000},{"_id":"source/_posts/027.telnet.md","hash":"91ae33ce0fc9c264f363c85eb0b7cbd633990255","modified":1677820525000},{"_id":"source/_posts/028.docker_instances.md","hash":"2a30f176cf05e2db077b96a2e26195c7cb2bd233","modified":1677820526000},{"_id":"source/_posts/029.install_php7.4.33.md","hash":"a6027d3467cf31c0ee25b18ff60d841d812a17ce","modified":1681824581000},{"_id":"source/_posts/030.nextcloud.md","hash":"e87afac4d341707515267499f01192f43c3938ec","modified":1677820527000},{"_id":"source/_posts/031.ca.md","hash":"0ebfb7b7f42fc5660e6f0a6b68e921f95b3486ba","modified":1695371330000},{"_id":"source/_posts/032.acme.sh.md","hash":"02fd7aece38c517c63e9b331f716cbebd1c6dcaf","modified":1695198846000},{"_id":"source/_posts/033.tcpdump_instances.md","hash":"720eacb4b26e6f9c2a980a948ffa273dcf75ffa3","modified":1679049055000},{"_id":"source/_posts/034.redis.md","hash":"fbb307c90c4b5d7a3d0d478191c593f5c99c6430","modified":1681466526000},{"_id":"source/_posts/036.openwrt_disk_expansion.md","hash":"7549273eca76736b057aac266048b9b8190d6895","modified":1681466849000},{"_id":"source/_posts/037.kvm.md","hash":"d0a57da181ab0fcd638a222e36bb4629ef768438","modified":1682052102000},{"_id":"source/_posts/035.ssh_key.md","hash":"b198259219d5224fe0925e5c38587d0a67909f4c","modified":1679558124000},{"_id":"source/_posts/040.openwrt_install_passwall.md","hash":"a94afb6843236b3b14793d7ad674bd1f0f991b9b","modified":1685951620000},{"_id":"source/_posts/038.ubuntu_network_config.md","hash":"96c3a381b13b8149a0abb9e039c6d1c82c6ea93d","modified":1681465373000},{"_id":"source/_posts/040.openwrt_sftp.md","hash":"bcd6ac266836440d1010c0d6c6c1cb0dbe552bda","modified":1683685165000},{"_id":"source/_posts/041.openwrt_install_frpc.md","hash":"8b4eb70250126e7fffadeaae4a119dff220e4f34","modified":1685695175000},{"_id":"source/_posts/042.Greenbone_Community_installation.md","hash":"6f79fac3e54f002d9d90a49c9b945ffad5c7a8e1","modified":1686296289000},{"_id":"source/_posts/043.Cryptocurrency_Mining_Malware.md","hash":"0978785d50ae50d29d1759ba3f5a5699e8594fc0","modified":1686643832000},{"_id":"source/_posts/044.about_process.md","hash":"45451dbe6116edb774eea86cbd4bf230658d7e41","modified":1687253729000},{"_id":"source/_posts/045.v2raya.md","hash":"1e74c538081e18e63c21d66c207aea626be7cbda","modified":1690524355000},{"_id":"source/_posts/046.docker_install_manual.md","hash":"94ebce0d5b7ba8d8e91a2841d2f023aa3da9519e","modified":1694503640000},{"_id":"source/_posts/047.docker_build_instances.md","hash":"558a65a803704f318bd71574ba5134d4d7951453","modified":1700546717000},{"_id":"source/_posts/049.centos_downgrade.md","hash":"42799c73144bc7e9a3027fd1ef2bd929aa660315","modified":1694770161000},{"_id":"source/_posts/050.registry_setup.md","hash":"21e42d2c71247fc2c9f76a0d43ea44509e2fe9de","modified":1695198570000},{"_id":"source/_posts/051.MySQL_Install_Using_Generic_Binaries.md","hash":"8674404e195ae1090e4331c4e3095e72ff6323b7","modified":1695696151000},{"_id":"source/_posts/052.MySQL_Installation_Uasing_Source.md","hash":"9ab3610660cc89f9fbbe9547de6a30c52be3bb73","modified":1695694685000},{"_id":"source/_posts/048.docker-compose_instance.md","hash":"9f4c4cdfe5375273308147895d74b9fb2a7588bf","modified":1694676766000},{"_id":"source/_posts/053.Prometheus_Installation.md","hash":"d9364499476c9904962b260c8139bc4894d93be6","modified":1695884108000},{"_id":"source/_posts/054.Grafana_Installation.md","hash":"692083153f55b69b9dae8f4109c983d5b9a19f39","modified":1696986465000},{"_id":"source/_posts/055.Gitlab_Installation.md","hash":"51c0f2284b23bbb266b6fb8e0f2643f219df5ea7","modified":1697013864000},{"_id":"source/_posts/056.Harbor_Installation.md","hash":"f7c74bfcf5934d77c337561a1fec7ec78d03289b","modified":1697504534000},{"_id":"source/_posts/057.Linux_Security_Policy.md","hash":"7c4ab9e7b248c88d5ff34ae95cfed93474b0f90d","modified":1699271310000},{"_id":"source/_posts/058.MySQL_Security_Policy.md","hash":"4c6cfeabb2cd04d86be93e699c6227580ef8efb5","modified":1700719923000},{"_id":"source/_posts/059.samba.md","hash":"abf41b9a48bf6a8bea6bdbbc49f8a23eb9e5473b","modified":1700723517000},{"_id":"source/_posts/060.highlight.md","hash":"a0ff5b934d1a3b68d4528fa8002db948a29ced18","modified":1700732093000},{"_id":"source/_posts/061.hexo.md","hash":"fce508f92bf902fd17944f77ae183936bf0b6cfe","modified":1701676086000},{"_id":"source/_posts/999.Tips-linux.md","hash":"df621cc60dec3cb4b035cde07d76ba9d8c9f4398","modified":1695696984000},{"_id":"source/categories/index.md","hash":"b929d9e67ea42ff88d1878a89460195e998010da","modified":1677820499000},{"_id":"source/images/002.progress.md.02.png","hash":"f53fdc057abd32d1b18bf6b03848280892cac4fd","modified":1679557604000},{"_id":"source/images/004.lvm.md.01.png","hash":"4691bdaaad12fd18057c68ea088d386eb9589aaa","modified":1679557606000},{"_id":"source/images/004.lvm.md.02.png","hash":"aa7c480cbf16659a6c6211269f30ce45935d4bc1","modified":1679557607000},{"_id":"source/images/004.lvm.md.04.png","hash":"aa8a446f698cbe4d7fa1f28ef4d3337fd5f73563","modified":1695715084000},{"_id":"source/images/005.elasticsearch.md.02.png","hash":"329eed1611a056e7cf1f528ba14ef31cf05735fa","modified":1679557608000},{"_id":"source/images/005.elasticsearch.md.03.png","hash":"ffca61e0e1f015bf6be403c04731b0bb7273dc79","modified":1679557608000},{"_id":"source/images/005.elasticsearch.md.04.png","hash":"db3bde9a0df0c8b47c6d6f1166f451f547304788","modified":1679557610000},{"_id":"source/images/005.elasticsearch.md.05.png","hash":"8bbe91b742b6137ee3bae4fd3f70f765355f96e5","modified":1679557610000},{"_id":"source/images/005.elasticsearch.md.07.png","hash":"7b7fd9dd060e50154e3e18852776a8331b9f6021","modified":1679557611000},{"_id":"source/images/006.iptables.md.02.png","hash":"db12992e1b0eaf706179a1230181ef1a242eafcf","modified":1681720506000},{"_id":"source/images/006.iptables.md.03.png","hash":"aa545771eb288bc4df8e83473ef388f25b68c927","modified":1681720508000},{"_id":"source/images/007.system_info.md.01.png","hash":"813e1e65e4b399d93e57361339a654144a110f37","modified":1679557613000},{"_id":"source/images/008.reset_password.md.01.png","hash":"2b4f99f2c2c13db63c096c22019fa1c126f6d20a","modified":1679557614000},{"_id":"source/images/008.reset_password.md.02.png","hash":"4333f8384df6b215607b9dec80914423543793ea","modified":1679557614000},{"_id":"source/images/012.docker_installation.md.01.png","hash":"fa5bbbb2f87bbdcf8ac1a9e80034d94cbd21d3a2","modified":1681697608000},{"_id":"source/images/017.oracle.md.01.png","hash":"211dd097f37c6e70f5b86e536eeee8c4027b5435","modified":1680753476000},{"_id":"source/images/017.oracle.md.02.png","hash":"6e4d4cb67bcf23f5b88ad10a3241cde173ff42e6","modified":1680753655000},{"_id":"source/images/017.oracle.md.03.png","hash":"eb6c377bf624d93664c2981f147a9632926f672a","modified":1680755622000},{"_id":"source/images/017.oracle.md.04.png","hash":"2648e9f5df7cec3094c70f63605b7154d3a8cb90","modified":1680755714000},{"_id":"source/images/017.oracle.md.05.png","hash":"25676c6654f6ae754f2a94bdf02ea0d5ef6a8ab0","modified":1680771993000},{"_id":"source/images/017.oracle.md.06.png","hash":"226eadca708d5ba0fa558605e34fe7e364d6b8cb","modified":1681458795000},{"_id":"source/images/017.oracle.md.09.png","hash":"20bbfe2ace9d23e73e9472932641e12a7ffb4dee","modified":1681981112000},{"_id":"source/images/017.oracle.md.11.png","hash":"3e10efa851efa0cb347ae4e068dbd6f504fb4c8e","modified":1682002208000},{"_id":"source/images/017.oracle.md.12.png","hash":"7b6376413020ff55a749dd6c161cb5b752adc566","modified":1682003770000},{"_id":"source/images/017.oracle.md.10.png","hash":"89795d32ebc27265a4cc1f264a919c12be26ac47","modified":1681981330000},{"_id":"source/images/028.docker_instances.md.01.png","hash":"bf929e46c4ca2dec608b43d80f3de40fcead2496","modified":1679557616000},{"_id":"source/images/031.ca.md.01.png","hash":"67e063dffdec69fc78d24997d2dc32a3263b82f7","modified":1695283491000},{"_id":"source/images/035.ssh_key.md.01.png","hash":"66bc80eb445e96d0f910bff62af74c6e247a484c","modified":1679557621000},{"_id":"source/images/040.openwrt_install_passwall.md.01.png","hash":"f501473a5c2dfefa8e30d9120a8da378fb372b4a","modified":1683686968000},{"_id":"source/images/040.openwrt_install_passwall.md.03.png","hash":"bf45100d1dce0dad051f62af9b849c8c90d3f6a8","modified":1683687616000},{"_id":"source/images/040.openwrt_install_passwall.md.04.png","hash":"15735380aa3c8172855c6e20f8eaa350b469b583","modified":1683687601000},{"_id":"source/images/041.openwrt_install_frpc.md.01.png","hash":"3fb1959b14a4fed2970a040cdd91d36d108ec12a","modified":1685694968000},{"_id":"source/images/043.Cryptocurrency_Mining_Malware.md.02.png","hash":"8300a70785224e56dfd7b783e3713560ea2532a8","modified":1686552918000},{"_id":"source/images/043.Cryptocurrency_Mining_Malware.md.04.png","hash":"3b84e850fed75c7522de14ea371e252c6ace450c","modified":1686554150000},{"_id":"source/images/043.Cryptocurrency_Mining_Malware.md.03.png","hash":"ae4f5f502652c216a7b97fb260e67fe5c4761326","modified":1686553167000},{"_id":"source/images/043.Cryptocurrency_Mining_Malware.md.05.png","hash":"42acb4603d9a6f98d66bb8acaf092944f6051eea","modified":1686554152000},{"_id":"source/images/043.Cryptocurrency_Mining_Malware.md.08.png","hash":"9b5861b3593957ac7a72c1479af541216acd7bf9","modified":1686618775000},{"_id":"source/images/045.v2raya.md.000.png","hash":"8ef56f19e487f40a0dcf79db51318ea2877dc130","modified":1689153270000},{"_id":"source/images/045.v2raya.md.02.png","hash":"b7354b9a142ae5f87c388612e802f0d64882e65e","modified":1689152036000},{"_id":"source/images/045.v2raya.md.03.png","hash":"1eacad49a31fcaa479bb626f0ae5c43d827c5655","modified":1689152179000},{"_id":"source/images/045.v2raya.md.00.png","hash":"b5f10501dea28f1209ac5f891fb56f6bb8dae97a","modified":1689152839000},{"_id":"source/images/046.docker_install_manual.md.01.png","hash":"bf20371003a970e7a6ca97bef41861ce2249763e","modified":1694441795000},{"_id":"source/images/049.centos_downgrade.md.01.png","hash":"4c667cec33799a712d024d0a316462cfdf0a03b5","modified":1694770127000},{"_id":"source/images/050.registry_setup.md.02.png","hash":"84d1de83725a4d0f2332c5afa0c5f2b19a2a965f","modified":1695198161000},{"_id":"source/images/051.MySQL_Install_Using_Generic_Binaries.md.02.png","hash":"a086f03331dfc00298aeb5c2eb874ec89dd9465a","modified":1695696163000},{"_id":"source/images/052.MySQL_Installation_Uasing_Source.md.02.png","hash":"47420657145fe17289147cb0a1e900cb8fbaec79","modified":1695695713000},{"_id":"source/images/055.Gitlab_Installation.md.02.png","hash":"0808f2c2f386e6de32f99759769d8e6a8490b529","modified":1697013628000},{"_id":"source/images/056.Harbor_Installation.md.01.png","hash":"0076997f63eb97e9fa0e6221de437df5e4b06938","modified":1697101737000},{"_id":"source/images/050.registry_setup.md.01.png","hash":"8c3adaf4e9c542c6840ead256d0a3ba41f9828f1","modified":1695197797000},{"_id":"source/images/056.Harbor_Installation.md.02.png","hash":"f6592c20cfb85afc8f47387137426865165160a0","modified":1697101738000},{"_id":"source/images/059.samba.md.02.png","hash":"1ec0bc8cd11a9f7ee2fa6188d81e024916252c69","modified":1700721208000},{"_id":"source/images/059.samba.md.05.png","hash":"f3db6fdb12d29803fb66897264c592fd9634e17f","modified":1700722392000},{"_id":"source/tags/index.md","hash":"cf9910aadbd6ee66f7c3fc57d377bf369248d70f","modified":1677820513000},{"_id":"source/images/059.samba.md.06.png","hash":"fb5f34615e90832f34f38314a8e9ff6fefa72edd","modified":1700722425000},{"_id":"source/images/002.progress.md.01.png","hash":"981b48572b3b32da3e71e985e75126e04bfeb323","modified":1679557603000},{"_id":"source/images/003.clamav.md.01.png","hash":"0377710a728d349612a253d64ae3928feb0f1343","modified":1679557605000},{"_id":"source/images/003.clamav.md.02.png","hash":"463efbc79306b67e2e69c2c4712f79dd68adf10b","modified":1679557606000},{"_id":"source/images/004.lvm.md.03.png","hash":"b66c65c73958ce03a6df217b0a5c4afc72500e74","modified":1679557607000},{"_id":"source/images/005.elasticsearch.md.01.png","hash":"56acbf689d68e6fadda3e36b47a26363c77e1d36","modified":1679557608000},{"_id":"source/images/005.elasticsearch.md.08.png","hash":"665b216f7cfcf30cd9026f9388eed796bd986fe8","modified":1679557612000},{"_id":"source/images/009.openssh.md.01.png","hash":"4706abfc666f54b0ccd540fe865ffc09574cbef3","modified":1698656833000},{"_id":"source/images/009.openssh.md.03.png","hash":"ea03603fe823cfb4c1f3d5eecfc1e73e016dae46","modified":1698657086000},{"_id":"source/images/009.openssh.md.04.png","hash":"127bdf7b211051766e946a64d8b1275adb0194e3","modified":1698657966000},{"_id":"source/images/009.openssh.md.05.png","hash":"e6e097c15a2492d1ed0d87a993ffe2e7f9748442","modified":1698657967000},{"_id":"source/images/009.openssh.md.06.png","hash":"932bc4528927d42720cf843759b70540d947791f","modified":1698657969000},{"_id":"source/images/017.oracle.md.07.png","hash":"21ae6a916a3b29922d6b3c5c78a0a05c4b9683b9","modified":1681458796000},{"_id":"source/images/017.oracle.md.08.png","hash":"ceae0f699979374763a9c133399437a07a5cf26b","modified":1681462876000},{"_id":"source/images/017.oracle.md.13.png","hash":"3cceebcf247c7bf73925524de22b8d73d0e29894","modified":1682004246000},{"_id":"source/images/027.telnet.md.01.png","hash":"d41f66832506649ee1627f6b4a58a14406e84ae1","modified":1679557615000},{"_id":"source/images/027.telnet.md.02.png","hash":"28ce933daaf7a51af701ceb94ad45ef9b5ed0b45","modified":1679557615000},{"_id":"source/images/031.ca.md.02.png","hash":"6bbd67655f11766a9de7543ce549f7b1249d6655","modified":1695287330000},{"_id":"source/images/031.ca.md.03.png","hash":"2884c0fa48bc11f8ffd1ab82a682df6aa0eb259e","modified":1695371321000},{"_id":"source/images/034.redis.md.01.png","hash":"2daa90c1b3ec00cbe4142e195ca719810fa72458","modified":1679557620000},{"_id":"source/images/040.openwrt_install_passwall.md.02.png","hash":"bdfc2a924ab4d5fd86578d34c2e1d7c5be98ba70","modified":1683686969000},{"_id":"source/images/041.openwrt_install_frpc.md.02.png","hash":"c4851930d037cf68542bbe6b87c6f224e1110127","modified":1685695136000},{"_id":"source/images/043.Cryptocurrency_Mining_Malware.md.01.png","hash":"6f6e0509eb3728c36c23c58d85297e2ad1a39ca8","modified":1686552710000},{"_id":"source/images/043.Cryptocurrency_Mining_Malware.md.06.png","hash":"31c26cb4223a07a0b09e140c5b180559af159c23","modified":1686554155000},{"_id":"source/images/043.Cryptocurrency_Mining_Malware.md.07.png","hash":"ab041d6c140e4b827c2a02df85f7887caed0b7de","modified":1686559059000},{"_id":"source/images/045.v2raya.md.01.png","hash":"fc78d3b761fb8a4c9a092f343b8b2d1bd64b0d96","modified":1689151860000},{"_id":"source/images/046.docker_install_manual.md.02.png","hash":"4b1e226ba2fda8a04435bce093285f84814fc5c8","modified":1694443237000},{"_id":"source/images/047.docker_build_instances.md.01.png","hash":"3933a3766623eae3950ecbd2d059dc809ceebfcf","modified":1694522624000},{"_id":"source/images/047.docker_build_instances.md.02.png","hash":"901ba454f56bdf5100b37544e97de0a78aa8df65","modified":1694522857000},{"_id":"source/images/051.MySQL_Install_Using_Generic_Binaries.md.01.png","hash":"34910f3f80584529757bfd617939917e8f1d087a","modified":1695631817000},{"_id":"source/images/052.MySQL_Installation_Uasing_Source.md.01.png","hash":"82b0cdcaf6428cd123db76d61a3b91dcb50e004d","modified":1695643261000},{"_id":"source/images/055.Gitlab_Installation.md.01.png","hash":"c370f8c385d2ca48854bf8db2ece290bee383f52","modified":1697013433000},{"_id":"source/images/053.Prometheus_Installation.md.01.png","hash":"0af5d2370c9b5b61397334899a964923682ac2cf","modified":1695884023000},{"_id":"source/images/055.Gitlab_Installation.md.03.png","hash":"249978029c004436ad8429196194c0748e9a903b","modified":1697013767000},{"_id":"source/images/059.samba.md.03.png","hash":"375cbb396fc3893df237a063e2060b04023451a5","modified":1700722908000},{"_id":"source/images/059.samba.md.04.png","hash":"1ebb2bebe05e2fe6dc98db341963e3bf0b94c243","modified":1700722030000},{"_id":"source/images/009.openssh.md.07.png","hash":"687e52bc44ce594f75fd4cdd654eb53d1231c0c9","modified":1698658329000},{"_id":"source/images/029.install_php7.4.33.md.03.png","hash":"8eb1f0b64ce71dfc0623f0bb822c48117bbc3191","modified":1679557618000},{"_id":"source/images/036.openwrt_disk_expansion.md.02.png","hash":"5e42aaad32d5d4be4c4321878735e4aee87eb359","modified":1679627204000},{"_id":"source/images/037.kvm.md.02.png","hash":"ce5f29c030a4962b5447eee944675bf6ad29196f","modified":1681892468000},{"_id":"source/images/047.docker_build_instances.md.03.png","hash":"67553b46515cd4469a65edc1905625faf1614221","modified":1694534719000},{"_id":"source/images/057.Linux_Security_Policy.md.01.png","hash":"c011cf9fc9285dbda2b6698061c35b6e39d608fc","modified":1698916841000},{"_id":"source/images/059.samba.md.01.png","hash":"eb306fd6368064ab3abb2446993d415e823a8b7c","modified":1700720536000},{"_id":"source/images/009.openssh.md.02.png","hash":"54689ec50a9d36876e73075336f1612c7e17ae99","modified":1698656835000},{"_id":"source/images/060.highlight.md.01.png","hash":"c1185e6b72d878cd364e423d0ec9eb3a038b04ff","modified":1700730465000},{"_id":"source/images/005.elasticsearch.md.06.png","hash":"c337f5444bd4db0b08abf9949f76e14e6b5fbb9e","modified":1679557611000},{"_id":"source/images/029.install_php7.4.33.md.02.png","hash":"bd90e3b395314b90ce305b6d1bd88d0dbc52b69f","modified":1679557617000},{"_id":"source/images/037.kvm.md.04.png","hash":"9847c5db3b6660af0d4ed8e5c80a4845ab04ec67","modified":1681896576000},{"_id":"source/images/057.Linux_Security_Policy.md.02.png","hash":"91a6c27ecbe4f37b25c77744135aa9f9eb967c23","modified":1698917354000},{"_id":"source/images/006.iptables.md.01.png","hash":"a8ac603a12fba8d347c56a5c320a90ed0c24526f","modified":1679557613000},{"_id":"source/images/029.install_php7.4.33.md.01.png","hash":"5ca2d5fcffd1c7496b0dba0e53ce5db5ff9bfe7f","modified":1679557617000},{"_id":"source/images/036.openwrt_disk_expansion.md.01.png","hash":"378dafdc2f8d6e1b73279434a423e3d6456a209b","modified":1679626766000},{"_id":"source/images/037.kvm.md.01.png","hash":"9b194464ed376d437ed707ac6e28e9037c736c66","modified":1681888062000},{"_id":"themes/next/LICENSE.md","hash":"68fc9a03d50fd4b5ea97092b05967d1819dea2c4","modified":1679725481000},{"_id":"themes/next/README.md","hash":"36c4b25587ca494102323dab5a38de5490451a64","modified":1679725481000},{"_id":"themes/next/_vendors.yml","hash":"463e3097d6e245105f6612994215ab5c637cae28","modified":1679725481000},{"_id":"themes/next/_config.yml","hash":"b28a74fe54af970053b8630124c508442b2e9ec6","modified":1696757522000},{"_id":"themes/next/package.json","hash":"a192fe2e0904b490c885e8545a409536b41ef46e","modified":1679725481000},{"_id":"themes/next/docs/LICENSE.txt","hash":"f5b14f791b7cfa1d16da981d929152e088a5d1b8","modified":1679725481000},{"_id":"themes/next/docs/AUTHORS.md","hash":"a648823121563c34a177ae91f5a774b5e29f01a0","modified":1679725481000},{"_id":"themes/next/languages/README.md","hash":"b2567e32805dda79601157351a07e5ca9fe01315","modified":1679725481000},{"_id":"themes/next/languages/ar.yml","hash":"46026e98fe279a9db5d68bf91afa5d8e41f9ccfb","modified":1679725481000},{"_id":"themes/next/languages/en.yml","hash":"4bbdb4284afe495437cf7817b97b45f60e12d1e4","modified":1679725481000},{"_id":"themes/next/languages/bn.yml","hash":"74133a827c104d1d84509177f283947fe9327a80","modified":1679725481000},{"_id":"themes/next/docs/AGPL3.md","hash":"0d2b8c5fa8a614723be0767cc3bca39c49578036","modified":1679725481000},{"_id":"themes/next/languages/es.yml","hash":"8b6d4a8a056df4362d20ae1f6ac7a590dd7246e5","modified":1679725481000},{"_id":"themes/next/languages/fr.yml","hash":"2436942610e38b73b175cb0f8ed1f8f23d42a7ce","modified":1679725481000},{"_id":"themes/next/languages/fa.yml","hash":"1e256c8df039ddeba66526c5eb2d6c79177a7fc6","modified":1679725481000},{"_id":"themes/next/languages/de.yml","hash":"c4fc18c338309271d1afe737e6c404a6fa313bbc","modified":1679725481000},{"_id":"themes/next/languages/ja.yml","hash":"a0906702d3c87d0e1661e300ad0bdf7e679a3d91","modified":1679725481000},{"_id":"themes/next/languages/id.yml","hash":"c4bad93b23c7eefa730fd7fec5b05ace3ce9ca4d","modified":1679725481000},{"_id":"themes/next/languages/it.yml","hash":"4d6efcdaea89dfe751b7707d91858bf33d3538b7","modified":1679725481000},{"_id":"themes/next/languages/ko.yml","hash":"25ee0d5b9a0464a91af7d2efb33293c09ad5abdf","modified":1679725481000},{"_id":"themes/next/languages/nl.yml","hash":"8a4da307b4a19e3c96b90a07a2da8dc5d50e5d9e","modified":1679725481000},{"_id":"themes/next/languages/pt.yml","hash":"fa7c43ec872aee2739b25dd7260e0764ea9e26fd","modified":1679725481000},{"_id":"themes/next/languages/pt-BR.yml","hash":"10d80915c41328f31a4f2d8ac736bba020f373d8","modified":1679725481000},{"_id":"themes/next/languages/tk.yml","hash":"37d9af426b040004841273d163059cd49cd67d65","modified":1679725481000},{"_id":"themes/next/languages/tr.yml","hash":"890f87f6a33ad8452b771607d4c3ff14810b35fa","modified":1679725481000},{"_id":"themes/next/languages/ru.yml","hash":"16b96783ba363255b4c8156c3e1efebdb37676f8","modified":1679725481000},{"_id":"themes/next/languages/si.yml","hash":"034c5a0df49144e8f16ae2300dba9fde58b9329e","modified":1679725481000},{"_id":"themes/next/languages/th.yml","hash":"4fac74a39d3906c4a727476be4750530a505933a","modified":1679725481000},{"_id":"themes/next/languages/uk.yml","hash":"fbaed3039ed8605b81422003a4ecb2a6514e339d","modified":1679725481000},{"_id":"themes/next/languages/zh-CN.yml","hash":"5cebea74f3198a4a20cacf23069c3b91e4f03d85","modified":1679725481000},{"_id":"themes/next/languages/vi.yml","hash":"a6ba04c743a5b494ac56612ce6b858d9ae3ae1bd","modified":1679725481000},{"_id":"themes/next/languages/zh-HK.yml","hash":"8ab7219563dab13885840207a86055000d173465","modified":1679725481000},{"_id":"themes/next/languages/zh-TW.yml","hash":"9fdce9d316e205fc132b2181254ef3b04007a97d","modified":1679725481000},{"_id":"themes/next/layout/_layout.njk","hash":"fc0a45112f2dcfc2642404e8934ea32a793c3bd7","modified":1679725481000},{"_id":"themes/next/layout/archive.njk","hash":"d759f4d2cf5ddc6875ea250113a00662c1caf6d1","modified":1679725481000},{"_id":"themes/next/layout/category.njk","hash":"c68b7343d0f8145010f93351908cc36ef6212ec1","modified":1679725481000},{"_id":"themes/next/layout/index.njk","hash":"dd63e488ae8cc144335a5958acedf6a16edd7a92","modified":1679725481000},{"_id":"themes/next/layout/post.njk","hash":"0bfce9f133f501a9a4837257e3b862b3bbca15be","modified":1679725481000},{"_id":"themes/next/layout/page.njk","hash":"b0660b2af0ac7d3fda14ca4d9f2c9e79ef06c6f9","modified":1679725481000},{"_id":"themes/next/layout/tag.njk","hash":"9e16ba20c28a7f2c6bc75aa427f48122301a30aa","modified":1679725481000},{"_id":"themes/next/docs/zh-CN/CODE_OF_CONDUCT.md","hash":"7a06d443f374bd1e84294067a0ac796afd9fbe60","modified":1679725481000},{"_id":"themes/next/docs/ru/README.md","hash":"ac3c4a7616ea80f0d32d68d6e53233952ba756dc","modified":1679725481000},{"_id":"themes/next/layout/_macro/post-collapse.njk","hash":"1a30d751871dabfa80940042ddb1f77d07d830b9","modified":1679725481000},{"_id":"themes/next/docs/zh-CN/README.md","hash":"9bbdbb0656505acceef9b9895a576164175fe888","modified":1679725481000},{"_id":"themes/next/layout/_macro/sidebar.njk","hash":"547c62ab14d9e05d2d9116db9048a677fbe1fb6d","modified":1679725481000},{"_id":"themes/next/docs/zh-CN/CONTRIBUTING.md","hash":"a089f7a8368ab0b7d7b9b7ec0ac3767a453435df","modified":1679725481000},{"_id":"themes/next/layout/_macro/post.njk","hash":"7e8268fd5cbd552322b276f52459fd187c2453d2","modified":1679725481000},{"_id":"themes/next/layout/_partials/comments.njk","hash":"d0c470b0f6690aa217e9ada848c5e2e73fb27c6f","modified":1679725481000},{"_id":"themes/next/layout/_partials/footer.njk","hash":"c40760b559c516677c8b11a00ba50c011f2079fd","modified":1679725481000},{"_id":"themes/next/layout/_partials/languages.njk","hash":"e43f22198cccb5f6e306b1ce0d28d12a4fb891f8","modified":1679725481000},{"_id":"themes/next/layout/_partials/pagination.njk","hash":"bc719473ed5948ab6859449d60b8d36cfc1542b4","modified":1679725481000},{"_id":"themes/next/layout/_partials/widgets.njk","hash":"e7f988ecddb2159313699a00827a45eca5622bd4","modified":1679725481000},{"_id":"themes/next/layout/_scripts/index.njk","hash":"6668878a0f9a1166c6a879755f54a08d942da870","modified":1679725481000},{"_id":"themes/next/layout/_scripts/vendors.njk","hash":"be80b9fe415a9a09d74c28e230995fd292dfc123","modified":1679725481000},{"_id":"themes/next/layout/_third-party/fancybox.njk","hash":"844559f46e2ff1c8be234d5763703106e2072a7b","modified":1679725481000},{"_id":"themes/next/layout/_third-party/index.njk","hash":"aa37f8e98208177b63e3328d6e53b022c6edf3b2","modified":1679725481000},{"_id":"themes/next/layout/_third-party/pace.njk","hash":"d7ad5714079f7f65446f880baf14722435ca9061","modified":1679725481000},{"_id":"themes/next/layout/_third-party/quicklink.njk","hash":"0efed71ed530447718c4ea5bbd5fc8695b0b0d5f","modified":1679725481000},{"_id":"themes/next/scripts/events/index.js","hash":"bd9ea82376cd87df611ea3ae077875c7c595a3df","modified":1679725481000},{"_id":"themes/next/scripts/filters/default-injects.js","hash":"872f01cb10e422a648ea505436532e776e92926b","modified":1679725481000},{"_id":"themes/next/scripts/filters/locals.js","hash":"9eb5310664759931287dd28ea39165dfb67f12ed","modified":1679725481000},{"_id":"themes/next/scripts/filters/minify.js","hash":"ce8477e7fb226525bae5872cd68a1c2c23ad50c8","modified":1679725481000},{"_id":"themes/next/scripts/filters/post.js","hash":"fdc8a0af90035e89c3fcb754a0eb189b8951a2bc","modified":1679725481000},{"_id":"themes/next/scripts/helpers/font.js","hash":"3394185a7f0393c16ce52c8028f90da3e9239c55","modified":1679725481000},{"_id":"themes/next/scripts/helpers/navigation.js","hash":"78107021101553c3d23e89290f7530b60cf4aa86","modified":1679725481000},{"_id":"themes/next/scripts/helpers/engine.js","hash":"d292b78485e8e8055712b0ed6de7cf559c5fbdcd","modified":1679725481000},{"_id":"themes/next/scripts/helpers/next-config.js","hash":"226fccbe9c93265e65a300e3cb4bf6f9065cfdd7","modified":1679725481000},{"_id":"themes/next/scripts/helpers/next-paginator.js","hash":"e86c764b546e4fbb87970cabc4135a56f9ef9fe1","modified":1679725481000},{"_id":"themes/next/scripts/helpers/next-url.js","hash":"fd24abfaba4d91923ddb6aecf0268b216678c8bd","modified":1679725481000},{"_id":"themes/next/scripts/helpers/next-vendors.js","hash":"afdd6a188a74c188f0dd154fac70efd4080ca262","modified":1679725481000},{"_id":"themes/next/scripts/tags/button.js","hash":"c6ad2ed544fbb25ecb5d820c36e76302504271b7","modified":1679725481000},{"_id":"themes/next/scripts/tags/caniuse.js","hash":"935a311142a409c1896b3ae3f01fe7a9e2db1134","modified":1679725481000},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"92c19d796bdb3320df9caea59bf52df7a95d9da9","modified":1679725481000},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"9ed799c329abf830f623689d7e136991256a24ca","modified":1679725481000},{"_id":"themes/next/scripts/tags/label.js","hash":"8a73348186113bae0a51ea2f891c1bb882fab05a","modified":1679725481000},{"_id":"themes/next/scripts/tags/link-grid.js","hash":"18a483c2d5afd701f6080ffdddf2d1321370336c","modified":1679725481000},{"_id":"themes/next/scripts/tags/index.js","hash":"17f9451ce1f10f78437f52218757d38d4e1591b0","modified":1679725481000},{"_id":"themes/next/scripts/tags/note.js","hash":"7b94ddb46b7d4b0fe815f2fbe4bd375f07f55363","modified":1679725481000},{"_id":"themes/next/scripts/tags/mermaid.js","hash":"4fb01ca650fa8b256b8d48f50dc1b18350bd3d6d","modified":1679725481000},{"_id":"themes/next/scripts/tags/pdf.js","hash":"344636b6fd7e27e8831c1e194039afc0d61931cd","modified":1679725481000},{"_id":"themes/next/scripts/tags/tabs.js","hash":"0eabe51da40b4b13e16419c8fe02452d9a4fef73","modified":1679725481000},{"_id":"themes/next/scripts/tags/video.js","hash":"2ee926448583be8f95af1f2884ae2c9c4830151d","modified":1679725481000},{"_id":"themes/next/source/css/_colors.styl","hash":"3c6798c10cc220d83481cb3f3782e78558cee789","modified":1679725481000},{"_id":"themes/next/source/css/_mixins.styl","hash":"83647a6207333b9609ba90b0946b3fa9548e6381","modified":1679725481000},{"_id":"themes/next/source/css/main.styl","hash":"921a58577f411cf4eb5cfd66db0a241f8f88578c","modified":1679725481000},{"_id":"themes/next/source/css/noscript.styl","hash":"dadc81256afb127b77eac6763d5ee0ec9c77f0a3","modified":1679725481000},{"_id":"themes/next/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1679725481000},{"_id":"themes/next/source/images/avatar.gif","hash":"2dbc3e2f2d624b2ca1afe6edc2ca17307f1950c8","modified":1679725481000},{"_id":"themes/next/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1679725481000},{"_id":"themes/next/source/images/logo-algolia-nebula-blue-full.svg","hash":"b85e274207b1392782476a0430feac98db1e7da0","modified":1679725481000},{"_id":"themes/next/source/images/logo.svg","hash":"099e11ab995a2c8981427a85476d082609848c77","modified":1679725481000},{"_id":"themes/next/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1679725481000},{"_id":"themes/next/source/js/bookmark.js","hash":"0f563ffbf05fad30e854e413ab17ff7164ab5a53","modified":1679725481000},{"_id":"themes/next/source/js/comments-buttons.js","hash":"1a7344440321713426a0b2ab17e276b5bdf85ade","modified":1679725481000},{"_id":"themes/next/source/js/comments.js","hash":"66ae2e26ea36a41b72c638ea8b220296638ae952","modified":1679725481000},{"_id":"themes/next/source/js/config.js","hash":"4c4ebbe3b3f3841a26f9d5af6d0ba8bc6da01c54","modified":1679725481000},{"_id":"themes/next/source/js/motion.js","hash":"770d63c26f22705311028a36b52e999cc8a2da82","modified":1679725481000},{"_id":"themes/next/source/js/next-boot.js","hash":"da0f07f9eaaa83de70128b0feaea3fdadb90457a","modified":1679725481000},{"_id":"themes/next/source/js/pjax.js","hash":"b03ba78c6916ad2f390d55bc1bc18fafb64b0ebf","modified":1679725481000},{"_id":"themes/next/source/js/schedule.js","hash":"a1333258726caf84f368a8f8454639c7dc1626bb","modified":1679725481000},{"_id":"themes/next/source/js/utils.js","hash":"5e1cf39de050964e97fb3ba0825aeec7f4bc36dd","modified":1679725481000},{"_id":"themes/next/layout/_partials/head/head-unique.njk","hash":"8da52a144060db1a0a088ccb2e6cc8376d1fce70","modified":1679725481000},{"_id":"themes/next/layout/_partials/head/head.njk","hash":"5388b157bba4a40b9312f4a45c6678974ccf0837","modified":1679725481000},{"_id":"themes/next/layout/_partials/header/brand.njk","hash":"dd9c4c03e99dfde0dfb8edefcb2c933f2f560efc","modified":1679725481000},{"_id":"themes/next/layout/_partials/header/index.njk","hash":"650de421a8ce4cf685428ffbe0087ff84cbd1356","modified":1679725481000},{"_id":"themes/next/layout/_partials/header/menu-item.njk","hash":"2b814686c0a82f19fc39d39ea661b2820206159e","modified":1696756672000},{"_id":"themes/next/layout/_partials/header/sub-menu.njk","hash":"06480d8ec5f0b87eafd47f082f07968d7282dd5c","modified":1679725481000},{"_id":"themes/next/layout/_partials/page/breadcrumb.njk","hash":"89825e75cc45e9709fa6ba89883669eedaff6f46","modified":1679725481000},{"_id":"themes/next/layout/_partials/header/menu.njk","hash":"ee6fc2f111572d3eeab0a2fecbb2d6b3e37ab26b","modified":1679725481000},{"_id":"themes/next/layout/_partials/page/page-header.njk","hash":"7ed4f102a1825195cff8d7995bf9219f323a9034","modified":1679725481000},{"_id":"themes/next/layout/_partials/page/schedule.njk","hash":"0f4bc8e257da60f77c0c1738607b2bde55810684","modified":1679725481000},{"_id":"themes/next/layout/_partials/page/categories.njk","hash":"17156d99941f28a225951ffdcfa9a115e20dc2d2","modified":1681492544000},{"_id":"themes/next/layout/_partials/page/tags.njk","hash":"a18d1598e36cc72f2b0b24c3cc3c5990dfaa3254","modified":1679725481000},{"_id":"themes/next/layout/_partials/post/post-copyright.njk","hash":"133942922e34abae9e4de7ea5591d77c0caa4b37","modified":1679725481000},{"_id":"themes/next/layout/_partials/post/post-followme.njk","hash":"c1e33b4889f75acc490af3c8bde0ec56c518ff41","modified":1679725481000},{"_id":"themes/next/layout/_partials/post/post-meta.njk","hash":"9fa47e4fb342811da590ee4adc91cf81118c0a39","modified":1679725481000},{"_id":"themes/next/layout/_partials/post/post-related.njk","hash":"e0986db00a0201dd3c60570f964829c84ba5bc68","modified":1679725481000},{"_id":"themes/next/layout/_partials/post/post-reward.njk","hash":"e8b8a7c41e9ec612d0c0c73419529d55d1c16256","modified":1679725481000},{"_id":"themes/next/layout/_partials/post/post-share.njk","hash":"3f28cc4411c0ffc0e41b7970d5ab329c7e46f497","modified":1679725481000},{"_id":"themes/next/layout/_partials/search/algolia-search.njk","hash":"efb2b6f19df02ba5ae623a1f274fff52aed21e6f","modified":1679725481000},{"_id":"themes/next/layout/_partials/search/index.njk","hash":"8f6f256ab3b351ffc80f1f3f1d9834e9a7cfac31","modified":1679725481000},{"_id":"themes/next/layout/_partials/search/localsearch.njk","hash":"661f7acae43f0be694266323320f977d84119abe","modified":1679725481000},{"_id":"themes/next/layout/_partials/sidebar/site-overview.njk","hash":"70342218473a6e6aa9148de06bfffe121afb8548","modified":1681488418000},{"_id":"themes/next/layout/_third-party/analytics/baidu-analytics.njk","hash":"6215309aee028dcb734452beec448c5afb6c63fc","modified":1679725481000},{"_id":"themes/next/layout/_third-party/analytics/cloudflare.njk","hash":"a5b8297c2c383124dd6a56e256ecc0c0dcf489be","modified":1679725481000},{"_id":"themes/next/layout/_third-party/analytics/google-analytics.njk","hash":"d89066ff53879693f023e540d59c86137172c529","modified":1679725481000},{"_id":"themes/next/layout/_third-party/analytics/growingio.njk","hash":"8afaa772c390bd9d53a5cff9645ac3168334eb98","modified":1679725481000},{"_id":"themes/next/layout/_third-party/analytics/index.njk","hash":"f900306497b133e8b098bd9f4b96b93d1d96c185","modified":1679725481000},{"_id":"themes/next/layout/_third-party/analytics/matomo.njk","hash":"4e89648a8ec8194c5823064cbca39c938a799006","modified":1679725481000},{"_id":"themes/next/layout/_third-party/analytics/plausible.njk","hash":"ef9f2bb7110507f1c4336800af9157d5fa9765bd","modified":1679725481000},{"_id":"themes/next/layout/_third-party/analytics/microsoft-clarity.njk","hash":"9dc00fcb0a05899f048eace9f9160b78956655d5","modified":1679725481000},{"_id":"themes/next/layout/_third-party/analytics/umami.njk","hash":"181f69b6718c7a8642a88652260cc0a26084a3ee","modified":1679725481000},{"_id":"themes/next/layout/_third-party/chat/gitter.njk","hash":"f8cc14b7aa949999a1faaeb7855e2f20b59a386d","modified":1679725481000},{"_id":"themes/next/layout/_third-party/chat/chatra.njk","hash":"d7263fca16d0278ccf1f6aa1c6df6902a6344a09","modified":1679725481000},{"_id":"themes/next/layout/_third-party/chat/tidio.njk","hash":"02aab857c27fc103216029be991688b12a73a525","modified":1679725481000},{"_id":"themes/next/layout/_third-party/comments/changyan.njk","hash":"d1c950f8fbdf85e7a3eae5463767a89e858e8220","modified":1679725481000},{"_id":"themes/next/layout/_third-party/comments/disqus.njk","hash":"9375b19a89b7fa9474e558d085af5448d4c5c50c","modified":1679725481000},{"_id":"themes/next/layout/_third-party/comments/disqusjs.njk","hash":"0749cb6902baecdfd01f779a2a2513f6d2f6a823","modified":1679725481000},{"_id":"themes/next/layout/_third-party/comments/gitalk.njk","hash":"b63b7e2ede0d3e66e732fa1a06bda9b19e1e85d4","modified":1679725481000},{"_id":"themes/next/layout/_third-party/comments/isso.njk","hash":"64cc3bdaf644fd32c0d0a247f29f5b6904da9af3","modified":1679725481000},{"_id":"themes/next/layout/_third-party/comments/livere.njk","hash":"3b13b09fba84ec6000886890a6710736a2b8fafe","modified":1679725481000},{"_id":"themes/next/layout/_third-party/comments/utterances.njk","hash":"5a94032bc3512a10ad4328fc19ec07b819a1d687","modified":1679725481000},{"_id":"themes/next/layout/_third-party/math/katex.njk","hash":"1ebf658690468ea197bdd0416eb7cfa4bd0b083a","modified":1679725481000},{"_id":"themes/next/layout/_third-party/math/index.njk","hash":"abf37fc55aa86702118e8fdf5bf2d389dd589aa0","modified":1679725481000},{"_id":"themes/next/layout/_third-party/search/algolia-search.njk","hash":"24ed76e0c72a25ac152820c750a05826a706b6f4","modified":1679725481000},{"_id":"themes/next/layout/_third-party/math/mathjax.njk","hash":"3677017fd4572b158311f5f5d870590ab25184e0","modified":1679725481000},{"_id":"themes/next/layout/_third-party/statistics/busuanzi-counter.njk","hash":"a4bc501da0f22f7e420f0ca47e83988ce90b1368","modified":1679725481000},{"_id":"themes/next/layout/_third-party/statistics/index.njk","hash":"568ddf7955d11d93fb5e842b403a7ac8b1b7fdb1","modified":1679725481000},{"_id":"themes/next/layout/_third-party/search/localsearch.njk","hash":"e45ea3542cdc9ed7ec8447b5e6f35df4c5e82758","modified":1679725481000},{"_id":"themes/next/layout/_third-party/statistics/firestore.njk","hash":"d32ebe94560fa95824478ebbff531bffc47b194d","modified":1679725481000},{"_id":"themes/next/layout/_third-party/statistics/lean-analytics.njk","hash":"2446e748cdc102c78492216319ac02148db7daf6","modified":1679725481000},{"_id":"themes/next/layout/_third-party/tags/mermaid.njk","hash":"099e031f52fb8e47b3af5b2684737efc9e643ee7","modified":1679725481000},{"_id":"themes/next/layout/_third-party/tags/pdf.njk","hash":"2c81984cc4f5123103460442f6e046f5b6c97127","modified":1679725481000},{"_id":"themes/next/scripts/events/lib/config.js","hash":"9ec51eb61f7fee612ffc5252f489003a0fa301fc","modified":1679725481000},{"_id":"themes/next/scripts/events/lib/highlight.js","hash":"6aec7b2c38c50989a23bfaa0d560e75c7f553e12","modified":1679725481000},{"_id":"themes/next/scripts/events/lib/injects.js","hash":"d987709267a1bc6e5014411e9983d7c49c102c16","modified":1679725481000},{"_id":"themes/next/scripts/events/lib/navigation.js","hash":"dd3562686d95a50375e6fd32e717ccb0d99c1e3d","modified":1679725481000},{"_id":"themes/next/scripts/events/lib/utils.js","hash":"ec996d0673f766167c86df0966e9da1ae036e103","modified":1679725481000},{"_id":"themes/next/scripts/events/lib/vendors.js","hash":"64e4024376b51fe81be7ad80235abdf0a83853bd","modified":1679725481000},{"_id":"themes/next/scripts/filters/comment/changyan.js","hash":"5798cfc8f63665031dd3e01debed051628cec319","modified":1679725481000},{"_id":"themes/next/scripts/filters/comment/common.js","hash":"19a402a225c31edffc50f202a14e0d582d3db23e","modified":1679725481000},{"_id":"themes/next/scripts/filters/comment/default-config.js","hash":"93ee5f9109dad885dc38c49bcee630c10f9dce6e","modified":1679725481000},{"_id":"themes/next/scripts/filters/comment/disqusjs.js","hash":"a600a98e7436edeb31e291abca359885567df3c9","modified":1679725481000},{"_id":"themes/next/scripts/filters/comment/disqus.js","hash":"7f71d6b271ba65ff333d5682e7575711d368c0d2","modified":1679725481000},{"_id":"themes/next/scripts/filters/comment/isso.js","hash":"ff8b5b5145220a17d0ecd9508ba9bd2d3b2da47d","modified":1679725481000},{"_id":"themes/next/scripts/filters/comment/gitalk.js","hash":"7bb7dafdd7f6bca8464b54e17e552ce7f1714195","modified":1679725481000},{"_id":"themes/next/scripts/filters/comment/livere.js","hash":"5a07d8bb52bc1d51a624ca8db54be144566c306b","modified":1679725481000},{"_id":"themes/next/scripts/filters/comment/utterances.js","hash":"d3bded697bc32dace689d2a6dfb6eb7514169d15","modified":1679725481000},{"_id":"themes/next/source/css/_variables/Gemini.styl","hash":"96e0a7c2a65ce68215e17e369085b2ea2f1334f2","modified":1679725481000},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"a1418c9dc8c0f1a0ad4ded0f4627c45bf0db1a10","modified":1679725481000},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"e3be898f5ebcf435a26542653a9297ff2c71aeb0","modified":1679725481000},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"48f4f277946a168d0db1ea02804e85c22ca2c7db","modified":1679725481000},{"_id":"themes/next/source/css/_variables/base.styl","hash":"c4fc4e862d09221265ab1466085f057be2ad2e4d","modified":1679725481000},{"_id":"themes/next/source/js/schemes/muse.js","hash":"0c490e9ba82efbb8bdf8465e6b537fafd51e1ed7","modified":1679725481000},{"_id":"themes/next/source/js/third-party/fancybox.js","hash":"c098d14e65dd170537134358d4b8359ad0539c2c","modified":1679725481000},{"_id":"themes/next/source/js/third-party/quicklink.js","hash":"eed02e6fced8e5a653077205d4d4d7834ca71472","modified":1679725481000},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"7664491542046df9a3887cf40a06e00c0b4086a9","modified":1679725481000},{"_id":"themes/next/source/css/_common/components/index.styl","hash":"2298e521253b3bf376a2412271bc2a7d305051f3","modified":1679725481000},{"_id":"themes/next/source/css/_common/components/reading-progress.styl","hash":"90a86045a33c1bae49fc2f6fa1e1b53170c7f77b","modified":1679725481000},{"_id":"themes/next/source/js/third-party/pace.js","hash":"0ef04218b93561ba4d0ff420d556c3d90a756d32","modified":1679725481000},{"_id":"themes/next/source/css/_common/outline/index.styl","hash":"8e34df131830d4fa3725e4590a672ba1cf1903e5","modified":1679725481000},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"d0a7c99095f490b0d2ed6b1be43d435960798cec","modified":1679725481000},{"_id":"themes/next/source/css/_common/scaffolding/buttons.styl","hash":"a042571d85ff7265f799004239a45f36b716b8a6","modified":1679725481000},{"_id":"themes/next/source/css/_common/outline/mobile.styl","hash":"64775c729512b30b144ab5ae9dc4a4dfd4e13f35","modified":1679725481000},{"_id":"themes/next/source/css/_common/scaffolding/comments.styl","hash":"e4fecc889ba3317a64e9abba5842c79dff9b7827","modified":1679725481000},{"_id":"themes/next/source/css/_common/scaffolding/index.styl","hash":"523fb7b653b87ae37fc91fc8813e4ffad87b0d7e","modified":1679725481000},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"b56367ea676ea8e8783ea89cd4ab150c7da7a060","modified":1679725481000},{"_id":"themes/next/source/css/_common/scaffolding/pagination.styl","hash":"f4228c759db4a650c8d38745c2edd1dc83c45687","modified":1679725481000},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"e840b23d33023e6d45e018f6e84b683dd56efd8d","modified":1679725481000},{"_id":"themes/next/source/css/_common/scaffolding/toggles.styl","hash":"782ee1fc5e669d3ddbfeb82b73ad7fe561f1a4fb","modified":1679725481000},{"_id":"themes/next/source/css/_schemes/Gemini/index.styl","hash":"9dfe853c901bdc52fc950bacdf15484dbb9bf140","modified":1679725481000},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"77b85d4de5ab747e04008ab31200311b29748740","modified":1679725481000},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expand.styl","hash":"485d23ccb42c0d0c8ead7ea8930dd3e06d79a285","modified":1679725481000},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"ab16a3dcdc0393b9b582ef59dcc13db9320e917c","modified":1679725481000},{"_id":"themes/next/source/css/_schemes/Mist/_layout.styl","hash":"fa4fd8f76464e214fb7318f325b13c2b62f4b478","modified":1679725481000},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"fb550935d374e0bdf1097fce187337dc05cad3e1","modified":1679725481000},{"_id":"themes/next/source/css/_schemes/Muse/_header.styl","hash":"d856127cd7e0a28a88edf0b2eb860ede9c3fdb60","modified":1679725481000},{"_id":"themes/next/source/css/_schemes/Muse/_sidebar.styl","hash":"cef9c5f9524fd01b59b0a89e51904b42cbdedc8c","modified":1679725481000},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"b7f48be3c43bfa393d62142544a5487a67871713","modified":1679725481000},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"7fecfb76420f786d6bf60218a81705bb48fb1d18","modified":1679725481000},{"_id":"themes/next/source/css/_schemes/Muse/_sub-menu.styl","hash":"c48ccd8d6651fe1a01faff8f01179456d39ba9b1","modified":1679725481000},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"6ad168288b213cec357e9b5a97674ff2ef3a910c","modified":1679725481000},{"_id":"themes/next/source/css/_schemes/Pisces/_header.styl","hash":"ac2dc0ce9c775a83ef7132ae957b54539366ac9c","modified":1679725481000},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"4266eed6f75625bb30ef0280dc5d4093e7c3beb1","modified":1679725481000},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"72dc825c50357402c342d62ab60fc0c478ab6bc1","modified":1679725481000},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"91dbf3ca5c3a613d4e30618c120da535bf2d0336","modified":1679725481000},{"_id":"themes/next/source/css/_schemes/Pisces/_sub-menu.styl","hash":"778ed2ad5643b93970c95626b325defeb586733f","modified":1679725481000},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"8000075b227749a7495eaf417cac6ccfbe441580","modified":1679725481000},{"_id":"themes/next/source/js/third-party/analytics/baidu-analytics.js","hash":"f629acc46ff40c071ffd31b77d5c7616f0fdd778","modified":1679725481000},{"_id":"themes/next/source/js/third-party/analytics/google-analytics.js","hash":"59684383385059dc4f8a1ff85dbbeb703bcdbcb5","modified":1679725481000},{"_id":"themes/next/source/js/third-party/analytics/growingio.js","hash":"78dd3cf04082b7dbe6246e404b2aa8e726922402","modified":1679725481000},{"_id":"themes/next/source/js/third-party/analytics/matomo.js","hash":"c6a25b26a1443caa70b47fd3dfa282271574deb5","modified":1679725481000},{"_id":"themes/next/source/js/third-party/comments/changyan.js","hash":"260d1a77d6a3bb33a579d3e4cca1997003e799b5","modified":1679725481000},{"_id":"themes/next/source/js/third-party/comments/disqus.js","hash":"da361917d65e5dca8362f8cdeb6c8cc0e8316cec","modified":1679725481000},{"_id":"themes/next/source/js/third-party/comments/disqusjs.js","hash":"1e826dea3f684c0515f362dc1352447a1f0eae71","modified":1679725481000},{"_id":"themes/next/source/js/third-party/comments/gitalk.js","hash":"0ec038cf83e8ec067534f16a54041e47a3c1e59a","modified":1679725481000},{"_id":"themes/next/source/js/third-party/comments/isso.js","hash":"753a873b6f566aff5ba77ca23f91b78eb880ca64","modified":1679725481000},{"_id":"themes/next/source/js/third-party/comments/livere.js","hash":"2247d88c934c765c43013337860774aaa99f0b31","modified":1679725481000},{"_id":"themes/next/source/js/third-party/comments/utterances.js","hash":"f67f90eb03e284c82da2b8cf2f1e31801813c16d","modified":1679725481000},{"_id":"themes/next/source/js/third-party/chat/chatra.js","hash":"c32180522788c10e51df1803aa6842ef0432ddc9","modified":1679725481000},{"_id":"themes/next/source/js/third-party/chat/gitter.js","hash":"cc38c94125f90dadde11b5ebac7d8bf99a1a08a2","modified":1679725481000},{"_id":"themes/next/source/js/third-party/chat/tidio.js","hash":"b0079f6a4601e06ca6fe46e83a2f5af553e9bc3c","modified":1679725481000},{"_id":"themes/next/source/js/third-party/math/katex.js","hash":"83c54ee536e487a1031783443fe0cb63b1b4767e","modified":1679725481000},{"_id":"themes/next/source/js/third-party/math/mathjax.js","hash":"5c749b9c1c3bb738122d0516211ecff6496d4907","modified":1679725481000},{"_id":"themes/next/source/js/third-party/search/algolia-search.js","hash":"fdb7b7cef1a147d897e7f7cd8903b58368ec2062","modified":1679725481000},{"_id":"themes/next/source/js/third-party/search/local-search.js","hash":"4536cb6d0a9bbaaa86fab3fa0101f6a3a3ec5a76","modified":1679725481000},{"_id":"themes/next/source/js/third-party/statistics/firestore.js","hash":"6e0682bb42170d61b13b786295f45f9c785f8b73","modified":1679725481000},{"_id":"themes/next/source/js/third-party/tags/pdf.js","hash":"af78c22f0e61c8c8aa8794e585e0d632c6d4fcb8","modified":1679725481000},{"_id":"themes/next/source/js/third-party/tags/mermaid.js","hash":"f27d817b0c2138dd3215b1f46af0753f60a008f3","modified":1679725481000},{"_id":"themes/next/source/css/_common/components/pages/breadcrumb.styl","hash":"8afdc311c6b8db121758371f95cf1c5e77354f42","modified":1679725481000},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"6b816c2511242ee503fb5f34cd3e4dcdafc06b85","modified":1679725481000},{"_id":"themes/next/source/css/_common/components/pages/index.styl","hash":"7504dbc5c70262b048143b2c37d2b5aa2809afa2","modified":1679725481000},{"_id":"themes/next/source/css/_common/components/pages/tag-cloud.styl","hash":"1a81d1a71fcf0699629ce6e72dfd0a15f3a2dd0a","modified":1679725481000},{"_id":"themes/next/source/js/third-party/statistics/lean-analytics.js","hash":"835cbf54c49ef1327f47df70ff2636ad36b6f57d","modified":1679725481000},{"_id":"themes/next/source/css/_common/components/post/post-footer.styl","hash":"11497388f124bfbb4001495a67d3629a9f618405","modified":1679725481000},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"aa366d37389760c8595529b850f461569577a1c5","modified":1679725481000},{"_id":"themes/next/source/css/_common/components/post/post-header.styl","hash":"010c901e4ef49a606f8a350efbf09044e76d2ff3","modified":1679725481000},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"9ac6f477177264c26a46e8333b8456720a0444dc","modified":1679725481000},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"04cf4a69537fc14d3b8904f965d283356853847f","modified":1679725481000},{"_id":"themes/next/source/css/_common/components/post/post-widgets.styl","hash":"40c9839d3288c3b7de0bf38ac2e18f6c8eba6227","modified":1679725481000},{"_id":"themes/next/source/css/_common/components/third-party/disqusjs.styl","hash":"877a537d5b95beb048142e4fdee6f17e6ef9c7bb","modified":1679725481000},{"_id":"themes/next/source/css/_common/components/third-party/gitalk.styl","hash":"8f094c4ac17e2ab45569b12d157747f9c7333c12","modified":1679725481000},{"_id":"themes/next/source/css/_common/components/post/index.styl","hash":"098d4bd034e986fcf7e443eac4fc2193935461b7","modified":1679725481000},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"b6e2eb1550a7845cb2adf86081a4ab6c7bde1e68","modified":1679725481000},{"_id":"themes/next/source/css/_common/components/post/post-followme.styl","hash":"1ecfd64507954810b07a9d21fb5305b5378feda0","modified":1679725481000},{"_id":"themes/next/source/css/_common/components/third-party/gitter.styl","hash":"35104dc6883a61c31e0e368dac8ac2f697be62fe","modified":1679725481000},{"_id":"themes/next/source/css/_common/components/third-party/math.styl","hash":"9d995eb4871a6c273d9d51558676a1fdabf69e72","modified":1679725481000},{"_id":"themes/next/source/css/_common/components/third-party/index.styl","hash":"77550e0d3e029b7458e35d8c5ae1fbd612c9673b","modified":1679725481000},{"_id":"themes/next/source/css/_common/components/third-party/search.styl","hash":"e72799ce3f9b79753e365b2f8c8ef6c310668d4a","modified":1679725481000},{"_id":"themes/next/source/css/_common/components/third-party/utterances.styl","hash":"56d90ae0559caa55b75f3c300ff2711f9ed65fc4","modified":1679725481000},{"_id":"themes/next/source/css/_common/outline/header/bookmark.styl","hash":"e74f4bb47a101b014ee2a1783c87f3b87323f9a0","modified":1679725481000},{"_id":"themes/next/source/css/_common/outline/footer/index.styl","hash":"0c79462439b1361034a03590cd69a8abb3a678a6","modified":1679725481000},{"_id":"themes/next/source/css/_common/outline/header/github-banner.styl","hash":"38c64c2d04e46848382bfa246a0e9c508294767b","modified":1679725481000},{"_id":"themes/next/source/css/_common/outline/header/index.styl","hash":"6e0d0796ef7fbbb62ffdfb448753a850de82c74f","modified":1679725481000},{"_id":"themes/next/source/css/_common/outline/header/menu.styl","hash":"b750af2fb833c10c4313b5a4258237161a7833d7","modified":1679725481000},{"_id":"themes/next/source/css/_common/outline/header/site-meta.styl","hash":"a851e9d5aefcd027c95eeb323860b6da70f202d1","modified":1679725481000},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"ec37a36e94ba791663607a5022f763915778578f","modified":1679725481000},{"_id":"themes/next/source/css/_common/outline/header/site-nav.styl","hash":"bf3ad8b4268f763a1e26377681644887694bc009","modified":1679725481000},{"_id":"themes/next/source/css/_common/outline/sidebar/index.styl","hash":"da5e88f8debd5ac8d7af5c6ba6240df66104955f","modified":1679725481000},{"_id":"themes/next/source/css/_common/outline/sidebar/related-posts.styl","hash":"b05908f04ef95f2d91e6eba89b12411c378d050f","modified":1679725481000},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-author.styl","hash":"5b38ac4a0f1ade0e681aff0e3366c481d9cf3dcd","modified":1679725481000},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-author-links.styl","hash":"52fc98b1435129eb3edb9293ced9e507741f1350","modified":1679725481000},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-blogroll.styl","hash":"c6a27beb3f741211a14576026f3b4cfc44cc6407","modified":1679725481000},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-button.styl","hash":"b926e368f702f8686aaa2eb98d3d2e533418958c","modified":1679725481000},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-nav.styl","hash":"24752d145c6fb8f5344dca9c7b9640839c02e009","modified":1679725481000},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-toc.styl","hash":"c2e354a565c8c1b32bd0ceacc972b17982758b67","modified":1679725481000},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-toggle.styl","hash":"9a7c71560fbdc936ad4e736fe15063ea3e8a644b","modified":1679725481000},{"_id":"themes/next/source/css/_common/outline/sidebar/site-state.styl","hash":"26dd0adfcb1db6df29c6090c8d7e9b5a43583fb0","modified":1679725481000},{"_id":"themes/next/source/css/_common/scaffolding/highlight/copy-code.styl","hash":"670fc109b56a010b166b86b616823a1aae97a738","modified":1679725481000},{"_id":"themes/next/source/css/_common/scaffolding/highlight/index.styl","hash":"ee2c157bc6a687c89f59ff2f852debbe97375224","modified":1681454205000},{"_id":"themes/next/source/css/_common/scaffolding/tags/blockquote-center.styl","hash":"d6418fd2bbfba7b73ddf11ec62db9637fdf5d8af","modified":1679725481000},{"_id":"themes/next/source/css/_common/scaffolding/tags/group-pictures.styl","hash":"393ff96234e4196b569d4b11496774eb78e147de","modified":1679725481000},{"_id":"themes/next/source/css/_common/scaffolding/tags/index.styl","hash":"3f76c73a891bbc10679753e702feba9e8a5ffdd2","modified":1679725481000},{"_id":"themes/next/source/css/_common/scaffolding/tags/label.styl","hash":"debee14539272fbe3835a7d3853af2230baa3501","modified":1679725481000},{"_id":"themes/next/source/css/_common/scaffolding/tags/link-grid.styl","hash":"7f8a7345e6537a62cd9e9a94c8f7065b541d9b04","modified":1679725481000},{"_id":"themes/next/source/css/_common/scaffolding/tags/mermaid.styl","hash":"48d35dba575a7c9e8845b16652e76b7d4a4646de","modified":1679725481000},{"_id":"themes/next/source/css/_common/scaffolding/tags/pdf.styl","hash":"b6654a1d7cf82577d8263faffee8af3ad4a5c0e8","modified":1679725481000},{"_id":"themes/next/source/css/_common/scaffolding/tags/tabs.styl","hash":"7a39bcce7274284e87388743db62afc847fe6897","modified":1679725481000},{"_id":"themes/next/source/css/_common/scaffolding/tags/note.styl","hash":"98d4c20aff0f0fcfe1824017fb06ab21ef0d218e","modified":1679725481000},{"_id":"source/images/037.kvm.md.03.png","hash":"39e3d27da863010cc4a62ac5a7ab3980d53bc1fb","modified":1681895583000},{"_id":"themes/next/source/css/_common/components/post/post-body.styl","hash":"d757768a58743601d0d84158ba955eb15d4c3c01","modified":1679725481000},{"_id":"public/./node_modules/hexo-generator-searchdb/templates/search.xml","hash":"6c3abab49661b8cf47715e873791f71b94554308","modified":1701682015206},{"_id":"public/404/index.html","hash":"a0f31f29c5033e9a5f51fe5ef5216e0b02ee8250","modified":1701682015206},{"_id":"public/CentOS.back/index.html","hash":"1526a6ed8b21c31cc69191767ca8e9164bd17fad","modified":1701682015206},{"_id":"public/Database/index.html","hash":"f8b5ee5eedbca334f92bba5b3e4172052e843c07","modified":1701682015206},{"_id":"public/CI-CD/index.html","hash":"a5df95fc1513a203c63d4007ea42ef5a6d649c5b","modified":1701682015206},{"_id":"public/DevOps/index.html","hash":"d484fb1c6ec1f0698d16d24173e7660ee661ce4a","modified":1701682015206},{"_id":"public/Docker/index.html","hash":"ce423305cf3d218b49867105f33cb6c379887e24","modified":1701682015206},{"_id":"public/K8S/index.html","hash":"15184cd6d804dbca8dc44f9c3450832e1c928359","modified":1701682015206},{"_id":"public/KVM/index.html","hash":"0dacfdc6b2d7f29b38120822b3ead2353b6d7d02","modified":1701682015206},{"_id":"public/Linux/index.html","hash":"5e913c22ca1c9dda63aaa4371c246517d1230421","modified":1701682015206},{"_id":"public/Monitor/index.html","hash":"53993c731071c274d161adcc56e461ee3f61451a","modified":1701682015206},{"_id":"public/MySQL/index.html","hash":"4bad119272fa29460f38e2ce01d7e01f2bac69da","modified":1701682015206},{"_id":"public/NetWork/index.html","hash":"3ce965cd326413e59b26f3a40d5430048c6c1e24","modified":1701682015206},{"_id":"public/OpenWrt/index.html","hash":"3713670449455638381a99636eb72a908d11de4c","modified":1701682015206},{"_id":"public/Oracle/index.html","hash":"2af08851349ffc4168ab2a642a1b1569aa1a80b6","modified":1701682015206},{"_id":"public/RaspberryPi/index.html","hash":"d6389cb7d830efc09e121be202881deae6e9203a","modified":1701682015206},{"_id":"public/Security/index.html","hash":"586b3f65868cfc6f6b575bbd8d551cffaa2c123a","modified":1701682015206},{"_id":"public/Ubuntu/index.html","hash":"0e4598fbe00dd8dda76df9bc26d6a67ec8f56ff6","modified":1701682015206},{"_id":"public/categories/index.html","hash":"99512fc55f2f9d69c8560d64937f0c95ad9e5b41","modified":1701682015206},{"_id":"public/2023/04/23/040.openwrt_sftp/index.html","hash":"cbfeff831022c7e555256f5d585d95a33d61a222","modified":1701682015206},{"_id":"public/2022/09/22/026.xserver/index.html","hash":"080b34711a91658e74cb91ce45d64151c2afbe0a","modified":1701682015206},{"_id":"public/2022/08/25/025.ssh/index.html","hash":"e286aa588004ccd6740c288f9a47df7010e65555","modified":1701682015206},{"_id":"public/2020/05/26/014.linux_shell_redirect/index.html","hash":"751496d4107cc25f9382dd62aff7fea12e580a0d","modified":1701682015206},{"_id":"public/archives/2020/index.html","hash":"b9e5c54cbd7e1aaeae727e8588c0b22d3553f8ad","modified":1701682015206},{"_id":"public/archives/2020/03/index.html","hash":"97a55ae0c4e7e85798027ff0be596e6d79dfb4a3","modified":1701682015206},{"_id":"public/archives/2020/05/index.html","hash":"ee4d77244608f4aa9a1cf11c3cc3a9b6398fb305","modified":1701682015206},{"_id":"public/archives/page/7/index.html","hash":"13d8f20dca30ae34b7a79dc062f148991e74f38a","modified":1701682015206},{"_id":"public/archives/2021/index.html","hash":"2092e61beeaa9d7e95e22b3077e7bcba2c5a7e04","modified":1701682015206},{"_id":"public/archives/2021/03/index.html","hash":"3cf48a769f090a87b65c3570624817638c37cf1c","modified":1701682015206},{"_id":"public/archives/2022/page/4/index.html","hash":"40d882c175cf0087c3832feadd5c08636037c386","modified":1701682015206},{"_id":"public/archives/2022/02/index.html","hash":"57454262569da6572a5496e370dfd3fd2cab81af","modified":1701682015206},{"_id":"public/archives/2022/03/index.html","hash":"beee429fccb64e6b12005f81b16dc392fa1d2743","modified":1701682015206},{"_id":"public/archives/2022/05/index.html","hash":"3b1cb0ee626ca9f11646782556e2ab76a48e7f78","modified":1701682015206},{"_id":"public/archives/2022/06/index.html","hash":"52fce3cdf434d167222929a8ec1183ede41f8241","modified":1701682015206},{"_id":"public/archives/2022/09/index.html","hash":"93b49472295e5132f2a251f973022e31c2cc5384","modified":1701682015206},{"_id":"public/archives/2022/08/index.html","hash":"8fed218fd8ad0e6bd9ebbaa9e2a8ee1894ddbe70","modified":1701682015206},{"_id":"public/archives/2022/10/index.html","hash":"9f319b63237ba7ca2bade17bbcf4484b954aa72a","modified":1701682015206},{"_id":"public/archives/2022/11/index.html","hash":"4caa971ce6a64926294eece1cdb4f1c658006139","modified":1701682015206},{"_id":"public/archives/2022/12/index.html","hash":"4a4adee595fc6f4c752b5a6a4af31d3fb4a7c53c","modified":1701682015206},{"_id":"public/archives/2023/page/3/index.html","hash":"ce0de1d41b5f6d0970654925ab9e7c64d52f84cd","modified":1701682015206},{"_id":"public/archives/2023/03/index.html","hash":"4dbab6411651cfb1ee30182b38044b4e128b802d","modified":1701682015206},{"_id":"public/archives/2023/04/index.html","hash":"f88b9d02a5f77182b28c746445d664f87dc8ecd7","modified":1701682015206},{"_id":"public/archives/2023/06/index.html","hash":"34fe3dd09058f8ed433c4da4640dcdc00789a165","modified":1701682015206},{"_id":"public/archives/2023/07/index.html","hash":"ec619f5e2bfd1c22b838b830074d3c671ad3b6f4","modified":1701682015206},{"_id":"public/archives/2023/09/index.html","hash":"b1b083a82506afb006e3cc3358b01efa85080e56","modified":1701682015206},{"_id":"public/archives/2023/10/index.html","hash":"50f9c009eb2d63ad3becff5dc69acce03db060d4","modified":1701682015206},{"_id":"public/archives/2023/11/index.html","hash":"6e7a8076701176efa129e63f984957a4dee10ce3","modified":1701682015206},{"_id":"public/categories/Linux/page/4/index.html","hash":"f12ad44f99f89ffa60c29d5948fc0dadd940bdfe","modified":1701682015206},{"_id":"public/categories/CentOS/page/2/index.html","hash":"eaf6237ba7ae4fe7945c53908f6678ee67a59696","modified":1701682015206},{"_id":"public/categories/NetWork/index.html","hash":"efdd32dead8187ace709b2c248cc31c0d7efd987","modified":1701682015206},{"_id":"public/categories/Ubuntu/index.html","hash":"560b0a7bad1fdc41343ce039e082ee5eb110f730","modified":1701682015206},{"_id":"public/categories/Database/index.html","hash":"457c14c4b5601b1744a43cd96c398451b3e91592","modified":1701682015206},{"_id":"public/categories/Docker/index.html","hash":"8b1744fe90b21a4241929b23dadfa1efd1b9e8d5","modified":1701682015206},{"_id":"public/categories/Security/index.html","hash":"803da71ac772b919bedc6a456ef7a3d35fce37e8","modified":1701682015206},{"_id":"public/categories/OpenWrt/index.html","hash":"aad1cc9c9654fe95c6eff587e88e7f27589735f2","modified":1701682015206},{"_id":"public/categories/KVM/index.html","hash":"c79b46503cabc400c4dcaa5a557b25e2625eeb53","modified":1701682015206},{"_id":"public/categories/Network/index.html","hash":"2d20ea43ff7310b807fa19769017ec7bf5df78b6","modified":1701682015206},{"_id":"public/categories/Monitor/index.html","hash":"861e758e65e8d6c8e69a05e4f5e08436985ea2b4","modified":1701682015206},{"_id":"public/categories/CI-CD/index.html","hash":"33770a3226393560b9a94b6300f4e4b40e66801d","modified":1701682015206},{"_id":"public/tags/frp-/index.html","hash":"a0a00ff0fc03efa33214cf7abf40d66d422d39dc","modified":1701682015206},{"_id":"public/tags/Linux-/index.html","hash":"d49cbe5ff0db8433d8f60f4f8e822c2c20052524","modified":1701682015206},{"_id":"public/tags/Clamav/index.html","hash":"7f1d909ab9bcc3f3ac15ea7c8e848d1450f12a10","modified":1701682015206},{"_id":"public/tags/LVM/index.html","hash":"3b7f5aef84257b3a4a3e60e8ad6ee9957f7ff196","modified":1701682015206},{"_id":"public/tags/elasticsearch/index.html","hash":"c121183456feb2d29f24344d88578e898e8cbc62","modified":1701682015206},{"_id":"public/tags/iptables/index.html","hash":"6e1b1dc4473866b40fd700ec1a0451db07929a24","modified":1701682015206},{"_id":"public/tags/firewalls/index.html","hash":"ac66f488f8406755478ffc6d9dc8999b6dd022ba","modified":1701682015206},{"_id":"public/tags/monitor/index.html","hash":"0a25d3b96659517d1603134d7e69a5b8df4870b9","modified":1701682015206},{"_id":"public/tags/password/index.html","hash":"dc1aef84d07b18a5044413564ce11e1ea870b3a5","modified":1701682015206},{"_id":"public/tags/openssl/index.html","hash":"ff13e3bcf05f8ba9d8c7e11356d926252ead6a44","modified":1701682015206},{"_id":"public/tags/openssh/index.html","hash":"5b6de6f86e02426d7433ca65990e3ae35ca46bcb","modified":1701682015206},{"_id":"public/tags/gcc/index.html","hash":"d9885c2a47ec77fb1d5fdfb31b6f686ad11690b9","modified":1701682015206},{"_id":"public/tags/apache-doris/index.html","hash":"79d21ff22210995bbdaf18aa799207cff6742a58","modified":1701682015206},{"_id":"public/tags/docker/index.html","hash":"771735555352c06769292020b4a0fd6cea00d911","modified":1701682015206},{"_id":"public/tags/nginx/index.html","hash":"73572f4d88a9cb1e3133bc75ac265b01d1c169e7","modified":1701682015206},{"_id":"public/tags/keepalived/index.html","hash":"317e6ec62417fa52319e75e815829f21da80a192","modified":1701682015206},{"_id":"public/tags/HA/index.html","hash":"ab923dd1286bf8d7ce9567fef9b2baf5920018ce","modified":1701682015206},{"_id":"public/tags/shell/index.html","hash":"a14cb526cc7e301c5ce930f437de22fca65de4fb","modified":1701682015206},{"_id":"public/tags//index.html","hash":"6f3c00c7c4f113fb791bb0555cfad0b500e2e992","modified":1701682015206},{"_id":"public/tags//index.html","hash":"524cb8b8cecfac4671893c2c170fe6a67265596b","modified":1701682015206},{"_id":"public/tags/windows/index.html","hash":"f5ecaff6810f5b4fc15e6afde27081bf4ca62655","modified":1701682015206},{"_id":"public/tags/ownership/index.html","hash":"f7ff04cbc591f758354dd8e8fad7ef1f27190887","modified":1701682015206},{"_id":"public/tags/Oracle/index.html","hash":"8b924a02fec56486c30c3ee20bf269ca726337ec","modified":1701682015206},{"_id":"public/tags/MySQL/index.html","hash":"44cba47d67715373ddf14046bf13699394455036","modified":1701682015206},{"_id":"public/tags/sudo/index.html","hash":"6f60be336506cc6fa4d77b8b719af08760f81a26","modified":1701682015206},{"_id":"public/tags/mkfs-ext4/index.html","hash":"d1581dd9eb145b8f33c74c1fc659cd1640286103","modified":1701682015206},{"_id":"public/tags/mount/index.html","hash":"39805d294f8995855f91a5aff551ed2360d7c549","modified":1701682015206},{"_id":"public/tags/repo/index.html","hash":"444371934260c51fb4cfb039a46b2d5c7506c680","modified":1701682015206},{"_id":"public/tags/yum/index.html","hash":"d415bef723c3e95448ce72457d323fec3187babd","modified":1701682015206},{"_id":"public/tags/backup/index.html","hash":"cab2785dfff07b55bdbafe075b5eba221c1b929d","modified":1701682015206},{"_id":"public/tags/access/index.html","hash":"5bf02d7acc87f5218bb5bd9361a72844c809770b","modified":1701682015206},{"_id":"public/tags/fstab/index.html","hash":"bd92901a0ce5fef22e1a9583e2f9d9a31c04e6d3","modified":1701682015206},{"_id":"public/tags/umount/index.html","hash":"91b867333dc6e3425c146a0fd66a89d3cc94fd9e","modified":1701682015206},{"_id":"public/tags/ssh/index.html","hash":"8c41be4bcb84bd332ba204bc8370701c5d03698e","modified":1701682015206},{"_id":"public/tags//index.html","hash":"d003d0b09504c4a85a4cd46517c8c90629cca99f","modified":1701682015206},{"_id":"public/tags/ssh/index.html","hash":"58a95634a8ba0e951777c7b3bc3ec0e1fc3cee04","modified":1701682015206},{"_id":"public/tags/xserver/index.html","hash":"bb0395b7ca77b809f86734d6471022cecaa9cae5","modified":1701682015206},{"_id":"public/tags//index.html","hash":"e231d2457631b7e10c785be1b7d5ca5d98cb2879","modified":1701682015206},{"_id":"public/tags/telnet/index.html","hash":"efabffdc6e00a6f2180831f8a0fe10ea33b48143","modified":1701682015206},{"_id":"public/tags/xinetd/index.html","hash":"1772fccea5f5b9ea5ec90bc9f0930e58344513ee","modified":1701682015206},{"_id":"public/tags//index.html","hash":"b77fac99d65a1581a6889f3e749dcd64d0b1026c","modified":1701682015206},{"_id":"public/tags/php/index.html","hash":"a615d759e68cd7961c8b300bff671221aa8f1bd6","modified":1701682015206},{"_id":"public/tags/nextcloud/index.html","hash":"e4dbae5373b17930dde640545f0c5c54f21548b5","modified":1701682015206},{"_id":"public/tags/CA/index.html","hash":"21fcde15ddcf732dc58172df7bb6838386454635","modified":1701682015206},{"_id":"public/tags/https/index.html","hash":"3dc0007b3ef127109cc84f0b94fed72d3668e3aa","modified":1701682015206},{"_id":"public/tags/ca/index.html","hash":"d29d6a39e6a9c6d04187333cf63995685b60eef1","modified":1701682015206},{"_id":"public/tags/acme-sh/index.html","hash":"b5a06c516832fc0ef19ef37aa911794ae9c8db50","modified":1701682015206},{"_id":"public/tags/tcpdump/index.html","hash":"302c6596df62f340138ff3d233859960170b6090","modified":1701682015206},{"_id":"public/tags/wireshark/index.html","hash":"300766f252cc329214b078eb91580c781ffb8b53","modified":1701682015206},{"_id":"public/tags//index.html","hash":"c1d79e1f4b2ce03d5efeda541e1353c5cde897f7","modified":1701682015206},{"_id":"public/tags/redis/index.html","hash":"9cdcbb9c6e9ae9a31457a8f7b87319c5fe17c1be","modified":1701682015206},{"_id":"public/tags/SSH/index.html","hash":"2c027ae6acd423ba1a22a99878757a3d6c6d937b","modified":1701682015206},{"_id":"public/tags/OpenWrt/index.html","hash":"16a82e12415e3dd6cbd7b271c1896061b7b08396","modified":1701682015206},{"_id":"public/tags/kvm/index.html","hash":"c76c95fa0428b5478de386b1c36446d42bdaaa6d","modified":1701682015206},{"_id":"public/tags/Ubuntu/index.html","hash":"e6631bb16d90b03016dc045938c0debfc4baa77a","modified":1701682015206},{"_id":"public/tags/qemu/index.html","hash":"26b5e28ff33bf4bf51540a9d033c85f5f056b7df","modified":1701682015206},{"_id":"public/tags/network/index.html","hash":"b375d3baad03adb96717a3cbec3dce780313fc94","modified":1701682015206},{"_id":"public/tags/passwall/index.html","hash":"5621174902d79405886351757c981c8b4748812a","modified":1701682015206},{"_id":"public/tags/frpc/index.html","hash":"f37694e778916a35e06b68ba9b35d4f83de96804","modified":1701682015206},{"_id":"public/tags/DevOps/index.html","hash":"4dffeae2b4ec293a207f9817d1c3a92212ce0bc1","modified":1701682015206},{"_id":"public/tags//index.html","hash":"e303bfb614a2145d01d50efacec41872818173dd","modified":1701682015206},{"_id":"public/tags/xmrig/index.html","hash":"a9ccf29da959b4407c94e25de9b03e7f3f1d2baf","modified":1701682015206},{"_id":"public/tags/Cryptocurrency-Mining-Malware/index.html","hash":"d045ca3f6fe155e3f8793c79d1b83c113cad26e1","modified":1701682015206},{"_id":"public/tags/pid/index.html","hash":"a1b3b8810dfaa0f4e294fb586265c2a911b7ed60","modified":1701682015206},{"_id":"public/tags/progress/index.html","hash":"37db6670af65abd11254b49e656dac336710fa1e","modified":1701682015206},{"_id":"public/tags/v2ray/index.html","hash":"2f5d2de42d0cf9ca2cf1061886164f8bb141a843","modified":1701682015206},{"_id":"public/tags/xray/index.html","hash":"fdbdec5df0fab43b4e93b7b01588bb7c7eb85e9b","modified":1701682015206},{"_id":"public/tags/v2rayA/index.html","hash":"de66b70c7f6a96a2455ea86cce5eddc5ea42b051","modified":1701682015206},{"_id":"public/tags/systemd/index.html","hash":"4046c460ce2586015f339ebfb439c2fc4fadde03","modified":1701682015206},{"_id":"public/tags/Dockerfile/index.html","hash":"947dcb3bc307805b5c848617536466a5faf189b4","modified":1701682015206},{"_id":"public/tags/docker-compose/index.html","hash":"937e30ca931ef2d0e7f3de9287bcf23017a7c624","modified":1701682015206},{"_id":"public/tags/centos/index.html","hash":"845d4cee4a6c70746c3d9f59eb4d850859ad0e13","modified":1701682015206},{"_id":"public/tags/downgrade/index.html","hash":"d6a2eaa46c9411b686ddbb9d843b3a3c79885672","modified":1701682015206},{"_id":"public/tags/registry/index.html","hash":"35cae4da52acb554f092ebc1de43d6f820a1f3a3","modified":1701682015206},{"_id":"public/tags/Prometheus/index.html","hash":"2f450a884746ba837c8e5a9ef7f4b884e23586e3","modified":1701682015206},{"_id":"public/tags/Grafana/index.html","hash":"06a6abb36d3f7fd4e85e1bccaa380dd82a435c3d","modified":1701682015206},{"_id":"public/tags/gitlab/index.html","hash":"9e63559543ae2027eaf94e6249d327dd3a4e54ce","modified":1701682015206},{"_id":"public/tags/harbor/index.html","hash":"d4aaa837225ff30201e77ca23ea27b940e1c284e","modified":1701682015206},{"_id":"public/tags/security/index.html","hash":"bab8fbcd179fdaf988daaf4589dc53f8f253b5f2","modified":1701682015206},{"_id":"public/tags/mysql/index.html","hash":"c8085ca1102edf6348ea455043356f5f91c06e88","modified":1701682015206},{"_id":"public/tags/samba/index.html","hash":"9b15ffd31ca81156fa5fe20629cda6326fde3665","modified":1701682015206},{"_id":"public/tags/SecureCRT/index.html","hash":"a43cf45df5839c9a383d3191083d25a2dd9e9cac","modified":1701682015206},{"_id":"public/tags/xshell/index.html","hash":"cb4ca115106394a2bb266e2e9669599b4d3038b2","modified":1701682015206},{"_id":"public/tags/hexo/index.html","hash":"d75c50db49fd88971d04ba88e5f4e51c17a97622","modified":1701682015206},{"_id":"public/tags/Tips/index.html","hash":"d8e1340a49d8951d3a3b4a19bb62254e35df0589","modified":1701682015206},{"_id":"public/tags/index.html","hash":"009bc499aa2d6a65071cfd1e6556040edbdd7fcf","modified":1701682015206},{"_id":"public/2023/11/30/061.hexo/index.html","hash":"90c07518e90a489297058f6cabbade0ea73ceae4","modified":1701682015206},{"_id":"public/2023/11/23/060.highlight/index.html","hash":"6b51338ef65711ee305c6c0087c68124aedb0a56","modified":1701682015206},{"_id":"public/2023/11/23/059.samba/index.html","hash":"55e3cc9c8a53ddef80af521f5af0dbe9cd28ce4e","modified":1701682015206},{"_id":"public/2023/11/06/058.MySQL_Security_Policy/index.html","hash":"a01a20db50e497d10ff851a47a1caa6a66b5f65e","modified":1701682015206},{"_id":"public/2023/11/02/057.Linux_Security_Policy/index.html","hash":"8388bf6bd5e0508d5390c339f9b1a146d788d2af","modified":1701682015206},{"_id":"public/2023/10/12/056.Harbor_Installation/index.html","hash":"8bf5766c1dc8014bd2b96670a50be72f89453758","modified":1701682015206},{"_id":"public/2023/10/11/055.Gitlab_Installation/index.html","hash":"9e0e51643a864c519a8d35b27eebf7a52d50b6d8","modified":1701682015206},{"_id":"public/2023/09/28/054.Grafana_Installation/index.html","hash":"07bb9c6fb08e96949ff8447614e3751b2e8d17d4","modified":1701682015206},{"_id":"public/2023/09/26/053.Prometheus_Installation/index.html","hash":"6a1a98c159d7828213c8cac5b4f02a17c570a128","modified":1701682015206},{"_id":"public/2023/09/25/052.MySQL_Installation_Uasing_Source/index.html","hash":"fe3878cf6c5b731297d460ae14a73d751ad99557","modified":1701682015206},{"_id":"public/2023/09/25/051.MySQL_Install_Using_Generic_Binaries/index.html","hash":"d0a9df6af14ff3b84b68750c7681fc135a3569d0","modified":1701682015206},{"_id":"public/2023/09/20/050.registry_setup/index.html","hash":"c38fc43cb57e26a4814177c7d078aa99dda495d9","modified":1701682015206},{"_id":"public/2023/09/15/049.centos_downgrade/index.html","hash":"c3bb439eb3845a39dc84b50cb4d240335dd5de46","modified":1701682015206},{"_id":"public/2023/09/14/048.docker-compose_instance/index.html","hash":"22fa3b1f4777bf8e32f5b4ca7f6d7525d3756016","modified":1701682015206},{"_id":"public/2023/09/12/047.docker_build_instances/index.html","hash":"cbe2dafe361ab33819107c46ac2b3b47205a9124","modified":1701682015206},{"_id":"public/2023/09/11/046.docker_install_manual/index.html","hash":"e57dc5d6503816179690811db858aefb80fca1e2","modified":1701682015206},{"_id":"public/2023/07/07/045.v2raya/index.html","hash":"9fd48f3c34ea7738003681f85503fe1b5db962e4","modified":1701682015206},{"_id":"public/2023/06/20/044.about_process/index.html","hash":"ff99e712619a5baa75ebb7e5c97e0afc93a90ebd","modified":1701682015206},{"_id":"public/2023/06/12/043.Cryptocurrency_Mining_Malware/index.html","hash":"6e5641432361237602d5c20ac822dfca9aabe768","modified":1701682015206},{"_id":"public/2023/06/06/042.Greenbone_Community_installation/index.html","hash":"ea1537c1315827422c278b87bf25b4f1333de475","modified":1701682015206},{"_id":"public/2023/06/02/041.openwrt_install_frpc/index.html","hash":"403ac35eb182926be94d4da86cb0e086e8afcbfa","modified":1701682015206},{"_id":"public/2023/04/23/040.openwrt_install_passwall/index.html","hash":"8eaa3aa698aa7c893bc0842a18ce8acdf5256595","modified":1701682015206},{"_id":"public/2023/03/30/037.kvm/index.html","hash":"53bcca561a14a366adf1f9db415d90d58c2497e8","modified":1701682015206},{"_id":"public/2023/03/30/038.ubuntu_network_config/index.html","hash":"fff4142bf436f3deac645b2f1cc6a3dec590182d","modified":1701682015206},{"_id":"public/2023/03/24/036.openwrt_disk_expansion/index.html","hash":"52717bdf9144c6902c17d9f8f5fd225f8f852fb6","modified":1701682015206},{"_id":"public/2023/03/15/035.ssh_key/index.html","hash":"3f947810357d58b864c77e0a8207977b9ae91531","modified":1701682015206},{"_id":"public/2022/12/05/034.redis/index.html","hash":"7423951dc317e8811ddbfe6eff4ff85755db062a","modified":1701682015206},{"_id":"public/2022/11/29/033.tcpdump_instances/index.html","hash":"11c1c7fef4c6ffb4edf3225a5ab6d1313784ed4b","modified":1701682015206},{"_id":"public/2022/11/28/032.acme.sh/index.html","hash":"7715ed2578b026801df0e161e9832d6ffdaaab5d","modified":1701682015206},{"_id":"public/2022/11/24/031.ca/index.html","hash":"8a1986ff6863ede939ae344c9f75c7c2cebc707d","modified":1701682015206},{"_id":"public/2022/11/23/030.nextcloud/index.html","hash":"4eb0615a7c0a3d3f6bd44fc5f4ff2fb27c5e412c","modified":1701682015206},{"_id":"public/2022/11/22/029.install_php7.4.33/index.html","hash":"4287cc71edc6b46123287e47ca35734c9e9484c0","modified":1701682015206},{"_id":"public/2022/11/04/028.docker_instances/index.html","hash":"3c9ab87996e9cc2a791d4acc6fb38e1c7d95d37a","modified":1701682015206},{"_id":"public/2022/10/09/027.telnet/index.html","hash":"3bd1301e56a083b6d92129ae99cb89f0d255d2fa","modified":1701682015206},{"_id":"public/2022/08/12/024.fstab/index.html","hash":"38d54c18b22fe29bfe9314be4d29f5f6f00035b1","modified":1701682015206},{"_id":"public/2022/06/30/023.access/index.html","hash":"1be104520843a95d3ef9bc0db7086b82637f7d45","modified":1701682015206},{"_id":"public/2022/06/23/022.MySQL_backup/index.html","hash":"728e0f164cbe34abb4c9626a4e8d735f3d8b9ff8","modified":1701682015206},{"_id":"public/2022/06/21/021.CentOS-Base.repo/index.html","hash":"b31e4a23b58a729b3f121b1cf7eb8c5f83b1c1d1","modified":1701682015206},{"_id":"public/2022/06/16/020.mount/index.html","hash":"31150d475e59a228274e5a3d36795e9465677dfe","modified":1701682015206},{"_id":"public/2022/06/15/019.sudo/index.html","hash":"b813e24b81becc79b4702ce7a94ab4a7b31905c4","modified":1701682015206},{"_id":"public/2022/06/13/018.mysql/index.html","hash":"04b888a055b5c40b51190418b9b1150dd087d1b8","modified":1701682015206},{"_id":"public/2022/06/10/017.Oracle/index.html","hash":"f20abecaf260bd07d416db55a4dd81fa1d181309","modified":1701682015206},{"_id":"public/2022/06/09/016.take_ownership/index.html","hash":"0c82277c29408df864dd0b11e58c272b376a8db9","modified":1701682015206},{"_id":"public/2022/05/31/015.windows_route/index.html","hash":"89da53350ab7c43091bb654ecf465037758c566d","modified":1701682015206},{"_id":"public/2022/05/24/011.apache-doris/index.html","hash":"05346e3ae7510ef81240f256b5f6dde034aa0431","modified":1701682015206},{"_id":"public/2022/05/23/010.gcc_update/index.html","hash":"f60c50e5976b85171d5c35da04c73db221fe92b8","modified":1701682015206},{"_id":"public/2022/05/18/999.Tips-linux/index.html","hash":"e703abab95b3cf7262b545ec5783a49dbe340069","modified":1701682015206},{"_id":"public/2022/05/16/009.openssh/index.html","hash":"342157cc3d6b8b0a65e2ab7b5e689c63b296a6ed","modified":1701682015206},{"_id":"public/2022/05/12/008.reset_password/index.html","hash":"8aa68f8c73b9647a928dbbf18d1eae44dc36a43b","modified":1701682015206},{"_id":"public/2022/05/11/007.system_monitor/index.html","hash":"b9cad8c3930afb47888824b2fb1ad567c0a4a9e7","modified":1701682015206},{"_id":"public/2022/03/23/002.progress/index.html","hash":"9a21a0ac24c00b660e18c994c76bc0898c24b09a","modified":1701682015206},{"_id":"public/2022/03/03/003.clamav/index.html","hash":"7112cc70adbb0f9bfc9afb0356a37cba73ee0d10","modified":1701682015206},{"_id":"public/2022/03/03/004.lvm/index.html","hash":"5f1686e217629a10b21866c5f60f2316433b72c1","modified":1701682015206},{"_id":"public/2022/02/25/001.frp/index.html","hash":"213166b666100e1bcd622eaf75ac0befbb6bd09b","modified":1701682015206},{"_id":"public/2022/02/17/005.elasticsearch/index.html","hash":"5e697885bcafa6d578e8234e06557a997e4b6025","modified":1701682015206},{"_id":"public/2022/02/16/006.iptables/index.html","hash":"bf524e7a155e444bc1711460690320ef30f88977","modified":1701682015206},{"_id":"public/2021/03/18/012.docker_installation/index.html","hash":"172fc74db220c42882779fc8ab65411c49eb81a0","modified":1701682015206},{"_id":"public/2020/03/18/013.keepalived/index.html","hash":"9684976c4c4c94e0574e931ae98f8895412d6272","modified":1701682015206},{"_id":"public/archives/index.html","hash":"ea96bd27543967457910520e3b817ec380d6d303","modified":1701682015206},{"_id":"public/archives/page/2/index.html","hash":"8506e985c689f6a72f04a277360820027a7050e8","modified":1701682015206},{"_id":"public/archives/page/3/index.html","hash":"0536dad605e17096ddfaa800e6cefd81624d9453","modified":1701682015206},{"_id":"public/archives/page/4/index.html","hash":"b7105fec88884ebdda356253b192b47ab5174e37","modified":1701682015206},{"_id":"public/archives/page/5/index.html","hash":"ad5629d0bac881cabd4e1c2470616a7f07db0e3c","modified":1701682015206},{"_id":"public/archives/page/6/index.html","hash":"7662960b286a3bdfeaa0e65ad3f95689f2c02953","modified":1701682015206},{"_id":"public/archives/2022/index.html","hash":"84dc176548fbf037f832352a8dcbeac2e6363059","modified":1701682015206},{"_id":"public/archives/2022/page/2/index.html","hash":"75c4c8e762ab72ee0bac2f3a66286dbbb73db3cb","modified":1701682015206},{"_id":"public/archives/2022/page/3/index.html","hash":"a36a06753932f526a5ae2a09325d1b49b978077f","modified":1701682015206},{"_id":"public/archives/2023/index.html","hash":"f2dc5728f69974e5fb1fa586ec7102253407027d","modified":1701682015206},{"_id":"public/archives/2023/page/2/index.html","hash":"fa6b9f6eb4fa22a92adce35a60370149842be390","modified":1701682015206},{"_id":"public/categories/Linux/index.html","hash":"40e9045e5fdacb0cb2a463450f7ab12b62f74429","modified":1701682015206},{"_id":"public/categories/Linux/page/2/index.html","hash":"8d1cc26930609294558fcca7f3f1aa28850fe2c4","modified":1701682015206},{"_id":"public/categories/Linux/page/3/index.html","hash":"36fe31d6c191fc6601408cbf125620ba0ee39d0c","modified":1701682015206},{"_id":"public/categories/CentOS/index.html","hash":"0f6c0775c92eed4eba28a6f728e2a764e5f1065d","modified":1701682015206},{"_id":"public/categories/DevOps/index.html","hash":"c10cb445621b1543af4067b284ea3d14a6301e05","modified":1701682015206},{"_id":"public/index.html","hash":"dd7e187edaa4ca780d9348aaaec9932637cb65c5","modified":1701682015206},{"_id":"public/page/2/index.html","hash":"e5510b7d7a8608f6cf6cccd20c718ebbcd4f5574","modified":1701682015206},{"_id":"public/page/3/index.html","hash":"8ff019b91d5c663c48cf3b57c9fabb02fda7b31b","modified":1701682015206},{"_id":"public/page/4/index.html","hash":"f3ec2786c303982de45758328d2dfd637c91dca6","modified":1701682015206},{"_id":"public/page/5/index.html","hash":"92057299ef16ecc467b35107df3094a49aae4bce","modified":1701682015206},{"_id":"public/page/6/index.html","hash":"3b6b2ddb12ce6b37ca6578e0e4279a98692e9ece","modified":1701682015206},{"_id":"public/page/7/index.html","hash":"de843c6deeac32968ba3b79414de5dfbf2adad97","modified":1701682015206},{"_id":"public/images/002.progress.md.02.png","hash":"f53fdc057abd32d1b18bf6b03848280892cac4fd","modified":1701682015206},{"_id":"public/images/004.lvm.md.01.png","hash":"4691bdaaad12fd18057c68ea088d386eb9589aaa","modified":1701682015206},{"_id":"public/images/004.lvm.md.02.png","hash":"aa7c480cbf16659a6c6211269f30ce45935d4bc1","modified":1701682015206},{"_id":"public/images/004.lvm.md.04.png","hash":"aa8a446f698cbe4d7fa1f28ef4d3337fd5f73563","modified":1701682015206},{"_id":"public/images/005.elasticsearch.md.02.png","hash":"329eed1611a056e7cf1f528ba14ef31cf05735fa","modified":1701682015206},{"_id":"public/images/005.elasticsearch.md.03.png","hash":"ffca61e0e1f015bf6be403c04731b0bb7273dc79","modified":1701682015206},{"_id":"public/images/005.elasticsearch.md.04.png","hash":"db3bde9a0df0c8b47c6d6f1166f451f547304788","modified":1701682015206},{"_id":"public/images/005.elasticsearch.md.05.png","hash":"8bbe91b742b6137ee3bae4fd3f70f765355f96e5","modified":1701682015206},{"_id":"public/images/005.elasticsearch.md.07.png","hash":"7b7fd9dd060e50154e3e18852776a8331b9f6021","modified":1701682015206},{"_id":"public/images/006.iptables.md.02.png","hash":"db12992e1b0eaf706179a1230181ef1a242eafcf","modified":1701682015206},{"_id":"public/images/006.iptables.md.03.png","hash":"aa545771eb288bc4df8e83473ef388f25b68c927","modified":1701682015206},{"_id":"public/images/007.system_info.md.01.png","hash":"813e1e65e4b399d93e57361339a654144a110f37","modified":1701682015206},{"_id":"public/images/008.reset_password.md.01.png","hash":"2b4f99f2c2c13db63c096c22019fa1c126f6d20a","modified":1701682015206},{"_id":"public/images/008.reset_password.md.02.png","hash":"4333f8384df6b215607b9dec80914423543793ea","modified":1701682015206},{"_id":"public/images/012.docker_installation.md.01.png","hash":"fa5bbbb2f87bbdcf8ac1a9e80034d94cbd21d3a2","modified":1701682015206},{"_id":"public/images/017.oracle.md.02.png","hash":"6e4d4cb67bcf23f5b88ad10a3241cde173ff42e6","modified":1701682015206},{"_id":"public/images/017.oracle.md.01.png","hash":"211dd097f37c6e70f5b86e536eeee8c4027b5435","modified":1701682015206},{"_id":"public/images/017.oracle.md.03.png","hash":"eb6c377bf624d93664c2981f147a9632926f672a","modified":1701682015206},{"_id":"public/images/017.oracle.md.04.png","hash":"2648e9f5df7cec3094c70f63605b7154d3a8cb90","modified":1701682015206},{"_id":"public/images/017.oracle.md.05.png","hash":"25676c6654f6ae754f2a94bdf02ea0d5ef6a8ab0","modified":1701682015206},{"_id":"public/images/017.oracle.md.06.png","hash":"226eadca708d5ba0fa558605e34fe7e364d6b8cb","modified":1701682015206},{"_id":"public/images/017.oracle.md.09.png","hash":"20bbfe2ace9d23e73e9472932641e12a7ffb4dee","modified":1701682015206},{"_id":"public/images/017.oracle.md.11.png","hash":"3e10efa851efa0cb347ae4e068dbd6f504fb4c8e","modified":1701682015206},{"_id":"public/images/017.oracle.md.12.png","hash":"7b6376413020ff55a749dd6c161cb5b752adc566","modified":1701682015206},{"_id":"public/images/017.oracle.md.10.png","hash":"89795d32ebc27265a4cc1f264a919c12be26ac47","modified":1701682015206},{"_id":"public/images/028.docker_instances.md.01.png","hash":"bf929e46c4ca2dec608b43d80f3de40fcead2496","modified":1701682015206},{"_id":"public/images/031.ca.md.01.png","hash":"67e063dffdec69fc78d24997d2dc32a3263b82f7","modified":1701682015206},{"_id":"public/images/035.ssh_key.md.01.png","hash":"66bc80eb445e96d0f910bff62af74c6e247a484c","modified":1701682015206},{"_id":"public/images/040.openwrt_install_passwall.md.01.png","hash":"f501473a5c2dfefa8e30d9120a8da378fb372b4a","modified":1701682015206},{"_id":"public/images/040.openwrt_install_passwall.md.03.png","hash":"bf45100d1dce0dad051f62af9b849c8c90d3f6a8","modified":1701682015206},{"_id":"public/images/040.openwrt_install_passwall.md.04.png","hash":"15735380aa3c8172855c6e20f8eaa350b469b583","modified":1701682015206},{"_id":"public/images/041.openwrt_install_frpc.md.01.png","hash":"3fb1959b14a4fed2970a040cdd91d36d108ec12a","modified":1701682015206},{"_id":"public/images/043.Cryptocurrency_Mining_Malware.md.02.png","hash":"8300a70785224e56dfd7b783e3713560ea2532a8","modified":1701682015206},{"_id":"public/images/043.Cryptocurrency_Mining_Malware.md.04.png","hash":"3b84e850fed75c7522de14ea371e252c6ace450c","modified":1701682015206},{"_id":"public/images/043.Cryptocurrency_Mining_Malware.md.05.png","hash":"42acb4603d9a6f98d66bb8acaf092944f6051eea","modified":1701682015206},{"_id":"public/images/043.Cryptocurrency_Mining_Malware.md.08.png","hash":"9b5861b3593957ac7a72c1479af541216acd7bf9","modified":1701682015206},{"_id":"public/images/045.v2raya.md.000.png","hash":"8ef56f19e487f40a0dcf79db51318ea2877dc130","modified":1701682015206},{"_id":"public/images/045.v2raya.md.02.png","hash":"b7354b9a142ae5f87c388612e802f0d64882e65e","modified":1701682015206},{"_id":"public/images/043.Cryptocurrency_Mining_Malware.md.03.png","hash":"ae4f5f502652c216a7b97fb260e67fe5c4761326","modified":1701682015206},{"_id":"public/images/045.v2raya.md.03.png","hash":"1eacad49a31fcaa479bb626f0ae5c43d827c5655","modified":1701682015206},{"_id":"public/images/045.v2raya.md.00.png","hash":"b5f10501dea28f1209ac5f891fb56f6bb8dae97a","modified":1701682015206},{"_id":"public/images/046.docker_install_manual.md.01.png","hash":"bf20371003a970e7a6ca97bef41861ce2249763e","modified":1701682015206},{"_id":"public/images/049.centos_downgrade.md.01.png","hash":"4c667cec33799a712d024d0a316462cfdf0a03b5","modified":1701682015206},{"_id":"public/images/050.registry_setup.md.01.png","hash":"8c3adaf4e9c542c6840ead256d0a3ba41f9828f1","modified":1701682015206},{"_id":"public/images/050.registry_setup.md.02.png","hash":"84d1de83725a4d0f2332c5afa0c5f2b19a2a965f","modified":1701682015206},{"_id":"public/images/051.MySQL_Install_Using_Generic_Binaries.md.02.png","hash":"a086f03331dfc00298aeb5c2eb874ec89dd9465a","modified":1701682015206},{"_id":"public/images/052.MySQL_Installation_Uasing_Source.md.02.png","hash":"47420657145fe17289147cb0a1e900cb8fbaec79","modified":1701682015206},{"_id":"public/images/055.Gitlab_Installation.md.02.png","hash":"0808f2c2f386e6de32f99759769d8e6a8490b529","modified":1701682015206},{"_id":"public/images/056.Harbor_Installation.md.01.png","hash":"0076997f63eb97e9fa0e6221de437df5e4b06938","modified":1701682015206},{"_id":"public/images/056.Harbor_Installation.md.02.png","hash":"f6592c20cfb85afc8f47387137426865165160a0","modified":1701682015206},{"_id":"public/images/059.samba.md.02.png","hash":"1ec0bc8cd11a9f7ee2fa6188d81e024916252c69","modified":1701682015206},{"_id":"public/images/059.samba.md.05.png","hash":"f3db6fdb12d29803fb66897264c592fd9634e17f","modified":1701682015206},{"_id":"public/images/059.samba.md.06.png","hash":"fb5f34615e90832f34f38314a8e9ff6fefa72edd","modified":1701682015206},{"_id":"public/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1701682015206},{"_id":"public/images/avatar.gif","hash":"2dbc3e2f2d624b2ca1afe6edc2ca17307f1950c8","modified":1701682015206},{"_id":"public/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1701682015206},{"_id":"public/images/logo-algolia-nebula-blue-full.svg","hash":"b85e274207b1392782476a0430feac98db1e7da0","modified":1701682015206},{"_id":"public/images/logo.svg","hash":"099e11ab995a2c8981427a85476d082609848c77","modified":1701682015206},{"_id":"public/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1701682015206},{"_id":"public/images/002.progress.md.01.png","hash":"981b48572b3b32da3e71e985e75126e04bfeb323","modified":1701682015206},{"_id":"public/images/003.clamav.md.01.png","hash":"0377710a728d349612a253d64ae3928feb0f1343","modified":1701682015206},{"_id":"public/images/003.clamav.md.02.png","hash":"463efbc79306b67e2e69c2c4712f79dd68adf10b","modified":1701682015206},{"_id":"public/images/004.lvm.md.03.png","hash":"b66c65c73958ce03a6df217b0a5c4afc72500e74","modified":1701682015206},{"_id":"public/images/005.elasticsearch.md.01.png","hash":"56acbf689d68e6fadda3e36b47a26363c77e1d36","modified":1701682015206},{"_id":"public/images/005.elasticsearch.md.08.png","hash":"665b216f7cfcf30cd9026f9388eed796bd986fe8","modified":1701682015206},{"_id":"public/images/009.openssh.md.01.png","hash":"4706abfc666f54b0ccd540fe865ffc09574cbef3","modified":1701682015206},{"_id":"public/images/009.openssh.md.03.png","hash":"ea03603fe823cfb4c1f3d5eecfc1e73e016dae46","modified":1701682015206},{"_id":"public/images/009.openssh.md.04.png","hash":"127bdf7b211051766e946a64d8b1275adb0194e3","modified":1701682015206},{"_id":"public/images/009.openssh.md.05.png","hash":"e6e097c15a2492d1ed0d87a993ffe2e7f9748442","modified":1701682015206},{"_id":"public/images/009.openssh.md.06.png","hash":"932bc4528927d42720cf843759b70540d947791f","modified":1701682015206},{"_id":"public/images/017.oracle.md.07.png","hash":"21ae6a916a3b29922d6b3c5c78a0a05c4b9683b9","modified":1701682015206},{"_id":"public/images/017.oracle.md.08.png","hash":"ceae0f699979374763a9c133399437a07a5cf26b","modified":1701682015206},{"_id":"public/images/027.telnet.md.01.png","hash":"d41f66832506649ee1627f6b4a58a14406e84ae1","modified":1701682015206},{"_id":"public/images/027.telnet.md.02.png","hash":"28ce933daaf7a51af701ceb94ad45ef9b5ed0b45","modified":1701682015206},{"_id":"public/images/017.oracle.md.13.png","hash":"3cceebcf247c7bf73925524de22b8d73d0e29894","modified":1701682015206},{"_id":"public/images/031.ca.md.02.png","hash":"6bbd67655f11766a9de7543ce549f7b1249d6655","modified":1701682015206},{"_id":"public/images/031.ca.md.03.png","hash":"2884c0fa48bc11f8ffd1ab82a682df6aa0eb259e","modified":1701682015206},{"_id":"public/images/034.redis.md.01.png","hash":"2daa90c1b3ec00cbe4142e195ca719810fa72458","modified":1701682015206},{"_id":"public/images/040.openwrt_install_passwall.md.02.png","hash":"bdfc2a924ab4d5fd86578d34c2e1d7c5be98ba70","modified":1701682015206},{"_id":"public/images/041.openwrt_install_frpc.md.02.png","hash":"c4851930d037cf68542bbe6b87c6f224e1110127","modified":1701682015206},{"_id":"public/images/043.Cryptocurrency_Mining_Malware.md.01.png","hash":"6f6e0509eb3728c36c23c58d85297e2ad1a39ca8","modified":1701682015206},{"_id":"public/images/043.Cryptocurrency_Mining_Malware.md.07.png","hash":"ab041d6c140e4b827c2a02df85f7887caed0b7de","modified":1701682015206},{"_id":"public/images/043.Cryptocurrency_Mining_Malware.md.06.png","hash":"31c26cb4223a07a0b09e140c5b180559af159c23","modified":1701682015206},{"_id":"public/images/045.v2raya.md.01.png","hash":"fc78d3b761fb8a4c9a092f343b8b2d1bd64b0d96","modified":1701682015206},{"_id":"public/images/046.docker_install_manual.md.02.png","hash":"4b1e226ba2fda8a04435bce093285f84814fc5c8","modified":1701682015206},{"_id":"public/images/047.docker_build_instances.md.01.png","hash":"3933a3766623eae3950ecbd2d059dc809ceebfcf","modified":1701682015206},{"_id":"public/images/047.docker_build_instances.md.02.png","hash":"901ba454f56bdf5100b37544e97de0a78aa8df65","modified":1701682015206},{"_id":"public/images/051.MySQL_Install_Using_Generic_Binaries.md.01.png","hash":"34910f3f80584529757bfd617939917e8f1d087a","modified":1701682015206},{"_id":"public/images/052.MySQL_Installation_Uasing_Source.md.01.png","hash":"82b0cdcaf6428cd123db76d61a3b91dcb50e004d","modified":1701682015206},{"_id":"public/images/055.Gitlab_Installation.md.01.png","hash":"c370f8c385d2ca48854bf8db2ece290bee383f52","modified":1701682015206},{"_id":"public/images/053.Prometheus_Installation.md.01.png","hash":"0af5d2370c9b5b61397334899a964923682ac2cf","modified":1701682015206},{"_id":"public/images/055.Gitlab_Installation.md.03.png","hash":"249978029c004436ad8429196194c0748e9a903b","modified":1701682015206},{"_id":"public/images/059.samba.md.03.png","hash":"375cbb396fc3893df237a063e2060b04023451a5","modified":1701682015206},{"_id":"public/images/059.samba.md.04.png","hash":"1ebb2bebe05e2fe6dc98db341963e3bf0b94c243","modified":1701682015206},{"_id":"public/css/noscript.css","hash":"4cd5301e478e0e0d4b176740ec314087ec5cb707","modified":1701682015206},{"_id":"public/js/bookmark.js","hash":"0f563ffbf05fad30e854e413ab17ff7164ab5a53","modified":1701682015206},{"_id":"public/js/comments-buttons.js","hash":"1a7344440321713426a0b2ab17e276b5bdf85ade","modified":1701682015206},{"_id":"public/js/comments.js","hash":"66ae2e26ea36a41b72c638ea8b220296638ae952","modified":1701682015206},{"_id":"public/js/config.js","hash":"4c4ebbe3b3f3841a26f9d5af6d0ba8bc6da01c54","modified":1701682015206},{"_id":"public/js/motion.js","hash":"770d63c26f22705311028a36b52e999cc8a2da82","modified":1701682015206},{"_id":"public/js/next-boot.js","hash":"da0f07f9eaaa83de70128b0feaea3fdadb90457a","modified":1701682015206},{"_id":"public/js/pjax.js","hash":"b03ba78c6916ad2f390d55bc1bc18fafb64b0ebf","modified":1701682015206},{"_id":"public/js/schedule.js","hash":"a1333258726caf84f368a8f8454639c7dc1626bb","modified":1701682015206},{"_id":"public/js/schemes/muse.js","hash":"0c490e9ba82efbb8bdf8465e6b537fafd51e1ed7","modified":1701682015206},{"_id":"public/js/third-party/fancybox.js","hash":"c098d14e65dd170537134358d4b8359ad0539c2c","modified":1701682015206},{"_id":"public/js/third-party/pace.js","hash":"0ef04218b93561ba4d0ff420d556c3d90a756d32","modified":1701682015206},{"_id":"public/js/third-party/quicklink.js","hash":"eed02e6fced8e5a653077205d4d4d7834ca71472","modified":1701682015206},{"_id":"public/js/third-party/analytics/baidu-analytics.js","hash":"f629acc46ff40c071ffd31b77d5c7616f0fdd778","modified":1701682015206},{"_id":"public/js/third-party/analytics/google-analytics.js","hash":"59684383385059dc4f8a1ff85dbbeb703bcdbcb5","modified":1701682015206},{"_id":"public/js/third-party/analytics/growingio.js","hash":"78dd3cf04082b7dbe6246e404b2aa8e726922402","modified":1701682015206},{"_id":"public/js/third-party/analytics/matomo.js","hash":"c6a25b26a1443caa70b47fd3dfa282271574deb5","modified":1701682015206},{"_id":"public/js/third-party/comments/changyan.js","hash":"260d1a77d6a3bb33a579d3e4cca1997003e799b5","modified":1701682015206},{"_id":"public/js/third-party/comments/disqus.js","hash":"da361917d65e5dca8362f8cdeb6c8cc0e8316cec","modified":1701682015206},{"_id":"public/js/third-party/comments/disqusjs.js","hash":"1e826dea3f684c0515f362dc1352447a1f0eae71","modified":1701682015206},{"_id":"public/js/third-party/comments/isso.js","hash":"753a873b6f566aff5ba77ca23f91b78eb880ca64","modified":1701682015206},{"_id":"public/js/third-party/comments/gitalk.js","hash":"0ec038cf83e8ec067534f16a54041e47a3c1e59a","modified":1701682015206},{"_id":"public/js/third-party/comments/livere.js","hash":"2247d88c934c765c43013337860774aaa99f0b31","modified":1701682015206},{"_id":"public/js/third-party/comments/utterances.js","hash":"f67f90eb03e284c82da2b8cf2f1e31801813c16d","modified":1701682015206},{"_id":"public/js/third-party/chat/chatra.js","hash":"c32180522788c10e51df1803aa6842ef0432ddc9","modified":1701682015206},{"_id":"public/js/third-party/chat/gitter.js","hash":"cc38c94125f90dadde11b5ebac7d8bf99a1a08a2","modified":1701682015206},{"_id":"public/js/third-party/chat/tidio.js","hash":"b0079f6a4601e06ca6fe46e83a2f5af553e9bc3c","modified":1701682015206},{"_id":"public/js/third-party/math/katex.js","hash":"83c54ee536e487a1031783443fe0cb63b1b4767e","modified":1701682015206},{"_id":"public/js/third-party/math/mathjax.js","hash":"5c749b9c1c3bb738122d0516211ecff6496d4907","modified":1701682015206},{"_id":"public/js/third-party/search/algolia-search.js","hash":"fdb7b7cef1a147d897e7f7cd8903b58368ec2062","modified":1701682015206},{"_id":"public/js/third-party/search/local-search.js","hash":"4536cb6d0a9bbaaa86fab3fa0101f6a3a3ec5a76","modified":1701682015206},{"_id":"public/js/third-party/statistics/lean-analytics.js","hash":"835cbf54c49ef1327f47df70ff2636ad36b6f57d","modified":1701682015206},{"_id":"public/js/third-party/statistics/firestore.js","hash":"6e0682bb42170d61b13b786295f45f9c785f8b73","modified":1701682015206},{"_id":"public/js/third-party/tags/pdf.js","hash":"af78c22f0e61c8c8aa8794e585e0d632c6d4fcb8","modified":1701682015206},{"_id":"public/js/third-party/tags/mermaid.js","hash":"f27d817b0c2138dd3215b1f46af0753f60a008f3","modified":1701682015206},{"_id":"public/css/main.css","hash":"f16732521a25575164af237b10b6fb2748ffa919","modified":1701682015206},{"_id":"public/js/utils.js","hash":"5e1cf39de050964e97fb3ba0825aeec7f4bc36dd","modified":1701682015206},{"_id":"public/images/009.openssh.md.07.png","hash":"687e52bc44ce594f75fd4cdd654eb53d1231c0c9","modified":1701682015206},{"_id":"public/images/029.install_php7.4.33.md.03.png","hash":"8eb1f0b64ce71dfc0623f0bb822c48117bbc3191","modified":1701682015206},{"_id":"public/images/036.openwrt_disk_expansion.md.02.png","hash":"5e42aaad32d5d4be4c4321878735e4aee87eb359","modified":1701682015206},{"_id":"public/images/037.kvm.md.02.png","hash":"ce5f29c030a4962b5447eee944675bf6ad29196f","modified":1701682015206},{"_id":"public/images/047.docker_build_instances.md.03.png","hash":"67553b46515cd4469a65edc1905625faf1614221","modified":1701682015206},{"_id":"public/images/057.Linux_Security_Policy.md.01.png","hash":"c011cf9fc9285dbda2b6698061c35b6e39d608fc","modified":1701682015206},{"_id":"public/images/059.samba.md.01.png","hash":"eb306fd6368064ab3abb2446993d415e823a8b7c","modified":1701682015206},{"_id":"public/images/009.openssh.md.02.png","hash":"54689ec50a9d36876e73075336f1612c7e17ae99","modified":1701682015206},{"_id":"public/images/060.highlight.md.01.png","hash":"c1185e6b72d878cd364e423d0ec9eb3a038b04ff","modified":1701682015206},{"_id":"public/images/005.elasticsearch.md.06.png","hash":"c337f5444bd4db0b08abf9949f76e14e6b5fbb9e","modified":1701682015206},{"_id":"public/images/029.install_php7.4.33.md.02.png","hash":"bd90e3b395314b90ce305b6d1bd88d0dbc52b69f","modified":1701682015206},{"_id":"public/images/037.kvm.md.04.png","hash":"9847c5db3b6660af0d4ed8e5c80a4845ab04ec67","modified":1701682015206},{"_id":"public/images/057.Linux_Security_Policy.md.02.png","hash":"91a6c27ecbe4f37b25c77744135aa9f9eb967c23","modified":1701682015206},{"_id":"public/images/006.iptables.md.01.png","hash":"a8ac603a12fba8d347c56a5c320a90ed0c24526f","modified":1701682015206},{"_id":"public/images/029.install_php7.4.33.md.01.png","hash":"5ca2d5fcffd1c7496b0dba0e53ce5db5ff9bfe7f","modified":1701682015206},{"_id":"public/images/036.openwrt_disk_expansion.md.01.png","hash":"378dafdc2f8d6e1b73279434a423e3d6456a209b","modified":1701682015206},{"_id":"public/images/037.kvm.md.01.png","hash":"9b194464ed376d437ed707ac6e28e9037c736c66","modified":1701682015206},{"_id":"public/images/037.kvm.md.03.png","hash":"39e3d27da863010cc4a62ac5a7ab3980d53bc1fb","modified":1701682015206}],"Category":[{"name":"Linux","_id":"clpqpjbco0004yknrfdux58om"},{"name":"CentOS","_id":"clpqpjbdc000jyknr4u7rhjxy"},{"name":"NetWork","_id":"clpqpjbdt0018yknr94jdenla"},{"name":"Ubuntu","_id":"clpqpjbe1001hyknr8a1welcu"},{"name":"Database","_id":"clpqpjbec001yyknrc1ee0e2e"},{"name":"Docker","_id":"clpqpjbep002eyknraf6jgdke"},{"name":"Security","_id":"clpqpjbev002lyknrf2c43neq"},{"name":"DevOps","_id":"clpqpjbfd0036yknr4aiv75kr"},{"name":"OpenWrt","_id":"clpqpjbfo003ryknrc5twdot0"},{"name":"KVM","_id":"clpqpjbfr003yyknreuca9kef"},{"name":"Network","_id":"clpqpjbfv0045yknrhahx2pp1"},{"name":"Monitor","_id":"clpqpjbgd0055yknrckvq9odz"},{"name":"CI/CD","_id":"clpqpjbgu005jyknr14ilam3s"}],"Data":[],"Page":[{"title":"404","date":"2014-12-22T04:39:04.000Z","comments":0,"_content":"<script src=\"//qzonestyle.gtimg.cn/qzone/hybrid/app/404/search_children.js\"\n        charset=\"utf-8\" homePageUrl=\"/\" homePageName=\"Back to home\">\n</script>\n","source":"404/index.md","raw":"---\ntitle: '404'\ndate: 2014-12-22 12:39:04\ncomments: false\n---\n<script src=\"//qzonestyle.gtimg.cn/qzone/hybrid/app/404/search_children.js\"\n        charset=\"utf-8\" homePageUrl=\"/\" homePageName=\"Back to home\">\n</script>\n","updated":"2023-03-28T07:42:46.000Z","path":"404/index.html","layout":"page","_id":"clpqpjbc70000yknrc5ls6ej8","content":"<script src=\"//qzonestyle.gtimg.cn/qzone/hybrid/app/404/search_children.js\"\n        charset=\"utf-8\" homePageUrl=\"/\" homePageName=\"Back to home\">\n</script>\n","site":{"data":{}},"excerpt":"","more":"<script src=\"//qzonestyle.gtimg.cn/qzone/hybrid/app/404/search_children.js\"\n        charset=\"utf-8\" homePageUrl=\"/\" homePageName=\"Back to home\">\n</script>\n"},{"title":"CentOS","date":"2022-05-07T06:24:44.000Z","type":"CentOS","_content":"","source":"CentOS.back/index.md","raw":"---\ntitle: CentOS\ndate: 2022-05-07 14:24:44\ntype: CentOS\n---\n","updated":"2023-03-03T05:14:59.000Z","path":"CentOS.back/index.html","comments":1,"layout":"page","_id":"clpqpjbck0002yknr9mj7gfxp","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"Database","date":"2023-04-19T06:40:32.000Z","_content":"","source":"Database/index.md","raw":"---\ntitle: Database\ndate: 2023-04-19 14:40:32\n---\n","updated":"2023-04-19T14:40:32.000Z","path":"Database/index.html","comments":1,"layout":"page","_id":"clpqpjbct0006yknr274u4a5x","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"CI/CD","date":"2023-10-08T01:04:15.000Z","_content":"","source":"CI-CD/index.md","raw":"---\ntitle: CI/CD\ndate: 2023-10-08 09:04:15\n---\n","updated":"2023-10-08T09:04:15.000Z","path":"CI-CD/index.html","comments":1,"layout":"page","_id":"clpqpjbcw0008yknrglc9fpyh","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"DevOps","date":"2022-05-07T06:24:15.000Z","_content":"","source":"DevOps/index.md","raw":"---\ntitle: DevOps\ndate: 2022-05-07 14:24:15\n---\n","updated":"2023-03-03T05:15:00.000Z","path":"DevOps/index.html","comments":1,"layout":"page","_id":"clpqpjbcx000ayknr3p9z4fy0","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"Docker","date":"2022-05-07T06:25:11.000Z","_content":"","source":"Docker/index.md","raw":"---\ntitle: Docker\ndate: 2022-05-07 14:25:11\n---\n","updated":"2023-03-03T05:15:01.000Z","path":"Docker/index.html","comments":1,"layout":"page","_id":"clpqpjbd2000fyknr14qz7nro","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"K8S","date":"2022-05-07T06:25:02.000Z","_content":"","source":"K8S/index.md","raw":"---\ntitle: K8S\ndate: 2022-05-07 14:25:02\n---\n","updated":"2023-03-03T05:15:09.000Z","path":"K8S/index.html","comments":1,"layout":"page","_id":"clpqpjbd8000hyknr6rngep4t","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"KVM","date":"2023-04-19T01:59:47.000Z","_content":"","source":"KVM/index.md","raw":"---\ntitle: KVM\ndate: 2023-04-19 09:59:47\n---\n","updated":"2023-04-19T09:59:47.000Z","path":"KVM/index.html","comments":1,"layout":"page","_id":"clpqpjbdd000myknr5xn0d3xk","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"Linux","date":"2022-05-06T09:39:10.000Z","type":"Linux","_content":"","source":"Linux/index.md","raw":"---\ntitle: Linux\ndate: 2022-05-06 17:39:10\ntype: Linux\n---\n","updated":"2023-03-03T05:15:09.000Z","path":"Linux/index.html","comments":1,"layout":"page","_id":"clpqpjbdh000pyknr75fehui6","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"Monitor","date":"2023-09-26T23:12:23.000Z","_content":"","source":"Monitor/index.md","raw":"---\ntitle: Monitor\ndate: 2023-09-27 07:12:23\n---\n","updated":"2023-09-27T07:12:23.000Z","path":"Monitor/index.html","comments":1,"layout":"page","_id":"clpqpjbdl000uyknrdhekax64","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"MySQL","date":"2022-05-07T06:25:52.000Z","_content":"","source":"MySQL/index.md","raw":"---\ntitle: MySQL\ndate: 2022-05-07 14:25:52\n---\n","updated":"2023-03-03T05:15:10.000Z","path":"MySQL/index.html","comments":1,"layout":"page","_id":"clpqpjbdn000xyknr4eil4f9q","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"NetWork","date":"2022-05-07T06:23:57.000Z","_content":"","source":"NetWork/index.md","raw":"---\ntitle: NetWork\ndate: 2022-05-07 14:23:57\n---\n","updated":"2023-03-03T05:15:12.000Z","path":"NetWork/index.html","comments":1,"layout":"page","_id":"clpqpjbdq0011yknrgvrqb1cy","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"OpenWrt","date":"2023-03-28T01:43:46.000Z","_content":"","source":"OpenWrt/index.md","raw":"---\ntitle: OpenWrt\ndate: 2023-03-28 09:43:46\n---\n","updated":"2023-03-28T09:43:46.000Z","path":"OpenWrt/index.html","comments":1,"layout":"page","_id":"clpqpjbds0015yknr4rele7vt","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"Oracle","date":"2023-04-14T08:57:44.000Z","_content":"","source":"Oracle/index.md","raw":"---\ntitle: Oracle\ndate: 2023-04-14 16:57:44\n---\n","updated":"2023-04-14T16:57:44.000Z","path":"Oracle/index.html","comments":1,"layout":"page","_id":"clpqpjbdt0019yknrhh8cgqc0","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"RaspberryPi","date":"2022-05-07T06:24:25.000Z","_content":"","source":"RaspberryPi/index.md","raw":"---\ntitle: RaspberryPi\ndate: 2022-05-07 14:24:25\n---\n","updated":"2023-03-03T05:15:12.000Z","path":"RaspberryPi/index.html","comments":1,"layout":"page","_id":"clpqpjbdw001eyknr3b2sbep2","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"Security","date":"2022-05-07T06:24:06.000Z","_content":"","source":"Security/index.md","raw":"---\ntitle: Security\ndate: 2022-05-07 14:24:06\n---\n","updated":"2023-03-03T05:15:13.000Z","path":"Security/index.html","comments":1,"layout":"page","_id":"clpqpjbe3001iyknr87v09ncx","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"Ubuntu","date":"2022-05-07T06:24:52.000Z","_content":"","source":"Ubuntu/index.md","raw":"---\ntitle: Ubuntu\ndate: 2022-05-07 14:24:52\n---\n","updated":"2023-03-03T05:15:15.000Z","path":"Ubuntu/index.html","comments":1,"layout":"page","_id":"clpqpjbe6001myknr90m0fw77","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"Categories","date":"2022-05-06T09:42:03.000Z","type":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: Categories\ndate: 2022-05-06 17:42:03\ntype: categories\n---\n","updated":"2023-03-03T05:14:59.000Z","path":"categories/index.html","comments":1,"layout":"page","_id":"clpqpjbe8001qyknr4y6g1onc","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"tags","date":"2022-05-07T02:37:11.000Z","type":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2022-05-07 10:37:11\ntype: tags\n---\n","updated":"2023-03-03T05:15:13.000Z","path":"tags/index.html","comments":1,"layout":"page","_id":"clpqpjbe9001uyknr0zrv2xe6","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"frp","date":"2022-02-25T09:30:08.000Z","_content":"\n\n## \n*server* : debian 9                  124.xxx.xxx.xxx  ()\n*client* : centos minimal 7.9 (VMware)     192.168.128.7    ()\n\n1)  frp (serverclient)\n   `https://github.com/fatedier/frp/releases`\n\n2)  \n   ` tar -zxvf frp_0.39.1_linux_amd64.tar.gz`\n\n[](https://gofrp.org/docs/examples/ssh/)\n<!-- more -->\n## server \n\n1)  frps \n  ` mkdir /etc/frp `\n\n2) \n   ` cp frp/frps* /etc/frp `\n\n3) \n   ` cp frp/frps /usr/bin/frps `\n\n4)  system \n   ` cp frp/systemd/frps* /usr/lib/systemd/system `\n\n5)  SSH\n   ` vim frps.ini `\n\n6) \n   ` systemctl start frps `\n\n## client \n\n1)  frpc \n   ` mkdir /etc/frp `\n\n2) \n   ` cp frp/frpc* /etc/frp `\n\n3) \n   ` cp frp/frpc /usr/bin/frps `\n\n4)  systemd \n   ` cp frp/systemd/frpc* /usr/lib/systemd/system `\n\n5)  SSH\n   ``` vim frpc.ini ```\n\n6) \n   ` systemctl start frpc `\n\n### , SSH\n\n\n:\n : windows   \n` ssh -oPort=6000 root@124.xxx.xxx.xxx `\n","source":"_posts/001.frp.md","raw":"---\ntitle: frp\ndate: 2022-02-25 17:30:08\ncategories: Linux\ntags: frp \n---\n\n\n## \n*server* : debian 9                  124.xxx.xxx.xxx  ()\n*client* : centos minimal 7.9 (VMware)     192.168.128.7    ()\n\n1)  frp (serverclient)\n   `https://github.com/fatedier/frp/releases`\n\n2)  \n   ` tar -zxvf frp_0.39.1_linux_amd64.tar.gz`\n\n[](https://gofrp.org/docs/examples/ssh/)\n<!-- more -->\n## server \n\n1)  frps \n  ` mkdir /etc/frp `\n\n2) \n   ` cp frp/frps* /etc/frp `\n\n3) \n   ` cp frp/frps /usr/bin/frps `\n\n4)  system \n   ` cp frp/systemd/frps* /usr/lib/systemd/system `\n\n5)  SSH\n   ` vim frps.ini `\n\n6) \n   ` systemctl start frps `\n\n## client \n\n1)  frpc \n   ` mkdir /etc/frp `\n\n2) \n   ` cp frp/frpc* /etc/frp `\n\n3) \n   ` cp frp/frpc /usr/bin/frps `\n\n4)  systemd \n   ` cp frp/systemd/frpc* /usr/lib/systemd/system `\n\n5)  SSH\n   ``` vim frpc.ini ```\n\n6) \n   ` systemctl start frpc `\n\n### , SSH\n\n\n:\n : windows   \n` ssh -oPort=6000 root@124.xxx.xxx.xxx `\n","slug":"001.frp","published":1,"updated":"2023-03-03T05:15:16.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbcc0001yknr1bv21aap","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><em>server</em> : debian 9                  124.xxx.xxx.xxx  ()<br><em>client</em> : centos minimal 7.9 (VMware)     192.168.128.7    ()</p>\n<ol>\n<li><p> frp (serverclient)<br><code>https://github.com/fatedier/frp/releases</code></p>\n</li>\n<li><p><br><code> tar -zxvf frp_0.39.1_linux_amd64.tar.gz</code></p>\n</li>\n</ol>\n<p><a href=\"https://gofrp.org/docs/examples/ssh/\"></a></p>\n<span id=\"more\"></span>\n<h2 id=\"server-\"><a href=\"#server-\" class=\"headerlink\" title=\"server \"></a>server </h2><ol>\n<li><p> frps <br>  <code>mkdir /etc/frp</code></p>\n</li>\n<li><p><br><code>cp frp/frps* /etc/frp</code></p>\n</li>\n<li><p><br><code>cp frp/frps /usr/bin/frps</code></p>\n</li>\n<li><p> system <br><code>cp frp/systemd/frps* /usr/lib/systemd/system</code></p>\n</li>\n<li><p> SSH<br><code>vim frps.ini</code></p>\n</li>\n<li><p><br><code>systemctl start frps</code></p>\n</li>\n</ol>\n<h2 id=\"client-\"><a href=\"#client-\" class=\"headerlink\" title=\"client \"></a>client </h2><ol>\n<li><p> frpc <br><code>mkdir /etc/frp</code></p>\n</li>\n<li><p><br><code>cp frp/frpc* /etc/frp</code></p>\n</li>\n<li><p><br><code>cp frp/frpc /usr/bin/frps</code></p>\n</li>\n<li><p> systemd <br><code>cp frp/systemd/frpc* /usr/lib/systemd/system</code></p>\n</li>\n<li><p> SSH<br><code>vim frpc.ini</code></p>\n</li>\n<li><p><br><code>systemctl start frpc</code></p>\n</li>\n</ol>\n<h3 id=\"-SSH\"><a href=\"#-SSH\" class=\"headerlink\" title=\", SSH\"></a>, SSH</h3><p>:<br> : windows   <br><code>ssh -oPort=6000 root@124.xxx.xxx.xxx</code></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><em>server</em> : debian 9                  124.xxx.xxx.xxx  ()<br><em>client</em> : centos minimal 7.9 (VMware)     192.168.128.7    ()</p>\n<ol>\n<li><p> frp (serverclient)<br><code>https://github.com/fatedier/frp/releases</code></p>\n</li>\n<li><p><br><code> tar -zxvf frp_0.39.1_linux_amd64.tar.gz</code></p>\n</li>\n</ol>\n<p><a href=\"https://gofrp.org/docs/examples/ssh/\"></a></p>","more":"<h2 id=\"server-\"><a href=\"#server-\" class=\"headerlink\" title=\"server \"></a>server </h2><ol>\n<li><p> frps <br>  <code>mkdir /etc/frp</code></p>\n</li>\n<li><p><br><code>cp frp/frps* /etc/frp</code></p>\n</li>\n<li><p><br><code>cp frp/frps /usr/bin/frps</code></p>\n</li>\n<li><p> system <br><code>cp frp/systemd/frps* /usr/lib/systemd/system</code></p>\n</li>\n<li><p> SSH<br><code>vim frps.ini</code></p>\n</li>\n<li><p><br><code>systemctl start frps</code></p>\n</li>\n</ol>\n<h2 id=\"client-\"><a href=\"#client-\" class=\"headerlink\" title=\"client \"></a>client </h2><ol>\n<li><p> frpc <br><code>mkdir /etc/frp</code></p>\n</li>\n<li><p><br><code>cp frp/frpc* /etc/frp</code></p>\n</li>\n<li><p><br><code>cp frp/frpc /usr/bin/frps</code></p>\n</li>\n<li><p> systemd <br><code>cp frp/systemd/frpc* /usr/lib/systemd/system</code></p>\n</li>\n<li><p> SSH<br><code>vim frpc.ini</code></p>\n</li>\n<li><p><br><code>systemctl start frpc</code></p>\n</li>\n</ol>\n<h3 id=\"-SSH\"><a href=\"#-SSH\" class=\"headerlink\" title=\", SSH\"></a>, SSH</h3><p>:<br> : windows   <br><code>ssh -oPort=6000 root@124.xxx.xxx.xxx</code></p>"},{"title":"Linux","date":"2022-03-23T09:39:10.000Z","_content":"\n>:[https://cloud.tencent.com/developer/article/1568077](https://links.jianshu.com/go?to=https%3A%2F%2Fcloud.tencent.com%2Fdeveloper%2Farticle%2F1568077)\n\n# \n\n*   Duninterruptible sleep (usually IO)\n*   Rrunning or runnable (on run queue)\n*   Sinterruptible sleep (waiting for an event to complete)\n*   Tstopped by job control signal\n*   tstopped by debugger during the tracing\n*   Wpaging (not valid since the 2.6.xx kernel)\n*   Xdead (should never be seen)\n*   Zdefunct (\"zombie\") process, terminated but not - reaped by its parent\n\n<!-- more -->\n\n## 1R (TASK_RUNNING)\n\nCPUtask_structCPUCPUCPUCPU\n\n> CPURUNNINGREADYlinux TASK_RUNNING\n\n## 2S (TASK_INTERRUPTIBLE)\n\nsockettask_struct\n\n> psTASK_INTERRUPTIBLECPUCPU\n\n## 3D (TASK_UNINTERRUPTIBLE)\n\nTASK_INTERRUPTIBLECPU\n\nkill -9psTASK_UNINTERRUPTIBLETASK_INTERRUPTIBLE\n\n> TASK_UNINTERRUPTIBLE readreadTASK_UNINTERRUPTIBLETASK_UNINTERRUPTIBLEps\n\n## 4T/t (TASK_STOPPED or TASK_TRACED)\n\n**T (TASK_STOPPED)**SIGSTOPTASK_STOPPEDTASK_UNINTERRUPTIBLE SIGSTOPSIGKILLsignal SIGCONTkill -18TASK_STOPPEDTASK_RUNNINGkill -9\n\n**t (TASK_STOPPED)**TASK_TRACEDgdbUNIXUNIX-likeTASK_TRACED\n\n> TASK_STOPPEDTASK_TRACED TASK_TRACEDTASK_STOPPEDTASK_TRACEDSIGCONTptracePTRACE_CONTPTRACE_DETACHptraceTASK_RUNNING\n\n## 5Z (TASK_DEAD - EXIT_ZOMBIE)\n\nTASK_DEADtask_structtask_struct\n\ntask_structtask_structwaitwait4waitidtask_structwaittask_struct\n\n> /Z\n\n1.    fork  wait  waitpid    ********\n2.   11 1pid1init linuxinit 1init 2waitid initTASK_INTERRUPTIBLETASK_RUNNING\n\n## 6X (TASK_DEAD - EXIT_DEAD)\n\ntask_structdetachSIGCHLDhandlerSIG_IGNSIGCHLDposixSIGCHLD EXIT_DEADEXIT_DEADps\n\n## 7\n\n****\n\n*   <high-priority (not nice to other users)\n*   Nlow-priority (nice to other users)\n*   Lhas pages locked into memory (for real-time and custom IO)\n*   sis a session leader\n*   lis multi-threaded (using CLONE_THREAD, like NPTL pthreads do)\n*   +is in the foreground process group\n\n****ps[Linux](https://www.cnblogs.com/littlecharacter/p/12154587.html)\n\n*   `ps -eo stat,pid,user,%cpu,%mem,time,cmd`\n*   `ps -eo stat,pid,user,%cpu,%mem,time,cmd | grep -e '^[R]'`\n\n# \n\n![](/images/002.progress.md.01.png)\n\n\n## 1\n\nforkforkclonevforkkernel_thread TASK_RUNNINGTASK_RUNNING clonekernel_threadCLONE_STOPPED TASK_STOPPED\n\n## 2\n\nTASK_RUNNINGTASK_RUNNINGTASK_RUNNINGTASK_RUNNING TASK_INTERRUPTIBLESIGKILLTASK_RUNNINGSIGKILLTASK_DEADTASK_INTERRUPTIBLE\n\n> TASK_RUNNINGTASK_RUNNINGTASK_RUNNINGtask_structCPU TASK_RUNNINGTASK_RUNNING 1TASK_STOPEDTASK_DEAD 2TASK_INTERRUPTIBLEnanosleepTASK_DEADexitTASK_INTERRUPTIBLETASK_UNINTERRUPTIBLEselect CPU\n\n# \n![](/images/002.progress.md.02.png)\n\n\n:https://cloud.tencent.com/developer/article/1568077\n\n","source":"_posts/002.progress.md","raw":"---\ntitle: Linux\ndate: 2022-03-23 17:39:10\ncategories: Linux\ntags: Linux \n---\n\n>:[https://cloud.tencent.com/developer/article/1568077](https://links.jianshu.com/go?to=https%3A%2F%2Fcloud.tencent.com%2Fdeveloper%2Farticle%2F1568077)\n\n# \n\n*   Duninterruptible sleep (usually IO)\n*   Rrunning or runnable (on run queue)\n*   Sinterruptible sleep (waiting for an event to complete)\n*   Tstopped by job control signal\n*   tstopped by debugger during the tracing\n*   Wpaging (not valid since the 2.6.xx kernel)\n*   Xdead (should never be seen)\n*   Zdefunct (\"zombie\") process, terminated but not - reaped by its parent\n\n<!-- more -->\n\n## 1R (TASK_RUNNING)\n\nCPUtask_structCPUCPUCPUCPU\n\n> CPURUNNINGREADYlinux TASK_RUNNING\n\n## 2S (TASK_INTERRUPTIBLE)\n\nsockettask_struct\n\n> psTASK_INTERRUPTIBLECPUCPU\n\n## 3D (TASK_UNINTERRUPTIBLE)\n\nTASK_INTERRUPTIBLECPU\n\nkill -9psTASK_UNINTERRUPTIBLETASK_INTERRUPTIBLE\n\n> TASK_UNINTERRUPTIBLE readreadTASK_UNINTERRUPTIBLETASK_UNINTERRUPTIBLEps\n\n## 4T/t (TASK_STOPPED or TASK_TRACED)\n\n**T (TASK_STOPPED)**SIGSTOPTASK_STOPPEDTASK_UNINTERRUPTIBLE SIGSTOPSIGKILLsignal SIGCONTkill -18TASK_STOPPEDTASK_RUNNINGkill -9\n\n**t (TASK_STOPPED)**TASK_TRACEDgdbUNIXUNIX-likeTASK_TRACED\n\n> TASK_STOPPEDTASK_TRACED TASK_TRACEDTASK_STOPPEDTASK_TRACEDSIGCONTptracePTRACE_CONTPTRACE_DETACHptraceTASK_RUNNING\n\n## 5Z (TASK_DEAD - EXIT_ZOMBIE)\n\nTASK_DEADtask_structtask_struct\n\ntask_structtask_structwaitwait4waitidtask_structwaittask_struct\n\n> /Z\n\n1.    fork  wait  waitpid    ********\n2.   11 1pid1init linuxinit 1init 2waitid initTASK_INTERRUPTIBLETASK_RUNNING\n\n## 6X (TASK_DEAD - EXIT_DEAD)\n\ntask_structdetachSIGCHLDhandlerSIG_IGNSIGCHLDposixSIGCHLD EXIT_DEADEXIT_DEADps\n\n## 7\n\n****\n\n*   <high-priority (not nice to other users)\n*   Nlow-priority (nice to other users)\n*   Lhas pages locked into memory (for real-time and custom IO)\n*   sis a session leader\n*   lis multi-threaded (using CLONE_THREAD, like NPTL pthreads do)\n*   +is in the foreground process group\n\n****ps[Linux](https://www.cnblogs.com/littlecharacter/p/12154587.html)\n\n*   `ps -eo stat,pid,user,%cpu,%mem,time,cmd`\n*   `ps -eo stat,pid,user,%cpu,%mem,time,cmd | grep -e '^[R]'`\n\n# \n\n![](/images/002.progress.md.01.png)\n\n\n## 1\n\nforkforkclonevforkkernel_thread TASK_RUNNINGTASK_RUNNING clonekernel_threadCLONE_STOPPED TASK_STOPPED\n\n## 2\n\nTASK_RUNNINGTASK_RUNNINGTASK_RUNNINGTASK_RUNNING TASK_INTERRUPTIBLESIGKILLTASK_RUNNINGSIGKILLTASK_DEADTASK_INTERRUPTIBLE\n\n> TASK_RUNNINGTASK_RUNNINGTASK_RUNNINGtask_structCPU TASK_RUNNINGTASK_RUNNING 1TASK_STOPEDTASK_DEAD 2TASK_INTERRUPTIBLEnanosleepTASK_DEADexitTASK_INTERRUPTIBLETASK_UNINTERRUPTIBLEselect CPU\n\n# \n![](/images/002.progress.md.02.png)\n\n\n:https://cloud.tencent.com/developer/article/1568077\n\n","slug":"002.progress","published":1,"updated":"2023-03-03T05:15:16.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbcl0003yknrh2hx7uko","content":"<blockquote>\n<p>:<a href=\"https://links.jianshu.com/go?to=https://cloud.tencent.com/developer/article/1568077\">https://cloud.tencent.com/developer/article/1568077</a></p>\n</blockquote>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul>\n<li>Duninterruptible sleep (usually IO)</li>\n<li>Rrunning or runnable (on run queue)</li>\n<li>Sinterruptible sleep (waiting for an event to complete)</li>\n<li>Tstopped by job control signal</li>\n<li>tstopped by debugger during the tracing</li>\n<li>Wpaging (not valid since the 2.6.xx kernel)</li>\n<li>Xdead (should never be seen)</li>\n<li>Zdefunct (zombie) process, terminated but not - reaped by its parent</li>\n</ul>\n<span id=\"more\"></span>\n\n<h2 id=\"1R-TASK-RUNNING-\"><a href=\"#1R-TASK-RUNNING-\" class=\"headerlink\" title=\"1R (TASK_RUNNING)\"></a>1R (TASK_RUNNING)</h2><p>CPUtask_structCPUCPUCPUCPU</p>\n<blockquote>\n<p>CPURUNNINGREADYlinux TASK_RUNNING</p>\n</blockquote>\n<h2 id=\"2S-TASK-INTERRUPTIBLE-\"><a href=\"#2S-TASK-INTERRUPTIBLE-\" class=\"headerlink\" title=\"2S (TASK_INTERRUPTIBLE)\"></a>2S (TASK_INTERRUPTIBLE)</h2><p>sockettask_struct</p>\n<blockquote>\n<p>psTASK_INTERRUPTIBLECPUCPU</p>\n</blockquote>\n<h2 id=\"3D-TASK-UNINTERRUPTIBLE-\"><a href=\"#3D-TASK-UNINTERRUPTIBLE-\" class=\"headerlink\" title=\"3D (TASK_UNINTERRUPTIBLE)\"></a>3D (TASK_UNINTERRUPTIBLE)</h2><p>TASK_INTERRUPTIBLECPU</p>\n<p>kill -9psTASK_UNINTERRUPTIBLETASK_INTERRUPTIBLE</p>\n<blockquote>\n<p>TASK_UNINTERRUPTIBLE readreadTASK_UNINTERRUPTIBLETASK_UNINTERRUPTIBLEps</p>\n</blockquote>\n<h2 id=\"4T-t-TASK-STOPPED-or-TASK-TRACED-\"><a href=\"#4T-t-TASK-STOPPED-or-TASK-TRACED-\" class=\"headerlink\" title=\"4T&#x2F;t (TASK_STOPPED or TASK_TRACED)\"></a>4T&#x2F;t (TASK_STOPPED or TASK_TRACED)</h2><p><strong>T (TASK_STOPPED)</strong>SIGSTOPTASK_STOPPEDTASK_UNINTERRUPTIBLE SIGSTOPSIGKILLsignal SIGCONTkill -18TASK_STOPPEDTASK_RUNNINGkill -9</p>\n<p><strong>t (TASK_STOPPED)</strong>TASK_TRACEDgdbUNIXUNIX-likeTASK_TRACED</p>\n<blockquote>\n<p>TASK_STOPPEDTASK_TRACED TASK_TRACEDTASK_STOPPEDTASK_TRACEDSIGCONTptracePTRACE_CONTPTRACE_DETACHptraceTASK_RUNNING</p>\n</blockquote>\n<h2 id=\"5Z-TASK-DEAD-EXIT-ZOMBIE-\"><a href=\"#5Z-TASK-DEAD-EXIT-ZOMBIE-\" class=\"headerlink\" title=\"5Z (TASK_DEAD - EXIT_ZOMBIE)\"></a>5Z (TASK_DEAD - EXIT_ZOMBIE)</h2><p>TASK_DEADtask_structtask_struct</p>\n<p>task_structtask_structwaitwait4waitidtask_structwaittask_struct</p>\n<blockquote>\n<p>&#x2F;Z</p>\n</blockquote>\n<ol>\n<li>  fork  wait  waitpid    <strong></strong><strong></strong></li>\n<li> 11 1pid1init linuxinit 1init 2waitid initTASK_INTERRUPTIBLETASK_RUNNING</li>\n</ol>\n<h2 id=\"6X-TASK-DEAD-EXIT-DEAD-\"><a href=\"#6X-TASK-DEAD-EXIT-DEAD-\" class=\"headerlink\" title=\"6X (TASK_DEAD - EXIT_DEAD)\"></a>6X (TASK_DEAD - EXIT_DEAD)</h2><p>task_structdetachSIGCHLDhandlerSIG_IGNSIGCHLDposixSIGCHLD EXIT_DEADEXIT_DEADps</p>\n<h2 id=\"7\"><a href=\"#7\" class=\"headerlink\" title=\"7\"></a>7</h2><p><strong></strong></p>\n<ul>\n<li>&lt;high-priority (not nice to other users)</li>\n<li>Nlow-priority (nice to other users)</li>\n<li>Lhas pages locked into memory (for real-time and custom IO)</li>\n<li>sis a session leader</li>\n<li>lis multi-threaded (using CLONE_THREAD, like NPTL pthreads do)</li>\n<li>+is in the foreground process group</li>\n</ul>\n<p><strong></strong>ps<a href=\"https://www.cnblogs.com/littlecharacter/p/12154587.html\">Linux</a></p>\n<ul>\n<li><code>ps -eo stat,pid,user,%cpu,%mem,time,cmd</code></li>\n<li><code>ps -eo stat,pid,user,%cpu,%mem,time,cmd | grep -e &#39;^[R]&#39;</code></li>\n</ul>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><img src=\"/images/002.progress.md.01.png\" alt=\"\"></p>\n<h2 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h2><p>forkforkclonevforkkernel_thread TASK_RUNNINGTASK_RUNNING clonekernel_threadCLONE_STOPPED TASK_STOPPED</p>\n<h2 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h2><p>TASK_RUNNINGTASK_RUNNINGTASK_RUNNINGTASK_RUNNING TASK_INTERRUPTIBLESIGKILLTASK_RUNNINGSIGKILLTASK_DEADTASK_INTERRUPTIBLE</p>\n<blockquote>\n<p>TASK_RUNNINGTASK_RUNNINGTASK_RUNNINGtask_structCPU TASK_RUNNINGTASK_RUNNING 1TASK_STOPEDTASK_DEAD 2TASK_INTERRUPTIBLEnanosleepTASK_DEADexitTASK_INTERRUPTIBLETASK_UNINTERRUPTIBLEselect CPU</p>\n</blockquote>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><img src=\"/images/002.progress.md.02.png\" alt=\"\"></p>\n<p>:<a href=\"https://cloud.tencent.com/developer/article/1568077\">https://cloud.tencent.com/developer/article/1568077</a></p>\n","site":{"data":{}},"excerpt":"<blockquote>\n<p>:<a href=\"https://links.jianshu.com/go?to=https://cloud.tencent.com/developer/article/1568077\">https://cloud.tencent.com/developer/article/1568077</a></p>\n</blockquote>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul>\n<li>Duninterruptible sleep (usually IO)</li>\n<li>Rrunning or runnable (on run queue)</li>\n<li>Sinterruptible sleep (waiting for an event to complete)</li>\n<li>Tstopped by job control signal</li>\n<li>tstopped by debugger during the tracing</li>\n<li>Wpaging (not valid since the 2.6.xx kernel)</li>\n<li>Xdead (should never be seen)</li>\n<li>Zdefunct (zombie) process, terminated but not - reaped by its parent</li>\n</ul>","more":"<h2 id=\"1R-TASK-RUNNING-\"><a href=\"#1R-TASK-RUNNING-\" class=\"headerlink\" title=\"1R (TASK_RUNNING)\"></a>1R (TASK_RUNNING)</h2><p>CPUtask_structCPUCPUCPUCPU</p>\n<blockquote>\n<p>CPURUNNINGREADYlinux TASK_RUNNING</p>\n</blockquote>\n<h2 id=\"2S-TASK-INTERRUPTIBLE-\"><a href=\"#2S-TASK-INTERRUPTIBLE-\" class=\"headerlink\" title=\"2S (TASK_INTERRUPTIBLE)\"></a>2S (TASK_INTERRUPTIBLE)</h2><p>sockettask_struct</p>\n<blockquote>\n<p>psTASK_INTERRUPTIBLECPUCPU</p>\n</blockquote>\n<h2 id=\"3D-TASK-UNINTERRUPTIBLE-\"><a href=\"#3D-TASK-UNINTERRUPTIBLE-\" class=\"headerlink\" title=\"3D (TASK_UNINTERRUPTIBLE)\"></a>3D (TASK_UNINTERRUPTIBLE)</h2><p>TASK_INTERRUPTIBLECPU</p>\n<p>kill -9psTASK_UNINTERRUPTIBLETASK_INTERRUPTIBLE</p>\n<blockquote>\n<p>TASK_UNINTERRUPTIBLE readreadTASK_UNINTERRUPTIBLETASK_UNINTERRUPTIBLEps</p>\n</blockquote>\n<h2 id=\"4T-t-TASK-STOPPED-or-TASK-TRACED-\"><a href=\"#4T-t-TASK-STOPPED-or-TASK-TRACED-\" class=\"headerlink\" title=\"4T&#x2F;t (TASK_STOPPED or TASK_TRACED)\"></a>4T&#x2F;t (TASK_STOPPED or TASK_TRACED)</h2><p><strong>T (TASK_STOPPED)</strong>SIGSTOPTASK_STOPPEDTASK_UNINTERRUPTIBLE SIGSTOPSIGKILLsignal SIGCONTkill -18TASK_STOPPEDTASK_RUNNINGkill -9</p>\n<p><strong>t (TASK_STOPPED)</strong>TASK_TRACEDgdbUNIXUNIX-likeTASK_TRACED</p>\n<blockquote>\n<p>TASK_STOPPEDTASK_TRACED TASK_TRACEDTASK_STOPPEDTASK_TRACEDSIGCONTptracePTRACE_CONTPTRACE_DETACHptraceTASK_RUNNING</p>\n</blockquote>\n<h2 id=\"5Z-TASK-DEAD-EXIT-ZOMBIE-\"><a href=\"#5Z-TASK-DEAD-EXIT-ZOMBIE-\" class=\"headerlink\" title=\"5Z (TASK_DEAD - EXIT_ZOMBIE)\"></a>5Z (TASK_DEAD - EXIT_ZOMBIE)</h2><p>TASK_DEADtask_structtask_struct</p>\n<p>task_structtask_structwaitwait4waitidtask_structwaittask_struct</p>\n<blockquote>\n<p>&#x2F;Z</p>\n</blockquote>\n<ol>\n<li>  fork  wait  waitpid    <strong></strong><strong></strong></li>\n<li> 11 1pid1init linuxinit 1init 2waitid initTASK_INTERRUPTIBLETASK_RUNNING</li>\n</ol>\n<h2 id=\"6X-TASK-DEAD-EXIT-DEAD-\"><a href=\"#6X-TASK-DEAD-EXIT-DEAD-\" class=\"headerlink\" title=\"6X (TASK_DEAD - EXIT_DEAD)\"></a>6X (TASK_DEAD - EXIT_DEAD)</h2><p>task_structdetachSIGCHLDhandlerSIG_IGNSIGCHLDposixSIGCHLD EXIT_DEADEXIT_DEADps</p>\n<h2 id=\"7\"><a href=\"#7\" class=\"headerlink\" title=\"7\"></a>7</h2><p><strong></strong></p>\n<ul>\n<li>&lt;high-priority (not nice to other users)</li>\n<li>Nlow-priority (nice to other users)</li>\n<li>Lhas pages locked into memory (for real-time and custom IO)</li>\n<li>sis a session leader</li>\n<li>lis multi-threaded (using CLONE_THREAD, like NPTL pthreads do)</li>\n<li>+is in the foreground process group</li>\n</ul>\n<p><strong></strong>ps<a href=\"https://www.cnblogs.com/littlecharacter/p/12154587.html\">Linux</a></p>\n<ul>\n<li><code>ps -eo stat,pid,user,%cpu,%mem,time,cmd</code></li>\n<li><code>ps -eo stat,pid,user,%cpu,%mem,time,cmd | grep -e &#39;^[R]&#39;</code></li>\n</ul>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><img src=\"/images/002.progress.md.01.png\" alt=\"\"></p>\n<h2 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h2><p>forkforkclonevforkkernel_thread TASK_RUNNINGTASK_RUNNING clonekernel_threadCLONE_STOPPED TASK_STOPPED</p>\n<h2 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h2><p>TASK_RUNNINGTASK_RUNNINGTASK_RUNNINGTASK_RUNNING TASK_INTERRUPTIBLESIGKILLTASK_RUNNINGSIGKILLTASK_DEADTASK_INTERRUPTIBLE</p>\n<blockquote>\n<p>TASK_RUNNINGTASK_RUNNINGTASK_RUNNINGtask_structCPU TASK_RUNNINGTASK_RUNNING 1TASK_STOPEDTASK_DEAD 2TASK_INTERRUPTIBLEnanosleepTASK_DEADexitTASK_INTERRUPTIBLETASK_UNINTERRUPTIBLEselect CPU</p>\n</blockquote>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><img src=\"/images/002.progress.md.02.png\" alt=\"\"></p>\n<p>:<a href=\"https://cloud.tencent.com/developer/article/1568077\">https://cloud.tencent.com/developer/article/1568077</a></p>"},{"title":"CentOSClamav","date":"2022-03-03T09:30:08.000Z","_content":"\n>, Linux ,, DDos . Linux , ClamAV,.\n ClamAV , [ClamAV ](https://docs.clamav.net/)\n\n<!-- more -->\n\n1) \n\nhttps://www.clamav.net/downloads\n![image.png](/images/003.clamav.md.01.png)\n\n2) \n ``` rpm -ivh clamav-0.104.2.linux.x86_64.rpm ```\n\n3) \n-  ```clamd.conf``````freshclam.conf```\n   - ```cp /usr/local/etc/clamd.conf.sample /usr/local/etc/clamd.conf```\n   - ```cp /usr/local/etc/freshclam.conf.sample /usr/local/etc/freshclam.conf```\n- ```clamd.conf```\n``` vim /usr/local/etc/clamd.conf``` \n Example ,  # , \n\n- ```freshclam.conf```\n   -  Example ,  # , \n   -  #DatabaseOwner clamav , DatabaseOwner root\n   -  #UpdateLogFile /var/log/freshclam.log , # \n   -  #LogFileMaxSize 2M , # , , 20M\n   -  #LogRotate yes  # \n   -  #LogTime yes , # \n   -  #DatabaseDirectory /var/lib/clamav , # \n\n4) \n   1. \n    ``` freshclam```\n![image.png](/images/003.clamav.md.02.png)\n   2. \n    ``` clamscan -ri </path1/to/scan> </path2/to/scan>```\n\n   3. \n         ```30 2 * * * /bin/freshclam --datadir=/var/lib/clamav/```\n         ```30 3 * * * /bin/clamscan -ri <path/to/scan> | mail -s \"clamscan daily report\" 'youremailaddress'```\n 2 ,  3 , \n\n","source":"_posts/003.clamav.md","raw":"---\ntitle: CentOSClamav\ndate: 2022-03-03 17:30:08\ncategories: \n- [Linux]\n- [CentOS]\ntags: Clamav\n---\n\n>, Linux ,, DDos . Linux , ClamAV,.\n ClamAV , [ClamAV ](https://docs.clamav.net/)\n\n<!-- more -->\n\n1) \n\nhttps://www.clamav.net/downloads\n![image.png](/images/003.clamav.md.01.png)\n\n2) \n ``` rpm -ivh clamav-0.104.2.linux.x86_64.rpm ```\n\n3) \n-  ```clamd.conf``````freshclam.conf```\n   - ```cp /usr/local/etc/clamd.conf.sample /usr/local/etc/clamd.conf```\n   - ```cp /usr/local/etc/freshclam.conf.sample /usr/local/etc/freshclam.conf```\n- ```clamd.conf```\n``` vim /usr/local/etc/clamd.conf``` \n Example ,  # , \n\n- ```freshclam.conf```\n   -  Example ,  # , \n   -  #DatabaseOwner clamav , DatabaseOwner root\n   -  #UpdateLogFile /var/log/freshclam.log , # \n   -  #LogFileMaxSize 2M , # , , 20M\n   -  #LogRotate yes  # \n   -  #LogTime yes , # \n   -  #DatabaseDirectory /var/lib/clamav , # \n\n4) \n   1. \n    ``` freshclam```\n![image.png](/images/003.clamav.md.02.png)\n   2. \n    ``` clamscan -ri </path1/to/scan> </path2/to/scan>```\n\n   3. \n         ```30 2 * * * /bin/freshclam --datadir=/var/lib/clamav/```\n         ```30 3 * * * /bin/clamscan -ri <path/to/scan> | mail -s \"clamscan daily report\" 'youremailaddress'```\n 2 ,  3 , \n\n","slug":"003.clamav","published":1,"updated":"2023-03-03T05:15:16.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbcu0007yknrgcij6da8","content":"<blockquote>\n<p>, Linux ,, DDos . Linux , ClamAV,.<br> ClamAV , <a href=\"https://docs.clamav.net/\">ClamAV </a></p>\n</blockquote>\n<span id=\"more\"></span>\n\n<ol>\n<li><p><br><br><a href=\"https://www.clamav.net/downloads\">https://www.clamav.net/downloads</a><br><img src=\"/images/003.clamav.md.01.png\" alt=\"image.png\"></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n<p> <code>rpm -ivh clamav-0.104.2.linux.x86_64.rpm</code></p>\n<ol start=\"3\">\n<li></li>\n</ol>\n<ul>\n<li> <code>clamd.conf</code><code>freshclam.conf</code><ul>\n<li><code>cp /usr/local/etc/clamd.conf.sample /usr/local/etc/clamd.conf</code></li>\n<li><code>cp /usr/local/etc/freshclam.conf.sample /usr/local/etc/freshclam.conf</code></li>\n</ul>\n</li>\n<li><code>clamd.conf</code></li>\n</ul>\n<p><code> vim /usr/local/etc/clamd.conf</code> <br> Example ,  # , </p>\n<ul>\n<li><code>freshclam.conf</code><ul>\n<li> Example ,  # , </li>\n<li> #DatabaseOwner clamav , DatabaseOwner root</li>\n<li> #UpdateLogFile &#x2F;var&#x2F;log&#x2F;freshclam.log , # </li>\n<li> #LogFileMaxSize 2M , # , , 20M</li>\n<li> #LogRotate yes  # </li>\n<li> #LogTime yes , # </li>\n<li> #DatabaseDirectory &#x2F;var&#x2F;lib&#x2F;clamav , # </li>\n</ul>\n</li>\n</ul>\n<ol start=\"4\">\n<li><ol>\n<li></li>\n</ol>\n<p> <code> freshclam</code></p>\n</li>\n</ol>\n<p><img src=\"/images/003.clamav.md.02.png\" alt=\"image.png\"><br>   2. <br>    <code> clamscan -ri &lt;/path1/to/scan&gt; &lt;/path2/to/scan&gt;</code></p>\n<ol start=\"3\">\n<li><br>   <code>30 2 * * * /bin/freshclam --datadir=/var/lib/clamav/</code><br>   <code>30 3 * * * /bin/clamscan -ri &lt;path/to/scan&gt; | mail -s &quot;clamscan daily report&quot; &#39;youremailaddress&#39;</code></li>\n</ol>\n<p> 2 ,  3 , </p>\n","site":{"data":{}},"excerpt":"<blockquote>\n<p>, Linux ,, DDos . Linux , ClamAV,.<br> ClamAV , <a href=\"https://docs.clamav.net/\">ClamAV </a></p>\n</blockquote>","more":"<ol>\n<li><p><br><br><a href=\"https://www.clamav.net/downloads\">https://www.clamav.net/downloads</a><br><img src=\"/images/003.clamav.md.01.png\" alt=\"image.png\"></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n<p> <code>rpm -ivh clamav-0.104.2.linux.x86_64.rpm</code></p>\n<ol start=\"3\">\n<li></li>\n</ol>\n<ul>\n<li> <code>clamd.conf</code><code>freshclam.conf</code><ul>\n<li><code>cp /usr/local/etc/clamd.conf.sample /usr/local/etc/clamd.conf</code></li>\n<li><code>cp /usr/local/etc/freshclam.conf.sample /usr/local/etc/freshclam.conf</code></li>\n</ul>\n</li>\n<li><code>clamd.conf</code></li>\n</ul>\n<p><code> vim /usr/local/etc/clamd.conf</code> <br> Example ,  # , </p>\n<ul>\n<li><code>freshclam.conf</code><ul>\n<li> Example ,  # , </li>\n<li> #DatabaseOwner clamav , DatabaseOwner root</li>\n<li> #UpdateLogFile &#x2F;var&#x2F;log&#x2F;freshclam.log , # </li>\n<li> #LogFileMaxSize 2M , # , , 20M</li>\n<li> #LogRotate yes  # </li>\n<li> #LogTime yes , # </li>\n<li> #DatabaseDirectory &#x2F;var&#x2F;lib&#x2F;clamav , # </li>\n</ul>\n</li>\n</ul>\n<ol start=\"4\">\n<li><ol>\n<li></li>\n</ol>\n<p> <code> freshclam</code></p>\n</li>\n</ol>\n<p><img src=\"/images/003.clamav.md.02.png\" alt=\"image.png\"><br>   2. <br>    <code> clamscan -ri &lt;/path1/to/scan&gt; &lt;/path2/to/scan&gt;</code></p>\n<ol start=\"3\">\n<li><br>   <code>30 2 * * * /bin/freshclam --datadir=/var/lib/clamav/</code><br>   <code>30 3 * * * /bin/clamscan -ri &lt;path/to/scan&gt; | mail -s &quot;clamscan daily report&quot; &#39;youremailaddress&#39;</code></li>\n</ol>\n<p> 2 ,  3 , </p>"},{"title":"LVM","date":"2022-03-03T09:30:08.000Z","_content":"\n\n> LVMLogical Volume ManagerLinuxLVM\n\n\n## \n- ```The physical media``````/dev/hda``````/dev/sda``````/dev/vda```\n\n```{% note info %}```\nNOTE:  ``` /dev/sda```  ```/dev/sda1``` ```/dev/sda``` ```sda```, ```/dev/sda1```\n256, C, D sda, sda1C, sda2D\n```{% endnote %}```\n\n- ```PV: Physical Volume```(RAID), LVM 512 UUIDLVM\n\n- ```VG: Volume Group```\n\n- ```LV: Logical Volume```\n\n- ```PE: Physical Extent```\n\n- ```LE: Logical Extent```\n\n![lvm](/images/004.lvm.md.01.png)\n\nLVM\n\n- 1.\n- 2.\n- 3.\n- 4.\nLVM\n\n\n## : (CentOS)\n\n- 0:  \n``` fdisk /dev/sdb [n, p, 1, size, t, 8e, w]```\n\n- 1:  PV\n ``` pvcreate /dev/sdb```\n\n- 2:  VG\n ``` vgextend centos /dev/sdb1```\n\n- 3: LV\n ``` lvextend -l +100%FREE /dev/centos/root```\n\n- 4: \n ``` xfs_growfs /dev/centos/root```\n\n ## : (Ubuntu)\n\n- 0:  \n``` fdisk /dev/sdb [n, p, 1, size, t, 8e, w]```\n\n- 1:  PV\n ``` pvcreate /dev/sdb```\n\n- 2:  VG\n ``` vgextend ubuntu-vg /dev/sdb1```\n\n- 3: LV\n ``` lvextend -l +100%FREE /dev/ubuntu-vg/ubuntu-lv```\n\n- 4: \n ``` resize2fs /dev/ubuntu-vg/ubuntu-lv```\n\n```{% note info %}NOTE:```\nP.S  xfs  xfs_growfs: /dev/centos/root is not a mounted XFS filesystem\n\n xfs : ```xfs_growfs + ```\n ext2/3/4: ```resize2fs + ```\n```{% endnote %}```\n\n- \n``` df -Thl```\n![df -Thl](/images/004.lvm.md.02.png)\n``` lsblk ```\n![lsblk](/images/004.lvm.md.03.png)\n\n\n\n## : lvm\n\n,/data; /var/lib/docker\n\n![](/images/004.lvm.md.04.png)\n\n``` yaml\n\n#  pv\npvcreate /dev/sdb1   \n\n#  vg0\nvgcreate vg0 /dev/sdb1\n\n\n#  lv0  lv1\nlvcreate  -l 50%FREE -n lv0 vg0\n\nlvcreate  -l 100%FREE -n lv1 vg0\n\n# \nmkfs.xfs /dev/vg0/lv0\nmkfs.xfs /dev/vg0/lv0\n\n# \necho \"/dev/vg0/lv0 /data/  xfs  defaults   0 0\"  >> /etc/fstab\necho \"/dev/vg0/lv1 /var/lib/docker  xfs  defaults   0 0\"  >> /etc/fstab\n\n```","source":"_posts/004.lvm.md","raw":"---\ntitle: LVM\ndate: 2022-03-03 17:30:08\ncategories: \n- [Linux]\n- [CentOS]\n- [Ubuntu]\ntags: LVM\n---\n\n\n> LVMLogical Volume ManagerLinuxLVM\n\n\n## \n- ```The physical media``````/dev/hda``````/dev/sda``````/dev/vda```\n\n```{% note info %}```\nNOTE:  ``` /dev/sda```  ```/dev/sda1``` ```/dev/sda``` ```sda```, ```/dev/sda1```\n256, C, D sda, sda1C, sda2D\n```{% endnote %}```\n\n- ```PV: Physical Volume```(RAID), LVM 512 UUIDLVM\n\n- ```VG: Volume Group```\n\n- ```LV: Logical Volume```\n\n- ```PE: Physical Extent```\n\n- ```LE: Logical Extent```\n\n![lvm](/images/004.lvm.md.01.png)\n\nLVM\n\n- 1.\n- 2.\n- 3.\n- 4.\nLVM\n\n\n## : (CentOS)\n\n- 0:  \n``` fdisk /dev/sdb [n, p, 1, size, t, 8e, w]```\n\n- 1:  PV\n ``` pvcreate /dev/sdb```\n\n- 2:  VG\n ``` vgextend centos /dev/sdb1```\n\n- 3: LV\n ``` lvextend -l +100%FREE /dev/centos/root```\n\n- 4: \n ``` xfs_growfs /dev/centos/root```\n\n ## : (Ubuntu)\n\n- 0:  \n``` fdisk /dev/sdb [n, p, 1, size, t, 8e, w]```\n\n- 1:  PV\n ``` pvcreate /dev/sdb```\n\n- 2:  VG\n ``` vgextend ubuntu-vg /dev/sdb1```\n\n- 3: LV\n ``` lvextend -l +100%FREE /dev/ubuntu-vg/ubuntu-lv```\n\n- 4: \n ``` resize2fs /dev/ubuntu-vg/ubuntu-lv```\n\n```{% note info %}NOTE:```\nP.S  xfs  xfs_growfs: /dev/centos/root is not a mounted XFS filesystem\n\n xfs : ```xfs_growfs + ```\n ext2/3/4: ```resize2fs + ```\n```{% endnote %}```\n\n- \n``` df -Thl```\n![df -Thl](/images/004.lvm.md.02.png)\n``` lsblk ```\n![lsblk](/images/004.lvm.md.03.png)\n\n\n\n## : lvm\n\n,/data; /var/lib/docker\n\n![](/images/004.lvm.md.04.png)\n\n``` yaml\n\n#  pv\npvcreate /dev/sdb1   \n\n#  vg0\nvgcreate vg0 /dev/sdb1\n\n\n#  lv0  lv1\nlvcreate  -l 50%FREE -n lv0 vg0\n\nlvcreate  -l 100%FREE -n lv1 vg0\n\n# \nmkfs.xfs /dev/vg0/lv0\nmkfs.xfs /dev/vg0/lv0\n\n# \necho \"/dev/vg0/lv0 /data/  xfs  defaults   0 0\"  >> /etc/fstab\necho \"/dev/vg0/lv1 /var/lib/docker  xfs  defaults   0 0\"  >> /etc/fstab\n\n```","slug":"004.lvm","published":1,"updated":"2023-09-26T07:58:16.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbcw0009yknr87ybcoog","content":"<blockquote>\n<p>LVMLogical Volume ManagerLinuxLVM</p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><code>The physical media</code><code>/dev/hda</code><code>/dev/sda</code><code>/dev/vda</code></li>\n</ul>\n<p><code>&#123;% note info %&#125;```\nNOTE:  ``` /dev/sda```  ```/dev/sda1``` ```/dev/sda``` ```sda```, ```/dev/sda1```\n256, C, D sda, sda1C, sda2D\n```&#123;% endnote %&#125;</code></p>\n<ul>\n<li><p><code>PV: Physical Volume</code>(RAID), LVM 512 UUIDLVM</p>\n</li>\n<li><p><code>VG: Volume Group</code></p>\n</li>\n<li><p><code>LV: Logical Volume</code></p>\n</li>\n<li><p><code>PE: Physical Extent</code></p>\n</li>\n<li><p><code>LE: Logical Extent</code></p>\n</li>\n</ul>\n<p><img src=\"/images/004.lvm.md.01.png\" alt=\"lvm\"></p>\n<p>LVM</p>\n<ul>\n<li>1.</li>\n<li>2.</li>\n<li>3.</li>\n<li>4.<br>LVM</li>\n</ul>\n<h2 id=\"--CentOS\"><a href=\"#--CentOS\" class=\"headerlink\" title=\": (CentOS)\"></a>: (CentOS)</h2><ul>\n<li>0: </li>\n</ul>\n<p><code> fdisk /dev/sdb [n, p, 1, size, t, 8e, w]</code></p>\n<ul>\n<li>1:  PV</li>\n</ul>\n<p> <code> pvcreate /dev/sdb</code></p>\n<ul>\n<li>2:  VG</li>\n</ul>\n<p> <code> vgextend centos /dev/sdb1</code></p>\n<ul>\n<li>3: LV</li>\n</ul>\n<p> <code> lvextend -l +100%FREE /dev/centos/root</code></p>\n<ul>\n<li>4: </li>\n</ul>\n<p> <code> xfs_growfs /dev/centos/root</code></p>\n<h2 id=\"--Ubuntu\"><a href=\"#--Ubuntu\" class=\"headerlink\" title=\": (Ubuntu)\"></a>: (Ubuntu)</h2><ul>\n<li>0: </li>\n</ul>\n<p><code> fdisk /dev/sdb [n, p, 1, size, t, 8e, w]</code></p>\n<ul>\n<li>1:  PV</li>\n</ul>\n<p> <code> pvcreate /dev/sdb</code></p>\n<ul>\n<li>2:  VG</li>\n</ul>\n<p> <code> vgextend ubuntu-vg /dev/sdb1</code></p>\n<ul>\n<li>3: LV</li>\n</ul>\n<p> <code> lvextend -l +100%FREE /dev/ubuntu-vg/ubuntu-lv</code></p>\n<ul>\n<li>4: </li>\n</ul>\n<p> <code> resize2fs /dev/ubuntu-vg/ubuntu-lv</code></p>\n<p><code>&#123;% note info %&#125;NOTE:```\nP.S  xfs  xfs_growfs: /dev/centos/root is not a mounted XFS filesystem\n\n xfs : ```xfs_growfs + ```\n ext2/3/4: ```resize2fs + ```\n```&#123;% endnote %&#125;</code></p>\n<ul>\n<li></li>\n</ul>\n<p><code> df -Thl</code><br><img src=\"/images/004.lvm.md.02.png\" alt=\"df -Thl\"><br><code>lsblk</code><br><img src=\"/images/004.lvm.md.03.png\" alt=\"lsblk\"></p>\n<h2 id=\"-lvm\"><a href=\"#-lvm\" class=\"headerlink\" title=\": lvm\"></a>: lvm</h2><p>,&#x2F;data; &#x2F;var&#x2F;lib&#x2F;docker</p>\n<p><img src=\"/images/004.lvm.md.04.png\" alt=\"\"></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  pv</span></span><br><span class=\"line\"><span class=\"string\">pvcreate</span> <span class=\"string\">/dev/sdb1</span>   </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  vg0</span></span><br><span class=\"line\"><span class=\"string\">vgcreate</span> <span class=\"string\">vg0</span> <span class=\"string\">/dev/sdb1</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  lv0  lv1</span></span><br><span class=\"line\"><span class=\"string\">lvcreate</span>  <span class=\"string\">-l</span> <span class=\"number\">50</span><span class=\"string\">%FREE</span> <span class=\"string\">-n</span> <span class=\"string\">lv0</span> <span class=\"string\">vg0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">lvcreate</span>  <span class=\"string\">-l</span> <span class=\"number\">100</span><span class=\"string\">%FREE</span> <span class=\"string\">-n</span> <span class=\"string\">lv1</span> <span class=\"string\">vg0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"string\">mkfs.xfs</span> <span class=\"string\">/dev/vg0/lv0</span></span><br><span class=\"line\"><span class=\"string\">mkfs.xfs</span> <span class=\"string\">/dev/vg0/lv0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"string\">echo</span> <span class=\"string\">&quot;/dev/vg0/lv0 /data/  xfs  defaults   0 0&quot;</span>  <span class=\"string\">&gt;&gt;</span> <span class=\"string\">/etc/fstab</span></span><br><span class=\"line\"><span class=\"string\">echo</span> <span class=\"string\">&quot;/dev/vg0/lv1 /var/lib/docker  xfs  defaults   0 0&quot;</span>  <span class=\"string\">&gt;&gt;</span> <span class=\"string\">/etc/fstab</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>LVMLogical Volume ManagerLinuxLVM</p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><code>The physical media</code><code>/dev/hda</code><code>/dev/sda</code><code>/dev/vda</code></li>\n</ul>\n<p><code>&#123;% note info %&#125;```\nNOTE:  ``` /dev/sda```  ```/dev/sda1``` ```/dev/sda``` ```sda```, ```/dev/sda1```\n256, C, D sda, sda1C, sda2D\n```&#123;% endnote %&#125;</code></p>\n<ul>\n<li><p><code>PV: Physical Volume</code>(RAID), LVM 512 UUIDLVM</p>\n</li>\n<li><p><code>VG: Volume Group</code></p>\n</li>\n<li><p><code>LV: Logical Volume</code></p>\n</li>\n<li><p><code>PE: Physical Extent</code></p>\n</li>\n<li><p><code>LE: Logical Extent</code></p>\n</li>\n</ul>\n<p><img src=\"/images/004.lvm.md.01.png\" alt=\"lvm\"></p>\n<p>LVM</p>\n<ul>\n<li>1.</li>\n<li>2.</li>\n<li>3.</li>\n<li>4.<br>LVM</li>\n</ul>\n<h2 id=\"--CentOS\"><a href=\"#--CentOS\" class=\"headerlink\" title=\": (CentOS)\"></a>: (CentOS)</h2><ul>\n<li>0: </li>\n</ul>\n<p><code> fdisk /dev/sdb [n, p, 1, size, t, 8e, w]</code></p>\n<ul>\n<li>1:  PV</li>\n</ul>\n<p> <code> pvcreate /dev/sdb</code></p>\n<ul>\n<li>2:  VG</li>\n</ul>\n<p> <code> vgextend centos /dev/sdb1</code></p>\n<ul>\n<li>3: LV</li>\n</ul>\n<p> <code> lvextend -l +100%FREE /dev/centos/root</code></p>\n<ul>\n<li>4: </li>\n</ul>\n<p> <code> xfs_growfs /dev/centos/root</code></p>\n<h2 id=\"--Ubuntu\"><a href=\"#--Ubuntu\" class=\"headerlink\" title=\": (Ubuntu)\"></a>: (Ubuntu)</h2><ul>\n<li>0: </li>\n</ul>\n<p><code> fdisk /dev/sdb [n, p, 1, size, t, 8e, w]</code></p>\n<ul>\n<li>1:  PV</li>\n</ul>\n<p> <code> pvcreate /dev/sdb</code></p>\n<ul>\n<li>2:  VG</li>\n</ul>\n<p> <code> vgextend ubuntu-vg /dev/sdb1</code></p>\n<ul>\n<li>3: LV</li>\n</ul>\n<p> <code> lvextend -l +100%FREE /dev/ubuntu-vg/ubuntu-lv</code></p>\n<ul>\n<li>4: </li>\n</ul>\n<p> <code> resize2fs /dev/ubuntu-vg/ubuntu-lv</code></p>\n<p><code>&#123;% note info %&#125;NOTE:```\nP.S  xfs  xfs_growfs: /dev/centos/root is not a mounted XFS filesystem\n\n xfs : ```xfs_growfs + ```\n ext2/3/4: ```resize2fs + ```\n```&#123;% endnote %&#125;</code></p>\n<ul>\n<li></li>\n</ul>\n<p><code> df -Thl</code><br><img src=\"/images/004.lvm.md.02.png\" alt=\"df -Thl\"><br><code>lsblk</code><br><img src=\"/images/004.lvm.md.03.png\" alt=\"lsblk\"></p>\n<h2 id=\"-lvm\"><a href=\"#-lvm\" class=\"headerlink\" title=\": lvm\"></a>: lvm</h2><p>,&#x2F;data; &#x2F;var&#x2F;lib&#x2F;docker</p>\n<p><img src=\"/images/004.lvm.md.04.png\" alt=\"\"></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  pv</span></span><br><span class=\"line\"><span class=\"string\">pvcreate</span> <span class=\"string\">/dev/sdb1</span>   </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  vg0</span></span><br><span class=\"line\"><span class=\"string\">vgcreate</span> <span class=\"string\">vg0</span> <span class=\"string\">/dev/sdb1</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  lv0  lv1</span></span><br><span class=\"line\"><span class=\"string\">lvcreate</span>  <span class=\"string\">-l</span> <span class=\"number\">50</span><span class=\"string\">%FREE</span> <span class=\"string\">-n</span> <span class=\"string\">lv0</span> <span class=\"string\">vg0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">lvcreate</span>  <span class=\"string\">-l</span> <span class=\"number\">100</span><span class=\"string\">%FREE</span> <span class=\"string\">-n</span> <span class=\"string\">lv1</span> <span class=\"string\">vg0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"string\">mkfs.xfs</span> <span class=\"string\">/dev/vg0/lv0</span></span><br><span class=\"line\"><span class=\"string\">mkfs.xfs</span> <span class=\"string\">/dev/vg0/lv0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"string\">echo</span> <span class=\"string\">&quot;/dev/vg0/lv0 /data/  xfs  defaults   0 0&quot;</span>  <span class=\"string\">&gt;&gt;</span> <span class=\"string\">/etc/fstab</span></span><br><span class=\"line\"><span class=\"string\">echo</span> <span class=\"string\">&quot;/dev/vg0/lv1 /var/lib/docker  xfs  defaults   0 0&quot;</span>  <span class=\"string\">&gt;&gt;</span> <span class=\"string\">/etc/fstab</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>"},{"title":"ElasticSearch","date":"2022-02-17T09:30:08.000Z","_content":"\n>Elasticsearch  Elasticsearch Apache Lucene Elasticsearch N.V. Elastic2010 \nhttps://www.elastic.co/guide/en/elastic-stack/index.html\n\n**:  CentOS7.9(vm) ;  ElasticSearch5.6.7  ; Java1.8.0_321**\n**, ,  : rpm  tar**\n\n##   rpm \n### Java \n1) jdk \n(Oracle) : https://www.oracle.com/java/technologies/downloads/\n rpm \n![image.png](/images/005.elasticsearch.md.01.png)\n\n2) win centos7\n``` scp jdk-8u321-linux-x64.rpm root@192.168.8.132:/root ```\n![image.png](/images/005.elasticsearch.md.02.png)\n\n3)  \n``` rpm -ivh jdk-8u321-linux-x64.rpm```\n4) Java\njava, \n ``` vim /etc/profile ```\n:\n```export JAVA_HOME=/usr/bin/```\n```export PATH=$JAVA_HOME/:$PATH```\n\n```$CLASSPTAH``` , \n5) Java\n```java -version``` OR ``` javac```\nOK\n![image.png](/images/005.elasticsearch.md.03.png)\n\n### ElasticSearch \nElasticSearch Java. \n\n1) ElasticSearch \nhttps://www.elastic.co/cn/downloads/past-releases/elasticsearch-5-6-7\n![image.png](/images/005.elasticsearch.md.04.png)\n\n2) centos7\n```scp elasticsearch-5.6.7.rpm root@192.168.132:/root```\n3)  ElasticSearch \n``` rpm -ivh elasticsearch-5.6.7.rpm```\n4)  systemd  elasticsearch\n``` systemctl  daemon-reload ```\n``` systemctl  enable elasticsearch-service ```\n5)  elasticsearch\n``` systemctl start elasticsearch ```\n6) \n``` curl localhost:9200 ```\n\n![image.png](/images/005.elasticsearch.md.05.png)\n\n#### P.S \n*  ```systemctl start elasticsearch``` root.\n ``` htop ```  elasticsearch\n![image.png](/images/005.elasticsearch.md.06.png)\n\n*  no java in(/usr/local...)\ntarjava,  elasticsearchjava. \n\n####  Java  elasticsearch .  rpm  tar. \n\n## tar \n\n1) Java  elasticsearch \n[Java ](https://www.oracle.com/java/technologies/downloads/)\n[elasticsearch ](https://www.elastic.co/cn/downloads/past-releases/elasticsearch-5-6-7)\n\n2) \n``` tar -zxvf /*tar```\n\n3)  elasticsearch  \n``` groupadd es ```\n``` useradd es -g es ```\n``` passwd es ```\n root \n(, bash, java)\n\n4) java\n``` vim /etc/profile```\n:\n```export JAVA_HOME=/jdk/jdk1.8.0_321/bin```\n```export PATH=$JAVA_HOME/:$PATH```\n\n* rootJava\n\nes \n ``` vim /home/es/.bash_profile```\n:\n```export JAVA_HOME=/jdk/jdk1.8.0_321/bin```\n```export PATH=$JAVA_HOME/:$PATH```\n\n5)  es   elasticsearch\n``` su es ```\n``` ./elasticsearch/bin/elasticsearch```\n\n:\nelasticsearch5.6.7 https://www.elastic.co/guide/en/elasticsearch/reference/5.6/rpm.html\nsystemd https://yo.zgserver.com/systemd-19.html\n ####### ...\n\n\n ## \n\n### 1. readonlyrestelasticsearch\n\n - elasticsearch.ymlxpack\n ``` xpace.security.enabled: false ```\n ![images](/images/005.elasticsearch.md.07.png)\n\n### 2. elasticsearch-plugincould not find java in JAVA_HOME at xxxxxx\n\n- root, sudo\n ![images](/images/005.elasticsearch.md.08.png)","source":"_posts/005.elasticsearch.md","raw":"---\ntitle: ElasticSearch\ndate: 2022-02-17 17:30:08\ncategories: \n- [Linux]\n- [CentOS]\ntags: elasticsearch\n---\n\n>Elasticsearch  Elasticsearch Apache Lucene Elasticsearch N.V. Elastic2010 \nhttps://www.elastic.co/guide/en/elastic-stack/index.html\n\n**:  CentOS7.9(vm) ;  ElasticSearch5.6.7  ; Java1.8.0_321**\n**, ,  : rpm  tar**\n\n##   rpm \n### Java \n1) jdk \n(Oracle) : https://www.oracle.com/java/technologies/downloads/\n rpm \n![image.png](/images/005.elasticsearch.md.01.png)\n\n2) win centos7\n``` scp jdk-8u321-linux-x64.rpm root@192.168.8.132:/root ```\n![image.png](/images/005.elasticsearch.md.02.png)\n\n3)  \n``` rpm -ivh jdk-8u321-linux-x64.rpm```\n4) Java\njava, \n ``` vim /etc/profile ```\n:\n```export JAVA_HOME=/usr/bin/```\n```export PATH=$JAVA_HOME/:$PATH```\n\n```$CLASSPTAH``` , \n5) Java\n```java -version``` OR ``` javac```\nOK\n![image.png](/images/005.elasticsearch.md.03.png)\n\n### ElasticSearch \nElasticSearch Java. \n\n1) ElasticSearch \nhttps://www.elastic.co/cn/downloads/past-releases/elasticsearch-5-6-7\n![image.png](/images/005.elasticsearch.md.04.png)\n\n2) centos7\n```scp elasticsearch-5.6.7.rpm root@192.168.132:/root```\n3)  ElasticSearch \n``` rpm -ivh elasticsearch-5.6.7.rpm```\n4)  systemd  elasticsearch\n``` systemctl  daemon-reload ```\n``` systemctl  enable elasticsearch-service ```\n5)  elasticsearch\n``` systemctl start elasticsearch ```\n6) \n``` curl localhost:9200 ```\n\n![image.png](/images/005.elasticsearch.md.05.png)\n\n#### P.S \n*  ```systemctl start elasticsearch``` root.\n ``` htop ```  elasticsearch\n![image.png](/images/005.elasticsearch.md.06.png)\n\n*  no java in(/usr/local...)\ntarjava,  elasticsearchjava. \n\n####  Java  elasticsearch .  rpm  tar. \n\n## tar \n\n1) Java  elasticsearch \n[Java ](https://www.oracle.com/java/technologies/downloads/)\n[elasticsearch ](https://www.elastic.co/cn/downloads/past-releases/elasticsearch-5-6-7)\n\n2) \n``` tar -zxvf /*tar```\n\n3)  elasticsearch  \n``` groupadd es ```\n``` useradd es -g es ```\n``` passwd es ```\n root \n(, bash, java)\n\n4) java\n``` vim /etc/profile```\n:\n```export JAVA_HOME=/jdk/jdk1.8.0_321/bin```\n```export PATH=$JAVA_HOME/:$PATH```\n\n* rootJava\n\nes \n ``` vim /home/es/.bash_profile```\n:\n```export JAVA_HOME=/jdk/jdk1.8.0_321/bin```\n```export PATH=$JAVA_HOME/:$PATH```\n\n5)  es   elasticsearch\n``` su es ```\n``` ./elasticsearch/bin/elasticsearch```\n\n:\nelasticsearch5.6.7 https://www.elastic.co/guide/en/elasticsearch/reference/5.6/rpm.html\nsystemd https://yo.zgserver.com/systemd-19.html\n ####### ...\n\n\n ## \n\n### 1. readonlyrestelasticsearch\n\n - elasticsearch.ymlxpack\n ``` xpace.security.enabled: false ```\n ![images](/images/005.elasticsearch.md.07.png)\n\n### 2. elasticsearch-plugincould not find java in JAVA_HOME at xxxxxx\n\n- root, sudo\n ![images](/images/005.elasticsearch.md.08.png)","slug":"005.elasticsearch","published":1,"updated":"2023-03-03T05:15:17.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbcx000byknr9rf4hoqn","content":"<blockquote>\n<p>Elasticsearch  Elasticsearch Apache Lucene Elasticsearch N.V. Elastic2010 <br><a href=\"https://www.elastic.co/guide/en/elastic-stack/index.html\">https://www.elastic.co/guide/en/elastic-stack/index.html</a></p>\n</blockquote>\n<p><strong>:  CentOS7.9(vm) ;  ElasticSearch5.6.7  ; Java1.8.0_321</strong><br><strong>, ,  : rpm  tar</strong></p>\n<h2 id=\"-rpm-\"><a href=\"#-rpm-\" class=\"headerlink\" title=\" rpm \"></a> rpm </h2><h3 id=\"Java-\"><a href=\"#Java-\" class=\"headerlink\" title=\"Java \"></a>Java </h3><ol>\n<li><p>jdk<br>(Oracle) : <a href=\"https://www.oracle.com/java/technologies/downloads/\">https://www.oracle.com/java/technologies/downloads/</a><br> rpm <br><img src=\"/images/005.elasticsearch.md.01.png\" alt=\"image.png\"></p>\n</li>\n<li><p>win centos7</p>\n</li>\n</ol>\n<p><code>scp jdk-8u321-linux-x64.rpm root@192.168.8.132:/root</code><br><img src=\"/images/005.elasticsearch.md.02.png\" alt=\"image.png\"></p>\n<ol start=\"3\">\n<li></li>\n</ol>\n<p><code> rpm -ivh jdk-8u321-linux-x64.rpm</code><br>4) Java<br>java, <br> <code>vim /etc/profile</code><br>:<br><code>export JAVA_HOME=/usr/bin/</code><br><code>export PATH=$JAVA_HOME/:$PATH</code></p>\n<p><code>$CLASSPTAH</code> , <br>5) Java<br><code>java -version</code> OR <code> javac</code><br>OK<br><img src=\"/images/005.elasticsearch.md.03.png\" alt=\"image.png\"></p>\n<h3 id=\"ElasticSearch-\"><a href=\"#ElasticSearch-\" class=\"headerlink\" title=\"ElasticSearch \"></a>ElasticSearch </h3><p>ElasticSearch Java. </p>\n<ol>\n<li><p>ElasticSearch<br><a href=\"https://www.elastic.co/cn/downloads/past-releases/elasticsearch-5-6-7\">https://www.elastic.co/cn/downloads/past-releases/elasticsearch-5-6-7</a><br><img src=\"/images/005.elasticsearch.md.04.png\" alt=\"image.png\"></p>\n</li>\n<li><p>centos7</p>\n</li>\n</ol>\n<p><code>scp elasticsearch-5.6.7.rpm root@192.168.132:/root</code><br>3)  ElasticSearch<br><code> rpm -ivh elasticsearch-5.6.7.rpm</code><br>4)  systemd  elasticsearch<br><code>systemctl  daemon-reload</code><br><code>systemctl  enable elasticsearch-service</code><br>5)  elasticsearch<br><code>systemctl start elasticsearch</code><br>6) <br><code>curl localhost:9200</code><br><br><img src=\"/images/005.elasticsearch.md.05.png\" alt=\"image.png\"></p>\n<h4 id=\"P-S\"><a href=\"#P-S\" class=\"headerlink\" title=\"P.S\"></a>P.S</h4><ul>\n<li> <code>systemctl start elasticsearch</code> root.<br> <code>htop</code>  elasticsearch</li>\n</ul>\n<p><img src=\"/images/005.elasticsearch.md.06.png\" alt=\"image.png\"></p>\n<ul>\n<li> no java in(&#x2F;usr&#x2F;local)<br>tarjava,  elasticsearchjava.</li>\n</ul>\n<h4 id=\"-Java--elasticsearch---rpm--tar\"><a href=\"#-Java--elasticsearch---rpm--tar\" class=\"headerlink\" title=\" Java  elasticsearch .  rpm  tar.\"></a> Java  elasticsearch .  rpm  tar.</h4><h2 id=\"tar-\"><a href=\"#tar-\" class=\"headerlink\" title=\"tar \"></a>tar </h2><ol>\n<li><p>Java  elasticsearch <br><a href=\"https://www.oracle.com/java/technologies/downloads/\">Java </a><br><a href=\"https://www.elastic.co/cn/downloads/past-releases/elasticsearch-5-6-7\">elasticsearch </a></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n<p><code> tar -zxvf /*tar</code></p>\n<ol start=\"3\">\n<li> elasticsearch  </li>\n</ol>\n<p><code>groupadd es</code><br><code>useradd es -g es</code><br><code>passwd es</code><br> root <br>(, bash, java)</p>\n<ol start=\"4\">\n<li>java<br><code> vim /etc/profile</code><br>:</li>\n</ol>\n<p><code>export JAVA_HOME=/jdk/jdk1.8.0_321/bin</code><br><code>export PATH=$JAVA_HOME/:$PATH</code></p>\n<ul>\n<li>rootJava</li>\n</ul>\n<p>es <br> <code> vim /home/es/.bash_profile</code><br>:<br><code>export JAVA_HOME=/jdk/jdk1.8.0_321/bin</code><br><code>export PATH=$JAVA_HOME/:$PATH</code></p>\n<ol start=\"5\">\n<li> es   elasticsearch</li>\n</ol>\n<p><code>su es</code><br><code> ./elasticsearch/bin/elasticsearch</code></p>\n<p>:<br>elasticsearch5.6.7 <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/5.6/rpm.html\">https://www.elastic.co/guide/en/elasticsearch/reference/5.6/rpm.html</a><br>systemd <a href=\"https://yo.zgserver.com/systemd-19.html\">https://yo.zgserver.com/systemd-19.html</a><br> ####### </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"1-readonlyrestelasticsearch\"><a href=\"#1-readonlyrestelasticsearch\" class=\"headerlink\" title=\"1. readonlyrestelasticsearch\"></a>1. readonlyrestelasticsearch</h3><ul>\n<li>elasticsearch.ymlxpack</li>\n</ul>\n<p> <code>xpace.security.enabled: false</code><br> <img src=\"/images/005.elasticsearch.md.07.png\" alt=\"images\"></p>\n<h3 id=\"2-elasticsearch-plugincould-not-find-java-in-JAVA-HOME-at-xxxxxx\"><a href=\"#2-elasticsearch-plugincould-not-find-java-in-JAVA-HOME-at-xxxxxx\" class=\"headerlink\" title=\"2. elasticsearch-plugincould not find java in JAVA_HOME at xxxxxx\"></a>2. elasticsearch-plugincould not find java in JAVA_HOME at xxxxxx</h3><ul>\n<li>root, sudo<br> <img src=\"/images/005.elasticsearch.md.08.png\" alt=\"images\"></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>Elasticsearch  Elasticsearch Apache Lucene Elasticsearch N.V. Elastic2010 <br><a href=\"https://www.elastic.co/guide/en/elastic-stack/index.html\">https://www.elastic.co/guide/en/elastic-stack/index.html</a></p>\n</blockquote>\n<p><strong>:  CentOS7.9(vm) ;  ElasticSearch5.6.7  ; Java1.8.0_321</strong><br><strong>, ,  : rpm  tar</strong></p>\n<h2 id=\"-rpm-\"><a href=\"#-rpm-\" class=\"headerlink\" title=\" rpm \"></a> rpm </h2><h3 id=\"Java-\"><a href=\"#Java-\" class=\"headerlink\" title=\"Java \"></a>Java </h3><ol>\n<li><p>jdk<br>(Oracle) : <a href=\"https://www.oracle.com/java/technologies/downloads/\">https://www.oracle.com/java/technologies/downloads/</a><br> rpm <br><img src=\"/images/005.elasticsearch.md.01.png\" alt=\"image.png\"></p>\n</li>\n<li><p>win centos7</p>\n</li>\n</ol>\n<p><code>scp jdk-8u321-linux-x64.rpm root@192.168.8.132:/root</code><br><img src=\"/images/005.elasticsearch.md.02.png\" alt=\"image.png\"></p>\n<ol start=\"3\">\n<li></li>\n</ol>\n<p><code> rpm -ivh jdk-8u321-linux-x64.rpm</code><br>4) Java<br>java, <br> <code>vim /etc/profile</code><br>:<br><code>export JAVA_HOME=/usr/bin/</code><br><code>export PATH=$JAVA_HOME/:$PATH</code></p>\n<p><code>$CLASSPTAH</code> , <br>5) Java<br><code>java -version</code> OR <code> javac</code><br>OK<br><img src=\"/images/005.elasticsearch.md.03.png\" alt=\"image.png\"></p>\n<h3 id=\"ElasticSearch-\"><a href=\"#ElasticSearch-\" class=\"headerlink\" title=\"ElasticSearch \"></a>ElasticSearch </h3><p>ElasticSearch Java. </p>\n<ol>\n<li><p>ElasticSearch<br><a href=\"https://www.elastic.co/cn/downloads/past-releases/elasticsearch-5-6-7\">https://www.elastic.co/cn/downloads/past-releases/elasticsearch-5-6-7</a><br><img src=\"/images/005.elasticsearch.md.04.png\" alt=\"image.png\"></p>\n</li>\n<li><p>centos7</p>\n</li>\n</ol>\n<p><code>scp elasticsearch-5.6.7.rpm root@192.168.132:/root</code><br>3)  ElasticSearch<br><code> rpm -ivh elasticsearch-5.6.7.rpm</code><br>4)  systemd  elasticsearch<br><code>systemctl  daemon-reload</code><br><code>systemctl  enable elasticsearch-service</code><br>5)  elasticsearch<br><code>systemctl start elasticsearch</code><br>6) <br><code>curl localhost:9200</code><br><br><img src=\"/images/005.elasticsearch.md.05.png\" alt=\"image.png\"></p>\n<h4 id=\"P-S\"><a href=\"#P-S\" class=\"headerlink\" title=\"P.S\"></a>P.S</h4><ul>\n<li> <code>systemctl start elasticsearch</code> root.<br> <code>htop</code>  elasticsearch</li>\n</ul>\n<p><img src=\"/images/005.elasticsearch.md.06.png\" alt=\"image.png\"></p>\n<ul>\n<li> no java in(&#x2F;usr&#x2F;local)<br>tarjava,  elasticsearchjava.</li>\n</ul>\n<h4 id=\"-Java--elasticsearch---rpm--tar\"><a href=\"#-Java--elasticsearch---rpm--tar\" class=\"headerlink\" title=\" Java  elasticsearch .  rpm  tar.\"></a> Java  elasticsearch .  rpm  tar.</h4><h2 id=\"tar-\"><a href=\"#tar-\" class=\"headerlink\" title=\"tar \"></a>tar </h2><ol>\n<li><p>Java  elasticsearch <br><a href=\"https://www.oracle.com/java/technologies/downloads/\">Java </a><br><a href=\"https://www.elastic.co/cn/downloads/past-releases/elasticsearch-5-6-7\">elasticsearch </a></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n<p><code> tar -zxvf /*tar</code></p>\n<ol start=\"3\">\n<li> elasticsearch  </li>\n</ol>\n<p><code>groupadd es</code><br><code>useradd es -g es</code><br><code>passwd es</code><br> root <br>(, bash, java)</p>\n<ol start=\"4\">\n<li>java<br><code> vim /etc/profile</code><br>:</li>\n</ol>\n<p><code>export JAVA_HOME=/jdk/jdk1.8.0_321/bin</code><br><code>export PATH=$JAVA_HOME/:$PATH</code></p>\n<ul>\n<li>rootJava</li>\n</ul>\n<p>es <br> <code> vim /home/es/.bash_profile</code><br>:<br><code>export JAVA_HOME=/jdk/jdk1.8.0_321/bin</code><br><code>export PATH=$JAVA_HOME/:$PATH</code></p>\n<ol start=\"5\">\n<li> es   elasticsearch</li>\n</ol>\n<p><code>su es</code><br><code> ./elasticsearch/bin/elasticsearch</code></p>\n<p>:<br>elasticsearch5.6.7 <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/5.6/rpm.html\">https://www.elastic.co/guide/en/elasticsearch/reference/5.6/rpm.html</a><br>systemd <a href=\"https://yo.zgserver.com/systemd-19.html\">https://yo.zgserver.com/systemd-19.html</a><br> ####### </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"1-readonlyrestelasticsearch\"><a href=\"#1-readonlyrestelasticsearch\" class=\"headerlink\" title=\"1. readonlyrestelasticsearch\"></a>1. readonlyrestelasticsearch</h3><ul>\n<li>elasticsearch.ymlxpack</li>\n</ul>\n<p> <code>xpace.security.enabled: false</code><br> <img src=\"/images/005.elasticsearch.md.07.png\" alt=\"images\"></p>\n<h3 id=\"2-elasticsearch-plugincould-not-find-java-in-JAVA-HOME-at-xxxxxx\"><a href=\"#2-elasticsearch-plugincould-not-find-java-in-JAVA-HOME-at-xxxxxx\" class=\"headerlink\" title=\"2. elasticsearch-plugincould not find java in JAVA_HOME at xxxxxx\"></a>2. elasticsearch-plugincould not find java in JAVA_HOME at xxxxxx</h3><ul>\n<li>root, sudo<br> <img src=\"/images/005.elasticsearch.md.08.png\" alt=\"images\"></li>\n</ul>\n"},{"title":"iptables","date":"2022-02-16T03:11:08.000Z","_content":"\n\n# [](https://www.jianshu.com/p/70f7efe3a227)\n**Cent7iptablesfirewalldiptables**\n\n>RHEL7firewalldnetfilteriptables\nfirewalldiptables\n\n**firewalld  iptables**\n\n> - firewalldiptables\n> - firewalld\n> - ```firewalld``````iptables```\n> - firewalldiptablesnetfilterfirewalldiptablesnetfilterfirewalldiptables\n\n**firewalldiptablesiptablesiptablesiptablesfirewalldfirewalldfirewalld**\n\n#  \n\n## 1.1  firewalld\n``` systemctr disable firewalld```\n``` systemctl stop firewalld```\n\n## 1.2  iptalbes\n``` yum install iptables iptables-services```\n\n## 1.3  iptables\n``` systemctl enable iptables```\n``` systemctl start iptables ```\n\n## 1.4  iptables\n``` cp /etc/sysconfig/iptables /etc/sysconfig/iptables-backup```\n\n#  \n\n## 2.1 \n``` iptables -L -n -v --line-number```\n\n## 2.2 ()\n``` iptables -nvL --line-number ```\n\n## 2.3 \n``` iptables -I INPUT -p tcp --dport 80 -j ACCEPT```\n``` iptables -A OUTPUT -p tcp --sport 80 -j ACCEPT```\n\n## 2.4 \n``` iptables -I INPUT -s 192.168.1.0/24 -p tcp --dport 80 -j ACCEPT```\n\n## 2.5 \n``` iptables -D INPUT 1```\n``` iptables -D FORWARD 1```\n\n## 2.6 ip\n\n``` iptables -I INPUT -p tcp --dport 80 -j DROP```\n``` iptables - I INPUT -m iprange --src-range 192.168.1.200-192.168.1-210 -p tcp --dport 80 -j ACCEPT ```\n\n## 2.7 \n``` iptables -R INPUT 5 -p tcp --dport 36878 -j ACCEPT ```\n\n## 2.8 \n``` iptables -P INPUT DROP ```\n``` iptables -P NAT REJECT ``` \n``` iptables -P OUTPUT ACCEPT ```\n\n## \n\n{% tabs tab,1 %} tab1-1\n<!-- tab CentOS 6 -->\n``` iptables-save```\n<!-- endtab -->\n<!-- tab CentOS 7-->\n``` iptables-save > /etc/sysconfig/iptables```\n<!-- endtab -->\n<!-- tab Ubuntu -->\n``` iptables-save > /etc/iptables/rule.v4```\n<!-- endtab -->\n{% endtabs %}\n\n\n....\n2022/2/17\n\n#  nat\n\n## 3.1 \n**192.168.1.7:7410  --->   192.168.1.160:9200**\n```iptables -t nat -A PREROUTING -d 192.168.1.7/32 -p tcp --dport 7410 -j DNAT --to-destination 192.168.1.160:9200```\n```iptables -t nat -A POSTROUTING -d 192.168.1.160/32 -p tcp --dport 9200 -j SNAT --to-source 192.168.1.7```\n\n## 3.2 nat\n``` iptables -t nat -D POSTROUTING 6 ```\n``` iptables -t nat -D PREROUTING 1 ```\n\n\n\n#  iptables\n\n## 4.1 \n```iptables -t filter -N es_white_list```\n\n## 4.2 \n``` bash\niptables -I es_white_list -j DROP\niptables -I es_white_list -s 172.22.67.31/32 -j ACCEPT\niptables -I es_white_list -s 172.22.67.32/32 -j ACCEPT\n```\n\n## 4.3 \n``` bash\niptables -I INPUT -p tcp --dport 9200 -j es_white_list\niptables -I INPUT -p tcp --dport 9300 -j es_white_list\n``` \n\n4.1 + 4.2 + 4.3 --> ```es_white_list``` ip92009200.\n\n#  iptables\n\n## 5.1 white_list\n``` iptables -t filter -F white_list ```\n\n\n## 5.2 white_list\n``` iptables -t filter -X white_list ```\n\n\n: **iptables: Too many links.**\n: **, **\n![image.png](/images/006.iptables.md.02.png)\n\n**DOCKER-USER**\n``` iptables -t filter -D FORWARD 1 ```\n![image.png](/images/006.iptables.md.03.png)\n\n\n\n#  \n iptables \n\n``` bash\niptables -F\niptables -X\niptables -t nat -F\niptables -t nat -X\niptables -t mangle -F\niptables -t mangle -X\niptables -t raw -F\niptables -t raw -X\niptables -t security -F\niptables -t security -X\niptables -P INPUT ACCEPT\niptables -P FORWARD ACCEPT\niptables -P OUTPUT ACCEPT\n -F  -X \n```\n\n#  \n{% label success@CentOS 7%}\n``` bash\n# sample configuration for iptables service\n# you can edit this manually or use system-config-firewall\n# please do not ask us to add additional ports/services to this default configuration\n*filter\n:INPUT ACCEPT [0:0]\n:FORWARD ACCEPT [0:0]\n:OUTPUT ACCEPT [0:0]\n-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT\n-A INPUT -p icmp -j ACCEPT\n-A INPUT -i lo -j ACCEPT\n-A INPUT -p tcp -m state --state NEW -m tcp --dport 22 -j ACCEPT\n-A INPUT -j REJECT --reject-with icmp-host-prohibited\n-A FORWARD -j REJECT --reject-with icmp-host-prohibited\nCOMMIT\n```\n\n\n### Ubuntu/Debianiptables\n\n\nDebian/Ubuntuiptables, iptables-save. \niptables-save, iptables-restore.\n\n```iptables-persistent``` , iptables.\n\n:  ```/etc/iptables/rules.v4```    ```/etc/iptables/rules.v6```\n****CentOS ```/etc/sysconfig/iptables ```\nDebian/Ubuntu```/etc/iptables/rules.v4```, , ``` systemctl stop iptables ```\nCentOS ```/etc/sysconfig/iptables ``` ``` systemctl stop iptables ```\n\n![image.png](/images/006.iptables.md.01.png)\n\n\n\n\n","source":"_posts/006.iptables.md","raw":"---\ntitle: iptables\ndate: 2022-02-16 11:11:08\ncategories: \n- [Linux]\n- [NetWork]\ntags: \n- iptables\n- firewalls\n---\n\n\n# [](https://www.jianshu.com/p/70f7efe3a227)\n**Cent7iptablesfirewalldiptables**\n\n>RHEL7firewalldnetfilteriptables\nfirewalldiptables\n\n**firewalld  iptables**\n\n> - firewalldiptables\n> - firewalld\n> - ```firewalld``````iptables```\n> - firewalldiptablesnetfilterfirewalldiptablesnetfilterfirewalldiptables\n\n**firewalldiptablesiptablesiptablesiptablesfirewalldfirewalldfirewalld**\n\n#  \n\n## 1.1  firewalld\n``` systemctr disable firewalld```\n``` systemctl stop firewalld```\n\n## 1.2  iptalbes\n``` yum install iptables iptables-services```\n\n## 1.3  iptables\n``` systemctl enable iptables```\n``` systemctl start iptables ```\n\n## 1.4  iptables\n``` cp /etc/sysconfig/iptables /etc/sysconfig/iptables-backup```\n\n#  \n\n## 2.1 \n``` iptables -L -n -v --line-number```\n\n## 2.2 ()\n``` iptables -nvL --line-number ```\n\n## 2.3 \n``` iptables -I INPUT -p tcp --dport 80 -j ACCEPT```\n``` iptables -A OUTPUT -p tcp --sport 80 -j ACCEPT```\n\n## 2.4 \n``` iptables -I INPUT -s 192.168.1.0/24 -p tcp --dport 80 -j ACCEPT```\n\n## 2.5 \n``` iptables -D INPUT 1```\n``` iptables -D FORWARD 1```\n\n## 2.6 ip\n\n``` iptables -I INPUT -p tcp --dport 80 -j DROP```\n``` iptables - I INPUT -m iprange --src-range 192.168.1.200-192.168.1-210 -p tcp --dport 80 -j ACCEPT ```\n\n## 2.7 \n``` iptables -R INPUT 5 -p tcp --dport 36878 -j ACCEPT ```\n\n## 2.8 \n``` iptables -P INPUT DROP ```\n``` iptables -P NAT REJECT ``` \n``` iptables -P OUTPUT ACCEPT ```\n\n## \n\n{% tabs tab,1 %} tab1-1\n<!-- tab CentOS 6 -->\n``` iptables-save```\n<!-- endtab -->\n<!-- tab CentOS 7-->\n``` iptables-save > /etc/sysconfig/iptables```\n<!-- endtab -->\n<!-- tab Ubuntu -->\n``` iptables-save > /etc/iptables/rule.v4```\n<!-- endtab -->\n{% endtabs %}\n\n\n....\n2022/2/17\n\n#  nat\n\n## 3.1 \n**192.168.1.7:7410  --->   192.168.1.160:9200**\n```iptables -t nat -A PREROUTING -d 192.168.1.7/32 -p tcp --dport 7410 -j DNAT --to-destination 192.168.1.160:9200```\n```iptables -t nat -A POSTROUTING -d 192.168.1.160/32 -p tcp --dport 9200 -j SNAT --to-source 192.168.1.7```\n\n## 3.2 nat\n``` iptables -t nat -D POSTROUTING 6 ```\n``` iptables -t nat -D PREROUTING 1 ```\n\n\n\n#  iptables\n\n## 4.1 \n```iptables -t filter -N es_white_list```\n\n## 4.2 \n``` bash\niptables -I es_white_list -j DROP\niptables -I es_white_list -s 172.22.67.31/32 -j ACCEPT\niptables -I es_white_list -s 172.22.67.32/32 -j ACCEPT\n```\n\n## 4.3 \n``` bash\niptables -I INPUT -p tcp --dport 9200 -j es_white_list\niptables -I INPUT -p tcp --dport 9300 -j es_white_list\n``` \n\n4.1 + 4.2 + 4.3 --> ```es_white_list``` ip92009200.\n\n#  iptables\n\n## 5.1 white_list\n``` iptables -t filter -F white_list ```\n\n\n## 5.2 white_list\n``` iptables -t filter -X white_list ```\n\n\n: **iptables: Too many links.**\n: **, **\n![image.png](/images/006.iptables.md.02.png)\n\n**DOCKER-USER**\n``` iptables -t filter -D FORWARD 1 ```\n![image.png](/images/006.iptables.md.03.png)\n\n\n\n#  \n iptables \n\n``` bash\niptables -F\niptables -X\niptables -t nat -F\niptables -t nat -X\niptables -t mangle -F\niptables -t mangle -X\niptables -t raw -F\niptables -t raw -X\niptables -t security -F\niptables -t security -X\niptables -P INPUT ACCEPT\niptables -P FORWARD ACCEPT\niptables -P OUTPUT ACCEPT\n -F  -X \n```\n\n#  \n{% label success@CentOS 7%}\n``` bash\n# sample configuration for iptables service\n# you can edit this manually or use system-config-firewall\n# please do not ask us to add additional ports/services to this default configuration\n*filter\n:INPUT ACCEPT [0:0]\n:FORWARD ACCEPT [0:0]\n:OUTPUT ACCEPT [0:0]\n-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT\n-A INPUT -p icmp -j ACCEPT\n-A INPUT -i lo -j ACCEPT\n-A INPUT -p tcp -m state --state NEW -m tcp --dport 22 -j ACCEPT\n-A INPUT -j REJECT --reject-with icmp-host-prohibited\n-A FORWARD -j REJECT --reject-with icmp-host-prohibited\nCOMMIT\n```\n\n\n### Ubuntu/Debianiptables\n\n\nDebian/Ubuntuiptables, iptables-save. \niptables-save, iptables-restore.\n\n```iptables-persistent``` , iptables.\n\n:  ```/etc/iptables/rules.v4```    ```/etc/iptables/rules.v6```\n****CentOS ```/etc/sysconfig/iptables ```\nDebian/Ubuntu```/etc/iptables/rules.v4```, , ``` systemctl stop iptables ```\nCentOS ```/etc/sysconfig/iptables ``` ``` systemctl stop iptables ```\n\n![image.png](/images/006.iptables.md.01.png)\n\n\n\n\n","slug":"006.iptables","published":1,"updated":"2023-04-18T02:16:03.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbd3000gyknrhlg0gv9r","content":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><a href=\"https://www.jianshu.com/p/70f7efe3a227\"></a></h1><p><strong>Cent7iptablesfirewalldiptables</strong></p>\n<blockquote>\n<p>RHEL7firewalldnetfilteriptables<br>firewalldiptables</p>\n</blockquote>\n<p><strong>firewalld  iptables</strong></p>\n<blockquote>\n<ul>\n<li>firewalldiptables</li>\n<li>firewalld</li>\n<li><code>firewalld</code><code>iptables</code></li>\n<li>firewalldiptablesnetfilterfirewalldiptablesnetfilterfirewalldiptables</li>\n</ul>\n</blockquote>\n<p><strong>firewalldiptablesiptablesiptablesiptablesfirewalldfirewalldfirewalld</strong></p>\n<h1 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h1><h2 id=\"1-1--firewalld\"><a href=\"#1-1--firewalld\" class=\"headerlink\" title=\"1.1  firewalld\"></a>1.1  firewalld</h2><p><code> systemctr disable firewalld</code><br><code> systemctl stop firewalld</code></p>\n<h2 id=\"1-2--iptalbes\"><a href=\"#1-2--iptalbes\" class=\"headerlink\" title=\"1.2  iptalbes\"></a>1.2  iptalbes</h2><p><code> yum install iptables iptables-services</code></p>\n<h2 id=\"1-3--iptables\"><a href=\"#1-3--iptables\" class=\"headerlink\" title=\"1.3  iptables\"></a>1.3  iptables</h2><p><code> systemctl enable iptables</code><br><code>systemctl start iptables</code></p>\n<h2 id=\"1-4--iptables\"><a href=\"#1-4--iptables\" class=\"headerlink\" title=\"1.4  iptables\"></a>1.4  iptables</h2><p><code> cp /etc/sysconfig/iptables /etc/sysconfig/iptables-backup</code></p>\n<h1 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h1><h2 id=\"2-1-\"><a href=\"#2-1-\" class=\"headerlink\" title=\"2.1 \"></a>2.1 </h2><p><code> iptables -L -n -v --line-number</code></p>\n<h2 id=\"2-2--\"><a href=\"#2-2--\" class=\"headerlink\" title=\"2.2 ()\"></a>2.2 ()</h2><p><code>iptables -nvL --line-number</code></p>\n<h2 id=\"2-3-\"><a href=\"#2-3-\" class=\"headerlink\" title=\"2.3 \"></a>2.3 </h2><p><code> iptables -I INPUT -p tcp --dport 80 -j ACCEPT</code><br><code> iptables -A OUTPUT -p tcp --sport 80 -j ACCEPT</code></p>\n<h2 id=\"2-4-\"><a href=\"#2-4-\" class=\"headerlink\" title=\"2.4 \"></a>2.4 </h2><p><code> iptables -I INPUT -s 192.168.1.0/24 -p tcp --dport 80 -j ACCEPT</code></p>\n<h2 id=\"2-5-\"><a href=\"#2-5-\" class=\"headerlink\" title=\"2.5 \"></a>2.5 </h2><p><code> iptables -D INPUT 1</code><br><code> iptables -D FORWARD 1</code></p>\n<h2 id=\"2-6-ip\"><a href=\"#2-6-ip\" class=\"headerlink\" title=\"2.6 ip\"></a>2.6 ip</h2><p><code> iptables -I INPUT -p tcp --dport 80 -j DROP</code><br><code>iptables - I INPUT -m iprange --src-range 192.168.1.200-192.168.1-210 -p tcp --dport 80 -j ACCEPT</code></p>\n<h2 id=\"2-7-\"><a href=\"#2-7-\" class=\"headerlink\" title=\"2.7 \"></a>2.7 </h2><p><code>iptables -R INPUT 5 -p tcp --dport 36878 -j ACCEPT</code></p>\n<h2 id=\"2-8-\"><a href=\"#2-8-\" class=\"headerlink\" title=\"2.8 \"></a>2.8 </h2><p><code>iptables -P INPUT DROP</code><br><code>iptables -P NAT REJECT</code><br><code>iptables -P OUTPUT ACCEPT</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><div class=\"tabs\" id=\"tab\"><ul class=\"nav-tabs\"><li class=\"tab active\"><a href=\"#tab-1\">CentOS 6</a></li><li class=\"tab\"><a href=\"#tab-2\">CentOS 7</a></li><li class=\"tab\"><a href=\"#tab-3\">Ubuntu</a></li></ul><div class=\"tab-content\"><div class=\"tab-pane active\" id=\"tab-1\"><p><code> iptables-save</code></p></div><div class=\"tab-pane\" id=\"tab-2\"><p><code> iptables-save &gt; /etc/sysconfig/iptables</code></p></div><div class=\"tab-pane\" id=\"tab-3\"><p><code> iptables-save &gt; /etc/iptables/rule.v4</code></p></div></div></div>\n\n\n<p>.<br>2022&#x2F;2&#x2F;17</p>\n<h1 id=\"-nat\"><a href=\"#-nat\" class=\"headerlink\" title=\" nat\"></a> nat</h1><h2 id=\"3-1-\"><a href=\"#3-1-\" class=\"headerlink\" title=\"3.1 \"></a>3.1 </h2><p><strong>192.168.1.7:7410  &gt;   192.168.1.160:9200</strong><br><code>iptables -t nat -A PREROUTING -d 192.168.1.7/32 -p tcp --dport 7410 -j DNAT --to-destination 192.168.1.160:9200</code><br><code>iptables -t nat -A POSTROUTING -d 192.168.1.160/32 -p tcp --dport 9200 -j SNAT --to-source 192.168.1.7</code></p>\n<h2 id=\"3-2-nat\"><a href=\"#3-2-nat\" class=\"headerlink\" title=\"3.2 nat\"></a>3.2 nat</h2><p><code>iptables -t nat -D POSTROUTING 6</code><br><code>iptables -t nat -D PREROUTING 1</code></p>\n<h1 id=\"-iptables\"><a href=\"#-iptables\" class=\"headerlink\" title=\" iptables\"></a> iptables</h1><h2 id=\"4-1-\"><a href=\"#4-1-\" class=\"headerlink\" title=\"4.1 \"></a>4.1 </h2><p><code>iptables -t filter -N es_white_list</code></p>\n<h2 id=\"4-2-\"><a href=\"#4-2-\" class=\"headerlink\" title=\"4.2 \"></a>4.2 </h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">iptables -I es_white_list -j DROP</span><br><span class=\"line\">iptables -I es_white_list -s 172.22.67.31/32 -j ACCEPT</span><br><span class=\"line\">iptables -I es_white_list -s 172.22.67.32/32 -j ACCEPT</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-3-\"><a href=\"#4-3-\" class=\"headerlink\" title=\"4.3 \"></a>4.3 </h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">iptables -I INPUT -p tcp --dport 9200 -j es_white_list</span><br><span class=\"line\">iptables -I INPUT -p tcp --dport 9300 -j es_white_list</span><br></pre></td></tr></table></figure>\n\n<p>4.1 + 4.2 + 4.3 &gt; <code>es_white_list</code> ip92009200.</p>\n<h1 id=\"-iptables\"><a href=\"#-iptables\" class=\"headerlink\" title=\" iptables\"></a> iptables</h1><h2 id=\"5-1-white-list\"><a href=\"#5-1-white-list\" class=\"headerlink\" title=\"5.1 white_list\"></a>5.1 white_list</h2><p><code>iptables -t filter -F white_list</code></p>\n<h2 id=\"5-2-white-list\"><a href=\"#5-2-white-list\" class=\"headerlink\" title=\"5.2 white_list\"></a>5.2 white_list</h2><p><code>iptables -t filter -X white_list</code></p>\n<p>: <strong>iptables: Too many links.</strong><br>: <strong>, </strong><br><img src=\"/images/006.iptables.md.02.png\" alt=\"image.png\"></p>\n<p><strong>DOCKER-USER</strong><br><code>iptables -t filter -D FORWARD 1</code><br><img src=\"/images/006.iptables.md.03.png\" alt=\"image.png\"></p>\n<h1 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h1><p> iptables </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">iptables -F</span><br><span class=\"line\">iptables -X</span><br><span class=\"line\">iptables -t nat -F</span><br><span class=\"line\">iptables -t nat -X</span><br><span class=\"line\">iptables -t mangle -F</span><br><span class=\"line\">iptables -t mangle -X</span><br><span class=\"line\">iptables -t raw -F</span><br><span class=\"line\">iptables -t raw -X</span><br><span class=\"line\">iptables -t security -F</span><br><span class=\"line\">iptables -t security -X</span><br><span class=\"line\">iptables -P INPUT ACCEPT</span><br><span class=\"line\">iptables -P FORWARD ACCEPT</span><br><span class=\"line\">iptables -P OUTPUT ACCEPT</span><br><span class=\"line\"> -F  -X </span><br></pre></td></tr></table></figure>\n\n<h1 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h1><mark class=\"label success\">CentOS 7</mark>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># sample configuration for iptables service</span></span><br><span class=\"line\"><span class=\"comment\"># you can edit this manually or use system-config-firewall</span></span><br><span class=\"line\"><span class=\"comment\"># please do not ask us to add additional ports/services to this default configuration</span></span><br><span class=\"line\">*filter</span><br><span class=\"line\">:INPUT ACCEPT [0:0]</span><br><span class=\"line\">:FORWARD ACCEPT [0:0]</span><br><span class=\"line\">:OUTPUT ACCEPT [0:0]</span><br><span class=\"line\">-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT</span><br><span class=\"line\">-A INPUT -p icmp -j ACCEPT</span><br><span class=\"line\">-A INPUT -i lo -j ACCEPT</span><br><span class=\"line\">-A INPUT -p tcp -m state --state NEW -m tcp --dport 22 -j ACCEPT</span><br><span class=\"line\">-A INPUT -j REJECT --reject-with icmp-host-prohibited</span><br><span class=\"line\">-A FORWARD -j REJECT --reject-with icmp-host-prohibited</span><br><span class=\"line\">COMMIT</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"Ubuntu-Debianiptables\"><a href=\"#Ubuntu-Debianiptables\" class=\"headerlink\" title=\"Ubuntu&#x2F;Debianiptables\"></a>Ubuntu&#x2F;Debianiptables</h3><p>Debian&#x2F;Ubuntuiptables, iptables-save.<br>iptables-save, iptables-restore.</p>\n<p><code>iptables-persistent</code> , iptables.</p>\n<p>:  <code>/etc/iptables/rules.v4</code>    <code>/etc/iptables/rules.v6</code><br><strong></strong>CentOS <code>/etc/sysconfig/iptables </code><br>Debian&#x2F;Ubuntu<code>/etc/iptables/rules.v4</code>, , <code>systemctl stop iptables</code><br>CentOS <code>/etc/sysconfig/iptables </code> <code>systemctl stop iptables</code></p>\n<p><img src=\"/images/006.iptables.md.01.png\" alt=\"image.png\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><a href=\"https://www.jianshu.com/p/70f7efe3a227\"></a></h1><p><strong>Cent7iptablesfirewalldiptables</strong></p>\n<blockquote>\n<p>RHEL7firewalldnetfilteriptables<br>firewalldiptables</p>\n</blockquote>\n<p><strong>firewalld  iptables</strong></p>\n<blockquote>\n<ul>\n<li>firewalldiptables</li>\n<li>firewalld</li>\n<li><code>firewalld</code><code>iptables</code></li>\n<li>firewalldiptablesnetfilterfirewalldiptablesnetfilterfirewalldiptables</li>\n</ul>\n</blockquote>\n<p><strong>firewalldiptablesiptablesiptablesiptablesfirewalldfirewalldfirewalld</strong></p>\n<h1 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h1><h2 id=\"1-1--firewalld\"><a href=\"#1-1--firewalld\" class=\"headerlink\" title=\"1.1  firewalld\"></a>1.1  firewalld</h2><p><code> systemctr disable firewalld</code><br><code> systemctl stop firewalld</code></p>\n<h2 id=\"1-2--iptalbes\"><a href=\"#1-2--iptalbes\" class=\"headerlink\" title=\"1.2  iptalbes\"></a>1.2  iptalbes</h2><p><code> yum install iptables iptables-services</code></p>\n<h2 id=\"1-3--iptables\"><a href=\"#1-3--iptables\" class=\"headerlink\" title=\"1.3  iptables\"></a>1.3  iptables</h2><p><code> systemctl enable iptables</code><br><code>systemctl start iptables</code></p>\n<h2 id=\"1-4--iptables\"><a href=\"#1-4--iptables\" class=\"headerlink\" title=\"1.4  iptables\"></a>1.4  iptables</h2><p><code> cp /etc/sysconfig/iptables /etc/sysconfig/iptables-backup</code></p>\n<h1 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h1><h2 id=\"2-1-\"><a href=\"#2-1-\" class=\"headerlink\" title=\"2.1 \"></a>2.1 </h2><p><code> iptables -L -n -v --line-number</code></p>\n<h2 id=\"2-2--\"><a href=\"#2-2--\" class=\"headerlink\" title=\"2.2 ()\"></a>2.2 ()</h2><p><code>iptables -nvL --line-number</code></p>\n<h2 id=\"2-3-\"><a href=\"#2-3-\" class=\"headerlink\" title=\"2.3 \"></a>2.3 </h2><p><code> iptables -I INPUT -p tcp --dport 80 -j ACCEPT</code><br><code> iptables -A OUTPUT -p tcp --sport 80 -j ACCEPT</code></p>\n<h2 id=\"2-4-\"><a href=\"#2-4-\" class=\"headerlink\" title=\"2.4 \"></a>2.4 </h2><p><code> iptables -I INPUT -s 192.168.1.0/24 -p tcp --dport 80 -j ACCEPT</code></p>\n<h2 id=\"2-5-\"><a href=\"#2-5-\" class=\"headerlink\" title=\"2.5 \"></a>2.5 </h2><p><code> iptables -D INPUT 1</code><br><code> iptables -D FORWARD 1</code></p>\n<h2 id=\"2-6-ip\"><a href=\"#2-6-ip\" class=\"headerlink\" title=\"2.6 ip\"></a>2.6 ip</h2><p><code> iptables -I INPUT -p tcp --dport 80 -j DROP</code><br><code>iptables - I INPUT -m iprange --src-range 192.168.1.200-192.168.1-210 -p tcp --dport 80 -j ACCEPT</code></p>\n<h2 id=\"2-7-\"><a href=\"#2-7-\" class=\"headerlink\" title=\"2.7 \"></a>2.7 </h2><p><code>iptables -R INPUT 5 -p tcp --dport 36878 -j ACCEPT</code></p>\n<h2 id=\"2-8-\"><a href=\"#2-8-\" class=\"headerlink\" title=\"2.8 \"></a>2.8 </h2><p><code>iptables -P INPUT DROP</code><br><code>iptables -P NAT REJECT</code><br><code>iptables -P OUTPUT ACCEPT</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><div class=\"tabs\" id=\"tab\"><ul class=\"nav-tabs\"><li class=\"tab active\"><a href=\"#tab-1\">CentOS 6</a></li><li class=\"tab\"><a href=\"#tab-2\">CentOS 7</a></li><li class=\"tab\"><a href=\"#tab-3\">Ubuntu</a></li></ul><div class=\"tab-content\"><div class=\"tab-pane active\" id=\"tab-1\"><p><code> iptables-save</code></p></div><div class=\"tab-pane\" id=\"tab-2\"><p><code> iptables-save &gt; /etc/sysconfig/iptables</code></p></div><div class=\"tab-pane\" id=\"tab-3\"><p><code> iptables-save &gt; /etc/iptables/rule.v4</code></p></div></div></div>\n\n\n<p>.<br>2022&#x2F;2&#x2F;17</p>\n<h1 id=\"-nat\"><a href=\"#-nat\" class=\"headerlink\" title=\" nat\"></a> nat</h1><h2 id=\"3-1-\"><a href=\"#3-1-\" class=\"headerlink\" title=\"3.1 \"></a>3.1 </h2><p><strong>192.168.1.7:7410  &gt;   192.168.1.160:9200</strong><br><code>iptables -t nat -A PREROUTING -d 192.168.1.7/32 -p tcp --dport 7410 -j DNAT --to-destination 192.168.1.160:9200</code><br><code>iptables -t nat -A POSTROUTING -d 192.168.1.160/32 -p tcp --dport 9200 -j SNAT --to-source 192.168.1.7</code></p>\n<h2 id=\"3-2-nat\"><a href=\"#3-2-nat\" class=\"headerlink\" title=\"3.2 nat\"></a>3.2 nat</h2><p><code>iptables -t nat -D POSTROUTING 6</code><br><code>iptables -t nat -D PREROUTING 1</code></p>\n<h1 id=\"-iptables\"><a href=\"#-iptables\" class=\"headerlink\" title=\" iptables\"></a> iptables</h1><h2 id=\"4-1-\"><a href=\"#4-1-\" class=\"headerlink\" title=\"4.1 \"></a>4.1 </h2><p><code>iptables -t filter -N es_white_list</code></p>\n<h2 id=\"4-2-\"><a href=\"#4-2-\" class=\"headerlink\" title=\"4.2 \"></a>4.2 </h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">iptables -I es_white_list -j DROP</span><br><span class=\"line\">iptables -I es_white_list -s 172.22.67.31/32 -j ACCEPT</span><br><span class=\"line\">iptables -I es_white_list -s 172.22.67.32/32 -j ACCEPT</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-3-\"><a href=\"#4-3-\" class=\"headerlink\" title=\"4.3 \"></a>4.3 </h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">iptables -I INPUT -p tcp --dport 9200 -j es_white_list</span><br><span class=\"line\">iptables -I INPUT -p tcp --dport 9300 -j es_white_list</span><br></pre></td></tr></table></figure>\n\n<p>4.1 + 4.2 + 4.3 &gt; <code>es_white_list</code> ip92009200.</p>\n<h1 id=\"-iptables\"><a href=\"#-iptables\" class=\"headerlink\" title=\" iptables\"></a> iptables</h1><h2 id=\"5-1-white-list\"><a href=\"#5-1-white-list\" class=\"headerlink\" title=\"5.1 white_list\"></a>5.1 white_list</h2><p><code>iptables -t filter -F white_list</code></p>\n<h2 id=\"5-2-white-list\"><a href=\"#5-2-white-list\" class=\"headerlink\" title=\"5.2 white_list\"></a>5.2 white_list</h2><p><code>iptables -t filter -X white_list</code></p>\n<p>: <strong>iptables: Too many links.</strong><br>: <strong>, </strong><br><img src=\"/images/006.iptables.md.02.png\" alt=\"image.png\"></p>\n<p><strong>DOCKER-USER</strong><br><code>iptables -t filter -D FORWARD 1</code><br><img src=\"/images/006.iptables.md.03.png\" alt=\"image.png\"></p>\n<h1 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h1><p> iptables </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">iptables -F</span><br><span class=\"line\">iptables -X</span><br><span class=\"line\">iptables -t nat -F</span><br><span class=\"line\">iptables -t nat -X</span><br><span class=\"line\">iptables -t mangle -F</span><br><span class=\"line\">iptables -t mangle -X</span><br><span class=\"line\">iptables -t raw -F</span><br><span class=\"line\">iptables -t raw -X</span><br><span class=\"line\">iptables -t security -F</span><br><span class=\"line\">iptables -t security -X</span><br><span class=\"line\">iptables -P INPUT ACCEPT</span><br><span class=\"line\">iptables -P FORWARD ACCEPT</span><br><span class=\"line\">iptables -P OUTPUT ACCEPT</span><br><span class=\"line\"> -F  -X </span><br></pre></td></tr></table></figure>\n\n<h1 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h1><mark class=\"label success\">CentOS 7</mark>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># sample configuration for iptables service</span></span><br><span class=\"line\"><span class=\"comment\"># you can edit this manually or use system-config-firewall</span></span><br><span class=\"line\"><span class=\"comment\"># please do not ask us to add additional ports/services to this default configuration</span></span><br><span class=\"line\">*filter</span><br><span class=\"line\">:INPUT ACCEPT [0:0]</span><br><span class=\"line\">:FORWARD ACCEPT [0:0]</span><br><span class=\"line\">:OUTPUT ACCEPT [0:0]</span><br><span class=\"line\">-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT</span><br><span class=\"line\">-A INPUT -p icmp -j ACCEPT</span><br><span class=\"line\">-A INPUT -i lo -j ACCEPT</span><br><span class=\"line\">-A INPUT -p tcp -m state --state NEW -m tcp --dport 22 -j ACCEPT</span><br><span class=\"line\">-A INPUT -j REJECT --reject-with icmp-host-prohibited</span><br><span class=\"line\">-A FORWARD -j REJECT --reject-with icmp-host-prohibited</span><br><span class=\"line\">COMMIT</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"Ubuntu-Debianiptables\"><a href=\"#Ubuntu-Debianiptables\" class=\"headerlink\" title=\"Ubuntu&#x2F;Debianiptables\"></a>Ubuntu&#x2F;Debianiptables</h3><p>Debian&#x2F;Ubuntuiptables, iptables-save.<br>iptables-save, iptables-restore.</p>\n<p><code>iptables-persistent</code> , iptables.</p>\n<p>:  <code>/etc/iptables/rules.v4</code>    <code>/etc/iptables/rules.v6</code><br><strong></strong>CentOS <code>/etc/sysconfig/iptables </code><br>Debian&#x2F;Ubuntu<code>/etc/iptables/rules.v4</code>, , <code>systemctl stop iptables</code><br>CentOS <code>/etc/sysconfig/iptables </code> <code>systemctl stop iptables</code></p>\n<p><img src=\"/images/006.iptables.md.01.png\" alt=\"image.png\"></p>\n"},{"title":"Linux","date":"2022-05-11T03:39:08.000Z","_content":"\n## Linux\n### ``` System ``` \n####\t1. ``` iostat ``` \n\n ``` iostat ```  ```sysstat```\n![image.png](/images/007.system_info.md.01.png)\n\n{% note info %}\nNOTE:\ncommand ```yum whatprovides COMMAND``` \n     ```yum whatprovides FILE```\n{% endnote %}\n\n\n ```iostat``` \n\n```\n[root@centos7 ~]# iostat\nLinux 3.10.0-1160.62.1.el7.x86_64 (centos7.9) \t05/11/2022 \t_x86_64_\t(2 CPU)\n\navg-cpu:  %user   %nice %system %iowait  %steal   %idle\n           0.13    0.00    0.30    0.02    0.00   99.55\n\nDevice:            tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn\nsda               1.70        23.68        17.60     336054     249741\nsdb               0.06         1.82         7.55      25823     107131\ndm-0              1.74        22.85        25.00     324293     354804\ndm-1              0.01         0.16         0.00       2204          0\n```\n\n\n### ```Pid ``` \n### ``` Network ``` \n### ``` Member ``` \n### ``` Hardware ``` \n### ``` File and File system ``` \n### ``` Users ``` \n### ``` Others ``` ","source":"_posts/007.system_monitor.md","raw":"---\ntitle: Linux\ndate: 2022-05-11 11:39:08\ncategories: \n- [Linux]\n- [CentOS]\n- [Ubuntu]\ntags: \n- monitor\n---\n\n## Linux\n### ``` System ``` \n####\t1. ``` iostat ``` \n\n ``` iostat ```  ```sysstat```\n![image.png](/images/007.system_info.md.01.png)\n\n{% note info %}\nNOTE:\ncommand ```yum whatprovides COMMAND``` \n     ```yum whatprovides FILE```\n{% endnote %}\n\n\n ```iostat``` \n\n```\n[root@centos7 ~]# iostat\nLinux 3.10.0-1160.62.1.el7.x86_64 (centos7.9) \t05/11/2022 \t_x86_64_\t(2 CPU)\n\navg-cpu:  %user   %nice %system %iowait  %steal   %idle\n           0.13    0.00    0.30    0.02    0.00   99.55\n\nDevice:            tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn\nsda               1.70        23.68        17.60     336054     249741\nsdb               0.06         1.82         7.55      25823     107131\ndm-0              1.74        22.85        25.00     324293     354804\ndm-1              0.01         0.16         0.00       2204          0\n```\n\n\n### ```Pid ``` \n### ``` Network ``` \n### ``` Member ``` \n### ``` Hardware ``` \n### ``` File and File system ``` \n### ``` Users ``` \n### ``` Others ``` ","slug":"007.system_monitor","published":1,"updated":"2023-03-29T11:19:40.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbda000iyknr400n5nm3","content":"<h2 id=\"Linux\"><a href=\"#Linux\" class=\"headerlink\" title=\"Linux\"></a>Linux</h2><h3 id=\"System-\"><a href=\"#System-\" class=\"headerlink\" title=\"System \"></a><code>System</code> </h3><h4 id=\"1-iostat-\"><a href=\"#1-iostat-\" class=\"headerlink\" title=\"1. iostat \"></a>1. <code>iostat</code> </h4><p> <code>iostat</code>  <code>sysstat</code><br><img src=\"/images/007.system_info.md.01.png\" alt=\"image.png\"></p>\n<div class=\"note info\"><p>NOTE:<br>command <code>yum whatprovides COMMAND</code><br>     <code>yum whatprovides FILE</code></p>\n</div>\n\n\n<p> <code>iostat</code> </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@centos7 ~]# iostat</span><br><span class=\"line\">Linux 3.10.0-1160.62.1.el7.x86_64 (centos7.9) \t05/11/2022 \t_x86_64_\t(2 CPU)</span><br><span class=\"line\"></span><br><span class=\"line\">avg-cpu:  %user   %nice %system %iowait  %steal   %idle</span><br><span class=\"line\">           0.13    0.00    0.30    0.02    0.00   99.55</span><br><span class=\"line\"></span><br><span class=\"line\">Device:            tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn</span><br><span class=\"line\">sda               1.70        23.68        17.60     336054     249741</span><br><span class=\"line\">sdb               0.06         1.82         7.55      25823     107131</span><br><span class=\"line\">dm-0              1.74        22.85        25.00     324293     354804</span><br><span class=\"line\">dm-1              0.01         0.16         0.00       2204          0</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"Pid-\"><a href=\"#Pid-\" class=\"headerlink\" title=\"Pid  \"></a><code>Pid </code> </h3><h3 id=\"Network-\"><a href=\"#Network-\" class=\"headerlink\" title=\"Network \"></a><code>Network</code> </h3><h3 id=\"Member-\"><a href=\"#Member-\" class=\"headerlink\" title=\"Member \"></a><code>Member</code> </h3><h3 id=\"Hardware-\"><a href=\"#Hardware-\" class=\"headerlink\" title=\"Hardware \"></a><code>Hardware</code> </h3><h3 id=\"File-and-File-system-\"><a href=\"#File-and-File-system-\" class=\"headerlink\" title=\"File and File system \"></a><code>File and File system</code> </h3><h3 id=\"Users-\"><a href=\"#Users-\" class=\"headerlink\" title=\"Users \"></a><code>Users</code> </h3><h3 id=\"Others-\"><a href=\"#Others-\" class=\"headerlink\" title=\"Others \"></a><code>Others</code> </h3>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Linux\"><a href=\"#Linux\" class=\"headerlink\" title=\"Linux\"></a>Linux</h2><h3 id=\"System-\"><a href=\"#System-\" class=\"headerlink\" title=\"System \"></a><code>System</code> </h3><h4 id=\"1-iostat-\"><a href=\"#1-iostat-\" class=\"headerlink\" title=\"1. iostat \"></a>1. <code>iostat</code> </h4><p> <code>iostat</code>  <code>sysstat</code><br><img src=\"/images/007.system_info.md.01.png\" alt=\"image.png\"></p>\n<div class=\"note info\"><p>NOTE:<br>command <code>yum whatprovides COMMAND</code><br>     <code>yum whatprovides FILE</code></p>\n</div>\n\n\n<p> <code>iostat</code> </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@centos7 ~]# iostat</span><br><span class=\"line\">Linux 3.10.0-1160.62.1.el7.x86_64 (centos7.9) \t05/11/2022 \t_x86_64_\t(2 CPU)</span><br><span class=\"line\"></span><br><span class=\"line\">avg-cpu:  %user   %nice %system %iowait  %steal   %idle</span><br><span class=\"line\">           0.13    0.00    0.30    0.02    0.00   99.55</span><br><span class=\"line\"></span><br><span class=\"line\">Device:            tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn</span><br><span class=\"line\">sda               1.70        23.68        17.60     336054     249741</span><br><span class=\"line\">sdb               0.06         1.82         7.55      25823     107131</span><br><span class=\"line\">dm-0              1.74        22.85        25.00     324293     354804</span><br><span class=\"line\">dm-1              0.01         0.16         0.00       2204          0</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"Pid-\"><a href=\"#Pid-\" class=\"headerlink\" title=\"Pid  \"></a><code>Pid </code> </h3><h3 id=\"Network-\"><a href=\"#Network-\" class=\"headerlink\" title=\"Network \"></a><code>Network</code> </h3><h3 id=\"Member-\"><a href=\"#Member-\" class=\"headerlink\" title=\"Member \"></a><code>Member</code> </h3><h3 id=\"Hardware-\"><a href=\"#Hardware-\" class=\"headerlink\" title=\"Hardware \"></a><code>Hardware</code> </h3><h3 id=\"File-and-File-system-\"><a href=\"#File-and-File-system-\" class=\"headerlink\" title=\"File and File system \"></a><code>File and File system</code> </h3><h3 id=\"Users-\"><a href=\"#Users-\" class=\"headerlink\" title=\"Users \"></a><code>Users</code> </h3><h3 id=\"Others-\"><a href=\"#Others-\" class=\"headerlink\" title=\"Others \"></a><code>Others</code> </h3>"},{"title":"Linuxroot","date":"2022-05-12T02:33:08.000Z","_content":"\n****\n\n1) press ``` e ``` on grub, \n2) add parameters ``` rd.break ``` \n3) ``` Ctrl + x ```\n4) ``` mount -o remount rw /sysroot ```\n5) ``` chroot /sysroot ```\n6) ``` passwd ```\n7) ``` touch /.autorelabel ```\n8) ``` exit ```  \n9) ``` reboot ```\n---\n<!-- more -->\n\n- 0: , bootloader.\n- 1: , .\n- 2: ```e```, grub bootloader\n- 3: \n-    - 3.1 ```RHEL/CentOS 7```,  ```linux16```.\n-    - 3.2 ```RHEL/Centos 8x, and Fedora```  ```linux```.\n- 4: step3```rd.break```.**()**\n![image.png](/images/008.reset_password.md.01.png)\n- 5:  ```Ctrl+x```bootloader\n- 6: (rescue), ```switch_root:/#```\n![image.png](/images/008.reset_password.md.02.png)\n- 7: ,  \n     ``` mount -o remount rw /sysroot ```\n- 8: \n     ``` chroot /sysroot ```\n- 9: root ``` passwd ```, .\n- 10:  SELinux ```touch /.autorelabel``` SELinux \n- 11: : ``` exit ```  chroot, : ```rebbot```.\n","source":"_posts/008.reset_password.md","raw":"---\ntitle: Linuxroot\ndate: 2022-05-12 10:33:08\ncategories: \n- [Linux]\n- [CentOS]\n- [Ubuntu]\ntags: \n- password\n---\n\n****\n\n1) press ``` e ``` on grub, \n2) add parameters ``` rd.break ``` \n3) ``` Ctrl + x ```\n4) ``` mount -o remount rw /sysroot ```\n5) ``` chroot /sysroot ```\n6) ``` passwd ```\n7) ``` touch /.autorelabel ```\n8) ``` exit ```  \n9) ``` reboot ```\n---\n<!-- more -->\n\n- 0: , bootloader.\n- 1: , .\n- 2: ```e```, grub bootloader\n- 3: \n-    - 3.1 ```RHEL/CentOS 7```,  ```linux16```.\n-    - 3.2 ```RHEL/Centos 8x, and Fedora```  ```linux```.\n- 4: step3```rd.break```.**()**\n![image.png](/images/008.reset_password.md.01.png)\n- 5:  ```Ctrl+x```bootloader\n- 6: (rescue), ```switch_root:/#```\n![image.png](/images/008.reset_password.md.02.png)\n- 7: ,  \n     ``` mount -o remount rw /sysroot ```\n- 8: \n     ``` chroot /sysroot ```\n- 9: root ``` passwd ```, .\n- 10:  SELinux ```touch /.autorelabel``` SELinux \n- 11: : ``` exit ```  chroot, : ```rebbot```.\n","slug":"008.reset_password","published":1,"updated":"2023-03-03T05:15:17.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbde000nyknrg4t17tsl","content":"<p><strong></strong></p>\n<ol>\n<li>press <code>e</code> on grub, </li>\n<li>add parameters <code>rd.break</code> </li>\n<li><code>Ctrl + x</code></li>\n<li><code>mount -o remount rw /sysroot</code></li>\n<li><code>chroot /sysroot</code></li>\n<li><code>passwd</code></li>\n<li><code>touch /.autorelabel</code></li>\n<li><code>exit</code>  </li>\n<li><code>reboot</code></li>\n</ol>\n<hr>\n<span id=\"more\"></span>\n\n<ul>\n<li>0: , bootloader.</li>\n<li>1: , .</li>\n<li>2: <code>e</code>, grub bootloader</li>\n<li>3: </li>\n<li><ul>\n<li>3.1 <code>RHEL/CentOS 7</code>,  <code>linux16</code>.</li>\n</ul>\n</li>\n<li><ul>\n<li>3.2 <code>RHEL/Centos 8x, and Fedora</code>  <code>linux</code>.</li>\n</ul>\n</li>\n<li>4: step3<code>rd.break</code>.<strong>()</strong><br><img src=\"/images/008.reset_password.md.01.png\" alt=\"image.png\"></li>\n<li>5:  <code>Ctrl+x</code>bootloader</li>\n<li>6: (rescue), <code>switch_root:/#</code><br><img src=\"/images/008.reset_password.md.02.png\" alt=\"image.png\"></li>\n<li>7: , <br>   <code>mount -o remount rw /sysroot</code></li>\n<li>8: <br>   <code>chroot /sysroot</code></li>\n<li>9: root <code>passwd</code>, .</li>\n<li>10:  SELinux <code>touch /.autorelabel</code> SELinux </li>\n<li>11: : <code>exit</code>  chroot, : <code>rebbot</code>.</li>\n</ul>\n","site":{"data":{}},"excerpt":"<p><strong></strong></p>\n<ol>\n<li>press <code>e</code> on grub, </li>\n<li>add parameters <code>rd.break</code> </li>\n<li><code>Ctrl + x</code></li>\n<li><code>mount -o remount rw /sysroot</code></li>\n<li><code>chroot /sysroot</code></li>\n<li><code>passwd</code></li>\n<li><code>touch /.autorelabel</code></li>\n<li><code>exit</code>  </li>\n<li><code>reboot</code></li>\n</ol>\n<hr>","more":"<ul>\n<li>0: , bootloader.</li>\n<li>1: , .</li>\n<li>2: <code>e</code>, grub bootloader</li>\n<li>3: </li>\n<li><ul>\n<li>3.1 <code>RHEL/CentOS 7</code>,  <code>linux16</code>.</li>\n</ul>\n</li>\n<li><ul>\n<li>3.2 <code>RHEL/Centos 8x, and Fedora</code>  <code>linux</code>.</li>\n</ul>\n</li>\n<li>4: step3<code>rd.break</code>.<strong>()</strong><br><img src=\"/images/008.reset_password.md.01.png\" alt=\"image.png\"></li>\n<li>5:  <code>Ctrl+x</code>bootloader</li>\n<li>6: (rescue), <code>switch_root:/#</code><br><img src=\"/images/008.reset_password.md.02.png\" alt=\"image.png\"></li>\n<li>7: , <br>   <code>mount -o remount rw /sysroot</code></li>\n<li>8: <br>   <code>chroot /sysroot</code></li>\n<li>9: root <code>passwd</code>, .</li>\n<li>10:  SELinux <code>touch /.autorelabel</code> SELinux </li>\n<li>11: : <code>exit</code>  chroot, : <code>rebbot</code>.</li>\n</ul>"},{"title":"openssl  openssl ","date":"2022-05-16T02:33:08.000Z","_content":"\n\n##  \n\n### 1.1 openssh\n```\n[root@centos7 ~]# ssh -V\nOpenSSH_7.4p1, OpenSSL 1.0.2k-fips  26 Jan 2017\n[root@centos7 ~]# \n```\n\n### 1.2 openssl\n```\n[root@centos7 ~]# \n[root@centos7 ~]# openssl version\nOpenSSL 1.0.2k-fips  26 Jan 2017\n[root@centos7 ~]# \n```\n\n### 1.3 \n\n``` yum install perl perl-Test-Harness perl-Test-Simple```\n``` yum groupinstall Development Tools ```\n\n### 1.4  zlib\n\n#### 1.4.1 \n```wget http://www.zlib.net/zlib-1.3.tar.gz```\n\n#### 1.4.2 \n```tar -xzvf zlib-1.3.tar.gz```\n\n#### 1.4.3&:\n``` bash\ncd zlib-1.3\n./configure --prefix=/usr/local/zlib\nmake\nmake test  #  # ok\nmake install\n```\n\n\n\n##  OpenSSL\n\n### 2.1 \n\n> : https://www.openssl.org/source/\n\n#### 2.1.1 :\n``` wget https://www.openssl.org/source/openssl-1.1.1.tar.gz ```\n\n#### 2.1.2 \n```tar -xzvf openssl-1.1.1w.tar.gz```\n\n#### 2.1.3 &:\n``` bash\ncd openssl-1.1.1w\n./config --shared --prefix=/usr/local/openssl  # --shared \nmake -j4                                       # - j4 \nmake install\n```\n\n\n### 2.2 openssl\n\n#### 2.2.1  openssl \n```mv /usr/bin/openssl{,.back}```\n```ln -s /usr/local/openssl/bin/openssl /usr/bin/openssl```\n\n#### 2.2.2 openssl \n```mv /usr/include/openssl{,.back}```\n```ln -s /usr/local/openssl/include/openssl/ /usr/include/```\n\n#### 2.2.3 \n```echo \"/usr/local/openssl/lib\" >> /etc/ld.so.conf ```\n\n#### 2.2.4 \n```ldconfig -v | grep openssl ```\n\n##  OpenSSH\n\n\n### 3.1 \n```mv /etc/ssh{,.back}```\n```mv /etc/pam.d/sshd{,.back}```\n\n### 3.2 \n``` wget https://mirrors.aliyun.com/pub/OpenBSD/OpenSSH/portable/openssh-9.5p1.tar.gz ```\n\n### 3.3 \n``` tar -xzvf openssh-9.5p1.tar.gz ```\n\n### 3.4 &\n``` bash\ncd openssh-9.5p1\n./configure \\\n--prefix=/usr/local/openssh \\\n--sysconfdir=/etc/ssh \\\n--with-zlib=/usr/local/zlib \\\n--with-ssl-dir=/usr/local/openssl \\\n--with-pam \nmake -j4\nmake tests\nmake install\n```\n### 3.5 \n\n**openssl-1.1.1**\n<img src=\"/images/009.openssh.md.01.png\" width=100% height=80% />\n**./config**\n<img src=\"/images/009.openssh.md.02.png\" width=100% height=60% />\n**make tests **\n<img src=\"/images/009.openssh.md.04.png\" width=100% height=100% />\n**.key 0600**\n<img src=\"/images/009.openssh.md.05.png\" width=100% height=100% />\n<img src=\"/images/009.openssh.md.06.png\" width=100% height=100% />\n\n\n**: systemctlsshd, **\n**sshssh, ssh**\n\n### 3.6 sshd\nsshd_conf. \nsshd: ```vim /etc/ssh/sshd_config```\n: ```PermitRootLogin yes```\n\n### 3.7 sshdpam\n```cp openssh-9.5p1/contrib/redhat/sshd.pam /etc/pam.d/sshd```\n\n\n### 3.8 systemctlsshd\n****\n```cp openssh-9.5p1/contrib/redhat/sshd.init /etc/init.d/sshd```\n\n**sshdservice**\n```vim /usr/lib/systemd/system/sshd.service```\n``` bash\n#vim /usr/lib/systemd/system/sshd.service\n[Unit]\nDescription=OpenSSH server daemon\nDocumentation=man:sshd(8) man:sshd_config(5)\nAfter=network.target sshd-keygen.service\nWants=sshd-keygen.service\n\n[Service]\nType=forking\nExecStart=/etc/rc.d/init.d/sshd start\nExecStop=/etc/rc.d/init.d/sshd stop\nRestart=/etc/rc.d/init.d/sshd stop\n[Install]\nWantedBy=multi-user.target\n```\n\n\n### 3.9  sshd\n\n```mv /usr/bin/ssh{,.back}```\n```mv /usr/sbin/sshd{,.back}```\n```ln -s /usr/local/openssh/sbin/sshd /usr/sbin/sshd```\n```ln -s /usr/local/openssh/bin/ssh /usr/bin/ssh```\n\n\n**systemctl**\n```systemctl daemon-reload```\n**sshd**\n``` systemctl restart sshd ```\n\n### 3.10 \n<img src=\"/images/009.openssh.md.07.png\" width=100% height=100% />\n\n\n##  \n\n### 4.1 error: *** working libcrypto not found\n\n: ``` yum install openssl-devel ```\n\n### 4.2 error: PAM headers not found\n\n: ``` yum install pam-devel ```","source":"_posts/009.openssh.md","raw":"---\ntitle: openssl  openssl \ndate: 2022-05-16 10:33:08\ncategories: \n- [Linux]\ntags: \n- openssl\n- openssh\n---\n\n\n##  \n\n### 1.1 openssh\n```\n[root@centos7 ~]# ssh -V\nOpenSSH_7.4p1, OpenSSL 1.0.2k-fips  26 Jan 2017\n[root@centos7 ~]# \n```\n\n### 1.2 openssl\n```\n[root@centos7 ~]# \n[root@centos7 ~]# openssl version\nOpenSSL 1.0.2k-fips  26 Jan 2017\n[root@centos7 ~]# \n```\n\n### 1.3 \n\n``` yum install perl perl-Test-Harness perl-Test-Simple```\n``` yum groupinstall Development Tools ```\n\n### 1.4  zlib\n\n#### 1.4.1 \n```wget http://www.zlib.net/zlib-1.3.tar.gz```\n\n#### 1.4.2 \n```tar -xzvf zlib-1.3.tar.gz```\n\n#### 1.4.3&:\n``` bash\ncd zlib-1.3\n./configure --prefix=/usr/local/zlib\nmake\nmake test  #  # ok\nmake install\n```\n\n\n\n##  OpenSSL\n\n### 2.1 \n\n> : https://www.openssl.org/source/\n\n#### 2.1.1 :\n``` wget https://www.openssl.org/source/openssl-1.1.1.tar.gz ```\n\n#### 2.1.2 \n```tar -xzvf openssl-1.1.1w.tar.gz```\n\n#### 2.1.3 &:\n``` bash\ncd openssl-1.1.1w\n./config --shared --prefix=/usr/local/openssl  # --shared \nmake -j4                                       # - j4 \nmake install\n```\n\n\n### 2.2 openssl\n\n#### 2.2.1  openssl \n```mv /usr/bin/openssl{,.back}```\n```ln -s /usr/local/openssl/bin/openssl /usr/bin/openssl```\n\n#### 2.2.2 openssl \n```mv /usr/include/openssl{,.back}```\n```ln -s /usr/local/openssl/include/openssl/ /usr/include/```\n\n#### 2.2.3 \n```echo \"/usr/local/openssl/lib\" >> /etc/ld.so.conf ```\n\n#### 2.2.4 \n```ldconfig -v | grep openssl ```\n\n##  OpenSSH\n\n\n### 3.1 \n```mv /etc/ssh{,.back}```\n```mv /etc/pam.d/sshd{,.back}```\n\n### 3.2 \n``` wget https://mirrors.aliyun.com/pub/OpenBSD/OpenSSH/portable/openssh-9.5p1.tar.gz ```\n\n### 3.3 \n``` tar -xzvf openssh-9.5p1.tar.gz ```\n\n### 3.4 &\n``` bash\ncd openssh-9.5p1\n./configure \\\n--prefix=/usr/local/openssh \\\n--sysconfdir=/etc/ssh \\\n--with-zlib=/usr/local/zlib \\\n--with-ssl-dir=/usr/local/openssl \\\n--with-pam \nmake -j4\nmake tests\nmake install\n```\n### 3.5 \n\n**openssl-1.1.1**\n<img src=\"/images/009.openssh.md.01.png\" width=100% height=80% />\n**./config**\n<img src=\"/images/009.openssh.md.02.png\" width=100% height=60% />\n**make tests **\n<img src=\"/images/009.openssh.md.04.png\" width=100% height=100% />\n**.key 0600**\n<img src=\"/images/009.openssh.md.05.png\" width=100% height=100% />\n<img src=\"/images/009.openssh.md.06.png\" width=100% height=100% />\n\n\n**: systemctlsshd, **\n**sshssh, ssh**\n\n### 3.6 sshd\nsshd_conf. \nsshd: ```vim /etc/ssh/sshd_config```\n: ```PermitRootLogin yes```\n\n### 3.7 sshdpam\n```cp openssh-9.5p1/contrib/redhat/sshd.pam /etc/pam.d/sshd```\n\n\n### 3.8 systemctlsshd\n****\n```cp openssh-9.5p1/contrib/redhat/sshd.init /etc/init.d/sshd```\n\n**sshdservice**\n```vim /usr/lib/systemd/system/sshd.service```\n``` bash\n#vim /usr/lib/systemd/system/sshd.service\n[Unit]\nDescription=OpenSSH server daemon\nDocumentation=man:sshd(8) man:sshd_config(5)\nAfter=network.target sshd-keygen.service\nWants=sshd-keygen.service\n\n[Service]\nType=forking\nExecStart=/etc/rc.d/init.d/sshd start\nExecStop=/etc/rc.d/init.d/sshd stop\nRestart=/etc/rc.d/init.d/sshd stop\n[Install]\nWantedBy=multi-user.target\n```\n\n\n### 3.9  sshd\n\n```mv /usr/bin/ssh{,.back}```\n```mv /usr/sbin/sshd{,.back}```\n```ln -s /usr/local/openssh/sbin/sshd /usr/sbin/sshd```\n```ln -s /usr/local/openssh/bin/ssh /usr/bin/ssh```\n\n\n**systemctl**\n```systemctl daemon-reload```\n**sshd**\n``` systemctl restart sshd ```\n\n### 3.10 \n<img src=\"/images/009.openssh.md.07.png\" width=100% height=100% />\n\n\n##  \n\n### 4.1 error: *** working libcrypto not found\n\n: ``` yum install openssl-devel ```\n\n### 4.2 error: PAM headers not found\n\n: ``` yum install pam-devel ```","slug":"009.openssh","published":1,"updated":"2023-10-30T09:36:38.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbdi000qyknraxsyfw6y","content":"<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"1-1-openssh\"><a href=\"#1-1-openssh\" class=\"headerlink\" title=\"1.1 openssh\"></a>1.1 openssh</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@centos7 ~]# ssh -V</span><br><span class=\"line\">OpenSSH_7.4p1, OpenSSL 1.0.2k-fips  26 Jan 2017</span><br><span class=\"line\">[root@centos7 ~]# </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-2-openssl\"><a href=\"#1-2-openssl\" class=\"headerlink\" title=\"1.2 openssl\"></a>1.2 openssl</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@centos7 ~]# </span><br><span class=\"line\">[root@centos7 ~]# openssl version</span><br><span class=\"line\">OpenSSL 1.0.2k-fips  26 Jan 2017</span><br><span class=\"line\">[root@centos7 ~]# </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-3-\"><a href=\"#1-3-\" class=\"headerlink\" title=\"1.3 \"></a>1.3 </h3><p><code> yum install perl perl-Test-Harness perl-Test-Simple</code><br><code>yum groupinstall Development Tools</code></p>\n<h3 id=\"1-4--zlib\"><a href=\"#1-4--zlib\" class=\"headerlink\" title=\"1.4  zlib\"></a>1.4  zlib</h3><h4 id=\"1-4-1-\"><a href=\"#1-4-1-\" class=\"headerlink\" title=\"1.4.1 \"></a>1.4.1 </h4><p><code>wget http://www.zlib.net/zlib-1.3.tar.gz</code></p>\n<h4 id=\"1-4-2-\"><a href=\"#1-4-2-\" class=\"headerlink\" title=\"1.4.2 \"></a>1.4.2 </h4><p><code>tar -xzvf zlib-1.3.tar.gz</code></p>\n<h4 id=\"1-4-3-\"><a href=\"#1-4-3-\" class=\"headerlink\" title=\"1.4.3&amp;:\"></a>1.4.3&amp;:</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> zlib-1.3</span><br><span class=\"line\">./configure --prefix=/usr/local/zlib</span><br><span class=\"line\">make</span><br><span class=\"line\">make <span class=\"built_in\">test</span>  <span class=\"comment\">#  # ok</span></span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"-OpenSSL\"><a href=\"#-OpenSSL\" class=\"headerlink\" title=\" OpenSSL\"></a> OpenSSL</h2><h3 id=\"2-1-\"><a href=\"#2-1-\" class=\"headerlink\" title=\"2.1 \"></a>2.1 </h3><blockquote>\n<p>: <a href=\"https://www.openssl.org/source/\">https://www.openssl.org/source/</a></p>\n</blockquote>\n<h4 id=\"2-1-1-\"><a href=\"#2-1-1-\" class=\"headerlink\" title=\"2.1.1 :\"></a>2.1.1 :</h4><p><code>wget https://www.openssl.org/source/openssl-1.1.1.tar.gz</code></p>\n<h4 id=\"2-1-2-\"><a href=\"#2-1-2-\" class=\"headerlink\" title=\"2.1.2 \"></a>2.1.2 </h4><p><code>tar -xzvf openssl-1.1.1w.tar.gz</code></p>\n<h4 id=\"2-1-3--\"><a href=\"#2-1-3--\" class=\"headerlink\" title=\"2.1.3 &amp;:\"></a>2.1.3 &amp;:</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> openssl-1.1.1w</span><br><span class=\"line\">./config --shared --prefix=/usr/local/openssl  <span class=\"comment\"># --shared </span></span><br><span class=\"line\">make -j4                                       <span class=\"comment\"># - j4 </span></span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"2-2-openssl\"><a href=\"#2-2-openssl\" class=\"headerlink\" title=\"2.2 openssl\"></a>2.2 openssl</h3><h4 id=\"2-2-1--openssl-\"><a href=\"#2-2-1--openssl-\" class=\"headerlink\" title=\"2.2.1  openssl \"></a>2.2.1  openssl </h4><p><code>mv /usr/bin/openssl&#123;,.back&#125;</code><br><code>ln -s /usr/local/openssl/bin/openssl /usr/bin/openssl</code></p>\n<h4 id=\"2-2-2-openssl-\"><a href=\"#2-2-2-openssl-\" class=\"headerlink\" title=\"2.2.2 openssl \"></a>2.2.2 openssl </h4><p><code>mv /usr/include/openssl&#123;,.back&#125;</code><br><code>ln -s /usr/local/openssl/include/openssl/ /usr/include/</code></p>\n<h4 id=\"2-2-3-\"><a href=\"#2-2-3-\" class=\"headerlink\" title=\"2.2.3 \"></a>2.2.3 </h4><p><code>echo &quot;/usr/local/openssl/lib&quot; &gt;&gt; /etc/ld.so.conf </code></p>\n<h4 id=\"2-2-4-\"><a href=\"#2-2-4-\" class=\"headerlink\" title=\"2.2.4 \"></a>2.2.4 </h4><p><code>ldconfig -v | grep openssl </code></p>\n<h2 id=\"-OpenSSH\"><a href=\"#-OpenSSH\" class=\"headerlink\" title=\" OpenSSH\"></a> OpenSSH</h2><h3 id=\"3-1-\"><a href=\"#3-1-\" class=\"headerlink\" title=\"3.1 \"></a>3.1 </h3><p><code>mv /etc/ssh&#123;,.back&#125;</code><br><code>mv /etc/pam.d/sshd&#123;,.back&#125;</code></p>\n<h3 id=\"3-2-\"><a href=\"#3-2-\" class=\"headerlink\" title=\"3.2 \"></a>3.2 </h3><p><code>wget https://mirrors.aliyun.com/pub/OpenBSD/OpenSSH/portable/openssh-9.5p1.tar.gz</code></p>\n<h3 id=\"3-3-\"><a href=\"#3-3-\" class=\"headerlink\" title=\"3.3 \"></a>3.3 </h3><p><code>tar -xzvf openssh-9.5p1.tar.gz</code></p>\n<h3 id=\"3-4--\"><a href=\"#3-4--\" class=\"headerlink\" title=\"3.4 &amp;\"></a>3.4 &amp;</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> openssh-9.5p1</span><br><span class=\"line\">./configure \\</span><br><span class=\"line\">--prefix=/usr/local/openssh \\</span><br><span class=\"line\">--sysconfdir=/etc/ssh \\</span><br><span class=\"line\">--with-zlib=/usr/local/zlib \\</span><br><span class=\"line\">--with-ssl-dir=/usr/local/openssl \\</span><br><span class=\"line\">--with-pam </span><br><span class=\"line\">make -j4</span><br><span class=\"line\">make tests</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-5-\"><a href=\"#3-5-\" class=\"headerlink\" title=\"3.5 \"></a>3.5 </h3><p><strong>openssl-1.1.1</strong><br><img src=\"/images/009.openssh.md.01.png\" width=100% height=80% /><br><strong>.&#x2F;config</strong><br><img src=\"/images/009.openssh.md.02.png\" width=100% height=60% /><br><strong>make tests </strong><br><img src=\"/images/009.openssh.md.04.png\" width=100% height=100% /><br><strong>.key 0600</strong><br><img src=\"/images/009.openssh.md.05.png\" width=100% height=100% /><br><img src=\"/images/009.openssh.md.06.png\" width=100% height=100% /></p>\n<p><strong>: systemctlsshd, </strong><br><strong>sshssh, ssh</strong></p>\n<h3 id=\"3-6-sshd\"><a href=\"#3-6-sshd\" class=\"headerlink\" title=\"3.6 sshd\"></a>3.6 sshd</h3><p>sshd_conf. <br>sshd: <code>vim /etc/ssh/sshd_config</code><br>: <code>PermitRootLogin yes</code></p>\n<h3 id=\"3-7-sshdpam\"><a href=\"#3-7-sshdpam\" class=\"headerlink\" title=\"3.7 sshdpam\"></a>3.7 sshdpam</h3><p><code>cp openssh-9.5p1/contrib/redhat/sshd.pam /etc/pam.d/sshd</code></p>\n<h3 id=\"3-8-systemctlsshd\"><a href=\"#3-8-systemctlsshd\" class=\"headerlink\" title=\"3.8 systemctlsshd\"></a>3.8 systemctlsshd</h3><p><strong></strong><br><code>cp openssh-9.5p1/contrib/redhat/sshd.init /etc/init.d/sshd</code></p>\n<p><strong>sshdservice</strong><br><code>vim /usr/lib/systemd/system/sshd.service</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#vim /usr/lib/systemd/system/sshd.service</span></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=OpenSSH server daemon</span><br><span class=\"line\">Documentation=man:sshd(8) man:sshd_config(5)</span><br><span class=\"line\">After=network.target sshd-keygen.service</span><br><span class=\"line\">Wants=sshd-keygen.service</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=forking</span><br><span class=\"line\">ExecStart=/etc/rc.d/init.d/sshd start</span><br><span class=\"line\">ExecStop=/etc/rc.d/init.d/sshd stop</span><br><span class=\"line\">Restart=/etc/rc.d/init.d/sshd stop</span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"3-9--sshd\"><a href=\"#3-9--sshd\" class=\"headerlink\" title=\"3.9  sshd\"></a>3.9  sshd</h3><p><code>mv /usr/bin/ssh&#123;,.back&#125;</code><br><code>mv /usr/sbin/sshd&#123;,.back&#125;</code><br><code>ln -s /usr/local/openssh/sbin/sshd /usr/sbin/sshd</code><br><code>ln -s /usr/local/openssh/bin/ssh /usr/bin/ssh</code></p>\n<p><strong>systemctl</strong><br><code>systemctl daemon-reload</code><br><strong>sshd</strong><br><code>systemctl restart sshd</code></p>\n<h3 id=\"3-10-\"><a href=\"#3-10-\" class=\"headerlink\" title=\"3.10 \"></a>3.10 </h3><img src=\"/images/009.openssh.md.07.png\" width=100% height=100% />\n\n\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"4-1-error-working-libcrypto-not-found\"><a href=\"#4-1-error-working-libcrypto-not-found\" class=\"headerlink\" title=\"4.1 error: *** working libcrypto not found\"></a>4.1 error: *** working libcrypto not found</h3><p>: <code>yum install openssl-devel</code></p>\n<h3 id=\"4-2-error-PAM-headers-not-found\"><a href=\"#4-2-error-PAM-headers-not-found\" class=\"headerlink\" title=\"4.2 error: PAM headers not found\"></a>4.2 error: PAM headers not found</h3><p>: <code>yum install pam-devel</code></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"1-1-openssh\"><a href=\"#1-1-openssh\" class=\"headerlink\" title=\"1.1 openssh\"></a>1.1 openssh</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@centos7 ~]# ssh -V</span><br><span class=\"line\">OpenSSH_7.4p1, OpenSSL 1.0.2k-fips  26 Jan 2017</span><br><span class=\"line\">[root@centos7 ~]# </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-2-openssl\"><a href=\"#1-2-openssl\" class=\"headerlink\" title=\"1.2 openssl\"></a>1.2 openssl</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@centos7 ~]# </span><br><span class=\"line\">[root@centos7 ~]# openssl version</span><br><span class=\"line\">OpenSSL 1.0.2k-fips  26 Jan 2017</span><br><span class=\"line\">[root@centos7 ~]# </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-3-\"><a href=\"#1-3-\" class=\"headerlink\" title=\"1.3 \"></a>1.3 </h3><p><code> yum install perl perl-Test-Harness perl-Test-Simple</code><br><code>yum groupinstall Development Tools</code></p>\n<h3 id=\"1-4--zlib\"><a href=\"#1-4--zlib\" class=\"headerlink\" title=\"1.4  zlib\"></a>1.4  zlib</h3><h4 id=\"1-4-1-\"><a href=\"#1-4-1-\" class=\"headerlink\" title=\"1.4.1 \"></a>1.4.1 </h4><p><code>wget http://www.zlib.net/zlib-1.3.tar.gz</code></p>\n<h4 id=\"1-4-2-\"><a href=\"#1-4-2-\" class=\"headerlink\" title=\"1.4.2 \"></a>1.4.2 </h4><p><code>tar -xzvf zlib-1.3.tar.gz</code></p>\n<h4 id=\"1-4-3-\"><a href=\"#1-4-3-\" class=\"headerlink\" title=\"1.4.3&amp;:\"></a>1.4.3&amp;:</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> zlib-1.3</span><br><span class=\"line\">./configure --prefix=/usr/local/zlib</span><br><span class=\"line\">make</span><br><span class=\"line\">make <span class=\"built_in\">test</span>  <span class=\"comment\">#  # ok</span></span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"-OpenSSL\"><a href=\"#-OpenSSL\" class=\"headerlink\" title=\" OpenSSL\"></a> OpenSSL</h2><h3 id=\"2-1-\"><a href=\"#2-1-\" class=\"headerlink\" title=\"2.1 \"></a>2.1 </h3><blockquote>\n<p>: <a href=\"https://www.openssl.org/source/\">https://www.openssl.org/source/</a></p>\n</blockquote>\n<h4 id=\"2-1-1-\"><a href=\"#2-1-1-\" class=\"headerlink\" title=\"2.1.1 :\"></a>2.1.1 :</h4><p><code>wget https://www.openssl.org/source/openssl-1.1.1.tar.gz</code></p>\n<h4 id=\"2-1-2-\"><a href=\"#2-1-2-\" class=\"headerlink\" title=\"2.1.2 \"></a>2.1.2 </h4><p><code>tar -xzvf openssl-1.1.1w.tar.gz</code></p>\n<h4 id=\"2-1-3--\"><a href=\"#2-1-3--\" class=\"headerlink\" title=\"2.1.3 &amp;:\"></a>2.1.3 &amp;:</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> openssl-1.1.1w</span><br><span class=\"line\">./config --shared --prefix=/usr/local/openssl  <span class=\"comment\"># --shared </span></span><br><span class=\"line\">make -j4                                       <span class=\"comment\"># - j4 </span></span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"2-2-openssl\"><a href=\"#2-2-openssl\" class=\"headerlink\" title=\"2.2 openssl\"></a>2.2 openssl</h3><h4 id=\"2-2-1--openssl-\"><a href=\"#2-2-1--openssl-\" class=\"headerlink\" title=\"2.2.1  openssl \"></a>2.2.1  openssl </h4><p><code>mv /usr/bin/openssl&#123;,.back&#125;</code><br><code>ln -s /usr/local/openssl/bin/openssl /usr/bin/openssl</code></p>\n<h4 id=\"2-2-2-openssl-\"><a href=\"#2-2-2-openssl-\" class=\"headerlink\" title=\"2.2.2 openssl \"></a>2.2.2 openssl </h4><p><code>mv /usr/include/openssl&#123;,.back&#125;</code><br><code>ln -s /usr/local/openssl/include/openssl/ /usr/include/</code></p>\n<h4 id=\"2-2-3-\"><a href=\"#2-2-3-\" class=\"headerlink\" title=\"2.2.3 \"></a>2.2.3 </h4><p><code>echo &quot;/usr/local/openssl/lib&quot; &gt;&gt; /etc/ld.so.conf </code></p>\n<h4 id=\"2-2-4-\"><a href=\"#2-2-4-\" class=\"headerlink\" title=\"2.2.4 \"></a>2.2.4 </h4><p><code>ldconfig -v | grep openssl </code></p>\n<h2 id=\"-OpenSSH\"><a href=\"#-OpenSSH\" class=\"headerlink\" title=\" OpenSSH\"></a> OpenSSH</h2><h3 id=\"3-1-\"><a href=\"#3-1-\" class=\"headerlink\" title=\"3.1 \"></a>3.1 </h3><p><code>mv /etc/ssh&#123;,.back&#125;</code><br><code>mv /etc/pam.d/sshd&#123;,.back&#125;</code></p>\n<h3 id=\"3-2-\"><a href=\"#3-2-\" class=\"headerlink\" title=\"3.2 \"></a>3.2 </h3><p><code>wget https://mirrors.aliyun.com/pub/OpenBSD/OpenSSH/portable/openssh-9.5p1.tar.gz</code></p>\n<h3 id=\"3-3-\"><a href=\"#3-3-\" class=\"headerlink\" title=\"3.3 \"></a>3.3 </h3><p><code>tar -xzvf openssh-9.5p1.tar.gz</code></p>\n<h3 id=\"3-4--\"><a href=\"#3-4--\" class=\"headerlink\" title=\"3.4 &amp;\"></a>3.4 &amp;</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> openssh-9.5p1</span><br><span class=\"line\">./configure \\</span><br><span class=\"line\">--prefix=/usr/local/openssh \\</span><br><span class=\"line\">--sysconfdir=/etc/ssh \\</span><br><span class=\"line\">--with-zlib=/usr/local/zlib \\</span><br><span class=\"line\">--with-ssl-dir=/usr/local/openssl \\</span><br><span class=\"line\">--with-pam </span><br><span class=\"line\">make -j4</span><br><span class=\"line\">make tests</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-5-\"><a href=\"#3-5-\" class=\"headerlink\" title=\"3.5 \"></a>3.5 </h3><p><strong>openssl-1.1.1</strong><br><img src=\"/images/009.openssh.md.01.png\" width=100% height=80% /><br><strong>.&#x2F;config</strong><br><img src=\"/images/009.openssh.md.02.png\" width=100% height=60% /><br><strong>make tests </strong><br><img src=\"/images/009.openssh.md.04.png\" width=100% height=100% /><br><strong>.key 0600</strong><br><img src=\"/images/009.openssh.md.05.png\" width=100% height=100% /><br><img src=\"/images/009.openssh.md.06.png\" width=100% height=100% /></p>\n<p><strong>: systemctlsshd, </strong><br><strong>sshssh, ssh</strong></p>\n<h3 id=\"3-6-sshd\"><a href=\"#3-6-sshd\" class=\"headerlink\" title=\"3.6 sshd\"></a>3.6 sshd</h3><p>sshd_conf. <br>sshd: <code>vim /etc/ssh/sshd_config</code><br>: <code>PermitRootLogin yes</code></p>\n<h3 id=\"3-7-sshdpam\"><a href=\"#3-7-sshdpam\" class=\"headerlink\" title=\"3.7 sshdpam\"></a>3.7 sshdpam</h3><p><code>cp openssh-9.5p1/contrib/redhat/sshd.pam /etc/pam.d/sshd</code></p>\n<h3 id=\"3-8-systemctlsshd\"><a href=\"#3-8-systemctlsshd\" class=\"headerlink\" title=\"3.8 systemctlsshd\"></a>3.8 systemctlsshd</h3><p><strong></strong><br><code>cp openssh-9.5p1/contrib/redhat/sshd.init /etc/init.d/sshd</code></p>\n<p><strong>sshdservice</strong><br><code>vim /usr/lib/systemd/system/sshd.service</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#vim /usr/lib/systemd/system/sshd.service</span></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=OpenSSH server daemon</span><br><span class=\"line\">Documentation=man:sshd(8) man:sshd_config(5)</span><br><span class=\"line\">After=network.target sshd-keygen.service</span><br><span class=\"line\">Wants=sshd-keygen.service</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=forking</span><br><span class=\"line\">ExecStart=/etc/rc.d/init.d/sshd start</span><br><span class=\"line\">ExecStop=/etc/rc.d/init.d/sshd stop</span><br><span class=\"line\">Restart=/etc/rc.d/init.d/sshd stop</span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"3-9--sshd\"><a href=\"#3-9--sshd\" class=\"headerlink\" title=\"3.9  sshd\"></a>3.9  sshd</h3><p><code>mv /usr/bin/ssh&#123;,.back&#125;</code><br><code>mv /usr/sbin/sshd&#123;,.back&#125;</code><br><code>ln -s /usr/local/openssh/sbin/sshd /usr/sbin/sshd</code><br><code>ln -s /usr/local/openssh/bin/ssh /usr/bin/ssh</code></p>\n<p><strong>systemctl</strong><br><code>systemctl daemon-reload</code><br><strong>sshd</strong><br><code>systemctl restart sshd</code></p>\n<h3 id=\"3-10-\"><a href=\"#3-10-\" class=\"headerlink\" title=\"3.10 \"></a>3.10 </h3><img src=\"/images/009.openssh.md.07.png\" width=100% height=100% />\n\n\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"4-1-error-working-libcrypto-not-found\"><a href=\"#4-1-error-working-libcrypto-not-found\" class=\"headerlink\" title=\"4.1 error: *** working libcrypto not found\"></a>4.1 error: *** working libcrypto not found</h3><p>: <code>yum install openssl-devel</code></p>\n<h3 id=\"4-2-error-PAM-headers-not-found\"><a href=\"#4-2-error-PAM-headers-not-found\" class=\"headerlink\" title=\"4.2 error: PAM headers not found\"></a>4.2 error: PAM headers not found</h3><p>: <code>yum install pam-devel</code></p>\n"},{"title":"gcc-4.8.5gcc-11.2.0","date":"2022-05-23T02:33:08.000Z","_content":"\n> : centos7.9gcc-11.2.0\n\n\n0)  gcc-11.2.0\n``` wget --no-check-certificate https://ftp.gnu.org/gnu/gcc/gcc-11.2.0/gcc-11.2.0.tar.gz ```\n\n1) \n``` tar -zxvf gcc-11.2.0.tar.gz ```\n\n2) \n``` yum install bzip2 gcc gcc-c++```\n```  ./contrib/download_prerequisites ```\n\n3) \n``` cd gcc-11.2.0 ```\n```mkdir build```\n```cd build/```\n```../configure -enable-checking=release -enable-languages=c,c++ -disable-multilib```\n``` make -j4 ```\n``` make install```\n**enable-languagesgcc**\n**disable-multilib**\n**disable-checking**\n** *enable-checking=xxx* **\n\n4) gccgcc\n``` yum remove gcc g++ ```\n``` ln -s /usr/local/bin/gcc /usr/bin/gcc ```\n\n5) \n``` gcc -v ```\n\n\n\n","source":"_posts/010.gcc_update.md","raw":"---\ntitle: gcc-4.8.5gcc-11.2.0\ndate: 2022-05-23 10:33:08\ncategories: \n- [Linux]\n- [CentOS]\ntags: \n- gcc\n---\n\n> : centos7.9gcc-11.2.0\n\n\n0)  gcc-11.2.0\n``` wget --no-check-certificate https://ftp.gnu.org/gnu/gcc/gcc-11.2.0/gcc-11.2.0.tar.gz ```\n\n1) \n``` tar -zxvf gcc-11.2.0.tar.gz ```\n\n2) \n``` yum install bzip2 gcc gcc-c++```\n```  ./contrib/download_prerequisites ```\n\n3) \n``` cd gcc-11.2.0 ```\n```mkdir build```\n```cd build/```\n```../configure -enable-checking=release -enable-languages=c,c++ -disable-multilib```\n``` make -j4 ```\n``` make install```\n**enable-languagesgcc**\n**disable-multilib**\n**disable-checking**\n** *enable-checking=xxx* **\n\n4) gccgcc\n``` yum remove gcc g++ ```\n``` ln -s /usr/local/bin/gcc /usr/bin/gcc ```\n\n5) \n``` gcc -v ```\n\n\n\n","slug":"010.gcc_update","published":1,"updated":"2023-03-03T05:15:18.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbdl000vyknr15ufef6d","content":"<blockquote>\n<p>: centos7.9gcc-11.2.0</p>\n</blockquote>\n<ol start=\"0\">\n<li> gcc-11.2.0</li>\n</ol>\n<p><code>wget --no-check-certificate https://ftp.gnu.org/gnu/gcc/gcc-11.2.0/gcc-11.2.0.tar.gz</code></p>\n<ol>\n<li></li>\n</ol>\n<p><code>tar -zxvf gcc-11.2.0.tar.gz</code></p>\n<ol start=\"2\">\n<li></li>\n</ol>\n<p><code> yum install bzip2 gcc gcc-c++</code><br><code> ./contrib/download_prerequisites</code></p>\n<ol start=\"3\">\n<li></li>\n</ol>\n<p><code>cd gcc-11.2.0</code><br><code>mkdir build</code><br><code>cd build/</code><br><code>../configure -enable-checking=release -enable-languages=c,c++ -disable-multilib</code><br><code>make -j4</code><br><code> make install</code><br><strong>enable-languagesgcc</strong><br><strong>disable-multilib</strong><br><strong>disable-checking</strong><br><strong> <em>enable-checking&#x3D;xxx</em> </strong></p>\n<ol start=\"4\">\n<li>gccgcc</li>\n</ol>\n<p><code>yum remove gcc g++</code><br><code>ln -s /usr/local/bin/gcc /usr/bin/gcc</code></p>\n<ol start=\"5\">\n<li></li>\n</ol>\n<p><code>gcc -v</code></p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>: centos7.9gcc-11.2.0</p>\n</blockquote>\n<ol start=\"0\">\n<li> gcc-11.2.0</li>\n</ol>\n<p><code>wget --no-check-certificate https://ftp.gnu.org/gnu/gcc/gcc-11.2.0/gcc-11.2.0.tar.gz</code></p>\n<ol>\n<li></li>\n</ol>\n<p><code>tar -zxvf gcc-11.2.0.tar.gz</code></p>\n<ol start=\"2\">\n<li></li>\n</ol>\n<p><code> yum install bzip2 gcc gcc-c++</code><br><code> ./contrib/download_prerequisites</code></p>\n<ol start=\"3\">\n<li></li>\n</ol>\n<p><code>cd gcc-11.2.0</code><br><code>mkdir build</code><br><code>cd build/</code><br><code>../configure -enable-checking=release -enable-languages=c,c++ -disable-multilib</code><br><code>make -j4</code><br><code> make install</code><br><strong>enable-languagesgcc</strong><br><strong>disable-multilib</strong><br><strong>disable-checking</strong><br><strong> <em>enable-checking&#x3D;xxx</em> </strong></p>\n<ol start=\"4\">\n<li>gccgcc</li>\n</ol>\n<p><code>yum remove gcc g++</code><br><code>ln -s /usr/local/bin/gcc /usr/bin/gcc</code></p>\n<ol start=\"5\">\n<li></li>\n</ol>\n<p><code>gcc -v</code></p>\n"},{"title":"apache-doris ","date":"2022-05-24T02:33:08.000Z","_content":"\n> Apache DorisMPPApache Doris10PB\n\n> [](https://doris.apache.org/zh-CN/get-starting/get-starting.html)\n\n**docker, CentOSUbuntu, , .**\n\n**docker, docker**\n\n0) \n``` docker pull apache/incubator-doris:build-env-ldb-toolchain-latest ```\n\n1) \n``` docker run -it -v /root/.m2/:/root/.m2 -v /root/apache-doris-1.0.0-incubating-src:/root/apache-doris-1.0.0-incubating-src --privileged=true apache/incubator-doris:build-env-ldb-toolchain-latest```\n\n- docker.m2,  maven .\n```  -v /root/.m2/:/root/.m2 ``` \n- , , .\n``` -v /root/apache-doris-1.0.0-incubating-src:/root/apache-doris-1.0.0-incubating-src``` \n\n2) cpu AVX2 \n``` cat /proc/cpuinfo | grep avx2 ```\n\n3) \n-  AVX2 \n``` sh build.sh ```\n-  AVX2 \n``` USE_AVX2=0  sh build.sh ```\n\n4) \n``` tar -zcvf doris.tar.gz /doris-path/output/* ```","source":"_posts/011.apache-doris.md","raw":"---\ntitle: apache-doris \ndate: 2022-05-24 10:33:08\ncategories: \n- [Database]\ntags: \n- apache-doris\n- docker\n---\n\n> Apache DorisMPPApache Doris10PB\n\n> [](https://doris.apache.org/zh-CN/get-starting/get-starting.html)\n\n**docker, CentOSUbuntu, , .**\n\n**docker, docker**\n\n0) \n``` docker pull apache/incubator-doris:build-env-ldb-toolchain-latest ```\n\n1) \n``` docker run -it -v /root/.m2/:/root/.m2 -v /root/apache-doris-1.0.0-incubating-src:/root/apache-doris-1.0.0-incubating-src --privileged=true apache/incubator-doris:build-env-ldb-toolchain-latest```\n\n- docker.m2,  maven .\n```  -v /root/.m2/:/root/.m2 ``` \n- , , .\n``` -v /root/apache-doris-1.0.0-incubating-src:/root/apache-doris-1.0.0-incubating-src``` \n\n2) cpu AVX2 \n``` cat /proc/cpuinfo | grep avx2 ```\n\n3) \n-  AVX2 \n``` sh build.sh ```\n-  AVX2 \n``` USE_AVX2=0  sh build.sh ```\n\n4) \n``` tar -zcvf doris.tar.gz /doris-path/output/* ```","slug":"011.apache-doris","published":1,"updated":"2023-04-19T14:42:01.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbdn000yyknr2v383tcg","content":"<blockquote>\n<p>Apache DorisMPPApache Doris10PB</p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://doris.apache.org/zh-CN/get-starting/get-starting.html\"></a></p>\n</blockquote>\n<p><strong>docker, CentOSUbuntu, , .</strong></p>\n<p><strong>docker, docker</strong></p>\n<ol start=\"0\">\n<li></li>\n</ol>\n<p><code>docker pull apache/incubator-doris:build-env-ldb-toolchain-latest</code></p>\n<ol>\n<li></li>\n</ol>\n<p><code> docker run -it -v /root/.m2/:/root/.m2 -v /root/apache-doris-1.0.0-incubating-src:/root/apache-doris-1.0.0-incubating-src --privileged=true apache/incubator-doris:build-env-ldb-toolchain-latest</code></p>\n<ul>\n<li>docker.m2,  maven .</li>\n</ul>\n<p><code> -v /root/.m2/:/root/.m2</code> </p>\n<ul>\n<li>, , .</li>\n</ul>\n<p><code> -v /root/apache-doris-1.0.0-incubating-src:/root/apache-doris-1.0.0-incubating-src</code> </p>\n<ol start=\"2\">\n<li>cpu AVX2 </li>\n</ol>\n<p><code>cat /proc/cpuinfo | grep avx2</code></p>\n<ol start=\"3\">\n<li></li>\n</ol>\n<ul>\n<li> AVX2 </li>\n</ul>\n<p><code>sh build.sh</code></p>\n<ul>\n<li> AVX2 </li>\n</ul>\n<p><code>USE_AVX2=0  sh build.sh</code></p>\n<ol start=\"4\">\n<li></li>\n</ol>\n<p><code>tar -zcvf doris.tar.gz /doris-path/output/*</code></p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>Apache DorisMPPApache Doris10PB</p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://doris.apache.org/zh-CN/get-starting/get-starting.html\"></a></p>\n</blockquote>\n<p><strong>docker, CentOSUbuntu, , .</strong></p>\n<p><strong>docker, docker</strong></p>\n<ol start=\"0\">\n<li></li>\n</ol>\n<p><code>docker pull apache/incubator-doris:build-env-ldb-toolchain-latest</code></p>\n<ol>\n<li></li>\n</ol>\n<p><code> docker run -it -v /root/.m2/:/root/.m2 -v /root/apache-doris-1.0.0-incubating-src:/root/apache-doris-1.0.0-incubating-src --privileged=true apache/incubator-doris:build-env-ldb-toolchain-latest</code></p>\n<ul>\n<li>docker.m2,  maven .</li>\n</ul>\n<p><code> -v /root/.m2/:/root/.m2</code> </p>\n<ul>\n<li>, , .</li>\n</ul>\n<p><code> -v /root/apache-doris-1.0.0-incubating-src:/root/apache-doris-1.0.0-incubating-src</code> </p>\n<ol start=\"2\">\n<li>cpu AVX2 </li>\n</ol>\n<p><code>cat /proc/cpuinfo | grep avx2</code></p>\n<ol start=\"3\">\n<li></li>\n</ol>\n<ul>\n<li> AVX2 </li>\n</ul>\n<p><code>sh build.sh</code></p>\n<ul>\n<li> AVX2 </li>\n</ul>\n<p><code>USE_AVX2=0  sh build.sh</code></p>\n<ol start=\"4\">\n<li></li>\n</ol>\n<p><code>tar -zcvf doris.tar.gz /doris-path/output/*</code></p>\n"},{"title":"Installation of Docker","date":"2021-03-18T07:48:13.000Z","_content":"\n# 0Env\n\n**Environment :** \n- CentOS Linux release 7.9.2009 (Core)\n- Client: Docker Engine - Community  Version:  20.10.5\n- Server: Docker Engine - Community Version:   20.10.5\n\n\n**Installation (text-based installer)**\n\n## 1Download *docker-ce.repo*\n   ```wget -O /etc/yum.repos.d/docker-ce.repo https://download.docker.com/linux/centos/docker-ce.repo```\n\n## 2Change sources to TUNA\n```sed -i 's+https://download.docker.com+https://mirror.nju.edu.cn/docker-ce+' /etc/yum.repos.d/docker-ce.repo```\n\n## 3Installating\n```yum makecache fast```\n```yum  install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin```\n\n## 4Start service\n```systemctl start docker```\n\n## 5Verify \n``` docker --version```  \n\n## 6e.g\n```docker run hello-world```\n\n**If you've seen such this whitch means the docker have succeed run on you system.**\n![image.png](/images/012.docker_installation.md.01.png)\n\n## 7Some improvements\n\nchange source \n``` vim /etc/docker/daemon.json``` \ntouch it if there was not such file\n```\n{\n  \"registry-mirrors\": [\n    \"https://hub-mirror.c.163.com\",\n    \"https://mirror.baidubce.com\"\n  ]\n}\n```","source":"_posts/012.docker_installation.md","raw":"---\ntitle: Installation of Docker \ndate: 2021-03-18 15:48:13\ncategories: \n  - [Docker]\ntags: \n- docker\n---\n\n# 0Env\n\n**Environment :** \n- CentOS Linux release 7.9.2009 (Core)\n- Client: Docker Engine - Community  Version:  20.10.5\n- Server: Docker Engine - Community Version:   20.10.5\n\n\n**Installation (text-based installer)**\n\n## 1Download *docker-ce.repo*\n   ```wget -O /etc/yum.repos.d/docker-ce.repo https://download.docker.com/linux/centos/docker-ce.repo```\n\n## 2Change sources to TUNA\n```sed -i 's+https://download.docker.com+https://mirror.nju.edu.cn/docker-ce+' /etc/yum.repos.d/docker-ce.repo```\n\n## 3Installating\n```yum makecache fast```\n```yum  install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin```\n\n## 4Start service\n```systemctl start docker```\n\n## 5Verify \n``` docker --version```  \n\n## 6e.g\n```docker run hello-world```\n\n**If you've seen such this whitch means the docker have succeed run on you system.**\n![image.png](/images/012.docker_installation.md.01.png)\n\n## 7Some improvements\n\nchange source \n``` vim /etc/docker/daemon.json``` \ntouch it if there was not such file\n```\n{\n  \"registry-mirrors\": [\n    \"https://hub-mirror.c.163.com\",\n    \"https://mirror.baidubce.com\"\n  ]\n}\n```","slug":"012.docker_installation","published":1,"updated":"2023-10-17T03:00:36.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbdr0012yknr9dbx0mem","content":"<h1 id=\"0Env\"><a href=\"#0Env\" class=\"headerlink\" title=\"0Env\"></a>0Env</h1><p><strong>Environment :</strong> </p>\n<ul>\n<li>CentOS Linux release 7.9.2009 (Core)</li>\n<li>Client: Docker Engine - Community  Version:  20.10.5</li>\n<li>Server: Docker Engine - Community Version:   20.10.5</li>\n</ul>\n<p><strong>Installation (text-based installer)</strong></p>\n<h2 id=\"1Download-docker-ce-repo\"><a href=\"#1Download-docker-ce-repo\" class=\"headerlink\" title=\"1Download docker-ce.repo\"></a>1Download <em>docker-ce.repo</em></h2><p>   <code>wget -O /etc/yum.repos.d/docker-ce.repo https://download.docker.com/linux/centos/docker-ce.repo</code></p>\n<h2 id=\"2Change-sources-to-TUNA\"><a href=\"#2Change-sources-to-TUNA\" class=\"headerlink\" title=\"2Change sources to TUNA\"></a>2Change sources to TUNA</h2><p><code>sed -i &#39;s+https://download.docker.com+https://mirror.nju.edu.cn/docker-ce+&#39; /etc/yum.repos.d/docker-ce.repo</code></p>\n<h2 id=\"3Installating\"><a href=\"#3Installating\" class=\"headerlink\" title=\"3Installating\"></a>3Installating</h2><p><code>yum makecache fast</code><br><code>yum  install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</code></p>\n<h2 id=\"4Start-service\"><a href=\"#4Start-service\" class=\"headerlink\" title=\"4Start service\"></a>4Start service</h2><p><code>systemctl start docker</code></p>\n<h2 id=\"5Verify\"><a href=\"#5Verify\" class=\"headerlink\" title=\"5Verify\"></a>5Verify</h2><p><code> docker --version</code>  </p>\n<h2 id=\"6e-g\"><a href=\"#6e-g\" class=\"headerlink\" title=\"6e.g\"></a>6e.g</h2><p><code>docker run hello-world</code></p>\n<p><strong>If youve seen such this whitch means the docker have succeed run on you system.</strong><br><img src=\"/images/012.docker_installation.md.01.png\" alt=\"image.png\"></p>\n<h2 id=\"7Some-improvements\"><a href=\"#7Some-improvements\" class=\"headerlink\" title=\"7Some improvements\"></a>7Some improvements</h2><p>change source<br><code> vim /etc/docker/daemon.json</code><br>touch it if there was not such file</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;registry-mirrors&quot;: [</span><br><span class=\"line\">    &quot;https://hub-mirror.c.163.com&quot;,</span><br><span class=\"line\">    &quot;https://mirror.baidubce.com&quot;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"0Env\"><a href=\"#0Env\" class=\"headerlink\" title=\"0Env\"></a>0Env</h1><p><strong>Environment :</strong> </p>\n<ul>\n<li>CentOS Linux release 7.9.2009 (Core)</li>\n<li>Client: Docker Engine - Community  Version:  20.10.5</li>\n<li>Server: Docker Engine - Community Version:   20.10.5</li>\n</ul>\n<p><strong>Installation (text-based installer)</strong></p>\n<h2 id=\"1Download-docker-ce-repo\"><a href=\"#1Download-docker-ce-repo\" class=\"headerlink\" title=\"1Download docker-ce.repo\"></a>1Download <em>docker-ce.repo</em></h2><p>   <code>wget -O /etc/yum.repos.d/docker-ce.repo https://download.docker.com/linux/centos/docker-ce.repo</code></p>\n<h2 id=\"2Change-sources-to-TUNA\"><a href=\"#2Change-sources-to-TUNA\" class=\"headerlink\" title=\"2Change sources to TUNA\"></a>2Change sources to TUNA</h2><p><code>sed -i &#39;s+https://download.docker.com+https://mirror.nju.edu.cn/docker-ce+&#39; /etc/yum.repos.d/docker-ce.repo</code></p>\n<h2 id=\"3Installating\"><a href=\"#3Installating\" class=\"headerlink\" title=\"3Installating\"></a>3Installating</h2><p><code>yum makecache fast</code><br><code>yum  install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</code></p>\n<h2 id=\"4Start-service\"><a href=\"#4Start-service\" class=\"headerlink\" title=\"4Start service\"></a>4Start service</h2><p><code>systemctl start docker</code></p>\n<h2 id=\"5Verify\"><a href=\"#5Verify\" class=\"headerlink\" title=\"5Verify\"></a>5Verify</h2><p><code> docker --version</code>  </p>\n<h2 id=\"6e-g\"><a href=\"#6e-g\" class=\"headerlink\" title=\"6e.g\"></a>6e.g</h2><p><code>docker run hello-world</code></p>\n<p><strong>If youve seen such this whitch means the docker have succeed run on you system.</strong><br><img src=\"/images/012.docker_installation.md.01.png\" alt=\"image.png\"></p>\n<h2 id=\"7Some-improvements\"><a href=\"#7Some-improvements\" class=\"headerlink\" title=\"7Some improvements\"></a>7Some improvements</h2><p>change source<br><code> vim /etc/docker/daemon.json</code><br>touch it if there was not such file</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;registry-mirrors&quot;: [</span><br><span class=\"line\">    &quot;https://hub-mirror.c.163.com&quot;,</span><br><span class=\"line\">    &quot;https://mirror.baidubce.com&quot;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"keepalivednginx","date":"2020-03-18T07:48:13.000Z","_content":"\n## :\n: High Availability (HA)\n: Load Balance (LB) \n: Server Load Balancing (SLB)\n\n:  \n\n## :\n**A 192.168.128.8 nginx + keepalived**\n**B 192.168.128.9 nginx + keepalived**\n\n**keepalivednginx, keepalivednginx 192.168.128.10**\n\n## \nA:  ```yum install keepalived nginx ```\nB:  ```yum install keepalived nginx ```\n\n## A\n\n1) keepalived \n``` /etc/keepalived/keepalived.conf ```\n\n```\n vrrp_script chk_nginx {\n     script \"/etc/keepalived/nginx_check.sh\"    # nginx\n     interval 2                                 # 2s\n     weight -20                                 # -20\n  }\n\n  vrrp_instance VI_1 {\n      state MASTER                              # MASTERBACKUP\n      interface ens33                           # VIP\n      virtual_router_id 51                      # ID\n      mcast_src_ip 192.168.128.8                # IP\n      nopreempt                                 # \n      priority 90                              # 0~254MASTER > BACKUP\n      advert_int 1                              # 1s\n      authentication {                          # \n          auth_type PASS                        # VRRPPASSAH\n          auth_pass 1111                        # VRRPvrrp_instance\n      }\n    track_script {                              # track_scriptinstance\n          chk_nginx                             # Nginx\n      }\n      virtual_ipaddress {                       #IPVIP\n          192.168.128.10                        # IP\n      }\n  }\n```\n2) nginx \n``` vim /etc/keepalived/nginx_check.sh```\n``` chmod +x /etc/keepalived/nginx_check.sh```\n\n``` bash\n#!/bin/bash\nif [ \"$(ps -ef | grep \"nginx: master process\"| grep -v grep )\" == \"\" ];then\n    #echo 1\n    systemctl start nginx\n    sleep 5\n\n    if [ \"$(ps -ef | grep \"nginx: master process\"| grep -v grep )\" == \"\" ];then\n        systemctl stop keepalived\n        #echo 2\n    fi\nfi\n```\n\n## B\n\n1) keepalived \n**A```ip```, ``````, **\n``` /etc/keepalived/keepalived.conf ```\n\n```\n vrrp_script chk_nginx {\n     script \"/etc/keepalived/nginx_check.sh\"    # nginx\n     interval 2                                 # 2s\n     weight -20                                 # -20\n  }\n\n  vrrp_instance VI_1 {\n      state MASTER                              # MASTERBACKUP\n      interface ens33                           # VIP\n      virtual_router_id 51                      # ID\n      mcast_src_ip 192.168.128.9                # IP\n      nopreempt                                 # \n      priority 100                              # 0~254MASTER > BACKUP\n      advert_int 1                              # 1s\n      authentication {                          # \n          auth_type PASS                        # VRRPPASSAH\n          auth_pass 1111                        # VRRPvrrp_instance\n      }\n    track_script {                              # track_scriptinstance\n          chk_nginx                             # Nginx\n      }\n      virtual_ipaddress {                       #IPVIP\n          192.168.128.10                        # IP\n      }\n  }\n```\n\n2) nginx \n**A**\n``` vim /etc/keepalived/nginx_check.sh```\n``` chmod +x /etc/keepalived/nginx_check.sh```\n\n``` bash\n#!/bin/bash\nif [ \"$(ps -ef | grep \"nginx: master process\"| grep -v grep )\" == \"\" ];then\n    #echo 1\n    systemctl start nginx\n    sleep 5\n\n    if [ \"$(ps -ef | grep \"nginx: master process\"| grep -v grep )\" == \"\" ];then\n        systemctl stop keepalived\n        #echo 2\n    fi\nfi\n```\n\n## \nAB keppalived  nginx \n``` systemctl enable nginx```\n``` systemctl enable keepalived```\n``` systemctl start nginx```\n``` systemctl start nginx ```\n\n**ABnginx. nginxkeepalived192.168.128.10 nginx**","source":"_posts/013.keepalived.md","raw":"---\ntitle: keepalivednginx\ndate: 2020-3-18 15:48:13\ncategories: \n- [Linux]\n- [CentOS]\ntags: \n- nginx\n- keepalived\n- HA\n---\n\n## :\n: High Availability (HA)\n: Load Balance (LB) \n: Server Load Balancing (SLB)\n\n:  \n\n## :\n**A 192.168.128.8 nginx + keepalived**\n**B 192.168.128.9 nginx + keepalived**\n\n**keepalivednginx, keepalivednginx 192.168.128.10**\n\n## \nA:  ```yum install keepalived nginx ```\nB:  ```yum install keepalived nginx ```\n\n## A\n\n1) keepalived \n``` /etc/keepalived/keepalived.conf ```\n\n```\n vrrp_script chk_nginx {\n     script \"/etc/keepalived/nginx_check.sh\"    # nginx\n     interval 2                                 # 2s\n     weight -20                                 # -20\n  }\n\n  vrrp_instance VI_1 {\n      state MASTER                              # MASTERBACKUP\n      interface ens33                           # VIP\n      virtual_router_id 51                      # ID\n      mcast_src_ip 192.168.128.8                # IP\n      nopreempt                                 # \n      priority 90                              # 0~254MASTER > BACKUP\n      advert_int 1                              # 1s\n      authentication {                          # \n          auth_type PASS                        # VRRPPASSAH\n          auth_pass 1111                        # VRRPvrrp_instance\n      }\n    track_script {                              # track_scriptinstance\n          chk_nginx                             # Nginx\n      }\n      virtual_ipaddress {                       #IPVIP\n          192.168.128.10                        # IP\n      }\n  }\n```\n2) nginx \n``` vim /etc/keepalived/nginx_check.sh```\n``` chmod +x /etc/keepalived/nginx_check.sh```\n\n``` bash\n#!/bin/bash\nif [ \"$(ps -ef | grep \"nginx: master process\"| grep -v grep )\" == \"\" ];then\n    #echo 1\n    systemctl start nginx\n    sleep 5\n\n    if [ \"$(ps -ef | grep \"nginx: master process\"| grep -v grep )\" == \"\" ];then\n        systemctl stop keepalived\n        #echo 2\n    fi\nfi\n```\n\n## B\n\n1) keepalived \n**A```ip```, ``````, **\n``` /etc/keepalived/keepalived.conf ```\n\n```\n vrrp_script chk_nginx {\n     script \"/etc/keepalived/nginx_check.sh\"    # nginx\n     interval 2                                 # 2s\n     weight -20                                 # -20\n  }\n\n  vrrp_instance VI_1 {\n      state MASTER                              # MASTERBACKUP\n      interface ens33                           # VIP\n      virtual_router_id 51                      # ID\n      mcast_src_ip 192.168.128.9                # IP\n      nopreempt                                 # \n      priority 100                              # 0~254MASTER > BACKUP\n      advert_int 1                              # 1s\n      authentication {                          # \n          auth_type PASS                        # VRRPPASSAH\n          auth_pass 1111                        # VRRPvrrp_instance\n      }\n    track_script {                              # track_scriptinstance\n          chk_nginx                             # Nginx\n      }\n      virtual_ipaddress {                       #IPVIP\n          192.168.128.10                        # IP\n      }\n  }\n```\n\n2) nginx \n**A**\n``` vim /etc/keepalived/nginx_check.sh```\n``` chmod +x /etc/keepalived/nginx_check.sh```\n\n``` bash\n#!/bin/bash\nif [ \"$(ps -ef | grep \"nginx: master process\"| grep -v grep )\" == \"\" ];then\n    #echo 1\n    systemctl start nginx\n    sleep 5\n\n    if [ \"$(ps -ef | grep \"nginx: master process\"| grep -v grep )\" == \"\" ];then\n        systemctl stop keepalived\n        #echo 2\n    fi\nfi\n```\n\n## \nAB keppalived  nginx \n``` systemctl enable nginx```\n``` systemctl enable keepalived```\n``` systemctl start nginx```\n``` systemctl start nginx ```\n\n**ABnginx. nginxkeepalived192.168.128.10 nginx**","slug":"013.keepalived","published":1,"updated":"2023-03-03T05:15:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbds0016yknrgph2ci1e","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\":\"></a>:</h2><p>: High Availability (HA)<br>: Load Balance (LB)<br>: Server Load Balancing (SLB)</p>\n<p>:  </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\":\"></a>:</h2><p><strong>A 192.168.128.8 nginx + keepalived</strong><br><strong>B 192.168.128.9 nginx + keepalived</strong></p>\n<p><strong>keepalivednginx, keepalivednginx 192.168.128.10</strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>A:  <code>yum install keepalived nginx </code><br>B:  <code>yum install keepalived nginx </code></p>\n<h2 id=\"A\"><a href=\"#A\" class=\"headerlink\" title=\"A\"></a>A</h2><ol>\n<li>keepalived </li>\n</ol>\n<p><code>/etc/keepalived/keepalived.conf</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">vrrp_script chk_nginx &#123;</span><br><span class=\"line\">    script &quot;/etc/keepalived/nginx_check.sh&quot;    # nginx</span><br><span class=\"line\">    interval 2                                 # 2s</span><br><span class=\"line\">    weight -20                                 # -20</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> vrrp_instance VI_1 &#123;</span><br><span class=\"line\">     state MASTER                              # MASTERBACKUP</span><br><span class=\"line\">     interface ens33                           # VIP</span><br><span class=\"line\">     virtual_router_id 51                      # ID</span><br><span class=\"line\">     mcast_src_ip 192.168.128.8                # IP</span><br><span class=\"line\">     nopreempt                                 # </span><br><span class=\"line\">     priority 90                              # 0~254MASTER &gt; BACKUP</span><br><span class=\"line\">     advert_int 1                              # 1s</span><br><span class=\"line\">     authentication &#123;                          # </span><br><span class=\"line\">         auth_type PASS                        # VRRPPASSAH</span><br><span class=\"line\">         auth_pass 1111                        # VRRPvrrp_instance</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">   track_script &#123;                              # track_scriptinstance</span><br><span class=\"line\">         chk_nginx                             # Nginx</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">     virtual_ipaddress &#123;                       #IPVIP</span><br><span class=\"line\">         192.168.128.10                        # IP</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>nginx </li>\n</ol>\n<p><code> vim /etc/keepalived/nginx_check.sh</code><br><code> chmod +x /etc/keepalived/nginx_check.sh</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"string\">&quot;<span class=\"subst\">$(ps -ef | grep <span class=\"string\">&quot;nginx: master process&quot;</span>| grep -v grep )</span>&quot;</span> == <span class=\"string\">&quot;&quot;</span> ];<span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"comment\">#echo 1</span></span><br><span class=\"line\">    systemctl start nginx</span><br><span class=\"line\">    <span class=\"built_in\">sleep</span> 5</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> [ <span class=\"string\">&quot;<span class=\"subst\">$(ps -ef | grep <span class=\"string\">&quot;nginx: master process&quot;</span>| grep -v grep )</span>&quot;</span> == <span class=\"string\">&quot;&quot;</span> ];<span class=\"keyword\">then</span></span><br><span class=\"line\">        systemctl stop keepalived</span><br><span class=\"line\">        <span class=\"comment\">#echo 2</span></span><br><span class=\"line\">    <span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"B\"><a href=\"#B\" class=\"headerlink\" title=\"B\"></a>B</h2><ol>\n<li>keepalived <br><strong>A<code>ip</code>, <code></code>, </strong></li>\n</ol>\n<p><code>/etc/keepalived/keepalived.conf</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">vrrp_script chk_nginx &#123;</span><br><span class=\"line\">    script &quot;/etc/keepalived/nginx_check.sh&quot;    # nginx</span><br><span class=\"line\">    interval 2                                 # 2s</span><br><span class=\"line\">    weight -20                                 # -20</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> vrrp_instance VI_1 &#123;</span><br><span class=\"line\">     state MASTER                              # MASTERBACKUP</span><br><span class=\"line\">     interface ens33                           # VIP</span><br><span class=\"line\">     virtual_router_id 51                      # ID</span><br><span class=\"line\">     mcast_src_ip 192.168.128.9                # IP</span><br><span class=\"line\">     nopreempt                                 # </span><br><span class=\"line\">     priority 100                              # 0~254MASTER &gt; BACKUP</span><br><span class=\"line\">     advert_int 1                              # 1s</span><br><span class=\"line\">     authentication &#123;                          # </span><br><span class=\"line\">         auth_type PASS                        # VRRPPASSAH</span><br><span class=\"line\">         auth_pass 1111                        # VRRPvrrp_instance</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">   track_script &#123;                              # track_scriptinstance</span><br><span class=\"line\">         chk_nginx                             # Nginx</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">     virtual_ipaddress &#123;                       #IPVIP</span><br><span class=\"line\">         192.168.128.10                        # IP</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>nginx <br><strong>A</strong></li>\n</ol>\n<p><code> vim /etc/keepalived/nginx_check.sh</code><br><code> chmod +x /etc/keepalived/nginx_check.sh</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"string\">&quot;<span class=\"subst\">$(ps -ef | grep <span class=\"string\">&quot;nginx: master process&quot;</span>| grep -v grep )</span>&quot;</span> == <span class=\"string\">&quot;&quot;</span> ];<span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"comment\">#echo 1</span></span><br><span class=\"line\">    systemctl start nginx</span><br><span class=\"line\">    <span class=\"built_in\">sleep</span> 5</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> [ <span class=\"string\">&quot;<span class=\"subst\">$(ps -ef | grep <span class=\"string\">&quot;nginx: master process&quot;</span>| grep -v grep )</span>&quot;</span> == <span class=\"string\">&quot;&quot;</span> ];<span class=\"keyword\">then</span></span><br><span class=\"line\">        systemctl stop keepalived</span><br><span class=\"line\">        <span class=\"comment\">#echo 2</span></span><br><span class=\"line\">    <span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>AB keppalived  nginx <br><code> systemctl enable nginx</code><br><code> systemctl enable keepalived</code><br><code> systemctl start nginx</code><br><code>systemctl start nginx</code></p>\n<p><strong>ABnginx. nginxkeepalived192.168.128.10 nginx</strong></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\":\"></a>:</h2><p>: High Availability (HA)<br>: Load Balance (LB)<br>: Server Load Balancing (SLB)</p>\n<p>:  </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\":\"></a>:</h2><p><strong>A 192.168.128.8 nginx + keepalived</strong><br><strong>B 192.168.128.9 nginx + keepalived</strong></p>\n<p><strong>keepalivednginx, keepalivednginx 192.168.128.10</strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>A:  <code>yum install keepalived nginx </code><br>B:  <code>yum install keepalived nginx </code></p>\n<h2 id=\"A\"><a href=\"#A\" class=\"headerlink\" title=\"A\"></a>A</h2><ol>\n<li>keepalived </li>\n</ol>\n<p><code>/etc/keepalived/keepalived.conf</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">vrrp_script chk_nginx &#123;</span><br><span class=\"line\">    script &quot;/etc/keepalived/nginx_check.sh&quot;    # nginx</span><br><span class=\"line\">    interval 2                                 # 2s</span><br><span class=\"line\">    weight -20                                 # -20</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> vrrp_instance VI_1 &#123;</span><br><span class=\"line\">     state MASTER                              # MASTERBACKUP</span><br><span class=\"line\">     interface ens33                           # VIP</span><br><span class=\"line\">     virtual_router_id 51                      # ID</span><br><span class=\"line\">     mcast_src_ip 192.168.128.8                # IP</span><br><span class=\"line\">     nopreempt                                 # </span><br><span class=\"line\">     priority 90                              # 0~254MASTER &gt; BACKUP</span><br><span class=\"line\">     advert_int 1                              # 1s</span><br><span class=\"line\">     authentication &#123;                          # </span><br><span class=\"line\">         auth_type PASS                        # VRRPPASSAH</span><br><span class=\"line\">         auth_pass 1111                        # VRRPvrrp_instance</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">   track_script &#123;                              # track_scriptinstance</span><br><span class=\"line\">         chk_nginx                             # Nginx</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">     virtual_ipaddress &#123;                       #IPVIP</span><br><span class=\"line\">         192.168.128.10                        # IP</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>nginx </li>\n</ol>\n<p><code> vim /etc/keepalived/nginx_check.sh</code><br><code> chmod +x /etc/keepalived/nginx_check.sh</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"string\">&quot;<span class=\"subst\">$(ps -ef | grep <span class=\"string\">&quot;nginx: master process&quot;</span>| grep -v grep )</span>&quot;</span> == <span class=\"string\">&quot;&quot;</span> ];<span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"comment\">#echo 1</span></span><br><span class=\"line\">    systemctl start nginx</span><br><span class=\"line\">    <span class=\"built_in\">sleep</span> 5</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> [ <span class=\"string\">&quot;<span class=\"subst\">$(ps -ef | grep <span class=\"string\">&quot;nginx: master process&quot;</span>| grep -v grep )</span>&quot;</span> == <span class=\"string\">&quot;&quot;</span> ];<span class=\"keyword\">then</span></span><br><span class=\"line\">        systemctl stop keepalived</span><br><span class=\"line\">        <span class=\"comment\">#echo 2</span></span><br><span class=\"line\">    <span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"B\"><a href=\"#B\" class=\"headerlink\" title=\"B\"></a>B</h2><ol>\n<li>keepalived <br><strong>A<code>ip</code>, <code></code>, </strong></li>\n</ol>\n<p><code>/etc/keepalived/keepalived.conf</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">vrrp_script chk_nginx &#123;</span><br><span class=\"line\">    script &quot;/etc/keepalived/nginx_check.sh&quot;    # nginx</span><br><span class=\"line\">    interval 2                                 # 2s</span><br><span class=\"line\">    weight -20                                 # -20</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> vrrp_instance VI_1 &#123;</span><br><span class=\"line\">     state MASTER                              # MASTERBACKUP</span><br><span class=\"line\">     interface ens33                           # VIP</span><br><span class=\"line\">     virtual_router_id 51                      # ID</span><br><span class=\"line\">     mcast_src_ip 192.168.128.9                # IP</span><br><span class=\"line\">     nopreempt                                 # </span><br><span class=\"line\">     priority 100                              # 0~254MASTER &gt; BACKUP</span><br><span class=\"line\">     advert_int 1                              # 1s</span><br><span class=\"line\">     authentication &#123;                          # </span><br><span class=\"line\">         auth_type PASS                        # VRRPPASSAH</span><br><span class=\"line\">         auth_pass 1111                        # VRRPvrrp_instance</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">   track_script &#123;                              # track_scriptinstance</span><br><span class=\"line\">         chk_nginx                             # Nginx</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">     virtual_ipaddress &#123;                       #IPVIP</span><br><span class=\"line\">         192.168.128.10                        # IP</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>nginx <br><strong>A</strong></li>\n</ol>\n<p><code> vim /etc/keepalived/nginx_check.sh</code><br><code> chmod +x /etc/keepalived/nginx_check.sh</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"string\">&quot;<span class=\"subst\">$(ps -ef | grep <span class=\"string\">&quot;nginx: master process&quot;</span>| grep -v grep )</span>&quot;</span> == <span class=\"string\">&quot;&quot;</span> ];<span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"comment\">#echo 1</span></span><br><span class=\"line\">    systemctl start nginx</span><br><span class=\"line\">    <span class=\"built_in\">sleep</span> 5</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> [ <span class=\"string\">&quot;<span class=\"subst\">$(ps -ef | grep <span class=\"string\">&quot;nginx: master process&quot;</span>| grep -v grep )</span>&quot;</span> == <span class=\"string\">&quot;&quot;</span> ];<span class=\"keyword\">then</span></span><br><span class=\"line\">        systemctl stop keepalived</span><br><span class=\"line\">        <span class=\"comment\">#echo 2</span></span><br><span class=\"line\">    <span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>AB keppalived  nginx <br><code> systemctl enable nginx</code><br><code> systemctl enable keepalived</code><br><code> systemctl start nginx</code><br><code>systemctl start nginx</code></p>\n<p><strong>ABnginx. nginxkeepalived192.168.128.10 nginx</strong></p>\n"},{"title":"Linux shell ","date":"2020-05-26T06:29:13.000Z","_content":"","source":"_posts/014.linux_shell_redirect.md","raw":"---\ntitle: Linux shell \ndate: 2020-5-26 14:29:13\ncategories: \n- [Linux]\ntags: \n- shell\n- \n---\n","slug":"014.linux_shell_redirect","published":1,"updated":"2023-03-03T05:15:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbdu001ayknr0jqph674","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"windows","date":"2022-05-31T06:29:13.000Z","_content":"\n> , , . \nwindows, , .\n> , \n> , windows.\n\n\n```\n[D:\\~]$ {% label success@route print -4%}\n===========================================================================\n\n 11...ce b0 da b4 4f 9d ......Microsoft Wi-Fi Direct Virtual Adapter\n 13...de b0 da b4 4f 9d ......Microsoft Wi-Fi Direct Virtual Adapter #2\n  5...00 50 56 c0 00 01 ......VMware Virtual Ethernet Adapter for VMnet1\n  6...00 50 56 c0 00 08 ......VMware Virtual Ethernet Adapter for VMnet8\n 16...ce b0 b3 b4 c3 f5 ......Qualcomm Atheros QCA9377 Wireless Network Adapter\n 17...cc b0 da b4 4f 9e ......Bluetooth Device (Personal Area Network)\n  1...........................Software Loopback Interface 1\n===========================================================================\n\nIPv4 \n===========================================================================\n:\n                            \n          0.0.0.0          0.0.0.0    192.168.110.1  192.168.110.241     45\n        127.0.0.0        255.0.0.0                     127.0.0.1    331\n        127.0.0.1  255.255.255.255                     127.0.0.1    331\n  127.255.255.255  255.255.255.255                     127.0.0.1    331\n     192.168.64.0    255.255.255.0                  192.168.64.1    291\n     192.168.64.1  255.255.255.255                  192.168.64.1    291\n   192.168.64.255  255.255.255.255                  192.168.64.1    291\n    192.168.110.0    255.255.255.0               192.168.110.241    301\n  192.168.110.241  255.255.255.255               192.168.110.241    301\n  192.168.110.255  255.255.255.255               192.168.110.241    301\n    192.168.128.0    255.255.255.0                 192.168.128.1    291\n    192.168.128.1  255.255.255.255                 192.168.128.1    291\n  192.168.128.255  255.255.255.255                 192.168.128.1    291\n        224.0.0.0        240.0.0.0                     127.0.0.1    331\n        224.0.0.0        240.0.0.0                  192.168.64.1    291\n        224.0.0.0        240.0.0.0                 192.168.128.1    291\n        224.0.0.0        240.0.0.0               192.168.110.241    301\n  255.255.255.255  255.255.255.255                     127.0.0.1    331\n  255.255.255.255  255.255.255.255                  192.168.64.1    291\n  255.255.255.255  255.255.255.255                 192.168.128.1    291\n  255.255.255.255  255.255.255.255               192.168.110.241    301\n===========================================================================\n:\n  \n\n```\n\n``` \nROUTE [-f] [-p] [-4|-6] command [destination]\n                  [MASK netmask]  [gateway] [METRIC metric]  [IF interface]\n\n  -f            \n\n  -p           \n\n  -4            IPv4\n\n  -6            IPv6\n\n  command      :\n                 PRINT     \n                 ADD       \n                 DELETE    \n                 CHANGE    \n  destination  \n  MASK         netmask\n  netmask      \n                255.255.255.255\n  gateway      \n  interface    \n  METRIC       \n```\n\n\n :\n\n1)   10.0.0.0/8   10.0.0.1 (, )\n``` route add 10.0.0.0 mask 255.0.0.0 10.0.0.1 ```\n\n2)   10.0.0.0/8   10.0.0.1 (, )\n``` route -p add 10.0.0.0 mask 255.0.0.0 10.0.0.1 ```\n\n3)  10.0.0.0/8 \n``` route delete 10.0.0.0 mask 255.0.0.0```\n\n4)   192.168.1.0/24  192.168.1.1 3\n``` route add 192.168.1.0 mask 255.255.255.0 192.168.1.1 metric 3 ```\n\n5)   192.168.1.0/24   ox3\n``` route add 192.168.1.0 mask 255.255.255.0 192.168.1.1 if 0x3```\n\n6)   192.168.1.0/24  192.168.1.1254\n``` route change 192.168.1.0 mask 255.255.255.0 192.168.1.1254 ```","source":"_posts/015.windows_route.md","raw":"---\ntitle: windows\ndate: 2022-5-31 14:29:13\ncategories: \n- [NetWork]\ntags: \n- \n- windows\n---\n\n> , , . \nwindows, , .\n> , \n> , windows.\n\n\n```\n[D:\\~]$ {% label success@route print -4%}\n===========================================================================\n\n 11...ce b0 da b4 4f 9d ......Microsoft Wi-Fi Direct Virtual Adapter\n 13...de b0 da b4 4f 9d ......Microsoft Wi-Fi Direct Virtual Adapter #2\n  5...00 50 56 c0 00 01 ......VMware Virtual Ethernet Adapter for VMnet1\n  6...00 50 56 c0 00 08 ......VMware Virtual Ethernet Adapter for VMnet8\n 16...ce b0 b3 b4 c3 f5 ......Qualcomm Atheros QCA9377 Wireless Network Adapter\n 17...cc b0 da b4 4f 9e ......Bluetooth Device (Personal Area Network)\n  1...........................Software Loopback Interface 1\n===========================================================================\n\nIPv4 \n===========================================================================\n:\n                            \n          0.0.0.0          0.0.0.0    192.168.110.1  192.168.110.241     45\n        127.0.0.0        255.0.0.0                     127.0.0.1    331\n        127.0.0.1  255.255.255.255                     127.0.0.1    331\n  127.255.255.255  255.255.255.255                     127.0.0.1    331\n     192.168.64.0    255.255.255.0                  192.168.64.1    291\n     192.168.64.1  255.255.255.255                  192.168.64.1    291\n   192.168.64.255  255.255.255.255                  192.168.64.1    291\n    192.168.110.0    255.255.255.0               192.168.110.241    301\n  192.168.110.241  255.255.255.255               192.168.110.241    301\n  192.168.110.255  255.255.255.255               192.168.110.241    301\n    192.168.128.0    255.255.255.0                 192.168.128.1    291\n    192.168.128.1  255.255.255.255                 192.168.128.1    291\n  192.168.128.255  255.255.255.255                 192.168.128.1    291\n        224.0.0.0        240.0.0.0                     127.0.0.1    331\n        224.0.0.0        240.0.0.0                  192.168.64.1    291\n        224.0.0.0        240.0.0.0                 192.168.128.1    291\n        224.0.0.0        240.0.0.0               192.168.110.241    301\n  255.255.255.255  255.255.255.255                     127.0.0.1    331\n  255.255.255.255  255.255.255.255                  192.168.64.1    291\n  255.255.255.255  255.255.255.255                 192.168.128.1    291\n  255.255.255.255  255.255.255.255               192.168.110.241    301\n===========================================================================\n:\n  \n\n```\n\n``` \nROUTE [-f] [-p] [-4|-6] command [destination]\n                  [MASK netmask]  [gateway] [METRIC metric]  [IF interface]\n\n  -f            \n\n  -p           \n\n  -4            IPv4\n\n  -6            IPv6\n\n  command      :\n                 PRINT     \n                 ADD       \n                 DELETE    \n                 CHANGE    \n  destination  \n  MASK         netmask\n  netmask      \n                255.255.255.255\n  gateway      \n  interface    \n  METRIC       \n```\n\n\n :\n\n1)   10.0.0.0/8   10.0.0.1 (, )\n``` route add 10.0.0.0 mask 255.0.0.0 10.0.0.1 ```\n\n2)   10.0.0.0/8   10.0.0.1 (, )\n``` route -p add 10.0.0.0 mask 255.0.0.0 10.0.0.1 ```\n\n3)  10.0.0.0/8 \n``` route delete 10.0.0.0 mask 255.0.0.0```\n\n4)   192.168.1.0/24  192.168.1.1 3\n``` route add 192.168.1.0 mask 255.255.255.0 192.168.1.1 metric 3 ```\n\n5)   192.168.1.0/24   ox3\n``` route add 192.168.1.0 mask 255.255.255.0 192.168.1.1 if 0x3```\n\n6)   192.168.1.0/24  192.168.1.1254\n``` route change 192.168.1.0 mask 255.255.255.0 192.168.1.1254 ```","slug":"015.windows_route","published":1,"updated":"2023-04-18T03:27:08.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbdw001fyknr77xmd6ql","content":"<blockquote>\n<p>, , .<br>windows, , .<br>, <br>, windows.</p>\n</blockquote>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">[D:\\~]$ &#123;% label success@route print -4%&#125;</span><br><span class=\"line\">===========================================================================</span><br><span class=\"line\"></span><br><span class=\"line\"> 11...ce b0 da b4 4f 9d ......Microsoft Wi-Fi Direct Virtual Adapter</span><br><span class=\"line\"> 13...de b0 da b4 4f 9d ......Microsoft Wi-Fi Direct Virtual Adapter #2</span><br><span class=\"line\">  5...00 50 56 c0 00 01 ......VMware Virtual Ethernet Adapter for VMnet1</span><br><span class=\"line\">  6...00 50 56 c0 00 08 ......VMware Virtual Ethernet Adapter for VMnet8</span><br><span class=\"line\"> 16...ce b0 b3 b4 c3 f5 ......Qualcomm Atheros QCA9377 Wireless Network Adapter</span><br><span class=\"line\"> 17...cc b0 da b4 4f 9e ......Bluetooth Device (Personal Area Network)</span><br><span class=\"line\">  1...........................Software Loopback Interface 1</span><br><span class=\"line\">===========================================================================</span><br><span class=\"line\"></span><br><span class=\"line\">IPv4 </span><br><span class=\"line\">===========================================================================</span><br><span class=\"line\">:</span><br><span class=\"line\">                            </span><br><span class=\"line\">          0.0.0.0          0.0.0.0    192.168.110.1  192.168.110.241     45</span><br><span class=\"line\">        127.0.0.0        255.0.0.0                     127.0.0.1    331</span><br><span class=\"line\">        127.0.0.1  255.255.255.255                     127.0.0.1    331</span><br><span class=\"line\">  127.255.255.255  255.255.255.255                     127.0.0.1    331</span><br><span class=\"line\">     192.168.64.0    255.255.255.0                  192.168.64.1    291</span><br><span class=\"line\">     192.168.64.1  255.255.255.255                  192.168.64.1    291</span><br><span class=\"line\">   192.168.64.255  255.255.255.255                  192.168.64.1    291</span><br><span class=\"line\">    192.168.110.0    255.255.255.0               192.168.110.241    301</span><br><span class=\"line\">  192.168.110.241  255.255.255.255               192.168.110.241    301</span><br><span class=\"line\">  192.168.110.255  255.255.255.255               192.168.110.241    301</span><br><span class=\"line\">    192.168.128.0    255.255.255.0                 192.168.128.1    291</span><br><span class=\"line\">    192.168.128.1  255.255.255.255                 192.168.128.1    291</span><br><span class=\"line\">  192.168.128.255  255.255.255.255                 192.168.128.1    291</span><br><span class=\"line\">        224.0.0.0        240.0.0.0                     127.0.0.1    331</span><br><span class=\"line\">        224.0.0.0        240.0.0.0                  192.168.64.1    291</span><br><span class=\"line\">        224.0.0.0        240.0.0.0                 192.168.128.1    291</span><br><span class=\"line\">        224.0.0.0        240.0.0.0               192.168.110.241    301</span><br><span class=\"line\">  255.255.255.255  255.255.255.255                     127.0.0.1    331</span><br><span class=\"line\">  255.255.255.255  255.255.255.255                  192.168.64.1    291</span><br><span class=\"line\">  255.255.255.255  255.255.255.255                 192.168.128.1    291</span><br><span class=\"line\">  255.255.255.255  255.255.255.255               192.168.110.241    301</span><br><span class=\"line\">===========================================================================</span><br><span class=\"line\">:</span><br><span class=\"line\">  </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">ROUTE [-f] [-p] [-4|-6] command [destination]</span><br><span class=\"line\">                  [MASK netmask]  [gateway] [METRIC metric]  [IF interface]</span><br><span class=\"line\"></span><br><span class=\"line\">  -f            </span><br><span class=\"line\"></span><br><span class=\"line\">  -p           </span><br><span class=\"line\"></span><br><span class=\"line\">  -4            IPv4</span><br><span class=\"line\"></span><br><span class=\"line\">  -6            IPv6</span><br><span class=\"line\"></span><br><span class=\"line\">  command      :</span><br><span class=\"line\">                 PRINT     </span><br><span class=\"line\">                 ADD       </span><br><span class=\"line\">                 DELETE    </span><br><span class=\"line\">                 CHANGE    </span><br><span class=\"line\">  destination  </span><br><span class=\"line\">  MASK         netmask</span><br><span class=\"line\">  netmask      </span><br><span class=\"line\">                255.255.255.255</span><br><span class=\"line\">  gateway      </span><br><span class=\"line\">  interface    </span><br><span class=\"line\">  METRIC       </span><br></pre></td></tr></table></figure>\n\n\n<p> :</p>\n<ol>\n<li> 10.0.0.0&#x2F;8   10.0.0.1 (, )</li>\n</ol>\n<p><code>route add 10.0.0.0 mask 255.0.0.0 10.0.0.1</code></p>\n<ol start=\"2\">\n<li> 10.0.0.0&#x2F;8   10.0.0.1 (, )</li>\n</ol>\n<p><code>route -p add 10.0.0.0 mask 255.0.0.0 10.0.0.1</code></p>\n<ol start=\"3\">\n<li> 10.0.0.0&#x2F;8</li>\n</ol>\n<p><code> route delete 10.0.0.0 mask 255.0.0.0</code></p>\n<ol start=\"4\">\n<li> 192.168.1.0&#x2F;24  192.168.1.1 3</li>\n</ol>\n<p><code>route add 192.168.1.0 mask 255.255.255.0 192.168.1.1 metric 3</code></p>\n<ol start=\"5\">\n<li> 192.168.1.0&#x2F;24   ox3</li>\n</ol>\n<p><code> route add 192.168.1.0 mask 255.255.255.0 192.168.1.1 if 0x3</code></p>\n<ol start=\"6\">\n<li> 192.168.1.0&#x2F;24  192.168.1.1254</li>\n</ol>\n<p><code>route change 192.168.1.0 mask 255.255.255.0 192.168.1.1254</code></p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>, , .<br>windows, , .<br>, <br>, windows.</p>\n</blockquote>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">[D:\\~]$ &#123;% label success@route print -4%&#125;</span><br><span class=\"line\">===========================================================================</span><br><span class=\"line\"></span><br><span class=\"line\"> 11...ce b0 da b4 4f 9d ......Microsoft Wi-Fi Direct Virtual Adapter</span><br><span class=\"line\"> 13...de b0 da b4 4f 9d ......Microsoft Wi-Fi Direct Virtual Adapter #2</span><br><span class=\"line\">  5...00 50 56 c0 00 01 ......VMware Virtual Ethernet Adapter for VMnet1</span><br><span class=\"line\">  6...00 50 56 c0 00 08 ......VMware Virtual Ethernet Adapter for VMnet8</span><br><span class=\"line\"> 16...ce b0 b3 b4 c3 f5 ......Qualcomm Atheros QCA9377 Wireless Network Adapter</span><br><span class=\"line\"> 17...cc b0 da b4 4f 9e ......Bluetooth Device (Personal Area Network)</span><br><span class=\"line\">  1...........................Software Loopback Interface 1</span><br><span class=\"line\">===========================================================================</span><br><span class=\"line\"></span><br><span class=\"line\">IPv4 </span><br><span class=\"line\">===========================================================================</span><br><span class=\"line\">:</span><br><span class=\"line\">                            </span><br><span class=\"line\">          0.0.0.0          0.0.0.0    192.168.110.1  192.168.110.241     45</span><br><span class=\"line\">        127.0.0.0        255.0.0.0                     127.0.0.1    331</span><br><span class=\"line\">        127.0.0.1  255.255.255.255                     127.0.0.1    331</span><br><span class=\"line\">  127.255.255.255  255.255.255.255                     127.0.0.1    331</span><br><span class=\"line\">     192.168.64.0    255.255.255.0                  192.168.64.1    291</span><br><span class=\"line\">     192.168.64.1  255.255.255.255                  192.168.64.1    291</span><br><span class=\"line\">   192.168.64.255  255.255.255.255                  192.168.64.1    291</span><br><span class=\"line\">    192.168.110.0    255.255.255.0               192.168.110.241    301</span><br><span class=\"line\">  192.168.110.241  255.255.255.255               192.168.110.241    301</span><br><span class=\"line\">  192.168.110.255  255.255.255.255               192.168.110.241    301</span><br><span class=\"line\">    192.168.128.0    255.255.255.0                 192.168.128.1    291</span><br><span class=\"line\">    192.168.128.1  255.255.255.255                 192.168.128.1    291</span><br><span class=\"line\">  192.168.128.255  255.255.255.255                 192.168.128.1    291</span><br><span class=\"line\">        224.0.0.0        240.0.0.0                     127.0.0.1    331</span><br><span class=\"line\">        224.0.0.0        240.0.0.0                  192.168.64.1    291</span><br><span class=\"line\">        224.0.0.0        240.0.0.0                 192.168.128.1    291</span><br><span class=\"line\">        224.0.0.0        240.0.0.0               192.168.110.241    301</span><br><span class=\"line\">  255.255.255.255  255.255.255.255                     127.0.0.1    331</span><br><span class=\"line\">  255.255.255.255  255.255.255.255                  192.168.64.1    291</span><br><span class=\"line\">  255.255.255.255  255.255.255.255                 192.168.128.1    291</span><br><span class=\"line\">  255.255.255.255  255.255.255.255               192.168.110.241    301</span><br><span class=\"line\">===========================================================================</span><br><span class=\"line\">:</span><br><span class=\"line\">  </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">ROUTE [-f] [-p] [-4|-6] command [destination]</span><br><span class=\"line\">                  [MASK netmask]  [gateway] [METRIC metric]  [IF interface]</span><br><span class=\"line\"></span><br><span class=\"line\">  -f            </span><br><span class=\"line\"></span><br><span class=\"line\">  -p           </span><br><span class=\"line\"></span><br><span class=\"line\">  -4            IPv4</span><br><span class=\"line\"></span><br><span class=\"line\">  -6            IPv6</span><br><span class=\"line\"></span><br><span class=\"line\">  command      :</span><br><span class=\"line\">                 PRINT     </span><br><span class=\"line\">                 ADD       </span><br><span class=\"line\">                 DELETE    </span><br><span class=\"line\">                 CHANGE    </span><br><span class=\"line\">  destination  </span><br><span class=\"line\">  MASK         netmask</span><br><span class=\"line\">  netmask      </span><br><span class=\"line\">                255.255.255.255</span><br><span class=\"line\">  gateway      </span><br><span class=\"line\">  interface    </span><br><span class=\"line\">  METRIC       </span><br></pre></td></tr></table></figure>\n\n\n<p> :</p>\n<ol>\n<li> 10.0.0.0&#x2F;8   10.0.0.1 (, )</li>\n</ol>\n<p><code>route add 10.0.0.0 mask 255.0.0.0 10.0.0.1</code></p>\n<ol start=\"2\">\n<li> 10.0.0.0&#x2F;8   10.0.0.1 (, )</li>\n</ol>\n<p><code>route -p add 10.0.0.0 mask 255.0.0.0 10.0.0.1</code></p>\n<ol start=\"3\">\n<li> 10.0.0.0&#x2F;8</li>\n</ol>\n<p><code> route delete 10.0.0.0 mask 255.0.0.0</code></p>\n<ol start=\"4\">\n<li> 192.168.1.0&#x2F;24  192.168.1.1 3</li>\n</ol>\n<p><code>route add 192.168.1.0 mask 255.255.255.0 192.168.1.1 metric 3</code></p>\n<ol start=\"5\">\n<li> 192.168.1.0&#x2F;24   ox3</li>\n</ol>\n<p><code> route add 192.168.1.0 mask 255.255.255.0 192.168.1.1 if 0x3</code></p>\n<ol start=\"6\">\n<li> 192.168.1.0&#x2F;24  192.168.1.1254</li>\n</ol>\n<p><code>route change 192.168.1.0 mask 255.255.255.0 192.168.1.1254</code></p>\n"},{"title":"","date":"2022-06-09T06:40:40.000Z","_content":"\n\n\n``` vb\nWindows Registry Editor Version 5.00\n[HKEY_CLASSES_ROOT\\*\\shell\\runas]\n@=\"Take Ownership\"\n\"NoWorkingDirectory\"=\"\"\n[HKEY_CLASSES_ROOT\\*\\shell\\runas\\command]\n@=\"cmd.exe /c takeown /f \\\"%1\\\" && icacls \\\"%1\\\" /grant administrators:F\"\n\"IsolatedCommand\"=\"cmd.exe /c takeown /f \\\"%1\\\" && icacls \\\"%1\\\" /grant administrators:F\"\n[HKEY_CLASSES_ROOT\\exefile\\shell\\runas2]\n@=\"Take Ownership\"\n\"NoWorkingDirectory\"=\"\"\n[HKEY_CLASSES_ROOT\\exefile\\shell\\runas2\\command]\n@=\"cmd.exe /c takeown /f \\\"%1\\\" && icacls \\\"%1\\\" /grant administrators:F\"\n\"IsolatedCommand\"=\"cmd.exe /c takeown /f \\\"%1\\\" && icacls \\\"%1\\\" /grant administrators:F\"\n\n[HKEY_CLASSES_ROOT\\Directory\\shell\\runas]\n@=\"Take Ownership\"\n\"NoWorkingDirectory\"=\"\"\n[HKEY_CLASSES_ROOT\\Directory\\shell\\runas\\command]\n@=\"cmd.exe /c takeown /f \\\"%1\\\" /r /d y && icacls \\\"%1\\\" /grant administrators:F /t\"\n\"IsolatedCommand\"=\"cmd.exe /c takeown /f \\\"%1\\\" /r /d y && icacls \\\"%1\\\" /grant administrators:F /t\"\n```\n\n\n\n``` vb\nWindows Registry Editor Version 5.00\n[-HKEY_CLASSES_ROOT\\*\\shell\\runas]\n[-HKEY_CLASSES_ROOT\\Directory\\shell\\runas]\n[-HKEY_CLASSES_ROOT\\dllfile\\shell]\n[-HKEY_CLASSES_ROOT\\Drive\\shell\\runas]\n[-HKEY_CLASSES_ROOT\\exefile\\shell\\runas]\n[HKEY_CLASSES_ROOT\\exefile\\shell\\runas]\n\"HasLUAShield\"=\"\"\n[HKEY_CLASSES_ROOT\\exefile\\shell\\runas\\command]\n@=\"\\\"%1\\\" %*\"\n\"IsolatedCommand\"=\"\\\"%1\\\" %*\"\n```","source":"_posts/016.take_ownership.md","raw":"---\ntitle: \ndate: 2022-6-9 14:40:40\ncategories: \n- [Security]\ntags: \n- ownership\n---\n\n\n\n``` vb\nWindows Registry Editor Version 5.00\n[HKEY_CLASSES_ROOT\\*\\shell\\runas]\n@=\"Take Ownership\"\n\"NoWorkingDirectory\"=\"\"\n[HKEY_CLASSES_ROOT\\*\\shell\\runas\\command]\n@=\"cmd.exe /c takeown /f \\\"%1\\\" && icacls \\\"%1\\\" /grant administrators:F\"\n\"IsolatedCommand\"=\"cmd.exe /c takeown /f \\\"%1\\\" && icacls \\\"%1\\\" /grant administrators:F\"\n[HKEY_CLASSES_ROOT\\exefile\\shell\\runas2]\n@=\"Take Ownership\"\n\"NoWorkingDirectory\"=\"\"\n[HKEY_CLASSES_ROOT\\exefile\\shell\\runas2\\command]\n@=\"cmd.exe /c takeown /f \\\"%1\\\" && icacls \\\"%1\\\" /grant administrators:F\"\n\"IsolatedCommand\"=\"cmd.exe /c takeown /f \\\"%1\\\" && icacls \\\"%1\\\" /grant administrators:F\"\n\n[HKEY_CLASSES_ROOT\\Directory\\shell\\runas]\n@=\"Take Ownership\"\n\"NoWorkingDirectory\"=\"\"\n[HKEY_CLASSES_ROOT\\Directory\\shell\\runas\\command]\n@=\"cmd.exe /c takeown /f \\\"%1\\\" /r /d y && icacls \\\"%1\\\" /grant administrators:F /t\"\n\"IsolatedCommand\"=\"cmd.exe /c takeown /f \\\"%1\\\" /r /d y && icacls \\\"%1\\\" /grant administrators:F /t\"\n```\n\n\n\n``` vb\nWindows Registry Editor Version 5.00\n[-HKEY_CLASSES_ROOT\\*\\shell\\runas]\n[-HKEY_CLASSES_ROOT\\Directory\\shell\\runas]\n[-HKEY_CLASSES_ROOT\\dllfile\\shell]\n[-HKEY_CLASSES_ROOT\\Drive\\shell\\runas]\n[-HKEY_CLASSES_ROOT\\exefile\\shell\\runas]\n[HKEY_CLASSES_ROOT\\exefile\\shell\\runas]\n\"HasLUAShield\"=\"\"\n[HKEY_CLASSES_ROOT\\exefile\\shell\\runas\\command]\n@=\"\\\"%1\\\" %*\"\n\"IsolatedCommand\"=\"\\\"%1\\\" %*\"\n```","slug":"016.take_ownership","published":1,"updated":"2023-03-03T05:15:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbe3001jyknr5kr53htc","content":"<p></p>\n<figure class=\"highlight vb\"><table><tr><td class=\"code\"><pre><span class=\"line\">Windows Registry Editor Version <span class=\"number\">5.00</span></span><br><span class=\"line\">[HKEY_CLASSES_ROOT\\*\\shell\\runas]</span><br><span class=\"line\">@=<span class=\"string\">&quot;Take Ownership&quot;</span></span><br><span class=\"line\"><span class=\"string\">&quot;NoWorkingDirectory&quot;</span>=<span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">[HKEY_CLASSES_ROOT\\*\\shell\\runas\\command]</span><br><span class=\"line\">@=<span class=\"string\">&quot;cmd.exe /c takeown /f \\&quot;</span>%<span class=\"number\">1</span>\\<span class=\"string\">&quot; &amp;&amp; icacls \\&quot;</span>%<span class=\"number\">1</span>\\<span class=\"string\">&quot; /grant administrators:F&quot;</span></span><br><span class=\"line\"><span class=\"string\">&quot;IsolatedCommand&quot;</span>=<span class=\"string\">&quot;cmd.exe /c takeown /f \\&quot;</span>%<span class=\"number\">1</span>\\<span class=\"string\">&quot; &amp;&amp; icacls \\&quot;</span>%<span class=\"number\">1</span>\\<span class=\"string\">&quot; /grant administrators:F&quot;</span></span><br><span class=\"line\">[HKEY_CLASSES_ROOT\\exefile\\shell\\runas2]</span><br><span class=\"line\">@=<span class=\"string\">&quot;Take Ownership&quot;</span></span><br><span class=\"line\"><span class=\"string\">&quot;NoWorkingDirectory&quot;</span>=<span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">[HKEY_CLASSES_ROOT\\exefile\\shell\\runas2\\command]</span><br><span class=\"line\">@=<span class=\"string\">&quot;cmd.exe /c takeown /f \\&quot;</span>%<span class=\"number\">1</span>\\<span class=\"string\">&quot; &amp;&amp; icacls \\&quot;</span>%<span class=\"number\">1</span>\\<span class=\"string\">&quot; /grant administrators:F&quot;</span></span><br><span class=\"line\"><span class=\"string\">&quot;IsolatedCommand&quot;</span>=<span class=\"string\">&quot;cmd.exe /c takeown /f \\&quot;</span>%<span class=\"number\">1</span>\\<span class=\"string\">&quot; &amp;&amp; icacls \\&quot;</span>%<span class=\"number\">1</span>\\<span class=\"string\">&quot; /grant administrators:F&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">[HKEY_CLASSES_ROOT\\Directory\\shell\\runas]</span><br><span class=\"line\">@=<span class=\"string\">&quot;Take Ownership&quot;</span></span><br><span class=\"line\"><span class=\"string\">&quot;NoWorkingDirectory&quot;</span>=<span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">[HKEY_CLASSES_ROOT\\Directory\\shell\\runas\\command]</span><br><span class=\"line\">@=<span class=\"string\">&quot;cmd.exe /c takeown /f \\&quot;</span>%<span class=\"number\">1</span>\\<span class=\"string\">&quot; /r /d y &amp;&amp; icacls \\&quot;</span>%<span class=\"number\">1</span>\\<span class=\"string\">&quot; /grant administrators:F /t&quot;</span></span><br><span class=\"line\"><span class=\"string\">&quot;IsolatedCommand&quot;</span>=<span class=\"string\">&quot;cmd.exe /c takeown /f \\&quot;</span>%<span class=\"number\">1</span>\\<span class=\"string\">&quot; /r /d y &amp;&amp; icacls \\&quot;</span>%<span class=\"number\">1</span>\\<span class=\"string\">&quot; /grant administrators:F /t&quot;</span></span><br></pre></td></tr></table></figure>\n\n\n<p></p>\n<figure class=\"highlight vb\"><table><tr><td class=\"code\"><pre><span class=\"line\">Windows Registry Editor Version <span class=\"number\">5.00</span></span><br><span class=\"line\">[-HKEY_CLASSES_ROOT\\*\\shell\\runas]</span><br><span class=\"line\">[-HKEY_CLASSES_ROOT\\Directory\\shell\\runas]</span><br><span class=\"line\">[-HKEY_CLASSES_ROOT\\dllfile\\shell]</span><br><span class=\"line\">[-HKEY_CLASSES_ROOT\\Drive\\shell\\runas]</span><br><span class=\"line\">[-HKEY_CLASSES_ROOT\\exefile\\shell\\runas]</span><br><span class=\"line\">[HKEY_CLASSES_ROOT\\exefile\\shell\\runas]</span><br><span class=\"line\"><span class=\"string\">&quot;HasLUAShield&quot;</span>=<span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">[HKEY_CLASSES_ROOT\\exefile\\shell\\runas\\command]</span><br><span class=\"line\">@=<span class=\"string\">&quot;\\&quot;</span>%<span class=\"number\">1</span>\\<span class=\"string\">&quot; %*&quot;</span></span><br><span class=\"line\"><span class=\"string\">&quot;IsolatedCommand&quot;</span>=<span class=\"string\">&quot;\\&quot;</span>%<span class=\"number\">1</span>\\<span class=\"string\">&quot; %*&quot;</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p></p>\n<figure class=\"highlight vb\"><table><tr><td class=\"code\"><pre><span class=\"line\">Windows Registry Editor Version <span class=\"number\">5.00</span></span><br><span class=\"line\">[HKEY_CLASSES_ROOT\\*\\shell\\runas]</span><br><span class=\"line\">@=<span class=\"string\">&quot;Take Ownership&quot;</span></span><br><span class=\"line\"><span class=\"string\">&quot;NoWorkingDirectory&quot;</span>=<span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">[HKEY_CLASSES_ROOT\\*\\shell\\runas\\command]</span><br><span class=\"line\">@=<span class=\"string\">&quot;cmd.exe /c takeown /f \\&quot;</span>%<span class=\"number\">1</span>\\<span class=\"string\">&quot; &amp;&amp; icacls \\&quot;</span>%<span class=\"number\">1</span>\\<span class=\"string\">&quot; /grant administrators:F&quot;</span></span><br><span class=\"line\"><span class=\"string\">&quot;IsolatedCommand&quot;</span>=<span class=\"string\">&quot;cmd.exe /c takeown /f \\&quot;</span>%<span class=\"number\">1</span>\\<span class=\"string\">&quot; &amp;&amp; icacls \\&quot;</span>%<span class=\"number\">1</span>\\<span class=\"string\">&quot; /grant administrators:F&quot;</span></span><br><span class=\"line\">[HKEY_CLASSES_ROOT\\exefile\\shell\\runas2]</span><br><span class=\"line\">@=<span class=\"string\">&quot;Take Ownership&quot;</span></span><br><span class=\"line\"><span class=\"string\">&quot;NoWorkingDirectory&quot;</span>=<span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">[HKEY_CLASSES_ROOT\\exefile\\shell\\runas2\\command]</span><br><span class=\"line\">@=<span class=\"string\">&quot;cmd.exe /c takeown /f \\&quot;</span>%<span class=\"number\">1</span>\\<span class=\"string\">&quot; &amp;&amp; icacls \\&quot;</span>%<span class=\"number\">1</span>\\<span class=\"string\">&quot; /grant administrators:F&quot;</span></span><br><span class=\"line\"><span class=\"string\">&quot;IsolatedCommand&quot;</span>=<span class=\"string\">&quot;cmd.exe /c takeown /f \\&quot;</span>%<span class=\"number\">1</span>\\<span class=\"string\">&quot; &amp;&amp; icacls \\&quot;</span>%<span class=\"number\">1</span>\\<span class=\"string\">&quot; /grant administrators:F&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">[HKEY_CLASSES_ROOT\\Directory\\shell\\runas]</span><br><span class=\"line\">@=<span class=\"string\">&quot;Take Ownership&quot;</span></span><br><span class=\"line\"><span class=\"string\">&quot;NoWorkingDirectory&quot;</span>=<span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">[HKEY_CLASSES_ROOT\\Directory\\shell\\runas\\command]</span><br><span class=\"line\">@=<span class=\"string\">&quot;cmd.exe /c takeown /f \\&quot;</span>%<span class=\"number\">1</span>\\<span class=\"string\">&quot; /r /d y &amp;&amp; icacls \\&quot;</span>%<span class=\"number\">1</span>\\<span class=\"string\">&quot; /grant administrators:F /t&quot;</span></span><br><span class=\"line\"><span class=\"string\">&quot;IsolatedCommand&quot;</span>=<span class=\"string\">&quot;cmd.exe /c takeown /f \\&quot;</span>%<span class=\"number\">1</span>\\<span class=\"string\">&quot; /r /d y &amp;&amp; icacls \\&quot;</span>%<span class=\"number\">1</span>\\<span class=\"string\">&quot; /grant administrators:F /t&quot;</span></span><br></pre></td></tr></table></figure>\n\n\n<p></p>\n<figure class=\"highlight vb\"><table><tr><td class=\"code\"><pre><span class=\"line\">Windows Registry Editor Version <span class=\"number\">5.00</span></span><br><span class=\"line\">[-HKEY_CLASSES_ROOT\\*\\shell\\runas]</span><br><span class=\"line\">[-HKEY_CLASSES_ROOT\\Directory\\shell\\runas]</span><br><span class=\"line\">[-HKEY_CLASSES_ROOT\\dllfile\\shell]</span><br><span class=\"line\">[-HKEY_CLASSES_ROOT\\Drive\\shell\\runas]</span><br><span class=\"line\">[-HKEY_CLASSES_ROOT\\exefile\\shell\\runas]</span><br><span class=\"line\">[HKEY_CLASSES_ROOT\\exefile\\shell\\runas]</span><br><span class=\"line\"><span class=\"string\">&quot;HasLUAShield&quot;</span>=<span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">[HKEY_CLASSES_ROOT\\exefile\\shell\\runas\\command]</span><br><span class=\"line\">@=<span class=\"string\">&quot;\\&quot;</span>%<span class=\"number\">1</span>\\<span class=\"string\">&quot; %*&quot;</span></span><br><span class=\"line\"><span class=\"string\">&quot;IsolatedCommand&quot;</span>=<span class=\"string\">&quot;\\&quot;</span>%<span class=\"number\">1</span>\\<span class=\"string\">&quot; %*&quot;</span></span><br></pre></td></tr></table></figure>"},{"title":"Oracle","date":"2022-06-10T03:08:13.000Z","_content":"\n> , ******ip******, .\n\n## \n\n### 1.1\n``` scp linux.x64_11gR2_database_1of2 root@172.21.33.23:/data/oracle ```\n``` scp linux.x64_11gR2_database_2of2 root@172.21.33.23:/data/oracle ```\n### 1.2\n``` unzip \\*.zip ```\n\n### 1.3\n``` yum install gcc make binutils gcc-c++ compat-libstdc++-33elfutils-libelf-devel elfutils-libelf-devel-static ksh libaio libaio-develnumactl-devel sysstat unixODBC unixODBC-devel pcre-devel y ```\n\n### 1.4 hosts\n\n```sed -i \"1s/$/ $(hostname)/\" ```\n\n### 1.5\n``` bash\ngroupadd oinstall\ngroupadd dba\nuseradd -g oinstall -G dba oracle\npasswd oracle\n```\n\n### 1.6\n: ``` vim /etc/sysctl.conf ```\n:\n``` bash\nfs.aio-max-nr = 1048576\nfs.file-max = 6815744\nkernel.shmall = 2097152\nkernel.shmmax = 1073741824\nkernel.shmmni = 4096\nkernel.sem = 250 32000 100 128\nnet.ipv4.ip_local_port_range = 9000 65500\nnet.core.rmem_default = 262144\nnet.core.rmem_max = 4194304\nnet.core.wmem_default = 262144\nnet.core.wmem_max = 1048576 \n```\n: ```sysctl -p```\n\n### 1.7\n\n: ``` vim /etc/security/limits.conf ```\n:\n``` bash\noracle           soft    nproc           2047\noracle           hard    nproc           16384\noracle           soft    nofile          1024\noracle           hard    nofile         65536\noracle           soft    stack           10240 \n```\n\n: ``` vim /etc/pam.d/login ```\n:\n```bash\nsession required  /lib64/security/pam_limits.so\nsession required   pam_limits.so \n```\n\n: ``` vim /etc/profile ```\n:\n``` bash\nif [ $USER = \"oracle\" ]; then\n  if [ $SHELL = \"/bin/ksh\" ]; then\n      ulimit -p 16384\n      ulimit -n 65536\n  else\n      ulimit -u 16384 -n 65536\n  fi\nfi \n```\n\n### 1.8\n\n```bash\nmkdir -p /data/oracle/product/11.2.0\nmkdir /data/oracle/oradata\nmkdir /data/oracle/inventory\nmkdir /data/oracle/fast_recovery_area\nchown -R oracle:oinstall /data/oracle\nchmod -R 775 /data/oracle\n```\n\n### 1.9Oracle\n\nOracle: ``` su -l oracle ```\n\n: ```vim .bash_profile```\n:\n``` bash\nORACLE_BASE=/data/oracle\nORACLE_HOME=$ORACLE_BASE/product/11.2.0\nORACLE_SID=orcl\nPATH=$PATH:$ORACLE_HOME/bin\nexport ORACLE_BASE ORACLE_HOME ORACLE_SID PATH\n```\n: \n``` ORACLE_SID=orcl ```\n\n## \n\n### 2.1\n\n**:** ``` vim /data/database/response/db_install.rsp ```\n**:** ```ORACLE_HOSTNAME=CentOS```\n``` shell\noracle.install.option=INSTALL_DB_SWONLY\nORACLE_HOSTNAME=CentOS\nUNIX_GROUP_NAME=oinstall\nINVENTORY_LOCATION=/data/oracle/inventory\nSELECTED_LANGUAGES=en,zh_CN\nORACLE_HOME=/data/oracle/product/11.2.0\nORACLE_BASE=/data/oracle\noracle.install.db.InstallEdition=EE\noracle.install.db.DBA_GROUP=dba\noracle.install.db.OPER_GROUP=dba\nDECLINE_SECURITY_UPDATES=true\n```\n**:** ``` ./runInstaller -silent -responseFile /data/database/response/db_install.rsp -ignorePrereq ```\n![image.png](/images/017.oracle.md.09.png)\n\n****\n**, root:** \n``` bash\nsh /data/oracle/inventory/orainstRoot.sh\nsh /data/oracle/product/11.2.0/root.sh\n```\n![image.png](/images/017.oracle.md.10.png)\n\n\n### 2.2\n**oracle,:**\n\n**:** ```vim /data/database/response/netca.rsp``` {% label warning @ %}\n**:** ```/silent```  ```-silent```    ```/responseFile``` ```-responseFilet```\n\n**:** ``` netca /silent /responseFile /data/database/response/netca.rsp ```\n![image.png](/images/017.oracle.md.12.png)\n\n\n\n### 2.3\n**oracle,:**\n\n**:** ```vim /data/database/response/dbca.rsp```\n\n``` bash\nRESPONSEFILE_VERSION = \"11.2.0\"\nOPERATION_TYPE = \"createDatabase\"\nGDBNAME = \"orcl.test\"\nSID = \"orcl\"\nTEMPLATENAME = \"General_Purpose.dbc\"\nSYSPASSWORD = \"123456\"\nSYSTEMPASSWORD = \"123456\"\nSYSMANPASSWORD = \"123456\"\nDBSNMPPASSWORD = \"123456\"\nDATAFILEDESTINATION =/data/oracle/oradata\nRECOVERYAREADESTINATION = /data/oracle/fast_recovery_area\nCHARACTERSET = \"ZHS16GBK\"\n# oracle1638MB,2G*80%\nTOTALMEMORY = \"1638\" \n```\n``` dbca -silent -responseFile /data/database/response/dbca.rsp ```\n![image.png](/images/017.oracle.md.05.png)\n\n\n### 2.4oracle\n\n``` lsnrctl start ```\n``` lsnrctl status ```\n<img src=\"/images/017.oracle.md.13.png\" width=70% height=80% />\n<!-- <img src=\"/images/017.oracle.md.03.png\" width=70% height=80% />\n<img src=\"/images/017.oracle.md.04.png\" width=70% height=80% /> -->\n\n\n\n## \n**oracle, :** \n\n****: ``` lsnrctl stop ```\n****: ``` vim /<path to your oracle home>/network/admin/listener.ora```\n{% label danger@1521 %} --> {% label info@11521 %} \n``` bash\nLISTENER =\n  (DESCRIPTION_LIST =\n    (DESCRIPTION =\n      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC11521))\n      (ADDRESS = (PROTOCOL = TCP)(HOST = <your server host name>)(PORT = 11521))\n    )\n  )\n\nADR_BASE_LISTENER = /data/oracle\n```\n**local_listener**\n``` bash\n$ sqlplus / as sysdba\nSQL> show parameter local_listener\nSQL> alter system set local_listener=\"(address = (protocol = tcp)(host = localhost)(port = 11521))\";\nSQL> show parameter local_listener\n```\n![image.png](/images/017.oracle.md.11.png)\n**:** ``` lsnrctl reload ```\n\n## \n\n\n### 4.1 \nsystem\n``` shell\nshell> sqlplus / as sysdba\nSQL> create directory data_dir as '/data/backup';\nDirectory created.\n```\n\n\n```mkdir -p /data/backup```\n```chown -R oracle:oinstall /data/backup```\n\n### 4.2 \n\n```SQL>select * from dba_directories;```\n\n<img src=\"/images/017.oracle.md.06.png\" width=70% height=80% />\n\n### 4.3 system'data_dir'\n\n``` SQL>grant read,write on directory data_dir to system; ```\n\n##  expdp\n\n### 5.1 \n\n``` expdp system/password@orcl schemas=system dumpfile=expdp.dmp directory=data_dir ```\n### 5.2 \n\n``` expdp system/password@orcl tables=emp,dept dumpfile=expdp.dmp directory=data_dir ```\n\n### 5.3 \n\n``` expdp system/password@orcl directory=data_dir dumpfile=expdp.dmp tables=empquery='where deptno=20' ```\n\n### 5.4 \n\n``` expdp system/password@orcl directory=data_dir dumpfile=tablespace.dmptablespaces=temp,example ```\n\n### 5.5 \n\n``` expdp system/password@orcl directory=data_dir dumpfile=full.dmp full=y```\n\n### 5.6 \n\n****: \n``` expdp system/password@172.21.33.23/orcl dumpfile=all.dmp directory=data_dir full=y logfile=all.log ```\n\n``` bash\n[oracle@centos7 backup]$ expdp system/password@172.21.33.23/orcl dumpfile=all.dmp directory=data_dir full=y logfile=all.log\nExport: Release 11.2.0.4.0 - Production on Wed Apr 12 14:46:19 2023\nCopyright (c) 1982, 2011, Oracle and/or its affiliates.  All rights reserved.\n;;; \nConnected to: Oracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit Production\nWith the Partitioning, OLAP, Data Mining and Real Application Testing options\nStarting \"SYSTEM\".\"SYS_EXPORT_FULL_01\":  system/********@172.21.33.23/orcl dumpfile=all.dmp directory=data_dir full=y logfile=all.log \nEstimate in progress using BLOCKS method...\nProcessing object type DATABASE_EXPORT/SCHEMA/TABLE/TABLE_DATA\nTotal estimation using BLOCKS method: 1.104 GB\nProcessing object type DATABASE_EXPORT/TABLESPACE\nProcessing object type DATABASE_EXPORT/PROFILE\nProcessing object type DATABASE_EXPORT/SYS_USER/USER\nProcessing object type DATABASE_EXPORT/SCHEMA/POST_SCHEMA/PROCOBJ\nProcessing object type DATABASE_EXPORT/SCHEMA/POST_SCHEMA/PROCACT_SCHEMA\nProcessing object type DATABASE_EXPORT/AUDIT\n. . exported \"RSY\".\"DATAEX_PROVIDE_APPLY_copy1\"          114.3 MB  643767 rows\n. . exported \"DBSHUMENG\".\"PER_ASSI_FAMILY_BUSY_HOSPITAL\"  70.17 MB  309988 rows\n\n.\n.   ,  n \n.\n\n. . exported \"SYSTEM\".\"REPCAT$_USER_AUTHORIZATIONS\"          0 KB       0 rows\n. . exported \"SYSTEM\".\"REPCAT$_USER_PARM_VALUES\"             0 KB       0 rows\n. . exported \"SYSTEM\".\"SQLPLUS_PRODUCT_PROFILE\"              0 KB       0 rows\n. . exported \"TDUSER\".\"TEST\"                                 0 KB       0 rows\nMaster table \"SYSTEM\".\"SYS_EXPORT_FULL_01\" successfully loaded/unloaded\n******************************************************************************\nDump file set for SYSTEM.SYS_EXPORT_FULL_01 is:\n  /data/backup/all.dmp\nJob \"SYSTEM\".\"SYS_EXPORT_FULL_01\" successfully completed at Wed Apr 12 14:49:08 2023 elapsed 0 00:02:47\n```\n\n\n##  impdp\n\n\n### 6.1 \n\nscottscott\n``` impdp scott/tiger@orcl directory=data_dir  dumpfile=expdp.dmp schemas=scott```\n\n### 6.2 \n\nscottdeptempsystem\n``` impdp system/manager@orcl directory=data_dir dumpfile=expdp.dmp tables=scott.dept,scott.emp remap_schema=scott:system```\n\n### 6.3 \n\n``` impdp system/manager@orcl directory=data_dir dumpfile=tablespace.dmp tablespaces=example```\n\n### 6.4 ()\n\n``` impdb system/manager@orcl directory=data_dir dumpfile=full.dmp full=y ``` \n\n### 6.5 \n\n``` impdp system/manager@orcl directory=data_dir dumpfile=expdp.dmp schemas=systemtable_exists_action``` \n\n### 6.6 \n\n**()**:\n``` impdp system/password@172.19.3.12:11521/orcl.test directory=data_dir dumpfile=all.dmp logfile=import.log full=y ignore=y ```\n\n``` bash\n\n[oracle@host backup]$impdp system/password@172.19.3.12:11521/orcl.test directory=data_dir dumpfile=all.dmp logfile=import.log full=y ignore=y\n\nImport: Release 11.2.0.1.0 - Production on Wed Apr 12 22:01:24 2023\nCopyright (c) 1982, 2009, Oracle and/or its affiliates.  All rights reserved.\nConnected to: Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production\nWith the Partitioning, OLAP, Data Mining and Real Application Testing options\n;;; Legacy Mode Active due to the following parameters:\n;;; Legacy Mode Parameter: \"ignore=TRUE\" Location: Command Line, Replaced with: \"table_exists_action=append\"\nMaster table \"SYSTEM\".\"SYS_IMPORT_FULL_01\" successfully loaded/unloaded\nStarting \"SYSTEM\".\"SYS_IMPORT_FULL_01\":  system/********@172.19.3.12:11521/orcl.test directory=data_dir dumpfile=all.dmp logfile=import.log full=y table\n_exists_action=append \nProcessing object type DATABASE_EXPORT/TABLESPACE\nORA-31684: Object type TABLESPACE:\"UNDOTBS1\" already exists\nORA-31684: Object type TABLESPACE:\"TEMP\" already exists\nORA-31684: Object type TABLESPACE:\"USERS\" already exists\nORA-31684: Object type TABLESPACE:\"TRANSFERDB\" already exists\nProcessing object type DATABASE_EXPORT/PROFILE\nORA-31684: Object type PROFILE:\"MONITORING_PROFILE\" already exists\nProcessing object type DATABASE_EXPORT/SYS_USER/USER\nProcessing object type DATABASE_EXPORT/SCHEMA/USER\nORA-31684: Object type USER:\"OUTLN\" already exists\n.\n. ,  n \n.\n\nProcessing object type DATABASE_EXPORT/SCHEMA/TABLE/POST_INSTANCE/PROCACT_INSTANCE\nProcessing object type DATABASE_EXPORT/SCHEMA/TABLE/POST_INSTANCE/PROCDEPOBJ\nProcessing object type DATABASE_EXPORT/SCHEMA/POST_SCHEMA/PROCOBJ\nProcessing object type DATABASE_EXPORT/SCHEMA/POST_SCHEMA/PROCACT_SCHEMA\nProcessing object type DATABASE_EXPORT/AUDIT\nJob \"SYSTEM\".\"SYS_IMPORT_FULL_01\" completed with 7644 error(s) at 22:17:04\n```\n\n\n##  \n **Oracle**\n\n ### 7.1 \n\n ```Oracle A```:\n :  172.21.33.23\n : ```  Oracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit Production```\n\n ``` Oracle B```:\n :  172.19.3.12\n : ``` Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production```\n\n, \n\nOracle A , Oracle B ****\n\n: ``` ORA-01119: error in creating database file '/data/app/oracle/oradata/transferdb/transferdb.dbf' ```\n<img src=\"/images/017.oracle.md.08.png\" width=60% height=70% />\n\nOracle A  transferdb -->```'/data/app/oracle/oradata/transferdb/transferdb.dbf' ```\n Oracle B ``` '/data/app/'``` , .\n\n: Oracle, Oracle\nimpdp****, Oracle****, .\n\n\n\n> :\n[LinuxOracle11g](https://www.cnblogs.com/mmzs/p/9033112.html)\n[OracleEXPDPIMPDP\b](https://designcoding.com/oracle-expdp-impdp-using#toc_h3_0)\n\n","source":"_posts/017.Oracle.md","raw":"---\ntitle: Oracle\ndate: 2022-6-10 11:08:13\ncategories: \n- [Database]\ntags: \n- Oracle\n---\n\n> , ******ip******, .\n\n## \n\n### 1.1\n``` scp linux.x64_11gR2_database_1of2 root@172.21.33.23:/data/oracle ```\n``` scp linux.x64_11gR2_database_2of2 root@172.21.33.23:/data/oracle ```\n### 1.2\n``` unzip \\*.zip ```\n\n### 1.3\n``` yum install gcc make binutils gcc-c++ compat-libstdc++-33elfutils-libelf-devel elfutils-libelf-devel-static ksh libaio libaio-develnumactl-devel sysstat unixODBC unixODBC-devel pcre-devel y ```\n\n### 1.4 hosts\n\n```sed -i \"1s/$/ $(hostname)/\" ```\n\n### 1.5\n``` bash\ngroupadd oinstall\ngroupadd dba\nuseradd -g oinstall -G dba oracle\npasswd oracle\n```\n\n### 1.6\n: ``` vim /etc/sysctl.conf ```\n:\n``` bash\nfs.aio-max-nr = 1048576\nfs.file-max = 6815744\nkernel.shmall = 2097152\nkernel.shmmax = 1073741824\nkernel.shmmni = 4096\nkernel.sem = 250 32000 100 128\nnet.ipv4.ip_local_port_range = 9000 65500\nnet.core.rmem_default = 262144\nnet.core.rmem_max = 4194304\nnet.core.wmem_default = 262144\nnet.core.wmem_max = 1048576 \n```\n: ```sysctl -p```\n\n### 1.7\n\n: ``` vim /etc/security/limits.conf ```\n:\n``` bash\noracle           soft    nproc           2047\noracle           hard    nproc           16384\noracle           soft    nofile          1024\noracle           hard    nofile         65536\noracle           soft    stack           10240 \n```\n\n: ``` vim /etc/pam.d/login ```\n:\n```bash\nsession required  /lib64/security/pam_limits.so\nsession required   pam_limits.so \n```\n\n: ``` vim /etc/profile ```\n:\n``` bash\nif [ $USER = \"oracle\" ]; then\n  if [ $SHELL = \"/bin/ksh\" ]; then\n      ulimit -p 16384\n      ulimit -n 65536\n  else\n      ulimit -u 16384 -n 65536\n  fi\nfi \n```\n\n### 1.8\n\n```bash\nmkdir -p /data/oracle/product/11.2.0\nmkdir /data/oracle/oradata\nmkdir /data/oracle/inventory\nmkdir /data/oracle/fast_recovery_area\nchown -R oracle:oinstall /data/oracle\nchmod -R 775 /data/oracle\n```\n\n### 1.9Oracle\n\nOracle: ``` su -l oracle ```\n\n: ```vim .bash_profile```\n:\n``` bash\nORACLE_BASE=/data/oracle\nORACLE_HOME=$ORACLE_BASE/product/11.2.0\nORACLE_SID=orcl\nPATH=$PATH:$ORACLE_HOME/bin\nexport ORACLE_BASE ORACLE_HOME ORACLE_SID PATH\n```\n: \n``` ORACLE_SID=orcl ```\n\n## \n\n### 2.1\n\n**:** ``` vim /data/database/response/db_install.rsp ```\n**:** ```ORACLE_HOSTNAME=CentOS```\n``` shell\noracle.install.option=INSTALL_DB_SWONLY\nORACLE_HOSTNAME=CentOS\nUNIX_GROUP_NAME=oinstall\nINVENTORY_LOCATION=/data/oracle/inventory\nSELECTED_LANGUAGES=en,zh_CN\nORACLE_HOME=/data/oracle/product/11.2.0\nORACLE_BASE=/data/oracle\noracle.install.db.InstallEdition=EE\noracle.install.db.DBA_GROUP=dba\noracle.install.db.OPER_GROUP=dba\nDECLINE_SECURITY_UPDATES=true\n```\n**:** ``` ./runInstaller -silent -responseFile /data/database/response/db_install.rsp -ignorePrereq ```\n![image.png](/images/017.oracle.md.09.png)\n\n****\n**, root:** \n``` bash\nsh /data/oracle/inventory/orainstRoot.sh\nsh /data/oracle/product/11.2.0/root.sh\n```\n![image.png](/images/017.oracle.md.10.png)\n\n\n### 2.2\n**oracle,:**\n\n**:** ```vim /data/database/response/netca.rsp``` {% label warning @ %}\n**:** ```/silent```  ```-silent```    ```/responseFile``` ```-responseFilet```\n\n**:** ``` netca /silent /responseFile /data/database/response/netca.rsp ```\n![image.png](/images/017.oracle.md.12.png)\n\n\n\n### 2.3\n**oracle,:**\n\n**:** ```vim /data/database/response/dbca.rsp```\n\n``` bash\nRESPONSEFILE_VERSION = \"11.2.0\"\nOPERATION_TYPE = \"createDatabase\"\nGDBNAME = \"orcl.test\"\nSID = \"orcl\"\nTEMPLATENAME = \"General_Purpose.dbc\"\nSYSPASSWORD = \"123456\"\nSYSTEMPASSWORD = \"123456\"\nSYSMANPASSWORD = \"123456\"\nDBSNMPPASSWORD = \"123456\"\nDATAFILEDESTINATION =/data/oracle/oradata\nRECOVERYAREADESTINATION = /data/oracle/fast_recovery_area\nCHARACTERSET = \"ZHS16GBK\"\n# oracle1638MB,2G*80%\nTOTALMEMORY = \"1638\" \n```\n``` dbca -silent -responseFile /data/database/response/dbca.rsp ```\n![image.png](/images/017.oracle.md.05.png)\n\n\n### 2.4oracle\n\n``` lsnrctl start ```\n``` lsnrctl status ```\n<img src=\"/images/017.oracle.md.13.png\" width=70% height=80% />\n<!-- <img src=\"/images/017.oracle.md.03.png\" width=70% height=80% />\n<img src=\"/images/017.oracle.md.04.png\" width=70% height=80% /> -->\n\n\n\n## \n**oracle, :** \n\n****: ``` lsnrctl stop ```\n****: ``` vim /<path to your oracle home>/network/admin/listener.ora```\n{% label danger@1521 %} --> {% label info@11521 %} \n``` bash\nLISTENER =\n  (DESCRIPTION_LIST =\n    (DESCRIPTION =\n      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC11521))\n      (ADDRESS = (PROTOCOL = TCP)(HOST = <your server host name>)(PORT = 11521))\n    )\n  )\n\nADR_BASE_LISTENER = /data/oracle\n```\n**local_listener**\n``` bash\n$ sqlplus / as sysdba\nSQL> show parameter local_listener\nSQL> alter system set local_listener=\"(address = (protocol = tcp)(host = localhost)(port = 11521))\";\nSQL> show parameter local_listener\n```\n![image.png](/images/017.oracle.md.11.png)\n**:** ``` lsnrctl reload ```\n\n## \n\n\n### 4.1 \nsystem\n``` shell\nshell> sqlplus / as sysdba\nSQL> create directory data_dir as '/data/backup';\nDirectory created.\n```\n\n\n```mkdir -p /data/backup```\n```chown -R oracle:oinstall /data/backup```\n\n### 4.2 \n\n```SQL>select * from dba_directories;```\n\n<img src=\"/images/017.oracle.md.06.png\" width=70% height=80% />\n\n### 4.3 system'data_dir'\n\n``` SQL>grant read,write on directory data_dir to system; ```\n\n##  expdp\n\n### 5.1 \n\n``` expdp system/password@orcl schemas=system dumpfile=expdp.dmp directory=data_dir ```\n### 5.2 \n\n``` expdp system/password@orcl tables=emp,dept dumpfile=expdp.dmp directory=data_dir ```\n\n### 5.3 \n\n``` expdp system/password@orcl directory=data_dir dumpfile=expdp.dmp tables=empquery='where deptno=20' ```\n\n### 5.4 \n\n``` expdp system/password@orcl directory=data_dir dumpfile=tablespace.dmptablespaces=temp,example ```\n\n### 5.5 \n\n``` expdp system/password@orcl directory=data_dir dumpfile=full.dmp full=y```\n\n### 5.6 \n\n****: \n``` expdp system/password@172.21.33.23/orcl dumpfile=all.dmp directory=data_dir full=y logfile=all.log ```\n\n``` bash\n[oracle@centos7 backup]$ expdp system/password@172.21.33.23/orcl dumpfile=all.dmp directory=data_dir full=y logfile=all.log\nExport: Release 11.2.0.4.0 - Production on Wed Apr 12 14:46:19 2023\nCopyright (c) 1982, 2011, Oracle and/or its affiliates.  All rights reserved.\n;;; \nConnected to: Oracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit Production\nWith the Partitioning, OLAP, Data Mining and Real Application Testing options\nStarting \"SYSTEM\".\"SYS_EXPORT_FULL_01\":  system/********@172.21.33.23/orcl dumpfile=all.dmp directory=data_dir full=y logfile=all.log \nEstimate in progress using BLOCKS method...\nProcessing object type DATABASE_EXPORT/SCHEMA/TABLE/TABLE_DATA\nTotal estimation using BLOCKS method: 1.104 GB\nProcessing object type DATABASE_EXPORT/TABLESPACE\nProcessing object type DATABASE_EXPORT/PROFILE\nProcessing object type DATABASE_EXPORT/SYS_USER/USER\nProcessing object type DATABASE_EXPORT/SCHEMA/POST_SCHEMA/PROCOBJ\nProcessing object type DATABASE_EXPORT/SCHEMA/POST_SCHEMA/PROCACT_SCHEMA\nProcessing object type DATABASE_EXPORT/AUDIT\n. . exported \"RSY\".\"DATAEX_PROVIDE_APPLY_copy1\"          114.3 MB  643767 rows\n. . exported \"DBSHUMENG\".\"PER_ASSI_FAMILY_BUSY_HOSPITAL\"  70.17 MB  309988 rows\n\n.\n.   ,  n \n.\n\n. . exported \"SYSTEM\".\"REPCAT$_USER_AUTHORIZATIONS\"          0 KB       0 rows\n. . exported \"SYSTEM\".\"REPCAT$_USER_PARM_VALUES\"             0 KB       0 rows\n. . exported \"SYSTEM\".\"SQLPLUS_PRODUCT_PROFILE\"              0 KB       0 rows\n. . exported \"TDUSER\".\"TEST\"                                 0 KB       0 rows\nMaster table \"SYSTEM\".\"SYS_EXPORT_FULL_01\" successfully loaded/unloaded\n******************************************************************************\nDump file set for SYSTEM.SYS_EXPORT_FULL_01 is:\n  /data/backup/all.dmp\nJob \"SYSTEM\".\"SYS_EXPORT_FULL_01\" successfully completed at Wed Apr 12 14:49:08 2023 elapsed 0 00:02:47\n```\n\n\n##  impdp\n\n\n### 6.1 \n\nscottscott\n``` impdp scott/tiger@orcl directory=data_dir  dumpfile=expdp.dmp schemas=scott```\n\n### 6.2 \n\nscottdeptempsystem\n``` impdp system/manager@orcl directory=data_dir dumpfile=expdp.dmp tables=scott.dept,scott.emp remap_schema=scott:system```\n\n### 6.3 \n\n``` impdp system/manager@orcl directory=data_dir dumpfile=tablespace.dmp tablespaces=example```\n\n### 6.4 ()\n\n``` impdb system/manager@orcl directory=data_dir dumpfile=full.dmp full=y ``` \n\n### 6.5 \n\n``` impdp system/manager@orcl directory=data_dir dumpfile=expdp.dmp schemas=systemtable_exists_action``` \n\n### 6.6 \n\n**()**:\n``` impdp system/password@172.19.3.12:11521/orcl.test directory=data_dir dumpfile=all.dmp logfile=import.log full=y ignore=y ```\n\n``` bash\n\n[oracle@host backup]$impdp system/password@172.19.3.12:11521/orcl.test directory=data_dir dumpfile=all.dmp logfile=import.log full=y ignore=y\n\nImport: Release 11.2.0.1.0 - Production on Wed Apr 12 22:01:24 2023\nCopyright (c) 1982, 2009, Oracle and/or its affiliates.  All rights reserved.\nConnected to: Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production\nWith the Partitioning, OLAP, Data Mining and Real Application Testing options\n;;; Legacy Mode Active due to the following parameters:\n;;; Legacy Mode Parameter: \"ignore=TRUE\" Location: Command Line, Replaced with: \"table_exists_action=append\"\nMaster table \"SYSTEM\".\"SYS_IMPORT_FULL_01\" successfully loaded/unloaded\nStarting \"SYSTEM\".\"SYS_IMPORT_FULL_01\":  system/********@172.19.3.12:11521/orcl.test directory=data_dir dumpfile=all.dmp logfile=import.log full=y table\n_exists_action=append \nProcessing object type DATABASE_EXPORT/TABLESPACE\nORA-31684: Object type TABLESPACE:\"UNDOTBS1\" already exists\nORA-31684: Object type TABLESPACE:\"TEMP\" already exists\nORA-31684: Object type TABLESPACE:\"USERS\" already exists\nORA-31684: Object type TABLESPACE:\"TRANSFERDB\" already exists\nProcessing object type DATABASE_EXPORT/PROFILE\nORA-31684: Object type PROFILE:\"MONITORING_PROFILE\" already exists\nProcessing object type DATABASE_EXPORT/SYS_USER/USER\nProcessing object type DATABASE_EXPORT/SCHEMA/USER\nORA-31684: Object type USER:\"OUTLN\" already exists\n.\n. ,  n \n.\n\nProcessing object type DATABASE_EXPORT/SCHEMA/TABLE/POST_INSTANCE/PROCACT_INSTANCE\nProcessing object type DATABASE_EXPORT/SCHEMA/TABLE/POST_INSTANCE/PROCDEPOBJ\nProcessing object type DATABASE_EXPORT/SCHEMA/POST_SCHEMA/PROCOBJ\nProcessing object type DATABASE_EXPORT/SCHEMA/POST_SCHEMA/PROCACT_SCHEMA\nProcessing object type DATABASE_EXPORT/AUDIT\nJob \"SYSTEM\".\"SYS_IMPORT_FULL_01\" completed with 7644 error(s) at 22:17:04\n```\n\n\n##  \n **Oracle**\n\n ### 7.1 \n\n ```Oracle A```:\n :  172.21.33.23\n : ```  Oracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit Production```\n\n ``` Oracle B```:\n :  172.19.3.12\n : ``` Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production```\n\n, \n\nOracle A , Oracle B ****\n\n: ``` ORA-01119: error in creating database file '/data/app/oracle/oradata/transferdb/transferdb.dbf' ```\n<img src=\"/images/017.oracle.md.08.png\" width=60% height=70% />\n\nOracle A  transferdb -->```'/data/app/oracle/oradata/transferdb/transferdb.dbf' ```\n Oracle B ``` '/data/app/'``` , .\n\n: Oracle, Oracle\nimpdp****, Oracle****, .\n\n\n\n> :\n[LinuxOracle11g](https://www.cnblogs.com/mmzs/p/9033112.html)\n[OracleEXPDPIMPDP\b](https://designcoding.com/oracle-expdp-impdp-using#toc_h3_0)\n\n","slug":"017.Oracle","published":1,"updated":"2023-04-21T03:10:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbe6001nyknr7zel30mt","content":"<blockquote>\n<p>, <strong></strong><strong>ip</strong><strong></strong>, .</p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"1-1\"><a href=\"#1-1\" class=\"headerlink\" title=\"1.1\"></a>1.1</h3><p><code>scp linux.x64_11gR2_database_1of2 root@172.21.33.23:/data/oracle</code><br><code>scp linux.x64_11gR2_database_2of2 root@172.21.33.23:/data/oracle</code></p>\n<h3 id=\"1-2\"><a href=\"#1-2\" class=\"headerlink\" title=\"1.2\"></a>1.2</h3><p><code>unzip \\*.zip</code></p>\n<h3 id=\"1-3\"><a href=\"#1-3\" class=\"headerlink\" title=\"1.3\"></a>1.3</h3><p><code>yum install gcc make binutils gcc-c++ compat-libstdc++-33elfutils-libelf-devel elfutils-libelf-devel-static ksh libaio libaio-develnumactl-devel sysstat unixODBC unixODBC-devel pcre-devel y</code></p>\n<h3 id=\"1-4-hosts\"><a href=\"#1-4-hosts\" class=\"headerlink\" title=\"1.4 hosts\"></a>1.4 hosts</h3><p><code>sed -i &quot;1s/$/ $(hostname)/&quot; </code></p>\n<h3 id=\"1-5\"><a href=\"#1-5\" class=\"headerlink\" title=\"1.5\"></a>1.5</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">groupadd oinstall</span><br><span class=\"line\">groupadd dba</span><br><span class=\"line\">useradd -g oinstall -G dba oracle</span><br><span class=\"line\">passwd oracle</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-6\"><a href=\"#1-6\" class=\"headerlink\" title=\"1.6\"></a>1.6</h3><p>: <code>vim /etc/sysctl.conf</code><br>:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">fs.aio-max-nr = 1048576</span><br><span class=\"line\">fs.file-max = 6815744</span><br><span class=\"line\">kernel.shmall = 2097152</span><br><span class=\"line\">kernel.shmmax = 1073741824</span><br><span class=\"line\">kernel.shmmni = 4096</span><br><span class=\"line\">kernel.sem = 250 32000 100 128</span><br><span class=\"line\">net.ipv4.ip_local_port_range = 9000 65500</span><br><span class=\"line\">net.core.rmem_default = 262144</span><br><span class=\"line\">net.core.rmem_max = 4194304</span><br><span class=\"line\">net.core.wmem_default = 262144</span><br><span class=\"line\">net.core.wmem_max = 1048576 </span><br></pre></td></tr></table></figure>\n<p>: <code>sysctl -p</code></p>\n<h3 id=\"1-7\"><a href=\"#1-7\" class=\"headerlink\" title=\"1.7\"></a>1.7</h3><p>: <code>vim /etc/security/limits.conf</code><br>:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">oracle           soft    <span class=\"built_in\">nproc</span>           2047</span><br><span class=\"line\">oracle           hard    <span class=\"built_in\">nproc</span>           16384</span><br><span class=\"line\">oracle           soft    nofile          1024</span><br><span class=\"line\">oracle           hard    nofile         65536</span><br><span class=\"line\">oracle           soft    stack           10240 </span><br></pre></td></tr></table></figure>\n\n<p>: <code>vim /etc/pam.d/login</code><br>:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">session required  /lib64/security/pam_limits.so</span><br><span class=\"line\">session required   pam_limits.so </span><br></pre></td></tr></table></figure>\n\n<p>: <code>vim /etc/profile</code><br>:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"variable\">$USER</span> = <span class=\"string\">&quot;oracle&quot;</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ <span class=\"variable\">$SHELL</span> = <span class=\"string\">&quot;/bin/ksh&quot;</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">      <span class=\"built_in\">ulimit</span> -p 16384</span><br><span class=\"line\">      <span class=\"built_in\">ulimit</span> -n 65536</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">      <span class=\"built_in\">ulimit</span> -u 16384 -n 65536</span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span> </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-8\"><a href=\"#1-8\" class=\"headerlink\" title=\"1.8\"></a>1.8</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> -p /data/oracle/product/11.2.0</span><br><span class=\"line\"><span class=\"built_in\">mkdir</span> /data/oracle/oradata</span><br><span class=\"line\"><span class=\"built_in\">mkdir</span> /data/oracle/inventory</span><br><span class=\"line\"><span class=\"built_in\">mkdir</span> /data/oracle/fast_recovery_area</span><br><span class=\"line\"><span class=\"built_in\">chown</span> -R oracle:oinstall /data/oracle</span><br><span class=\"line\"><span class=\"built_in\">chmod</span> -R 775 /data/oracle</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-9Oracle\"><a href=\"#1-9Oracle\" class=\"headerlink\" title=\"1.9Oracle\"></a>1.9Oracle</h3><p>Oracle: <code>su -l oracle</code></p>\n<p>: <code>vim .bash_profile</code><br>:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">ORACLE_BASE=/data/oracle</span><br><span class=\"line\">ORACLE_HOME=<span class=\"variable\">$ORACLE_BASE</span>/product/11.2.0</span><br><span class=\"line\">ORACLE_SID=orcl</span><br><span class=\"line\">PATH=<span class=\"variable\">$PATH</span>:<span class=\"variable\">$ORACLE_HOME</span>/bin</span><br><span class=\"line\"><span class=\"built_in\">export</span> ORACLE_BASE ORACLE_HOME ORACLE_SID PATH</span><br></pre></td></tr></table></figure>\n<p>: <br><code>ORACLE_SID=orcl</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"2-1\"><a href=\"#2-1\" class=\"headerlink\" title=\"2.1\"></a>2.1</h3><p><strong>:</strong> <code>vim /data/database/response/db_install.rsp</code><br><strong>:</strong> <code>ORACLE_HOSTNAME=CentOS</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">oracle.install.option=INSTALL_DB_SWONLY</span><br><span class=\"line\">ORACLE_HOSTNAME=CentOS</span><br><span class=\"line\">UNIX_GROUP_NAME=oinstall</span><br><span class=\"line\">INVENTORY_LOCATION=/data/oracle/inventory</span><br><span class=\"line\">SELECTED_LANGUAGES=en,zh_CN</span><br><span class=\"line\">ORACLE_HOME=/data/oracle/product/11.2.0</span><br><span class=\"line\">ORACLE_BASE=/data/oracle</span><br><span class=\"line\">oracle.install.db.InstallEdition=EE</span><br><span class=\"line\">oracle.install.db.DBA_GROUP=dba</span><br><span class=\"line\">oracle.install.db.OPER_GROUP=dba</span><br><span class=\"line\">DECLINE_SECURITY_UPDATES=true</span><br></pre></td></tr></table></figure>\n<p><strong>:</strong> <code>./runInstaller -silent -responseFile /data/database/response/db_install.rsp -ignorePrereq</code><br><img src=\"/images/017.oracle.md.09.png\" alt=\"image.png\"></p>\n<p><strong></strong><br><strong>, root:</strong> </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sh /data/oracle/inventory/orainstRoot.sh</span><br><span class=\"line\">sh /data/oracle/product/11.2.0/root.sh</span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/017.oracle.md.10.png\" alt=\"image.png\"></p>\n<h3 id=\"2-2\"><a href=\"#2-2\" class=\"headerlink\" title=\"2.2\"></a>2.2</h3><p><strong>oracle,:</strong></p>\n<p><strong>:</strong> <code>vim /data/database/response/netca.rsp</code> <mark class=\"label warning\"></mark><br><strong>:</strong> <code>/silent</code>  <code>-silent</code>    <code>/responseFile</code> <code>-responseFilet</code></p>\n<p><strong>:</strong> <code>netca /silent /responseFile /data/database/response/netca.rsp</code><br><img src=\"/images/017.oracle.md.12.png\" alt=\"image.png\"></p>\n<h3 id=\"2-3\"><a href=\"#2-3\" class=\"headerlink\" title=\"2.3\"></a>2.3</h3><p><strong>oracle,:</strong></p>\n<p><strong>:</strong> <code>vim /data/database/response/dbca.rsp</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">RESPONSEFILE_VERSION = <span class=\"string\">&quot;11.2.0&quot;</span></span><br><span class=\"line\">OPERATION_TYPE = <span class=\"string\">&quot;createDatabase&quot;</span></span><br><span class=\"line\">GDBNAME = <span class=\"string\">&quot;orcl.test&quot;</span></span><br><span class=\"line\">SID = <span class=\"string\">&quot;orcl&quot;</span></span><br><span class=\"line\">TEMPLATENAME = <span class=\"string\">&quot;General_Purpose.dbc&quot;</span></span><br><span class=\"line\">SYSPASSWORD = <span class=\"string\">&quot;123456&quot;</span></span><br><span class=\"line\">SYSTEMPASSWORD = <span class=\"string\">&quot;123456&quot;</span></span><br><span class=\"line\">SYSMANPASSWORD = <span class=\"string\">&quot;123456&quot;</span></span><br><span class=\"line\">DBSNMPPASSWORD = <span class=\"string\">&quot;123456&quot;</span></span><br><span class=\"line\">DATAFILEDESTINATION =/data/oracle/oradata</span><br><span class=\"line\">RECOVERYAREADESTINATION = /data/oracle/fast_recovery_area</span><br><span class=\"line\">CHARACTERSET = <span class=\"string\">&quot;ZHS16GBK&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># oracle1638MB,2G*80%</span></span><br><span class=\"line\">TOTALMEMORY = <span class=\"string\">&quot;1638&quot;</span> </span><br></pre></td></tr></table></figure>\n<p><code>dbca -silent -responseFile /data/database/response/dbca.rsp</code><br><img src=\"/images/017.oracle.md.05.png\" alt=\"image.png\"></p>\n<h3 id=\"2-4oracle\"><a href=\"#2-4oracle\" class=\"headerlink\" title=\"2.4oracle\"></a>2.4oracle</h3><p><code>lsnrctl start</code><br><code>lsnrctl status</code><br><img src=\"/images/017.oracle.md.13.png\" width=70% height=80% /></p>\n<!-- <img src=\"/images/017.oracle.md.03.png\" width=70% height=80% />\n<img src=\"/images/017.oracle.md.04.png\" width=70% height=80% /> -->\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong>oracle, :</strong> </p>\n<p><strong></strong>: <code>lsnrctl stop</code><br><strong></strong>: <code> vim /&lt;path to your oracle home&gt;/network/admin/listener.ora</code></p>\n<mark class=\"label danger\">1521</mark> --> <mark class=\"label info\">11521</mark> \n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">LISTENER =</span><br><span class=\"line\">  (DESCRIPTION_LIST =</span><br><span class=\"line\">    (DESCRIPTION =</span><br><span class=\"line\">      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC11521))</span><br><span class=\"line\">      (ADDRESS = (PROTOCOL = TCP)(HOST = &lt;your server host name&gt;)(PORT = 11521))</span><br><span class=\"line\">    )</span><br><span class=\"line\">  )</span><br><span class=\"line\"></span><br><span class=\"line\">ADR_BASE_LISTENER = /data/oracle</span><br></pre></td></tr></table></figure>\n<p><strong>local_listener</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ sqlplus / as sysdba</span><br><span class=\"line\">SQL&gt; show parameter local_listener</span><br><span class=\"line\">SQL&gt; alter system <span class=\"built_in\">set</span> local_listener=<span class=\"string\">&quot;(address = (protocol = tcp)(host = localhost)(port = 11521))&quot;</span>;</span><br><span class=\"line\">SQL&gt; show parameter local_listener</span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/017.oracle.md.11.png\" alt=\"image.png\"><br><strong>:</strong> <code>lsnrctl reload</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"4-1-\"><a href=\"#4-1-\" class=\"headerlink\" title=\"4.1 \"></a>4.1 </h3><p>system</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">shell&gt; </span><span class=\"language-bash\">sqlplus / as sysdba</span></span><br><span class=\"line\"><span class=\"meta prompt_\">SQL&gt; </span><span class=\"language-bash\">create directory data_dir as <span class=\"string\">&#x27;/data/backup&#x27;</span>;</span></span><br><span class=\"line\">Directory created.</span><br></pre></td></tr></table></figure>\n\n<p><br><code>mkdir -p /data/backup</code><br><code>chown -R oracle:oinstall /data/backup</code></p>\n<h3 id=\"4-2-\"><a href=\"#4-2-\" class=\"headerlink\" title=\"4.2 \"></a>4.2 </h3><p><code>SQL&gt;select * from dba_directories;</code></p>\n<img src=\"/images/017.oracle.md.06.png\" width=70% height=80% />\n\n<h3 id=\"4-3-systemdata-dir\"><a href=\"#4-3-systemdata-dir\" class=\"headerlink\" title=\"4.3 systemdata_dir\"></a>4.3 systemdata_dir</h3><p><code>SQL&gt;grant read,write on directory data_dir to system;</code></p>\n<h2 id=\"-expdp\"><a href=\"#-expdp\" class=\"headerlink\" title=\" expdp\"></a> expdp</h2><h3 id=\"5-1-\"><a href=\"#5-1-\" class=\"headerlink\" title=\"5.1 \"></a>5.1 </h3><p><code>expdp system/password@orcl schemas=system dumpfile=expdp.dmp directory=data_dir</code></p>\n<h3 id=\"5-2-\"><a href=\"#5-2-\" class=\"headerlink\" title=\"5.2 \"></a>5.2 </h3><p><code>expdp system/password@orcl tables=emp,dept dumpfile=expdp.dmp directory=data_dir</code></p>\n<h3 id=\"5-3-\"><a href=\"#5-3-\" class=\"headerlink\" title=\"5.3 \"></a>5.3 </h3><p><code>expdp system/password@orcl directory=data_dir dumpfile=expdp.dmp tables=empquery=&#39;where deptno=20&#39;</code></p>\n<h3 id=\"5-4-\"><a href=\"#5-4-\" class=\"headerlink\" title=\"5.4 \"></a>5.4 </h3><p><code>expdp system/password@orcl directory=data_dir dumpfile=tablespace.dmptablespaces=temp,example</code></p>\n<h3 id=\"5-5-\"><a href=\"#5-5-\" class=\"headerlink\" title=\"5.5 \"></a>5.5 </h3><p><code> expdp system/password@orcl directory=data_dir dumpfile=full.dmp full=y</code></p>\n<h3 id=\"5-6-\"><a href=\"#5-6-\" class=\"headerlink\" title=\"5.6 \"></a>5.6 </h3><p><strong></strong>:<br><code>expdp system/password@172.21.33.23/orcl dumpfile=all.dmp directory=data_dir full=y logfile=all.log</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[oracle@centos7 backup]$ expdp system/password@172.21.33.23/orcl dumpfile=all.dmp directory=data_dir full=y logfile=all.log</span><br><span class=\"line\">Export: Release 11.2.0.4.0 - Production on Wed Apr 12 14:46:19 2023</span><br><span class=\"line\">Copyright (c) 1982, 2011, Oracle and/or its affiliates.  All rights reserved.</span><br><span class=\"line\">;;; </span><br><span class=\"line\">Connected to: Oracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit Production</span><br><span class=\"line\">With the Partitioning, OLAP, Data Mining and Real Application Testing options</span><br><span class=\"line\">Starting <span class=\"string\">&quot;SYSTEM&quot;</span>.<span class=\"string\">&quot;SYS_EXPORT_FULL_01&quot;</span>:  system/********@172.21.33.23/orcl dumpfile=all.dmp directory=data_dir full=y logfile=all.log </span><br><span class=\"line\">Estimate <span class=\"keyword\">in</span> progress using BLOCKS method...</span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/SCHEMA/TABLE/TABLE_DATA</span><br><span class=\"line\">Total estimation using BLOCKS method: 1.104 GB</span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/TABLESPACE</span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/PROFILE</span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/SYS_USER/USER</span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/SCHEMA/POST_SCHEMA/PROCOBJ</span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/SCHEMA/POST_SCHEMA/PROCACT_SCHEMA</span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/AUDIT</span><br><span class=\"line\">. . exported <span class=\"string\">&quot;RSY&quot;</span>.<span class=\"string\">&quot;DATAEX_PROVIDE_APPLY_copy1&quot;</span>          114.3 MB  643767 rows</span><br><span class=\"line\">. . exported <span class=\"string\">&quot;DBSHUMENG&quot;</span>.<span class=\"string\">&quot;PER_ASSI_FAMILY_BUSY_HOSPITAL&quot;</span>  70.17 MB  309988 rows</span><br><span class=\"line\"></span><br><span class=\"line\">.</span><br><span class=\"line\">.   ,  n </span><br><span class=\"line\">.</span><br><span class=\"line\"></span><br><span class=\"line\">. . exported <span class=\"string\">&quot;SYSTEM&quot;</span>.<span class=\"string\">&quot;REPCAT<span class=\"variable\">$_USER_AUTHORIZATIONS</span>&quot;</span>          0 KB       0 rows</span><br><span class=\"line\">. . exported <span class=\"string\">&quot;SYSTEM&quot;</span>.<span class=\"string\">&quot;REPCAT<span class=\"variable\">$_USER_PARM_VALUES</span>&quot;</span>             0 KB       0 rows</span><br><span class=\"line\">. . exported <span class=\"string\">&quot;SYSTEM&quot;</span>.<span class=\"string\">&quot;SQLPLUS_PRODUCT_PROFILE&quot;</span>              0 KB       0 rows</span><br><span class=\"line\">. . exported <span class=\"string\">&quot;TDUSER&quot;</span>.<span class=\"string\">&quot;TEST&quot;</span>                                 0 KB       0 rows</span><br><span class=\"line\">Master table <span class=\"string\">&quot;SYSTEM&quot;</span>.<span class=\"string\">&quot;SYS_EXPORT_FULL_01&quot;</span> successfully loaded/unloaded</span><br><span class=\"line\">******************************************************************************</span><br><span class=\"line\">Dump file <span class=\"built_in\">set</span> <span class=\"keyword\">for</span> SYSTEM.SYS_EXPORT_FULL_01 is:</span><br><span class=\"line\">  /data/backup/all.dmp</span><br><span class=\"line\">Job <span class=\"string\">&quot;SYSTEM&quot;</span>.<span class=\"string\">&quot;SYS_EXPORT_FULL_01&quot;</span> successfully completed at Wed Apr 12 14:49:08 2023 elapsed 0 00:02:47</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"-impdp\"><a href=\"#-impdp\" class=\"headerlink\" title=\" impdp\"></a> impdp</h2><h3 id=\"6-1-\"><a href=\"#6-1-\" class=\"headerlink\" title=\"6.1 \"></a>6.1 </h3><p>scottscott<br><code> impdp scott/tiger@orcl directory=data_dir  dumpfile=expdp.dmp schemas=scott</code></p>\n<h3 id=\"6-2-\"><a href=\"#6-2-\" class=\"headerlink\" title=\"6.2 \"></a>6.2 </h3><p>scottdeptempsystem<br><code> impdp system/manager@orcl directory=data_dir dumpfile=expdp.dmp tables=scott.dept,scott.emp remap_schema=scott:system</code></p>\n<h3 id=\"6-3-\"><a href=\"#6-3-\" class=\"headerlink\" title=\"6.3 \"></a>6.3 </h3><p><code> impdp system/manager@orcl directory=data_dir dumpfile=tablespace.dmp tablespaces=example</code></p>\n<h3 id=\"6-4--\"><a href=\"#6-4--\" class=\"headerlink\" title=\"6.4 ()\"></a>6.4 ()</h3><p><code>impdb system/manager@orcl directory=data_dir dumpfile=full.dmp full=y</code> </p>\n<h3 id=\"6-5-\"><a href=\"#6-5-\" class=\"headerlink\" title=\"6.5 \"></a>6.5 </h3><p><code> impdp system/manager@orcl directory=data_dir dumpfile=expdp.dmp schemas=systemtable_exists_action</code> </p>\n<h3 id=\"6-6-\"><a href=\"#6-6-\" class=\"headerlink\" title=\"6.6 \"></a>6.6 </h3><p><strong>()</strong>:<br><code>impdp system/password@172.19.3.12:11521/orcl.test directory=data_dir dumpfile=all.dmp logfile=import.log full=y ignore=y</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">[oracle@host backup]<span class=\"variable\">$impdp</span> system/password@172.19.3.12:11521/orcl.test directory=data_dir dumpfile=all.dmp logfile=import.log full=y ignore=y</span><br><span class=\"line\"></span><br><span class=\"line\">Import: Release 11.2.0.1.0 - Production on Wed Apr 12 22:01:24 2023</span><br><span class=\"line\">Copyright (c) 1982, 2009, Oracle and/or its affiliates.  All rights reserved.</span><br><span class=\"line\">Connected to: Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production</span><br><span class=\"line\">With the Partitioning, OLAP, Data Mining and Real Application Testing options</span><br><span class=\"line\">;;; Legacy Mode Active due to the following parameters:</span><br><span class=\"line\">;;; Legacy Mode Parameter: <span class=\"string\">&quot;ignore=TRUE&quot;</span> Location: Command Line, Replaced with: <span class=\"string\">&quot;table_exists_action=append&quot;</span></span><br><span class=\"line\">Master table <span class=\"string\">&quot;SYSTEM&quot;</span>.<span class=\"string\">&quot;SYS_IMPORT_FULL_01&quot;</span> successfully loaded/unloaded</span><br><span class=\"line\">Starting <span class=\"string\">&quot;SYSTEM&quot;</span>.<span class=\"string\">&quot;SYS_IMPORT_FULL_01&quot;</span>:  system/********@172.19.3.12:11521/orcl.test directory=data_dir dumpfile=all.dmp logfile=import.log full=y table</span><br><span class=\"line\">_exists_action=append </span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/TABLESPACE</span><br><span class=\"line\">ORA-31684: Object <span class=\"built_in\">type</span> TABLESPACE:<span class=\"string\">&quot;UNDOTBS1&quot;</span> already exists</span><br><span class=\"line\">ORA-31684: Object <span class=\"built_in\">type</span> TABLESPACE:<span class=\"string\">&quot;TEMP&quot;</span> already exists</span><br><span class=\"line\">ORA-31684: Object <span class=\"built_in\">type</span> TABLESPACE:<span class=\"string\">&quot;USERS&quot;</span> already exists</span><br><span class=\"line\">ORA-31684: Object <span class=\"built_in\">type</span> TABLESPACE:<span class=\"string\">&quot;TRANSFERDB&quot;</span> already exists</span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/PROFILE</span><br><span class=\"line\">ORA-31684: Object <span class=\"built_in\">type</span> PROFILE:<span class=\"string\">&quot;MONITORING_PROFILE&quot;</span> already exists</span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/SYS_USER/USER</span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/SCHEMA/USER</span><br><span class=\"line\">ORA-31684: Object <span class=\"built_in\">type</span> USER:<span class=\"string\">&quot;OUTLN&quot;</span> already exists</span><br><span class=\"line\">.</span><br><span class=\"line\">. ,  n </span><br><span class=\"line\">.</span><br><span class=\"line\"></span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/SCHEMA/TABLE/POST_INSTANCE/PROCACT_INSTANCE</span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/SCHEMA/TABLE/POST_INSTANCE/PROCDEPOBJ</span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/SCHEMA/POST_SCHEMA/PROCOBJ</span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/SCHEMA/POST_SCHEMA/PROCACT_SCHEMA</span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/AUDIT</span><br><span class=\"line\">Job <span class=\"string\">&quot;SYSTEM&quot;</span>.<span class=\"string\">&quot;SYS_IMPORT_FULL_01&quot;</span> completed with 7644 error(s) at 22:17:04</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p> <strong>Oracle</strong></p>\n<h3 id=\"7-1-\"><a href=\"#7-1-\" class=\"headerlink\" title=\"7.1 \"></a>7.1 </h3><p> <code>Oracle A</code>:<br> :  172.21.33.23<br> : <code>  Oracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit Production</code></p>\n<p> <code> Oracle B</code>:<br> :  172.19.3.12<br> : <code> Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production</code></p>\n<p>, </p>\n<p>Oracle A , Oracle B <strong></strong></p>\n<p>: <code>ORA-01119: error in creating database file &#39;/data/app/oracle/oradata/transferdb/transferdb.dbf&#39;</code><br><img src=\"/images/017.oracle.md.08.png\" width=60% height=70% /></p>\n<p>Oracle A  transferdb &gt;<code>&#39;/data/app/oracle/oradata/transferdb/transferdb.dbf&#39; </code><br> Oracle B <code> &#39;/data/app/&#39;</code> , .</p>\n<p>: Oracle, Oracle<br>impdp<strong></strong>, Oracle<strong></strong>, .</p>\n<blockquote>\n<p>:<br><a href=\"https://www.cnblogs.com/mmzs/p/9033112.html\">LinuxOracle11g</a><br><a href=\"https://designcoding.com/oracle-expdp-impdp-using#toc_h3_0\">OracleEXPDPIMPDP\b</a></p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>, <strong></strong><strong>ip</strong><strong></strong>, .</p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"1-1\"><a href=\"#1-1\" class=\"headerlink\" title=\"1.1\"></a>1.1</h3><p><code>scp linux.x64_11gR2_database_1of2 root@172.21.33.23:/data/oracle</code><br><code>scp linux.x64_11gR2_database_2of2 root@172.21.33.23:/data/oracle</code></p>\n<h3 id=\"1-2\"><a href=\"#1-2\" class=\"headerlink\" title=\"1.2\"></a>1.2</h3><p><code>unzip \\*.zip</code></p>\n<h3 id=\"1-3\"><a href=\"#1-3\" class=\"headerlink\" title=\"1.3\"></a>1.3</h3><p><code>yum install gcc make binutils gcc-c++ compat-libstdc++-33elfutils-libelf-devel elfutils-libelf-devel-static ksh libaio libaio-develnumactl-devel sysstat unixODBC unixODBC-devel pcre-devel y</code></p>\n<h3 id=\"1-4-hosts\"><a href=\"#1-4-hosts\" class=\"headerlink\" title=\"1.4 hosts\"></a>1.4 hosts</h3><p><code>sed -i &quot;1s/$/ $(hostname)/&quot; </code></p>\n<h3 id=\"1-5\"><a href=\"#1-5\" class=\"headerlink\" title=\"1.5\"></a>1.5</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">groupadd oinstall</span><br><span class=\"line\">groupadd dba</span><br><span class=\"line\">useradd -g oinstall -G dba oracle</span><br><span class=\"line\">passwd oracle</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-6\"><a href=\"#1-6\" class=\"headerlink\" title=\"1.6\"></a>1.6</h3><p>: <code>vim /etc/sysctl.conf</code><br>:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">fs.aio-max-nr = 1048576</span><br><span class=\"line\">fs.file-max = 6815744</span><br><span class=\"line\">kernel.shmall = 2097152</span><br><span class=\"line\">kernel.shmmax = 1073741824</span><br><span class=\"line\">kernel.shmmni = 4096</span><br><span class=\"line\">kernel.sem = 250 32000 100 128</span><br><span class=\"line\">net.ipv4.ip_local_port_range = 9000 65500</span><br><span class=\"line\">net.core.rmem_default = 262144</span><br><span class=\"line\">net.core.rmem_max = 4194304</span><br><span class=\"line\">net.core.wmem_default = 262144</span><br><span class=\"line\">net.core.wmem_max = 1048576 </span><br></pre></td></tr></table></figure>\n<p>: <code>sysctl -p</code></p>\n<h3 id=\"1-7\"><a href=\"#1-7\" class=\"headerlink\" title=\"1.7\"></a>1.7</h3><p>: <code>vim /etc/security/limits.conf</code><br>:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">oracle           soft    <span class=\"built_in\">nproc</span>           2047</span><br><span class=\"line\">oracle           hard    <span class=\"built_in\">nproc</span>           16384</span><br><span class=\"line\">oracle           soft    nofile          1024</span><br><span class=\"line\">oracle           hard    nofile         65536</span><br><span class=\"line\">oracle           soft    stack           10240 </span><br></pre></td></tr></table></figure>\n\n<p>: <code>vim /etc/pam.d/login</code><br>:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">session required  /lib64/security/pam_limits.so</span><br><span class=\"line\">session required   pam_limits.so </span><br></pre></td></tr></table></figure>\n\n<p>: <code>vim /etc/profile</code><br>:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"variable\">$USER</span> = <span class=\"string\">&quot;oracle&quot;</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ <span class=\"variable\">$SHELL</span> = <span class=\"string\">&quot;/bin/ksh&quot;</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">      <span class=\"built_in\">ulimit</span> -p 16384</span><br><span class=\"line\">      <span class=\"built_in\">ulimit</span> -n 65536</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">      <span class=\"built_in\">ulimit</span> -u 16384 -n 65536</span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span> </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-8\"><a href=\"#1-8\" class=\"headerlink\" title=\"1.8\"></a>1.8</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> -p /data/oracle/product/11.2.0</span><br><span class=\"line\"><span class=\"built_in\">mkdir</span> /data/oracle/oradata</span><br><span class=\"line\"><span class=\"built_in\">mkdir</span> /data/oracle/inventory</span><br><span class=\"line\"><span class=\"built_in\">mkdir</span> /data/oracle/fast_recovery_area</span><br><span class=\"line\"><span class=\"built_in\">chown</span> -R oracle:oinstall /data/oracle</span><br><span class=\"line\"><span class=\"built_in\">chmod</span> -R 775 /data/oracle</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-9Oracle\"><a href=\"#1-9Oracle\" class=\"headerlink\" title=\"1.9Oracle\"></a>1.9Oracle</h3><p>Oracle: <code>su -l oracle</code></p>\n<p>: <code>vim .bash_profile</code><br>:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">ORACLE_BASE=/data/oracle</span><br><span class=\"line\">ORACLE_HOME=<span class=\"variable\">$ORACLE_BASE</span>/product/11.2.0</span><br><span class=\"line\">ORACLE_SID=orcl</span><br><span class=\"line\">PATH=<span class=\"variable\">$PATH</span>:<span class=\"variable\">$ORACLE_HOME</span>/bin</span><br><span class=\"line\"><span class=\"built_in\">export</span> ORACLE_BASE ORACLE_HOME ORACLE_SID PATH</span><br></pre></td></tr></table></figure>\n<p>: <br><code>ORACLE_SID=orcl</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"2-1\"><a href=\"#2-1\" class=\"headerlink\" title=\"2.1\"></a>2.1</h3><p><strong>:</strong> <code>vim /data/database/response/db_install.rsp</code><br><strong>:</strong> <code>ORACLE_HOSTNAME=CentOS</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">oracle.install.option=INSTALL_DB_SWONLY</span><br><span class=\"line\">ORACLE_HOSTNAME=CentOS</span><br><span class=\"line\">UNIX_GROUP_NAME=oinstall</span><br><span class=\"line\">INVENTORY_LOCATION=/data/oracle/inventory</span><br><span class=\"line\">SELECTED_LANGUAGES=en,zh_CN</span><br><span class=\"line\">ORACLE_HOME=/data/oracle/product/11.2.0</span><br><span class=\"line\">ORACLE_BASE=/data/oracle</span><br><span class=\"line\">oracle.install.db.InstallEdition=EE</span><br><span class=\"line\">oracle.install.db.DBA_GROUP=dba</span><br><span class=\"line\">oracle.install.db.OPER_GROUP=dba</span><br><span class=\"line\">DECLINE_SECURITY_UPDATES=true</span><br></pre></td></tr></table></figure>\n<p><strong>:</strong> <code>./runInstaller -silent -responseFile /data/database/response/db_install.rsp -ignorePrereq</code><br><img src=\"/images/017.oracle.md.09.png\" alt=\"image.png\"></p>\n<p><strong></strong><br><strong>, root:</strong> </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sh /data/oracle/inventory/orainstRoot.sh</span><br><span class=\"line\">sh /data/oracle/product/11.2.0/root.sh</span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/017.oracle.md.10.png\" alt=\"image.png\"></p>\n<h3 id=\"2-2\"><a href=\"#2-2\" class=\"headerlink\" title=\"2.2\"></a>2.2</h3><p><strong>oracle,:</strong></p>\n<p><strong>:</strong> <code>vim /data/database/response/netca.rsp</code> <mark class=\"label warning\"></mark><br><strong>:</strong> <code>/silent</code>  <code>-silent</code>    <code>/responseFile</code> <code>-responseFilet</code></p>\n<p><strong>:</strong> <code>netca /silent /responseFile /data/database/response/netca.rsp</code><br><img src=\"/images/017.oracle.md.12.png\" alt=\"image.png\"></p>\n<h3 id=\"2-3\"><a href=\"#2-3\" class=\"headerlink\" title=\"2.3\"></a>2.3</h3><p><strong>oracle,:</strong></p>\n<p><strong>:</strong> <code>vim /data/database/response/dbca.rsp</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">RESPONSEFILE_VERSION = <span class=\"string\">&quot;11.2.0&quot;</span></span><br><span class=\"line\">OPERATION_TYPE = <span class=\"string\">&quot;createDatabase&quot;</span></span><br><span class=\"line\">GDBNAME = <span class=\"string\">&quot;orcl.test&quot;</span></span><br><span class=\"line\">SID = <span class=\"string\">&quot;orcl&quot;</span></span><br><span class=\"line\">TEMPLATENAME = <span class=\"string\">&quot;General_Purpose.dbc&quot;</span></span><br><span class=\"line\">SYSPASSWORD = <span class=\"string\">&quot;123456&quot;</span></span><br><span class=\"line\">SYSTEMPASSWORD = <span class=\"string\">&quot;123456&quot;</span></span><br><span class=\"line\">SYSMANPASSWORD = <span class=\"string\">&quot;123456&quot;</span></span><br><span class=\"line\">DBSNMPPASSWORD = <span class=\"string\">&quot;123456&quot;</span></span><br><span class=\"line\">DATAFILEDESTINATION =/data/oracle/oradata</span><br><span class=\"line\">RECOVERYAREADESTINATION = /data/oracle/fast_recovery_area</span><br><span class=\"line\">CHARACTERSET = <span class=\"string\">&quot;ZHS16GBK&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># oracle1638MB,2G*80%</span></span><br><span class=\"line\">TOTALMEMORY = <span class=\"string\">&quot;1638&quot;</span> </span><br></pre></td></tr></table></figure>\n<p><code>dbca -silent -responseFile /data/database/response/dbca.rsp</code><br><img src=\"/images/017.oracle.md.05.png\" alt=\"image.png\"></p>\n<h3 id=\"2-4oracle\"><a href=\"#2-4oracle\" class=\"headerlink\" title=\"2.4oracle\"></a>2.4oracle</h3><p><code>lsnrctl start</code><br><code>lsnrctl status</code><br><img src=\"/images/017.oracle.md.13.png\" width=70% height=80% /></p>\n<!-- <img src=\"/images/017.oracle.md.03.png\" width=70% height=80% />\n<img src=\"/images/017.oracle.md.04.png\" width=70% height=80% /> -->\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong>oracle, :</strong> </p>\n<p><strong></strong>: <code>lsnrctl stop</code><br><strong></strong>: <code> vim /&lt;path to your oracle home&gt;/network/admin/listener.ora</code></p>\n<mark class=\"label danger\">1521</mark> --> <mark class=\"label info\">11521</mark> \n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">LISTENER =</span><br><span class=\"line\">  (DESCRIPTION_LIST =</span><br><span class=\"line\">    (DESCRIPTION =</span><br><span class=\"line\">      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC11521))</span><br><span class=\"line\">      (ADDRESS = (PROTOCOL = TCP)(HOST = &lt;your server host name&gt;)(PORT = 11521))</span><br><span class=\"line\">    )</span><br><span class=\"line\">  )</span><br><span class=\"line\"></span><br><span class=\"line\">ADR_BASE_LISTENER = /data/oracle</span><br></pre></td></tr></table></figure>\n<p><strong>local_listener</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ sqlplus / as sysdba</span><br><span class=\"line\">SQL&gt; show parameter local_listener</span><br><span class=\"line\">SQL&gt; alter system <span class=\"built_in\">set</span> local_listener=<span class=\"string\">&quot;(address = (protocol = tcp)(host = localhost)(port = 11521))&quot;</span>;</span><br><span class=\"line\">SQL&gt; show parameter local_listener</span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/017.oracle.md.11.png\" alt=\"image.png\"><br><strong>:</strong> <code>lsnrctl reload</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"4-1-\"><a href=\"#4-1-\" class=\"headerlink\" title=\"4.1 \"></a>4.1 </h3><p>system</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">shell&gt; </span><span class=\"language-bash\">sqlplus / as sysdba</span></span><br><span class=\"line\"><span class=\"meta prompt_\">SQL&gt; </span><span class=\"language-bash\">create directory data_dir as <span class=\"string\">&#x27;/data/backup&#x27;</span>;</span></span><br><span class=\"line\">Directory created.</span><br></pre></td></tr></table></figure>\n\n<p><br><code>mkdir -p /data/backup</code><br><code>chown -R oracle:oinstall /data/backup</code></p>\n<h3 id=\"4-2-\"><a href=\"#4-2-\" class=\"headerlink\" title=\"4.2 \"></a>4.2 </h3><p><code>SQL&gt;select * from dba_directories;</code></p>\n<img src=\"/images/017.oracle.md.06.png\" width=70% height=80% />\n\n<h3 id=\"4-3-systemdata-dir\"><a href=\"#4-3-systemdata-dir\" class=\"headerlink\" title=\"4.3 systemdata_dir\"></a>4.3 systemdata_dir</h3><p><code>SQL&gt;grant read,write on directory data_dir to system;</code></p>\n<h2 id=\"-expdp\"><a href=\"#-expdp\" class=\"headerlink\" title=\" expdp\"></a> expdp</h2><h3 id=\"5-1-\"><a href=\"#5-1-\" class=\"headerlink\" title=\"5.1 \"></a>5.1 </h3><p><code>expdp system/password@orcl schemas=system dumpfile=expdp.dmp directory=data_dir</code></p>\n<h3 id=\"5-2-\"><a href=\"#5-2-\" class=\"headerlink\" title=\"5.2 \"></a>5.2 </h3><p><code>expdp system/password@orcl tables=emp,dept dumpfile=expdp.dmp directory=data_dir</code></p>\n<h3 id=\"5-3-\"><a href=\"#5-3-\" class=\"headerlink\" title=\"5.3 \"></a>5.3 </h3><p><code>expdp system/password@orcl directory=data_dir dumpfile=expdp.dmp tables=empquery=&#39;where deptno=20&#39;</code></p>\n<h3 id=\"5-4-\"><a href=\"#5-4-\" class=\"headerlink\" title=\"5.4 \"></a>5.4 </h3><p><code>expdp system/password@orcl directory=data_dir dumpfile=tablespace.dmptablespaces=temp,example</code></p>\n<h3 id=\"5-5-\"><a href=\"#5-5-\" class=\"headerlink\" title=\"5.5 \"></a>5.5 </h3><p><code> expdp system/password@orcl directory=data_dir dumpfile=full.dmp full=y</code></p>\n<h3 id=\"5-6-\"><a href=\"#5-6-\" class=\"headerlink\" title=\"5.6 \"></a>5.6 </h3><p><strong></strong>:<br><code>expdp system/password@172.21.33.23/orcl dumpfile=all.dmp directory=data_dir full=y logfile=all.log</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[oracle@centos7 backup]$ expdp system/password@172.21.33.23/orcl dumpfile=all.dmp directory=data_dir full=y logfile=all.log</span><br><span class=\"line\">Export: Release 11.2.0.4.0 - Production on Wed Apr 12 14:46:19 2023</span><br><span class=\"line\">Copyright (c) 1982, 2011, Oracle and/or its affiliates.  All rights reserved.</span><br><span class=\"line\">;;; </span><br><span class=\"line\">Connected to: Oracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit Production</span><br><span class=\"line\">With the Partitioning, OLAP, Data Mining and Real Application Testing options</span><br><span class=\"line\">Starting <span class=\"string\">&quot;SYSTEM&quot;</span>.<span class=\"string\">&quot;SYS_EXPORT_FULL_01&quot;</span>:  system/********@172.21.33.23/orcl dumpfile=all.dmp directory=data_dir full=y logfile=all.log </span><br><span class=\"line\">Estimate <span class=\"keyword\">in</span> progress using BLOCKS method...</span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/SCHEMA/TABLE/TABLE_DATA</span><br><span class=\"line\">Total estimation using BLOCKS method: 1.104 GB</span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/TABLESPACE</span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/PROFILE</span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/SYS_USER/USER</span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/SCHEMA/POST_SCHEMA/PROCOBJ</span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/SCHEMA/POST_SCHEMA/PROCACT_SCHEMA</span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/AUDIT</span><br><span class=\"line\">. . exported <span class=\"string\">&quot;RSY&quot;</span>.<span class=\"string\">&quot;DATAEX_PROVIDE_APPLY_copy1&quot;</span>          114.3 MB  643767 rows</span><br><span class=\"line\">. . exported <span class=\"string\">&quot;DBSHUMENG&quot;</span>.<span class=\"string\">&quot;PER_ASSI_FAMILY_BUSY_HOSPITAL&quot;</span>  70.17 MB  309988 rows</span><br><span class=\"line\"></span><br><span class=\"line\">.</span><br><span class=\"line\">.   ,  n </span><br><span class=\"line\">.</span><br><span class=\"line\"></span><br><span class=\"line\">. . exported <span class=\"string\">&quot;SYSTEM&quot;</span>.<span class=\"string\">&quot;REPCAT<span class=\"variable\">$_USER_AUTHORIZATIONS</span>&quot;</span>          0 KB       0 rows</span><br><span class=\"line\">. . exported <span class=\"string\">&quot;SYSTEM&quot;</span>.<span class=\"string\">&quot;REPCAT<span class=\"variable\">$_USER_PARM_VALUES</span>&quot;</span>             0 KB       0 rows</span><br><span class=\"line\">. . exported <span class=\"string\">&quot;SYSTEM&quot;</span>.<span class=\"string\">&quot;SQLPLUS_PRODUCT_PROFILE&quot;</span>              0 KB       0 rows</span><br><span class=\"line\">. . exported <span class=\"string\">&quot;TDUSER&quot;</span>.<span class=\"string\">&quot;TEST&quot;</span>                                 0 KB       0 rows</span><br><span class=\"line\">Master table <span class=\"string\">&quot;SYSTEM&quot;</span>.<span class=\"string\">&quot;SYS_EXPORT_FULL_01&quot;</span> successfully loaded/unloaded</span><br><span class=\"line\">******************************************************************************</span><br><span class=\"line\">Dump file <span class=\"built_in\">set</span> <span class=\"keyword\">for</span> SYSTEM.SYS_EXPORT_FULL_01 is:</span><br><span class=\"line\">  /data/backup/all.dmp</span><br><span class=\"line\">Job <span class=\"string\">&quot;SYSTEM&quot;</span>.<span class=\"string\">&quot;SYS_EXPORT_FULL_01&quot;</span> successfully completed at Wed Apr 12 14:49:08 2023 elapsed 0 00:02:47</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"-impdp\"><a href=\"#-impdp\" class=\"headerlink\" title=\" impdp\"></a> impdp</h2><h3 id=\"6-1-\"><a href=\"#6-1-\" class=\"headerlink\" title=\"6.1 \"></a>6.1 </h3><p>scottscott<br><code> impdp scott/tiger@orcl directory=data_dir  dumpfile=expdp.dmp schemas=scott</code></p>\n<h3 id=\"6-2-\"><a href=\"#6-2-\" class=\"headerlink\" title=\"6.2 \"></a>6.2 </h3><p>scottdeptempsystem<br><code> impdp system/manager@orcl directory=data_dir dumpfile=expdp.dmp tables=scott.dept,scott.emp remap_schema=scott:system</code></p>\n<h3 id=\"6-3-\"><a href=\"#6-3-\" class=\"headerlink\" title=\"6.3 \"></a>6.3 </h3><p><code> impdp system/manager@orcl directory=data_dir dumpfile=tablespace.dmp tablespaces=example</code></p>\n<h3 id=\"6-4--\"><a href=\"#6-4--\" class=\"headerlink\" title=\"6.4 ()\"></a>6.4 ()</h3><p><code>impdb system/manager@orcl directory=data_dir dumpfile=full.dmp full=y</code> </p>\n<h3 id=\"6-5-\"><a href=\"#6-5-\" class=\"headerlink\" title=\"6.5 \"></a>6.5 </h3><p><code> impdp system/manager@orcl directory=data_dir dumpfile=expdp.dmp schemas=systemtable_exists_action</code> </p>\n<h3 id=\"6-6-\"><a href=\"#6-6-\" class=\"headerlink\" title=\"6.6 \"></a>6.6 </h3><p><strong>()</strong>:<br><code>impdp system/password@172.19.3.12:11521/orcl.test directory=data_dir dumpfile=all.dmp logfile=import.log full=y ignore=y</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">[oracle@host backup]<span class=\"variable\">$impdp</span> system/password@172.19.3.12:11521/orcl.test directory=data_dir dumpfile=all.dmp logfile=import.log full=y ignore=y</span><br><span class=\"line\"></span><br><span class=\"line\">Import: Release 11.2.0.1.0 - Production on Wed Apr 12 22:01:24 2023</span><br><span class=\"line\">Copyright (c) 1982, 2009, Oracle and/or its affiliates.  All rights reserved.</span><br><span class=\"line\">Connected to: Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production</span><br><span class=\"line\">With the Partitioning, OLAP, Data Mining and Real Application Testing options</span><br><span class=\"line\">;;; Legacy Mode Active due to the following parameters:</span><br><span class=\"line\">;;; Legacy Mode Parameter: <span class=\"string\">&quot;ignore=TRUE&quot;</span> Location: Command Line, Replaced with: <span class=\"string\">&quot;table_exists_action=append&quot;</span></span><br><span class=\"line\">Master table <span class=\"string\">&quot;SYSTEM&quot;</span>.<span class=\"string\">&quot;SYS_IMPORT_FULL_01&quot;</span> successfully loaded/unloaded</span><br><span class=\"line\">Starting <span class=\"string\">&quot;SYSTEM&quot;</span>.<span class=\"string\">&quot;SYS_IMPORT_FULL_01&quot;</span>:  system/********@172.19.3.12:11521/orcl.test directory=data_dir dumpfile=all.dmp logfile=import.log full=y table</span><br><span class=\"line\">_exists_action=append </span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/TABLESPACE</span><br><span class=\"line\">ORA-31684: Object <span class=\"built_in\">type</span> TABLESPACE:<span class=\"string\">&quot;UNDOTBS1&quot;</span> already exists</span><br><span class=\"line\">ORA-31684: Object <span class=\"built_in\">type</span> TABLESPACE:<span class=\"string\">&quot;TEMP&quot;</span> already exists</span><br><span class=\"line\">ORA-31684: Object <span class=\"built_in\">type</span> TABLESPACE:<span class=\"string\">&quot;USERS&quot;</span> already exists</span><br><span class=\"line\">ORA-31684: Object <span class=\"built_in\">type</span> TABLESPACE:<span class=\"string\">&quot;TRANSFERDB&quot;</span> already exists</span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/PROFILE</span><br><span class=\"line\">ORA-31684: Object <span class=\"built_in\">type</span> PROFILE:<span class=\"string\">&quot;MONITORING_PROFILE&quot;</span> already exists</span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/SYS_USER/USER</span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/SCHEMA/USER</span><br><span class=\"line\">ORA-31684: Object <span class=\"built_in\">type</span> USER:<span class=\"string\">&quot;OUTLN&quot;</span> already exists</span><br><span class=\"line\">.</span><br><span class=\"line\">. ,  n </span><br><span class=\"line\">.</span><br><span class=\"line\"></span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/SCHEMA/TABLE/POST_INSTANCE/PROCACT_INSTANCE</span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/SCHEMA/TABLE/POST_INSTANCE/PROCDEPOBJ</span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/SCHEMA/POST_SCHEMA/PROCOBJ</span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/SCHEMA/POST_SCHEMA/PROCACT_SCHEMA</span><br><span class=\"line\">Processing object <span class=\"built_in\">type</span> DATABASE_EXPORT/AUDIT</span><br><span class=\"line\">Job <span class=\"string\">&quot;SYSTEM&quot;</span>.<span class=\"string\">&quot;SYS_IMPORT_FULL_01&quot;</span> completed with 7644 error(s) at 22:17:04</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p> <strong>Oracle</strong></p>\n<h3 id=\"7-1-\"><a href=\"#7-1-\" class=\"headerlink\" title=\"7.1 \"></a>7.1 </h3><p> <code>Oracle A</code>:<br> :  172.21.33.23<br> : <code>  Oracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit Production</code></p>\n<p> <code> Oracle B</code>:<br> :  172.19.3.12<br> : <code> Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production</code></p>\n<p>, </p>\n<p>Oracle A , Oracle B <strong></strong></p>\n<p>: <code>ORA-01119: error in creating database file &#39;/data/app/oracle/oradata/transferdb/transferdb.dbf&#39;</code><br><img src=\"/images/017.oracle.md.08.png\" width=60% height=70% /></p>\n<p>Oracle A  transferdb &gt;<code>&#39;/data/app/oracle/oradata/transferdb/transferdb.dbf&#39; </code><br> Oracle B <code> &#39;/data/app/&#39;</code> , .</p>\n<p>: Oracle, Oracle<br>impdp<strong></strong>, Oracle<strong></strong>, .</p>\n<blockquote>\n<p>:<br><a href=\"https://www.cnblogs.com/mmzs/p/9033112.html\">LinuxOracle11g</a><br><a href=\"https://designcoding.com/oracle-expdp-impdp-using#toc_h3_0\">OracleEXPDPIMPDP\b</a></p>\n</blockquote>\n"},{"title":"MySQL, ","date":"2022-06-13T08:00:13.000Z","_content":"\n0) \n``` https://downloads.mysql.com/archives/community/ ```\n ``` mysql-5.7.37-1.el7.x86_64.rpm-bundle.tar ```\n\n1) \n\n``` bash\nmysql-community-clientMySQL \nmysql-community-common \nmysql-community-develMySQL \nmysql-community-embeddedMySQL \nmysql-community-embedded-compatMySQL18 \nmysql-community-embedded-develMySQL \nmysql-community-libsMySQL \nmysql-community-libs-compatMySQL \nmysql-community-server \nmysql-community-testMySQL \n```\n\n2) rpm \n``` common--->libs--->client--->server--->libs-compat--->devel ```\n\n\n``` bash\nrpm -ivh mysql-community-common-5.7.37-1.el7.x86_64.rpm \\\n> mysql-community-libs-5.7.37-1.el7.x86_64.rpm \\\n> mysql-community-server-5.7.37-1.el7.x86_64.rpm \\\n> mysql-community-client-5.7.37-1.el7.x86_64.rpm \\\n## ()\n> mysql-community-libs-compat-5.7.37-1.el7.x86_64.rpm \\\n> mysql-community-devel-5.7.37-1.el7.x86_64.rpm \n```\n\n\n~~3) systemctl~~\n~~``` systemctl daemon-reload ```~~\n\n4)  MySQL\n``` systemctl start mysqld ```\n\n5) mysql\n``` mysql -u root -p ```\n**Ubuntusudo**\n** ``` -h 127.0.0.1 ```**\n**entermysql**\n**, yumrpm ```/var/log/mysqld.log```, ~~, .~~**\n**,  ERROR 1045  , **\n\n6)  ```mysqld``` (5mysql)\n\n> MySQLMySQLMySQL 5.7MySQLscriptsmysql_install_dbMySQL 5.7mysql_install_db.\n![image.png](/images/018.mysql.md.01.png)\n\n7)  (6 )\n\n```mysql_secure_installation```\n\n  -- root\n  -- \n  -- root\n  -- testtest\n  --  \n\n\n8) Table 'performance_schema.session_variables' doesn't exist\n```mysql_upgrade -u root -p --force```\n```systemctl restart mysqld```\n\n9) \n``` yum autoremove mysql* ```\n``` rm -rf /var/lib/mysql* ```\n\n9.1) (...)\n``` mysqld --initialize ```\n```systemctl restart mysqld```\n\nmysql.log\n``` grep \"temporary password\" /var/log/mysqld.log ```\n\n10) ()\n``` set password = password(\"yourpassword\") ```\n``` flush privileges```\n\n11) \n localhost '%'\n\n``` select user, host, authentication_string from mysql.user;```\n``` update mysql.user set host = '%' where user = 'root' and host = 'localhost';```\n![image.png](/images/018.mysql.md.02.png)\n\n12)  ```password```  ```authentication_string```\n> : https://mariadb.com/kb/en/mysqluser-table/\n\n\n13) mysql\n~~```update mysql.user set host='10.45.51.0/24' where user='root' and host='127.0.0.1';```~~\n~~``` grant all on *.* to 'root'@'10.40.' identified by 'yourpassword'; ```~~\n\nip\n 192.168.128.8 \n``` update mysql.user set host='192.168.128.8' where user ='root' and host = 'localhost'; ```\n``` grant all on *.* to 'root'@'192.168.128.8' identified by 'yourpassword'; ```\n``` grant all on *.* to 'root'@'192.168.128.8' identified by 'yourpassword' with grant option; ```\n ```grant all``` ,  ```with grant option```\n\n 192.168.128.0/24 \n``` update mysql.user set host='192.168.128.%' where user ='root' and host = 'localhost'; ``` \n``` grant all on *.* to 'root'@'192.168.128.%' identified by 'yourpassword'; ``` \n, (mysql community 5.7.37 )\n``` update mysql.user set host='192.168.128.' where user ='root' and host = 'localhost'; ``` \n\n\n![image.png](/images/018.mysql.md.03.png)\n\n14) general_log \n\n``` bash\nmysql> show global variables like '%general%';\n+------------------+----------------------------+\n| Variable_name    | Value                      |\n+------------------+----------------------------+\n| general_log      | OFF                        |\n| general_log_file | /var/lib/mysql/centos7.log |\n+------------------+----------------------------+\n2 rows in set (0.02 sec)\n\n```\n****\n\n: \n\n``` bash\nmysql>set global general_log_file='/tmp/general.lg';    # \nmysql>set global general_log=on;                        # general log\nmysql>set global general_log=off;                       # general log\n```\n:\n ```/etc/my.cnf``` :\n\n``` bash\ngeneral_log = 1\ngeneral_log_file = /tmp/general.log\n```\n\n\n15) log_bin \n\n``` bash\nmysql> show global variables like '%log_bin%';\n+---------------------------------+-------+\n| Variable_name                   | Value |\n+---------------------------------+-------+\n| log_bin                         | OFF   |\n| log_bin_basename                |       |\n| log_bin_index                   |       |\n| log_bin_trust_function_creators | OFF   |\n| log_bin_use_v1_row_events       | OFF   |\n+---------------------------------+-------+\n5 rows in set (0.01 sec)\n```\n\n: \n```vim /etc/my.cnf```:\n\n``` bash\nserver_id=2\nlog_bin = mysql-bin\nbinlog_format = ROW\nexpire_logs_days = 30\n```\nmysql:\n``` systemctl restart mysqld ```\n\nlog_bin:\n\n```bash\nmysql> show global variables like '%log_bin%';\n+---------------------------------+--------------------------------+\n| Variable_name                   | Value                          |\n+---------------------------------+--------------------------------+\n| log_bin                         | ON                             |\n| log_bin_basename                | /var/lib/mysql/mysql-bin       |\n| log_bin_index                   | /var/lib/mysql/mysql-bin.index |\n| log_bin_trust_function_creators | OFF                            |\n| log_bin_use_v1_row_events       | OFF                            |\n+---------------------------------+--------------------------------+\n5 rows in set (0.00 sec)\n```\n16) slow_query_log \n\n``` bash\nmysql> show variables like 'slow_query_log%';\n+---------------------+---------------------------------+\n| Variable_name       | Value                           |\n+---------------------+---------------------------------+\n| slow_query_log      | OFF                             |\n| slow_query_log_file | /var/lib/mysql/centos7-slow.log |\n+---------------------+---------------------------------+\n2 rows in set (0.01 sec)\n```\n:\n``` set global slow_query_log=1; ```\n\n:\n```/etc/my.cnf```:\n\n``` bash\nslow_query_log=1\nslow_query_log_file=/var/lib/mysql/slow-log.log\nlong_query_time=10 #(10s, 10, 3)\n```\n\n``` bash\nmysql> show variables like 'slow_query_log%';\n+---------------------+-----------------------------+\n| Variable_name       | Value                       |\n+---------------------+-----------------------------+\n| slow_query_log      | ON                          |\n| slow_query_log_file | /var/lib/mysql/slow-log.log |\n+---------------------+-----------------------------+\n2 rows in set (0.00 sec)\n```\n###  14) 15) 16) , MySQL!!\n\n17) \n``` mysqldump -u root -h 127.0.0.1 -p --all-databases > /backup/allBackup.sql```\n\n**ERROR 1102 (42000): Incorrect database name '#mysql50#mysql.backup'**\n\nfind ```find / -name mysql.backup```\n>  https://serverfault.com/questions/443651/mysql-drop-database-with-in-name\n\n18) mysql\n``` mv /var/lib/mysql /opt/mysqldata ```\n\n: ```vim /etc/my.cnf``` :\n\n``` bash\n[client]\nsocket=/opt/mysqldata/mysql/mysql.sock\n[mysqld]\ndatadir = /opt/mysqldata/mysql \nsocket = /opt/mysqldata/mysql/mysql.sock\n```\n\nmysqld: ``` systemctl restart mysqld ```\n\n\ncreate database cloud;\ncreate user 'nextcloud'@'localhost' identified by 'zhuangzhuang123...';\ngrant all on cloud.* to nextcloud@'localhost' identified by 'zhuangzhuang123...';\nflush privileges;","source":"_posts/018.mysql.md","raw":"---\ntitle: MySQL, \ndate: 2022-6-13 16:00:13\ncategories: \n- [Database]\ntags: \n- MySQL\n---\n\n0) \n``` https://downloads.mysql.com/archives/community/ ```\n ``` mysql-5.7.37-1.el7.x86_64.rpm-bundle.tar ```\n\n1) \n\n``` bash\nmysql-community-clientMySQL \nmysql-community-common \nmysql-community-develMySQL \nmysql-community-embeddedMySQL \nmysql-community-embedded-compatMySQL18 \nmysql-community-embedded-develMySQL \nmysql-community-libsMySQL \nmysql-community-libs-compatMySQL \nmysql-community-server \nmysql-community-testMySQL \n```\n\n2) rpm \n``` common--->libs--->client--->server--->libs-compat--->devel ```\n\n\n``` bash\nrpm -ivh mysql-community-common-5.7.37-1.el7.x86_64.rpm \\\n> mysql-community-libs-5.7.37-1.el7.x86_64.rpm \\\n> mysql-community-server-5.7.37-1.el7.x86_64.rpm \\\n> mysql-community-client-5.7.37-1.el7.x86_64.rpm \\\n## ()\n> mysql-community-libs-compat-5.7.37-1.el7.x86_64.rpm \\\n> mysql-community-devel-5.7.37-1.el7.x86_64.rpm \n```\n\n\n~~3) systemctl~~\n~~``` systemctl daemon-reload ```~~\n\n4)  MySQL\n``` systemctl start mysqld ```\n\n5) mysql\n``` mysql -u root -p ```\n**Ubuntusudo**\n** ``` -h 127.0.0.1 ```**\n**entermysql**\n**, yumrpm ```/var/log/mysqld.log```, ~~, .~~**\n**,  ERROR 1045  , **\n\n6)  ```mysqld``` (5mysql)\n\n> MySQLMySQLMySQL 5.7MySQLscriptsmysql_install_dbMySQL 5.7mysql_install_db.\n![image.png](/images/018.mysql.md.01.png)\n\n7)  (6 )\n\n```mysql_secure_installation```\n\n  -- root\n  -- \n  -- root\n  -- testtest\n  --  \n\n\n8) Table 'performance_schema.session_variables' doesn't exist\n```mysql_upgrade -u root -p --force```\n```systemctl restart mysqld```\n\n9) \n``` yum autoremove mysql* ```\n``` rm -rf /var/lib/mysql* ```\n\n9.1) (...)\n``` mysqld --initialize ```\n```systemctl restart mysqld```\n\nmysql.log\n``` grep \"temporary password\" /var/log/mysqld.log ```\n\n10) ()\n``` set password = password(\"yourpassword\") ```\n``` flush privileges```\n\n11) \n localhost '%'\n\n``` select user, host, authentication_string from mysql.user;```\n``` update mysql.user set host = '%' where user = 'root' and host = 'localhost';```\n![image.png](/images/018.mysql.md.02.png)\n\n12)  ```password```  ```authentication_string```\n> : https://mariadb.com/kb/en/mysqluser-table/\n\n\n13) mysql\n~~```update mysql.user set host='10.45.51.0/24' where user='root' and host='127.0.0.1';```~~\n~~``` grant all on *.* to 'root'@'10.40.' identified by 'yourpassword'; ```~~\n\nip\n 192.168.128.8 \n``` update mysql.user set host='192.168.128.8' where user ='root' and host = 'localhost'; ```\n``` grant all on *.* to 'root'@'192.168.128.8' identified by 'yourpassword'; ```\n``` grant all on *.* to 'root'@'192.168.128.8' identified by 'yourpassword' with grant option; ```\n ```grant all``` ,  ```with grant option```\n\n 192.168.128.0/24 \n``` update mysql.user set host='192.168.128.%' where user ='root' and host = 'localhost'; ``` \n``` grant all on *.* to 'root'@'192.168.128.%' identified by 'yourpassword'; ``` \n, (mysql community 5.7.37 )\n``` update mysql.user set host='192.168.128.' where user ='root' and host = 'localhost'; ``` \n\n\n![image.png](/images/018.mysql.md.03.png)\n\n14) general_log \n\n``` bash\nmysql> show global variables like '%general%';\n+------------------+----------------------------+\n| Variable_name    | Value                      |\n+------------------+----------------------------+\n| general_log      | OFF                        |\n| general_log_file | /var/lib/mysql/centos7.log |\n+------------------+----------------------------+\n2 rows in set (0.02 sec)\n\n```\n****\n\n: \n\n``` bash\nmysql>set global general_log_file='/tmp/general.lg';    # \nmysql>set global general_log=on;                        # general log\nmysql>set global general_log=off;                       # general log\n```\n:\n ```/etc/my.cnf``` :\n\n``` bash\ngeneral_log = 1\ngeneral_log_file = /tmp/general.log\n```\n\n\n15) log_bin \n\n``` bash\nmysql> show global variables like '%log_bin%';\n+---------------------------------+-------+\n| Variable_name                   | Value |\n+---------------------------------+-------+\n| log_bin                         | OFF   |\n| log_bin_basename                |       |\n| log_bin_index                   |       |\n| log_bin_trust_function_creators | OFF   |\n| log_bin_use_v1_row_events       | OFF   |\n+---------------------------------+-------+\n5 rows in set (0.01 sec)\n```\n\n: \n```vim /etc/my.cnf```:\n\n``` bash\nserver_id=2\nlog_bin = mysql-bin\nbinlog_format = ROW\nexpire_logs_days = 30\n```\nmysql:\n``` systemctl restart mysqld ```\n\nlog_bin:\n\n```bash\nmysql> show global variables like '%log_bin%';\n+---------------------------------+--------------------------------+\n| Variable_name                   | Value                          |\n+---------------------------------+--------------------------------+\n| log_bin                         | ON                             |\n| log_bin_basename                | /var/lib/mysql/mysql-bin       |\n| log_bin_index                   | /var/lib/mysql/mysql-bin.index |\n| log_bin_trust_function_creators | OFF                            |\n| log_bin_use_v1_row_events       | OFF                            |\n+---------------------------------+--------------------------------+\n5 rows in set (0.00 sec)\n```\n16) slow_query_log \n\n``` bash\nmysql> show variables like 'slow_query_log%';\n+---------------------+---------------------------------+\n| Variable_name       | Value                           |\n+---------------------+---------------------------------+\n| slow_query_log      | OFF                             |\n| slow_query_log_file | /var/lib/mysql/centos7-slow.log |\n+---------------------+---------------------------------+\n2 rows in set (0.01 sec)\n```\n:\n``` set global slow_query_log=1; ```\n\n:\n```/etc/my.cnf```:\n\n``` bash\nslow_query_log=1\nslow_query_log_file=/var/lib/mysql/slow-log.log\nlong_query_time=10 #(10s, 10, 3)\n```\n\n``` bash\nmysql> show variables like 'slow_query_log%';\n+---------------------+-----------------------------+\n| Variable_name       | Value                       |\n+---------------------+-----------------------------+\n| slow_query_log      | ON                          |\n| slow_query_log_file | /var/lib/mysql/slow-log.log |\n+---------------------+-----------------------------+\n2 rows in set (0.00 sec)\n```\n###  14) 15) 16) , MySQL!!\n\n17) \n``` mysqldump -u root -h 127.0.0.1 -p --all-databases > /backup/allBackup.sql```\n\n**ERROR 1102 (42000): Incorrect database name '#mysql50#mysql.backup'**\n\nfind ```find / -name mysql.backup```\n>  https://serverfault.com/questions/443651/mysql-drop-database-with-in-name\n\n18) mysql\n``` mv /var/lib/mysql /opt/mysqldata ```\n\n: ```vim /etc/my.cnf``` :\n\n``` bash\n[client]\nsocket=/opt/mysqldata/mysql/mysql.sock\n[mysqld]\ndatadir = /opt/mysqldata/mysql \nsocket = /opt/mysqldata/mysql/mysql.sock\n```\n\nmysqld: ``` systemctl restart mysqld ```\n\n\ncreate database cloud;\ncreate user 'nextcloud'@'localhost' identified by 'zhuangzhuang123...';\ngrant all on cloud.* to nextcloud@'localhost' identified by 'zhuangzhuang123...';\nflush privileges;","slug":"018.mysql","published":1,"updated":"2023-04-19T14:41:53.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbe8001ryknr4p14fr2x","content":"<ol start=\"0\">\n<li></li>\n</ol>\n<p><code>https://downloads.mysql.com/archives/community/</code><br> <code>mysql-5.7.37-1.el7.x86_64.rpm-bundle.tar</code></p>\n<ol>\n<li></li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql-community-clientMySQL </span><br><span class=\"line\">mysql-community-common </span><br><span class=\"line\">mysql-community-develMySQL </span><br><span class=\"line\">mysql-community-embeddedMySQL </span><br><span class=\"line\">mysql-community-embedded-compatMySQL18 </span><br><span class=\"line\">mysql-community-embedded-develMySQL </span><br><span class=\"line\">mysql-community-libsMySQL </span><br><span class=\"line\">mysql-community-libs-compatMySQL </span><br><span class=\"line\">mysql-community-server </span><br><span class=\"line\">mysql-community-testMySQL </span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>rpm </li>\n</ol>\n<p><code>common---&gt;libs---&gt;client---&gt;server---&gt;libs-compat---&gt;devel</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">rpm -ivh mysql-community-common-5.7.37-1.el7.x86_64.rpm \\</span><br><span class=\"line\">&gt; mysql-community-libs-5.7.37-1.el7.x86_64.rpm \\</span><br><span class=\"line\">&gt; mysql-community-server-5.7.37-1.el7.x86_64.rpm \\</span><br><span class=\"line\">&gt; mysql-community-client-5.7.37-1.el7.x86_64.rpm \\</span><br><span class=\"line\"><span class=\"comment\">## ()</span></span><br><span class=\"line\">&gt; mysql-community-libs-compat-5.7.37-1.el7.x86_64.rpm \\</span><br><span class=\"line\">&gt; mysql-community-devel-5.7.37-1.el7.x86_64.rpm </span><br></pre></td></tr></table></figure>\n\n\n<p><del>3) systemctl</del><br><del><code>systemctl daemon-reload</code></del></p>\n<ol start=\"4\">\n<li> MySQL</li>\n</ol>\n<p><code>systemctl start mysqld</code></p>\n<ol start=\"5\">\n<li>mysql</li>\n</ol>\n<p><code>mysql -u root -p</code><br><strong>Ubuntusudo</strong><br><strong> <code>-h 127.0.0.1</code></strong><br><strong>entermysql</strong><br><strong>, yumrpm <code>/var/log/mysqld.log</code>, <del>, .</del></strong><br><strong>,  ERROR 1045  , </strong></p>\n<ol start=\"6\">\n<li> <code>mysqld</code> (5mysql)</li>\n</ol>\n<blockquote>\n<p>MySQLMySQLMySQL 5.7MySQLscriptsmysql_install_dbMySQL 5.7mysql_install_db.<br><img src=\"/images/018.mysql.md.01.png\" alt=\"image.png\"></p>\n</blockquote>\n<ol start=\"7\">\n<li> (6 )</li>\n</ol>\n<p><code>mysql_secure_installation</code></p>\n<p>   root<br>   <br>   root<br>   testtest<br>    </p>\n<ol start=\"8\">\n<li>Table performance_schema.session_variables doesnt exist</li>\n</ol>\n<p><code>mysql_upgrade -u root -p --force</code><br><code>systemctl restart mysqld</code></p>\n<ol start=\"9\">\n<li></li>\n</ol>\n<p><code>yum autoremove mysql*</code><br><code>rm -rf /var/lib/mysql*</code></p>\n<p>9.1) ()<br><code>mysqld --initialize</code><br><code>systemctl restart mysqld</code></p>\n<p>mysql.log<br><code>grep &quot;temporary password&quot; /var/log/mysqld.log</code></p>\n<ol start=\"10\">\n<li>()</li>\n</ol>\n<p><code>set password = password(&quot;yourpassword&quot;)</code><br><code> flush privileges</code></p>\n<ol start=\"11\">\n<li><br> localhost %</li>\n</ol>\n<p><code> select user, host, authentication_string from mysql.user;</code><br><code> update mysql.user set host = &#39;%&#39; where user = &#39;root&#39; and host = &#39;localhost&#39;;</code><br><img src=\"/images/018.mysql.md.02.png\" alt=\"image.png\"></p>\n<ol start=\"12\">\n<li><p> <code>password</code>  <code>authentication_string</code></p>\n<blockquote>\n<p>: <a href=\"https://mariadb.com/kb/en/mysqluser-table/\">https://mariadb.com/kb/en/mysqluser-table/</a></p>\n</blockquote>\n</li>\n<li><p>mysql<br><del><code>update mysql.user set host=&#39;10.45.51.0/24&#39; where user=&#39;root&#39; and host=&#39;127.0.0.1&#39;;</code></del><br><del><code>grant all on *.* to &#39;root&#39;@&#39;10.40.&#39; identified by &#39;yourpassword&#39;;</code></del></p>\n</li>\n</ol>\n<p>ip<br> 192.168.128.8 <br><code>update mysql.user set host=&#39;192.168.128.8&#39; where user =&#39;root&#39; and host = &#39;localhost&#39;;</code><br><code>grant all on *.* to &#39;root&#39;@&#39;192.168.128.8&#39; identified by &#39;yourpassword&#39;;</code><br><code>grant all on *.* to &#39;root&#39;@&#39;192.168.128.8&#39; identified by &#39;yourpassword&#39; with grant option;</code><br> <code>grant all</code> ,  <code>with grant option</code></p>\n<p> 192.168.128.0&#x2F;24 <br><code>update mysql.user set host=&#39;192.168.128.%&#39; where user =&#39;root&#39; and host = &#39;localhost&#39;;</code><br><code>grant all on *.* to &#39;root&#39;@&#39;192.168.128.%&#39; identified by &#39;yourpassword&#39;;</code><br>, (mysql community 5.7.37 )<br><code>update mysql.user set host=&#39;192.168.128.&#39; where user =&#39;root&#39; and host = &#39;localhost&#39;;</code> </p>\n<p><img src=\"/images/018.mysql.md.03.png\" alt=\"image.png\"></p>\n<ol start=\"14\">\n<li>general_log </li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt; show global variables like <span class=\"string\">&#x27;%general%&#x27;</span>;</span><br><span class=\"line\">+------------------+----------------------------+</span><br><span class=\"line\">| Variable_name    | Value                      |</span><br><span class=\"line\">+------------------+----------------------------+</span><br><span class=\"line\">| general_log      | OFF                        |</span><br><span class=\"line\">| general_log_file | /var/lib/mysql/centos7.<span class=\"built_in\">log</span> |</span><br><span class=\"line\">+------------------+----------------------------+</span><br><span class=\"line\">2 rows <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.02 sec)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p><strong></strong></p>\n<p>: </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt;<span class=\"built_in\">set</span> global general_log_file=<span class=\"string\">&#x27;/tmp/general.lg&#x27;</span>;    <span class=\"comment\"># </span></span><br><span class=\"line\">mysql&gt;<span class=\"built_in\">set</span> global general_log=on;                        <span class=\"comment\"># general log</span></span><br><span class=\"line\">mysql&gt;<span class=\"built_in\">set</span> global general_log=off;                       <span class=\"comment\"># general log</span></span><br></pre></td></tr></table></figure>\n<p>:<br> <code>/etc/my.cnf</code> :</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">general_log = 1</span><br><span class=\"line\">general_log_file = /tmp/general.log</span><br></pre></td></tr></table></figure>\n\n\n<ol start=\"15\">\n<li>log_bin </li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt; show global variables like <span class=\"string\">&#x27;%log_bin%&#x27;</span>;</span><br><span class=\"line\">+---------------------------------+-------+</span><br><span class=\"line\">| Variable_name                   | Value |</span><br><span class=\"line\">+---------------------------------+-------+</span><br><span class=\"line\">| log_bin                         | OFF   |</span><br><span class=\"line\">| log_bin_basename                |       |</span><br><span class=\"line\">| log_bin_index                   |       |</span><br><span class=\"line\">| log_bin_trust_function_creators | OFF   |</span><br><span class=\"line\">| log_bin_use_v1_row_events       | OFF   |</span><br><span class=\"line\">+---------------------------------+-------+</span><br><span class=\"line\">5 rows <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.01 sec)</span><br></pre></td></tr></table></figure>\n\n<p>:<br><code>vim /etc/my.cnf</code>:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">server_id=2</span><br><span class=\"line\">log_bin = mysql-bin</span><br><span class=\"line\">binlog_format = ROW</span><br><span class=\"line\">expire_logs_days = 30</span><br></pre></td></tr></table></figure>\n<p>mysql:<br><code>systemctl restart mysqld</code></p>\n<p>log_bin:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt; show global variables like <span class=\"string\">&#x27;%log_bin%&#x27;</span>;</span><br><span class=\"line\">+---------------------------------+--------------------------------+</span><br><span class=\"line\">| Variable_name                   | Value                          |</span><br><span class=\"line\">+---------------------------------+--------------------------------+</span><br><span class=\"line\">| log_bin                         | ON                             |</span><br><span class=\"line\">| log_bin_basename                | /var/lib/mysql/mysql-bin       |</span><br><span class=\"line\">| log_bin_index                   | /var/lib/mysql/mysql-bin.index |</span><br><span class=\"line\">| log_bin_trust_function_creators | OFF                            |</span><br><span class=\"line\">| log_bin_use_v1_row_events       | OFF                            |</span><br><span class=\"line\">+---------------------------------+--------------------------------+</span><br><span class=\"line\">5 rows <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure>\n<ol start=\"16\">\n<li>slow_query_log </li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt; show variables like <span class=\"string\">&#x27;slow_query_log%&#x27;</span>;</span><br><span class=\"line\">+---------------------+---------------------------------+</span><br><span class=\"line\">| Variable_name       | Value                           |</span><br><span class=\"line\">+---------------------+---------------------------------+</span><br><span class=\"line\">| slow_query_log      | OFF                             |</span><br><span class=\"line\">| slow_query_log_file | /var/lib/mysql/centos7-slow.log |</span><br><span class=\"line\">+---------------------+---------------------------------+</span><br><span class=\"line\">2 rows <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.01 sec)</span><br></pre></td></tr></table></figure>\n<p>:<br><code>set global slow_query_log=1;</code></p>\n<p>:<br><code>/etc/my.cnf</code>:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">slow_query_log=1</span><br><span class=\"line\">slow_query_log_file=/var/lib/mysql/slow-log.log</span><br><span class=\"line\">long_query_time=10 <span class=\"comment\">#(10s, 10, 3)</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt; show variables like <span class=\"string\">&#x27;slow_query_log%&#x27;</span>;</span><br><span class=\"line\">+---------------------+-----------------------------+</span><br><span class=\"line\">| Variable_name       | Value                       |</span><br><span class=\"line\">+---------------------+-----------------------------+</span><br><span class=\"line\">| slow_query_log      | ON                          |</span><br><span class=\"line\">| slow_query_log_file | /var/lib/mysql/slow-log.log |</span><br><span class=\"line\">+---------------------+-----------------------------+</span><br><span class=\"line\">2 rows <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure>\n<h3 id=\"-14-15-16--MySQL\"><a href=\"#-14-15-16--MySQL\" class=\"headerlink\" title=\" 14) 15) 16) , MySQL!!\"></a> 14) 15) 16) , MySQL!!</h3><ol start=\"17\">\n<li></li>\n</ol>\n<p><code> mysqldump -u root -h 127.0.0.1 -p --all-databases &gt; /backup/allBackup.sql</code></p>\n<p><strong>ERROR 1102 (42000): Incorrect database name #mysql50#mysql.backup</strong></p>\n<p>find <code>find / -name mysql.backup</code></p>\n<blockquote>\n<p> <a href=\"https://serverfault.com/questions/443651/mysql-drop-database-with-in-name\">https://serverfault.com/questions/443651/mysql-drop-database-with-in-name</a></p>\n</blockquote>\n<ol start=\"18\">\n<li>mysql</li>\n</ol>\n<p><code>mv /var/lib/mysql /opt/mysqldata</code></p>\n<p>: <code>vim /etc/my.cnf</code> :</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[client]</span><br><span class=\"line\">socket=/opt/mysqldata/mysql/mysql.sock</span><br><span class=\"line\">[mysqld]</span><br><span class=\"line\">datadir = /opt/mysqldata/mysql </span><br><span class=\"line\">socket = /opt/mysqldata/mysql/mysql.sock</span><br></pre></td></tr></table></figure>\n\n<p>mysqld: <code>systemctl restart mysqld</code></p>\n<p>create database cloud;<br>create user nextcloud@localhost identified by zhuangzhuang123;<br>grant all on cloud.* to nextcloud@localhost identified by zhuangzhuang123;<br>flush privileges;</p>\n","site":{"data":{}},"excerpt":"","more":"<ol start=\"0\">\n<li></li>\n</ol>\n<p><code>https://downloads.mysql.com/archives/community/</code><br> <code>mysql-5.7.37-1.el7.x86_64.rpm-bundle.tar</code></p>\n<ol>\n<li></li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql-community-clientMySQL </span><br><span class=\"line\">mysql-community-common </span><br><span class=\"line\">mysql-community-develMySQL </span><br><span class=\"line\">mysql-community-embeddedMySQL </span><br><span class=\"line\">mysql-community-embedded-compatMySQL18 </span><br><span class=\"line\">mysql-community-embedded-develMySQL </span><br><span class=\"line\">mysql-community-libsMySQL </span><br><span class=\"line\">mysql-community-libs-compatMySQL </span><br><span class=\"line\">mysql-community-server </span><br><span class=\"line\">mysql-community-testMySQL </span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>rpm </li>\n</ol>\n<p><code>common---&gt;libs---&gt;client---&gt;server---&gt;libs-compat---&gt;devel</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">rpm -ivh mysql-community-common-5.7.37-1.el7.x86_64.rpm \\</span><br><span class=\"line\">&gt; mysql-community-libs-5.7.37-1.el7.x86_64.rpm \\</span><br><span class=\"line\">&gt; mysql-community-server-5.7.37-1.el7.x86_64.rpm \\</span><br><span class=\"line\">&gt; mysql-community-client-5.7.37-1.el7.x86_64.rpm \\</span><br><span class=\"line\"><span class=\"comment\">## ()</span></span><br><span class=\"line\">&gt; mysql-community-libs-compat-5.7.37-1.el7.x86_64.rpm \\</span><br><span class=\"line\">&gt; mysql-community-devel-5.7.37-1.el7.x86_64.rpm </span><br></pre></td></tr></table></figure>\n\n\n<p><del>3) systemctl</del><br><del><code>systemctl daemon-reload</code></del></p>\n<ol start=\"4\">\n<li> MySQL</li>\n</ol>\n<p><code>systemctl start mysqld</code></p>\n<ol start=\"5\">\n<li>mysql</li>\n</ol>\n<p><code>mysql -u root -p</code><br><strong>Ubuntusudo</strong><br><strong> <code>-h 127.0.0.1</code></strong><br><strong>entermysql</strong><br><strong>, yumrpm <code>/var/log/mysqld.log</code>, <del>, .</del></strong><br><strong>,  ERROR 1045  , </strong></p>\n<ol start=\"6\">\n<li> <code>mysqld</code> (5mysql)</li>\n</ol>\n<blockquote>\n<p>MySQLMySQLMySQL 5.7MySQLscriptsmysql_install_dbMySQL 5.7mysql_install_db.<br><img src=\"/images/018.mysql.md.01.png\" alt=\"image.png\"></p>\n</blockquote>\n<ol start=\"7\">\n<li> (6 )</li>\n</ol>\n<p><code>mysql_secure_installation</code></p>\n<p>   root<br>   <br>   root<br>   testtest<br>    </p>\n<ol start=\"8\">\n<li>Table performance_schema.session_variables doesnt exist</li>\n</ol>\n<p><code>mysql_upgrade -u root -p --force</code><br><code>systemctl restart mysqld</code></p>\n<ol start=\"9\">\n<li></li>\n</ol>\n<p><code>yum autoremove mysql*</code><br><code>rm -rf /var/lib/mysql*</code></p>\n<p>9.1) ()<br><code>mysqld --initialize</code><br><code>systemctl restart mysqld</code></p>\n<p>mysql.log<br><code>grep &quot;temporary password&quot; /var/log/mysqld.log</code></p>\n<ol start=\"10\">\n<li>()</li>\n</ol>\n<p><code>set password = password(&quot;yourpassword&quot;)</code><br><code> flush privileges</code></p>\n<ol start=\"11\">\n<li><br> localhost %</li>\n</ol>\n<p><code> select user, host, authentication_string from mysql.user;</code><br><code> update mysql.user set host = &#39;%&#39; where user = &#39;root&#39; and host = &#39;localhost&#39;;</code><br><img src=\"/images/018.mysql.md.02.png\" alt=\"image.png\"></p>\n<ol start=\"12\">\n<li><p> <code>password</code>  <code>authentication_string</code></p>\n<blockquote>\n<p>: <a href=\"https://mariadb.com/kb/en/mysqluser-table/\">https://mariadb.com/kb/en/mysqluser-table/</a></p>\n</blockquote>\n</li>\n<li><p>mysql<br><del><code>update mysql.user set host=&#39;10.45.51.0/24&#39; where user=&#39;root&#39; and host=&#39;127.0.0.1&#39;;</code></del><br><del><code>grant all on *.* to &#39;root&#39;@&#39;10.40.&#39; identified by &#39;yourpassword&#39;;</code></del></p>\n</li>\n</ol>\n<p>ip<br> 192.168.128.8 <br><code>update mysql.user set host=&#39;192.168.128.8&#39; where user =&#39;root&#39; and host = &#39;localhost&#39;;</code><br><code>grant all on *.* to &#39;root&#39;@&#39;192.168.128.8&#39; identified by &#39;yourpassword&#39;;</code><br><code>grant all on *.* to &#39;root&#39;@&#39;192.168.128.8&#39; identified by &#39;yourpassword&#39; with grant option;</code><br> <code>grant all</code> ,  <code>with grant option</code></p>\n<p> 192.168.128.0&#x2F;24 <br><code>update mysql.user set host=&#39;192.168.128.%&#39; where user =&#39;root&#39; and host = &#39;localhost&#39;;</code><br><code>grant all on *.* to &#39;root&#39;@&#39;192.168.128.%&#39; identified by &#39;yourpassword&#39;;</code><br>, (mysql community 5.7.37 )<br><code>update mysql.user set host=&#39;192.168.128.&#39; where user =&#39;root&#39; and host = &#39;localhost&#39;;</code> </p>\n<p><img src=\"/images/018.mysql.md.03.png\" alt=\"image.png\"></p>\n<ol start=\"14\">\n<li>general_log </li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt; show global variables like <span class=\"string\">&#x27;%general%&#x27;</span>;</span><br><span class=\"line\">+------------------+----------------------------+</span><br><span class=\"line\">| Variable_name    | Value                      |</span><br><span class=\"line\">+------------------+----------------------------+</span><br><span class=\"line\">| general_log      | OFF                        |</span><br><span class=\"line\">| general_log_file | /var/lib/mysql/centos7.<span class=\"built_in\">log</span> |</span><br><span class=\"line\">+------------------+----------------------------+</span><br><span class=\"line\">2 rows <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.02 sec)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p><strong></strong></p>\n<p>: </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt;<span class=\"built_in\">set</span> global general_log_file=<span class=\"string\">&#x27;/tmp/general.lg&#x27;</span>;    <span class=\"comment\"># </span></span><br><span class=\"line\">mysql&gt;<span class=\"built_in\">set</span> global general_log=on;                        <span class=\"comment\"># general log</span></span><br><span class=\"line\">mysql&gt;<span class=\"built_in\">set</span> global general_log=off;                       <span class=\"comment\"># general log</span></span><br></pre></td></tr></table></figure>\n<p>:<br> <code>/etc/my.cnf</code> :</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">general_log = 1</span><br><span class=\"line\">general_log_file = /tmp/general.log</span><br></pre></td></tr></table></figure>\n\n\n<ol start=\"15\">\n<li>log_bin </li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt; show global variables like <span class=\"string\">&#x27;%log_bin%&#x27;</span>;</span><br><span class=\"line\">+---------------------------------+-------+</span><br><span class=\"line\">| Variable_name                   | Value |</span><br><span class=\"line\">+---------------------------------+-------+</span><br><span class=\"line\">| log_bin                         | OFF   |</span><br><span class=\"line\">| log_bin_basename                |       |</span><br><span class=\"line\">| log_bin_index                   |       |</span><br><span class=\"line\">| log_bin_trust_function_creators | OFF   |</span><br><span class=\"line\">| log_bin_use_v1_row_events       | OFF   |</span><br><span class=\"line\">+---------------------------------+-------+</span><br><span class=\"line\">5 rows <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.01 sec)</span><br></pre></td></tr></table></figure>\n\n<p>:<br><code>vim /etc/my.cnf</code>:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">server_id=2</span><br><span class=\"line\">log_bin = mysql-bin</span><br><span class=\"line\">binlog_format = ROW</span><br><span class=\"line\">expire_logs_days = 30</span><br></pre></td></tr></table></figure>\n<p>mysql:<br><code>systemctl restart mysqld</code></p>\n<p>log_bin:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt; show global variables like <span class=\"string\">&#x27;%log_bin%&#x27;</span>;</span><br><span class=\"line\">+---------------------------------+--------------------------------+</span><br><span class=\"line\">| Variable_name                   | Value                          |</span><br><span class=\"line\">+---------------------------------+--------------------------------+</span><br><span class=\"line\">| log_bin                         | ON                             |</span><br><span class=\"line\">| log_bin_basename                | /var/lib/mysql/mysql-bin       |</span><br><span class=\"line\">| log_bin_index                   | /var/lib/mysql/mysql-bin.index |</span><br><span class=\"line\">| log_bin_trust_function_creators | OFF                            |</span><br><span class=\"line\">| log_bin_use_v1_row_events       | OFF                            |</span><br><span class=\"line\">+---------------------------------+--------------------------------+</span><br><span class=\"line\">5 rows <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure>\n<ol start=\"16\">\n<li>slow_query_log </li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt; show variables like <span class=\"string\">&#x27;slow_query_log%&#x27;</span>;</span><br><span class=\"line\">+---------------------+---------------------------------+</span><br><span class=\"line\">| Variable_name       | Value                           |</span><br><span class=\"line\">+---------------------+---------------------------------+</span><br><span class=\"line\">| slow_query_log      | OFF                             |</span><br><span class=\"line\">| slow_query_log_file | /var/lib/mysql/centos7-slow.log |</span><br><span class=\"line\">+---------------------+---------------------------------+</span><br><span class=\"line\">2 rows <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.01 sec)</span><br></pre></td></tr></table></figure>\n<p>:<br><code>set global slow_query_log=1;</code></p>\n<p>:<br><code>/etc/my.cnf</code>:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">slow_query_log=1</span><br><span class=\"line\">slow_query_log_file=/var/lib/mysql/slow-log.log</span><br><span class=\"line\">long_query_time=10 <span class=\"comment\">#(10s, 10, 3)</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt; show variables like <span class=\"string\">&#x27;slow_query_log%&#x27;</span>;</span><br><span class=\"line\">+---------------------+-----------------------------+</span><br><span class=\"line\">| Variable_name       | Value                       |</span><br><span class=\"line\">+---------------------+-----------------------------+</span><br><span class=\"line\">| slow_query_log      | ON                          |</span><br><span class=\"line\">| slow_query_log_file | /var/lib/mysql/slow-log.log |</span><br><span class=\"line\">+---------------------+-----------------------------+</span><br><span class=\"line\">2 rows <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure>\n<h3 id=\"-14-15-16--MySQL\"><a href=\"#-14-15-16--MySQL\" class=\"headerlink\" title=\" 14) 15) 16) , MySQL!!\"></a> 14) 15) 16) , MySQL!!</h3><ol start=\"17\">\n<li></li>\n</ol>\n<p><code> mysqldump -u root -h 127.0.0.1 -p --all-databases &gt; /backup/allBackup.sql</code></p>\n<p><strong>ERROR 1102 (42000): Incorrect database name #mysql50#mysql.backup</strong></p>\n<p>find <code>find / -name mysql.backup</code></p>\n<blockquote>\n<p> <a href=\"https://serverfault.com/questions/443651/mysql-drop-database-with-in-name\">https://serverfault.com/questions/443651/mysql-drop-database-with-in-name</a></p>\n</blockquote>\n<ol start=\"18\">\n<li>mysql</li>\n</ol>\n<p><code>mv /var/lib/mysql /opt/mysqldata</code></p>\n<p>: <code>vim /etc/my.cnf</code> :</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[client]</span><br><span class=\"line\">socket=/opt/mysqldata/mysql/mysql.sock</span><br><span class=\"line\">[mysqld]</span><br><span class=\"line\">datadir = /opt/mysqldata/mysql </span><br><span class=\"line\">socket = /opt/mysqldata/mysql/mysql.sock</span><br></pre></td></tr></table></figure>\n\n<p>mysqld: <code>systemctl restart mysqld</code></p>\n<p>create database cloud;<br>create user nextcloud@localhost identified by zhuangzhuang123;<br>grant all on cloud.* to nextcloud@localhost identified by zhuangzhuang123;<br>flush privileges;</p>\n"},{"title":"sudo","date":"2022-06-15T02:00:13.000Z","_content":"\n0) dev, root\n```useradd -g root dev```\n\n1) sudo\n```visudo```\n\n2) devsudo\n```%root   ALL=(ALL)       NOPASSWD: ALL```\n\n**devroot, passwdroot**\n\n:\n\na) ubuntu:\n\n``` bash\ngroupadd ubuntu \nuseradd -g ubuntu ubuntu\nubuntu  ALL=(ALL:ALL) NOPASSWD: ALL\n```\n\nb) lighthouse\n\n``` bash\ngroupadd lighthouse\nuseradd -g lighthouse lighthouse\nlighthouse ALL=(ALL)  NOPASSWD: ALL\n```\n\n**abpasswdroot, .**","source":"_posts/019.sudo.md","raw":"---\ntitle: sudo\ndate: 2022-6-15 10:00:13\ncategories: \n- [Linux]\n- [CentOS]\ntags: \n- sudo\n---\n\n0) dev, root\n```useradd -g root dev```\n\n1) sudo\n```visudo```\n\n2) devsudo\n```%root   ALL=(ALL)       NOPASSWD: ALL```\n\n**devroot, passwdroot**\n\n:\n\na) ubuntu:\n\n``` bash\ngroupadd ubuntu \nuseradd -g ubuntu ubuntu\nubuntu  ALL=(ALL:ALL) NOPASSWD: ALL\n```\n\nb) lighthouse\n\n``` bash\ngroupadd lighthouse\nuseradd -g lighthouse lighthouse\nlighthouse ALL=(ALL)  NOPASSWD: ALL\n```\n\n**abpasswdroot, .**","slug":"019.sudo","published":1,"updated":"2023-03-03T05:15:21.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbea001vyknreo00hx9t","content":"<ol start=\"0\">\n<li>dev, root</li>\n</ol>\n<p><code>useradd -g root dev</code></p>\n<ol>\n<li>sudo</li>\n</ol>\n<p><code>visudo</code></p>\n<ol start=\"2\">\n<li>devsudo</li>\n</ol>\n<p><code>%root   ALL=(ALL)       NOPASSWD: ALL</code></p>\n<p><strong>devroot, passwdroot</strong></p>\n<p>:</p>\n<p>a) ubuntu:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">groupadd ubuntu </span><br><span class=\"line\">useradd -g ubuntu ubuntu</span><br><span class=\"line\">ubuntu  ALL=(ALL:ALL) NOPASSWD: ALL</span><br></pre></td></tr></table></figure>\n\n<p>b) lighthouse</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">groupadd lighthouse</span><br><span class=\"line\">useradd -g lighthouse lighthouse</span><br><span class=\"line\">lighthouse ALL=(ALL)  NOPASSWD: ALL</span><br></pre></td></tr></table></figure>\n\n<p><strong>abpasswdroot, .</strong></p>\n","site":{"data":{}},"excerpt":"","more":"<ol start=\"0\">\n<li>dev, root</li>\n</ol>\n<p><code>useradd -g root dev</code></p>\n<ol>\n<li>sudo</li>\n</ol>\n<p><code>visudo</code></p>\n<ol start=\"2\">\n<li>devsudo</li>\n</ol>\n<p><code>%root   ALL=(ALL)       NOPASSWD: ALL</code></p>\n<p><strong>devroot, passwdroot</strong></p>\n<p>:</p>\n<p>a) ubuntu:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">groupadd ubuntu </span><br><span class=\"line\">useradd -g ubuntu ubuntu</span><br><span class=\"line\">ubuntu  ALL=(ALL:ALL) NOPASSWD: ALL</span><br></pre></td></tr></table></figure>\n\n<p>b) lighthouse</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">groupadd lighthouse</span><br><span class=\"line\">useradd -g lighthouse lighthouse</span><br><span class=\"line\">lighthouse ALL=(ALL)  NOPASSWD: ALL</span><br></pre></td></tr></table></figure>\n\n<p><strong>abpasswdroot, .</strong></p>\n"},{"title":"","date":"2022-06-16T03:00:13.000Z","_content":"\n\n## \n\n0)  ``` df -Thl ```\n``` bash\n[root@iz5bg05ape183r0ipx22lrz ~]# df -Thl\nFilesystem     Type      Size  Used Avail Use% Mounted on\n/dev/vda1      ext4       40G   16G   22G  42% /\ndevtmpfs       devtmpfs  3.9G     0  3.9G   0% /dev\ntmpfs          tmpfs     3.9G     0  3.9G   0% /dev/shm\ntmpfs          tmpfs     3.9G  580K  3.9G   1% /run\ntmpfs          tmpfs     3.9G     0  3.9G   0% /sys/fs/cgroup\ntmpfs          tmpfs     783M     0  783M   0% /run/user/1001\ntmpfs          tmpfs     783M     0  783M   0% /run/user/0\n```\n\n1) ```fdisk -l```\n**vdaLinux (Id:83)Linux LVM(Id: 8e)**\n\n``` bash\n[root@iz5bg05ape183r0ipx22lrz ~]# fdisk -l\n\nDisk /dev/vda: 42.9 GB, 42949672960 bytes, 83886080 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk label type: dos\nDisk identifier: 0x0008d73a\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/vda1   *        2048    83884031    41940992   83  Linux\n\nDisk /dev/vdb: 536.9 GB, 536870912000 bytes, 1048576000 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk label type: dos\nDisk identifier: 0x6372be6d\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/vdb1            2048  1048575999   524286976   83  Linux\n[root@iz5bg05ape183r0ipx22lrz ~]# \n```\n\n2) \n``` fdisk /dev/vdb1```\n``` {n, p, size, type, w} ```\n```mkfs.ext4 /dev/vdb1 ```\n```mount /dev/vdb1 /data```\n\n3) \n\n``` bash\n[root@iz5bg05ape183r0ipx22lrz data]# df -Thl\nFilesystem     Type      Size  Used Avail Use% Mounted on\n/dev/vda1      ext4       40G   16G   22G  42% /\ndevtmpfs       devtmpfs  3.9G     0  3.9G   0% /dev\ntmpfs          tmpfs     3.9G     0  3.9G   0% /dev/shm\ntmpfs          tmpfs     3.9G  584K  3.9G   1% /run\ntmpfs          tmpfs     3.9G     0  3.9G   0% /sys/fs/cgroup\ntmpfs          tmpfs     783M     0  783M   0% /run/user/1001\ntmpfs          tmpfs     783M     0  783M   0% /run/user/0\n/dev/vdb1      ext4      493G   73M  467G   1% /data\n```\n\n4) \n\n``` bash\n[root@iz5bg05ape183r0ipx22lrz data]# blkid\n/dev/vda1: UUID=\"eb448abb-3012-4d8d-bcde-94434d586a31\" TYPE=\"ext4\" \n/dev/vdb1: UUID=\"a5a8e148-8c6e-49c0-be74-dc1e61fc170f\" TYPE=\"ext4\" \n```\n\n```vim /etc/fstab```\n``` UUID=a5a8e148-8c6e-49c0-be74-dc1e61fc170f /data      ext4    defaults        0 0```\n\n\n\t\t\t\t\t\n\n\n\n## fdisk2T, 2Tparted\n\n``` bash\n\n[root@iz5bg05ape183r0ipx22lrz ~]# part\nparted     partprobe  partx      \n[root@iz5bg05ape183r0ipx22lrz ~]# parted /dev/vdc \nGNU Parted 3.1\nUsing /dev/vdc\nWelcome to GNU Parted! Type 'help' to view a list of commands.\n(parted) p                                                                \nModel: Virtio Block Device (virtblk)\nDisk /dev/vdc: 3221GB\nSector size (logical/physical): 512B/512B\nPartition Table: msdos\nDisk Flags: \n\nNumber  Start  End  Size  Type  File system  Flags\n\n(parted) mklabel gpt                                                      \nWarning: The existing disk label on /dev/vdc will be destroyed and all data on this disk will be\nlost. Do you want to continue?\nYes/No? yes                                                               \n(parted) mkpart                                                           \nPartition name?  []? vdc1                                                 \nFile system type?  [ext2]? ext4                                           \nStart? 0                                                                  \nEnd? 3221GB                                                               \nWarning: The resulting partition is not properly aligned for best performance.\nIgnore/Cancel? ignore                                                     \n(parted) p                                                                \nModel: Virtio Block Device (virtblk)\nDisk /dev/vdc: 3221GB\nSector size (logical/physical): 512B/512B\nPartition Table: gpt\nDisk Flags: \n\nNumber  Start   End     Size    File system  Name  Flags\n 1      17.4kB  3221GB  3221GB               vdc1\n\n(parted) quit                                                             \nInformation: You may need to update /etc/fstab.\n\n[root@iz5bg05ape183r0ipx22lrz ~]#\n\n```\n\n vdc1 (partedvdc1)\n``` mkfs.ext4 /dev/vdc1```\n\n","source":"_posts/020.mount.md","raw":"---\ntitle: \ndate: 2022-6-16 11:00:13\ncategories: \n- [Linux]\n- [CentOS]\ntags: \n- mkfs.ext4\n- mount\n---\n\n\n## \n\n0)  ``` df -Thl ```\n``` bash\n[root@iz5bg05ape183r0ipx22lrz ~]# df -Thl\nFilesystem     Type      Size  Used Avail Use% Mounted on\n/dev/vda1      ext4       40G   16G   22G  42% /\ndevtmpfs       devtmpfs  3.9G     0  3.9G   0% /dev\ntmpfs          tmpfs     3.9G     0  3.9G   0% /dev/shm\ntmpfs          tmpfs     3.9G  580K  3.9G   1% /run\ntmpfs          tmpfs     3.9G     0  3.9G   0% /sys/fs/cgroup\ntmpfs          tmpfs     783M     0  783M   0% /run/user/1001\ntmpfs          tmpfs     783M     0  783M   0% /run/user/0\n```\n\n1) ```fdisk -l```\n**vdaLinux (Id:83)Linux LVM(Id: 8e)**\n\n``` bash\n[root@iz5bg05ape183r0ipx22lrz ~]# fdisk -l\n\nDisk /dev/vda: 42.9 GB, 42949672960 bytes, 83886080 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk label type: dos\nDisk identifier: 0x0008d73a\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/vda1   *        2048    83884031    41940992   83  Linux\n\nDisk /dev/vdb: 536.9 GB, 536870912000 bytes, 1048576000 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk label type: dos\nDisk identifier: 0x6372be6d\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/vdb1            2048  1048575999   524286976   83  Linux\n[root@iz5bg05ape183r0ipx22lrz ~]# \n```\n\n2) \n``` fdisk /dev/vdb1```\n``` {n, p, size, type, w} ```\n```mkfs.ext4 /dev/vdb1 ```\n```mount /dev/vdb1 /data```\n\n3) \n\n``` bash\n[root@iz5bg05ape183r0ipx22lrz data]# df -Thl\nFilesystem     Type      Size  Used Avail Use% Mounted on\n/dev/vda1      ext4       40G   16G   22G  42% /\ndevtmpfs       devtmpfs  3.9G     0  3.9G   0% /dev\ntmpfs          tmpfs     3.9G     0  3.9G   0% /dev/shm\ntmpfs          tmpfs     3.9G  584K  3.9G   1% /run\ntmpfs          tmpfs     3.9G     0  3.9G   0% /sys/fs/cgroup\ntmpfs          tmpfs     783M     0  783M   0% /run/user/1001\ntmpfs          tmpfs     783M     0  783M   0% /run/user/0\n/dev/vdb1      ext4      493G   73M  467G   1% /data\n```\n\n4) \n\n``` bash\n[root@iz5bg05ape183r0ipx22lrz data]# blkid\n/dev/vda1: UUID=\"eb448abb-3012-4d8d-bcde-94434d586a31\" TYPE=\"ext4\" \n/dev/vdb1: UUID=\"a5a8e148-8c6e-49c0-be74-dc1e61fc170f\" TYPE=\"ext4\" \n```\n\n```vim /etc/fstab```\n``` UUID=a5a8e148-8c6e-49c0-be74-dc1e61fc170f /data      ext4    defaults        0 0```\n\n\n\t\t\t\t\t\n\n\n\n## fdisk2T, 2Tparted\n\n``` bash\n\n[root@iz5bg05ape183r0ipx22lrz ~]# part\nparted     partprobe  partx      \n[root@iz5bg05ape183r0ipx22lrz ~]# parted /dev/vdc \nGNU Parted 3.1\nUsing /dev/vdc\nWelcome to GNU Parted! Type 'help' to view a list of commands.\n(parted) p                                                                \nModel: Virtio Block Device (virtblk)\nDisk /dev/vdc: 3221GB\nSector size (logical/physical): 512B/512B\nPartition Table: msdos\nDisk Flags: \n\nNumber  Start  End  Size  Type  File system  Flags\n\n(parted) mklabel gpt                                                      \nWarning: The existing disk label on /dev/vdc will be destroyed and all data on this disk will be\nlost. Do you want to continue?\nYes/No? yes                                                               \n(parted) mkpart                                                           \nPartition name?  []? vdc1                                                 \nFile system type?  [ext2]? ext4                                           \nStart? 0                                                                  \nEnd? 3221GB                                                               \nWarning: The resulting partition is not properly aligned for best performance.\nIgnore/Cancel? ignore                                                     \n(parted) p                                                                \nModel: Virtio Block Device (virtblk)\nDisk /dev/vdc: 3221GB\nSector size (logical/physical): 512B/512B\nPartition Table: gpt\nDisk Flags: \n\nNumber  Start   End     Size    File system  Name  Flags\n 1      17.4kB  3221GB  3221GB               vdc1\n\n(parted) quit                                                             \nInformation: You may need to update /etc/fstab.\n\n[root@iz5bg05ape183r0ipx22lrz ~]#\n\n```\n\n vdc1 (partedvdc1)\n``` mkfs.ext4 /dev/vdc1```\n\n","slug":"020.mount","published":1,"updated":"2023-03-03T05:15:22.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbec001zyknr2g1mgxw7","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol start=\"0\">\n<li><p> <code>df -Thl</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@iz5bg05ape183r0ipx22lrz ~]<span class=\"comment\"># df -Thl</span></span><br><span class=\"line\">Filesystem     Type      Size  Used Avail Use% Mounted on</span><br><span class=\"line\">/dev/vda1      ext4       40G   16G   22G  42% /</span><br><span class=\"line\">devtmpfs       devtmpfs  3.9G     0  3.9G   0% /dev</span><br><span class=\"line\">tmpfs          tmpfs     3.9G     0  3.9G   0% /dev/shm</span><br><span class=\"line\">tmpfs          tmpfs     3.9G  580K  3.9G   1% /run</span><br><span class=\"line\">tmpfs          tmpfs     3.9G     0  3.9G   0% /sys/fs/cgroup</span><br><span class=\"line\">tmpfs          tmpfs     783M     0  783M   0% /run/user/1001</span><br><span class=\"line\">tmpfs          tmpfs     783M     0  783M   0% /run/user/0</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><code>fdisk -l</code></p>\n</li>\n</ol>\n<p><strong>vdaLinux (Id:83)Linux LVM(Id: 8e)</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@iz5bg05ape183r0ipx22lrz ~]<span class=\"comment\"># fdisk -l</span></span><br><span class=\"line\"></span><br><span class=\"line\">Disk /dev/vda: 42.9 GB, 42949672960 bytes, 83886080 sectors</span><br><span class=\"line\">Units = sectors of 1 * 512 = 512 bytes</span><br><span class=\"line\">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class=\"line\">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class=\"line\">Disk label <span class=\"built_in\">type</span>: dos</span><br><span class=\"line\">Disk identifier: 0x0008d73a</span><br><span class=\"line\"></span><br><span class=\"line\">   Device Boot      Start         End      Blocks   Id  System</span><br><span class=\"line\">/dev/vda1   *        2048    83884031    41940992   83  Linux</span><br><span class=\"line\"></span><br><span class=\"line\">Disk /dev/vdb: 536.9 GB, 536870912000 bytes, 1048576000 sectors</span><br><span class=\"line\">Units = sectors of 1 * 512 = 512 bytes</span><br><span class=\"line\">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class=\"line\">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class=\"line\">Disk label <span class=\"built_in\">type</span>: dos</span><br><span class=\"line\">Disk identifier: 0x6372be6d</span><br><span class=\"line\"></span><br><span class=\"line\">   Device Boot      Start         End      Blocks   Id  System</span><br><span class=\"line\">/dev/vdb1            2048  1048575999   524286976   83  Linux</span><br><span class=\"line\">[root@iz5bg05ape183r0ipx22lrz ~]<span class=\"comment\"># </span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li></li>\n</ol>\n<p><code> fdisk /dev/vdb1</code><br><code>&#123;n, p, size, type, w&#125;</code><br><code>mkfs.ext4 /dev/vdb1 </code><br><code>mount /dev/vdb1 /data</code></p>\n<ol start=\"3\">\n<li></li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@iz5bg05ape183r0ipx22lrz data]<span class=\"comment\"># df -Thl</span></span><br><span class=\"line\">Filesystem     Type      Size  Used Avail Use% Mounted on</span><br><span class=\"line\">/dev/vda1      ext4       40G   16G   22G  42% /</span><br><span class=\"line\">devtmpfs       devtmpfs  3.9G     0  3.9G   0% /dev</span><br><span class=\"line\">tmpfs          tmpfs     3.9G     0  3.9G   0% /dev/shm</span><br><span class=\"line\">tmpfs          tmpfs     3.9G  584K  3.9G   1% /run</span><br><span class=\"line\">tmpfs          tmpfs     3.9G     0  3.9G   0% /sys/fs/cgroup</span><br><span class=\"line\">tmpfs          tmpfs     783M     0  783M   0% /run/user/1001</span><br><span class=\"line\">tmpfs          tmpfs     783M     0  783M   0% /run/user/0</span><br><span class=\"line\">/dev/vdb1      ext4      493G   73M  467G   1% /data</span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li></li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@iz5bg05ape183r0ipx22lrz data]<span class=\"comment\"># blkid</span></span><br><span class=\"line\">/dev/vda1: UUID=<span class=\"string\">&quot;eb448abb-3012-4d8d-bcde-94434d586a31&quot;</span> TYPE=<span class=\"string\">&quot;ext4&quot;</span> </span><br><span class=\"line\">/dev/vdb1: UUID=<span class=\"string\">&quot;a5a8e148-8c6e-49c0-be74-dc1e61fc170f&quot;</span> TYPE=<span class=\"string\">&quot;ext4&quot;</span> </span><br></pre></td></tr></table></figure>\n\n<p><code>vim /etc/fstab</code><br><code> UUID=a5a8e148-8c6e-49c0-be74-dc1e61fc170f /data      ext4    defaults        0 0</code></p>\n<p>\t\t\t\t\t</p>\n<h2 id=\"fdisk2T-2Tparted\"><a href=\"#fdisk2T-2Tparted\" class=\"headerlink\" title=\"fdisk2T, 2Tparted\"></a>fdisk2T, 2Tparted</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">[root@iz5bg05ape183r0ipx22lrz ~]<span class=\"comment\"># part</span></span><br><span class=\"line\">parted     partprobe  partx      </span><br><span class=\"line\">[root@iz5bg05ape183r0ipx22lrz ~]<span class=\"comment\"># parted /dev/vdc </span></span><br><span class=\"line\">GNU Parted 3.1</span><br><span class=\"line\">Using /dev/vdc</span><br><span class=\"line\">Welcome to GNU Parted! Type <span class=\"string\">&#x27;help&#x27;</span> to view a list of commands.</span><br><span class=\"line\">(parted) p                                                                </span><br><span class=\"line\">Model: Virtio Block Device (virtblk)</span><br><span class=\"line\">Disk /dev/vdc: 3221GB</span><br><span class=\"line\">Sector size (logical/physical): 512B/512B</span><br><span class=\"line\">Partition Table: msdos</span><br><span class=\"line\">Disk Flags: </span><br><span class=\"line\"></span><br><span class=\"line\">Number  Start  End  Size  Type  File system  Flags</span><br><span class=\"line\"></span><br><span class=\"line\">(parted) mklabel gpt                                                      </span><br><span class=\"line\">Warning: The existing disk label on /dev/vdc will be destroyed and all data on this disk will be</span><br><span class=\"line\">lost. Do you want to <span class=\"built_in\">continue</span>?</span><br><span class=\"line\">Yes/No? <span class=\"built_in\">yes</span>                                                               </span><br><span class=\"line\">(parted) mkpart                                                           </span><br><span class=\"line\">Partition name?  []? vdc1                                                 </span><br><span class=\"line\">File system <span class=\"built_in\">type</span>?  [ext2]? ext4                                           </span><br><span class=\"line\">Start? 0                                                                  </span><br><span class=\"line\">End? 3221GB                                                               </span><br><span class=\"line\">Warning: The resulting partition is not properly aligned <span class=\"keyword\">for</span> best performance.</span><br><span class=\"line\">Ignore/Cancel? ignore                                                     </span><br><span class=\"line\">(parted) p                                                                </span><br><span class=\"line\">Model: Virtio Block Device (virtblk)</span><br><span class=\"line\">Disk /dev/vdc: 3221GB</span><br><span class=\"line\">Sector size (logical/physical): 512B/512B</span><br><span class=\"line\">Partition Table: gpt</span><br><span class=\"line\">Disk Flags: </span><br><span class=\"line\"></span><br><span class=\"line\">Number  Start   End     Size    File system  Name  Flags</span><br><span class=\"line\"> 1      17.4kB  3221GB  3221GB               vdc1</span><br><span class=\"line\"></span><br><span class=\"line\">(parted) quit                                                             </span><br><span class=\"line\">Information: You may need to update /etc/fstab.</span><br><span class=\"line\"></span><br><span class=\"line\">[root@iz5bg05ape183r0ipx22lrz ~]<span class=\"comment\">#</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p> vdc1 (partedvdc1)<br><code> mkfs.ext4 /dev/vdc1</code></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol start=\"0\">\n<li><p> <code>df -Thl</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@iz5bg05ape183r0ipx22lrz ~]<span class=\"comment\"># df -Thl</span></span><br><span class=\"line\">Filesystem     Type      Size  Used Avail Use% Mounted on</span><br><span class=\"line\">/dev/vda1      ext4       40G   16G   22G  42% /</span><br><span class=\"line\">devtmpfs       devtmpfs  3.9G     0  3.9G   0% /dev</span><br><span class=\"line\">tmpfs          tmpfs     3.9G     0  3.9G   0% /dev/shm</span><br><span class=\"line\">tmpfs          tmpfs     3.9G  580K  3.9G   1% /run</span><br><span class=\"line\">tmpfs          tmpfs     3.9G     0  3.9G   0% /sys/fs/cgroup</span><br><span class=\"line\">tmpfs          tmpfs     783M     0  783M   0% /run/user/1001</span><br><span class=\"line\">tmpfs          tmpfs     783M     0  783M   0% /run/user/0</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><code>fdisk -l</code></p>\n</li>\n</ol>\n<p><strong>vdaLinux (Id:83)Linux LVM(Id: 8e)</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@iz5bg05ape183r0ipx22lrz ~]<span class=\"comment\"># fdisk -l</span></span><br><span class=\"line\"></span><br><span class=\"line\">Disk /dev/vda: 42.9 GB, 42949672960 bytes, 83886080 sectors</span><br><span class=\"line\">Units = sectors of 1 * 512 = 512 bytes</span><br><span class=\"line\">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class=\"line\">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class=\"line\">Disk label <span class=\"built_in\">type</span>: dos</span><br><span class=\"line\">Disk identifier: 0x0008d73a</span><br><span class=\"line\"></span><br><span class=\"line\">   Device Boot      Start         End      Blocks   Id  System</span><br><span class=\"line\">/dev/vda1   *        2048    83884031    41940992   83  Linux</span><br><span class=\"line\"></span><br><span class=\"line\">Disk /dev/vdb: 536.9 GB, 536870912000 bytes, 1048576000 sectors</span><br><span class=\"line\">Units = sectors of 1 * 512 = 512 bytes</span><br><span class=\"line\">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class=\"line\">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class=\"line\">Disk label <span class=\"built_in\">type</span>: dos</span><br><span class=\"line\">Disk identifier: 0x6372be6d</span><br><span class=\"line\"></span><br><span class=\"line\">   Device Boot      Start         End      Blocks   Id  System</span><br><span class=\"line\">/dev/vdb1            2048  1048575999   524286976   83  Linux</span><br><span class=\"line\">[root@iz5bg05ape183r0ipx22lrz ~]<span class=\"comment\"># </span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li></li>\n</ol>\n<p><code> fdisk /dev/vdb1</code><br><code>&#123;n, p, size, type, w&#125;</code><br><code>mkfs.ext4 /dev/vdb1 </code><br><code>mount /dev/vdb1 /data</code></p>\n<ol start=\"3\">\n<li></li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@iz5bg05ape183r0ipx22lrz data]<span class=\"comment\"># df -Thl</span></span><br><span class=\"line\">Filesystem     Type      Size  Used Avail Use% Mounted on</span><br><span class=\"line\">/dev/vda1      ext4       40G   16G   22G  42% /</span><br><span class=\"line\">devtmpfs       devtmpfs  3.9G     0  3.9G   0% /dev</span><br><span class=\"line\">tmpfs          tmpfs     3.9G     0  3.9G   0% /dev/shm</span><br><span class=\"line\">tmpfs          tmpfs     3.9G  584K  3.9G   1% /run</span><br><span class=\"line\">tmpfs          tmpfs     3.9G     0  3.9G   0% /sys/fs/cgroup</span><br><span class=\"line\">tmpfs          tmpfs     783M     0  783M   0% /run/user/1001</span><br><span class=\"line\">tmpfs          tmpfs     783M     0  783M   0% /run/user/0</span><br><span class=\"line\">/dev/vdb1      ext4      493G   73M  467G   1% /data</span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li></li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@iz5bg05ape183r0ipx22lrz data]<span class=\"comment\"># blkid</span></span><br><span class=\"line\">/dev/vda1: UUID=<span class=\"string\">&quot;eb448abb-3012-4d8d-bcde-94434d586a31&quot;</span> TYPE=<span class=\"string\">&quot;ext4&quot;</span> </span><br><span class=\"line\">/dev/vdb1: UUID=<span class=\"string\">&quot;a5a8e148-8c6e-49c0-be74-dc1e61fc170f&quot;</span> TYPE=<span class=\"string\">&quot;ext4&quot;</span> </span><br></pre></td></tr></table></figure>\n\n<p><code>vim /etc/fstab</code><br><code> UUID=a5a8e148-8c6e-49c0-be74-dc1e61fc170f /data      ext4    defaults        0 0</code></p>\n<p>\t\t\t\t\t</p>\n<h2 id=\"fdisk2T-2Tparted\"><a href=\"#fdisk2T-2Tparted\" class=\"headerlink\" title=\"fdisk2T, 2Tparted\"></a>fdisk2T, 2Tparted</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">[root@iz5bg05ape183r0ipx22lrz ~]<span class=\"comment\"># part</span></span><br><span class=\"line\">parted     partprobe  partx      </span><br><span class=\"line\">[root@iz5bg05ape183r0ipx22lrz ~]<span class=\"comment\"># parted /dev/vdc </span></span><br><span class=\"line\">GNU Parted 3.1</span><br><span class=\"line\">Using /dev/vdc</span><br><span class=\"line\">Welcome to GNU Parted! Type <span class=\"string\">&#x27;help&#x27;</span> to view a list of commands.</span><br><span class=\"line\">(parted) p                                                                </span><br><span class=\"line\">Model: Virtio Block Device (virtblk)</span><br><span class=\"line\">Disk /dev/vdc: 3221GB</span><br><span class=\"line\">Sector size (logical/physical): 512B/512B</span><br><span class=\"line\">Partition Table: msdos</span><br><span class=\"line\">Disk Flags: </span><br><span class=\"line\"></span><br><span class=\"line\">Number  Start  End  Size  Type  File system  Flags</span><br><span class=\"line\"></span><br><span class=\"line\">(parted) mklabel gpt                                                      </span><br><span class=\"line\">Warning: The existing disk label on /dev/vdc will be destroyed and all data on this disk will be</span><br><span class=\"line\">lost. Do you want to <span class=\"built_in\">continue</span>?</span><br><span class=\"line\">Yes/No? <span class=\"built_in\">yes</span>                                                               </span><br><span class=\"line\">(parted) mkpart                                                           </span><br><span class=\"line\">Partition name?  []? vdc1                                                 </span><br><span class=\"line\">File system <span class=\"built_in\">type</span>?  [ext2]? ext4                                           </span><br><span class=\"line\">Start? 0                                                                  </span><br><span class=\"line\">End? 3221GB                                                               </span><br><span class=\"line\">Warning: The resulting partition is not properly aligned <span class=\"keyword\">for</span> best performance.</span><br><span class=\"line\">Ignore/Cancel? ignore                                                     </span><br><span class=\"line\">(parted) p                                                                </span><br><span class=\"line\">Model: Virtio Block Device (virtblk)</span><br><span class=\"line\">Disk /dev/vdc: 3221GB</span><br><span class=\"line\">Sector size (logical/physical): 512B/512B</span><br><span class=\"line\">Partition Table: gpt</span><br><span class=\"line\">Disk Flags: </span><br><span class=\"line\"></span><br><span class=\"line\">Number  Start   End     Size    File system  Name  Flags</span><br><span class=\"line\"> 1      17.4kB  3221GB  3221GB               vdc1</span><br><span class=\"line\"></span><br><span class=\"line\">(parted) quit                                                             </span><br><span class=\"line\">Information: You may need to update /etc/fstab.</span><br><span class=\"line\"></span><br><span class=\"line\">[root@iz5bg05ape183r0ipx22lrz ~]<span class=\"comment\">#</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p> vdc1 (partedvdc1)<br><code> mkfs.ext4 /dev/vdc1</code></p>\n"},{"title":"Centos7 ","date":"2022-06-21T06:40:00.000Z","_content":"\n``` bash\n# CentOS-Base.repo\n#\n# The mirror system uses the connecting IP address of the client and the\n# update status of each mirror to pick mirrors that are updated to and\n# geographically close to the client.  You should use this for CentOS updates\n# unless you are manually picking other mirrors.\n#\n# If the mirrorlist= does not work for you, as a fall back you can try the\n# remarked out baseurl= line instead.\n#\n#\n\n[base]\nname=CentOS-$releasever - Base\n#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=os&infra=$infra\nbaseurl=https://mirrors.ustc.edu.cn/centos/$releasever/os/$basearch/\ngpgcheck=1\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7\n\n#released updates\n[updates]\nname=CentOS-$releasever - Updates\n#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=updates&infra=$infra\nbaseurl=https://mirrors.ustc.edu.cn/centos/$releasever/updates/$basearch/\ngpgcheck=1\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7\n\n#additional packages that may be useful\n[extras]\nname=CentOS-$releasever - Extras\n#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=extras&infra=$infra\nbaseurl=https://mirrors.ustc.edu.cn/centos/$releasever/extras/$basearch/\ngpgcheck=1\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7\n\n#additional packages that extend functionality of existing packages\n[centosplus]\nname=CentOS-$releasever - Plus\n#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=centosplus&infra=$infra\nbaseurl=https://mirrors.ustc.edu.cn/centos/$releasever/centosplus/$basearch/\ngpgcheck=1\nenabled=0\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7\n\n```","source":"_posts/021.CentOS-Base.repo.md","raw":"---\ntitle: Centos7 \ndate: 2022-6-21 14:40:00\ncategories: \n- [Linux]\n- [CentOS]\ntags: \n- repo\n- yum\n---\n\n``` bash\n# CentOS-Base.repo\n#\n# The mirror system uses the connecting IP address of the client and the\n# update status of each mirror to pick mirrors that are updated to and\n# geographically close to the client.  You should use this for CentOS updates\n# unless you are manually picking other mirrors.\n#\n# If the mirrorlist= does not work for you, as a fall back you can try the\n# remarked out baseurl= line instead.\n#\n#\n\n[base]\nname=CentOS-$releasever - Base\n#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=os&infra=$infra\nbaseurl=https://mirrors.ustc.edu.cn/centos/$releasever/os/$basearch/\ngpgcheck=1\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7\n\n#released updates\n[updates]\nname=CentOS-$releasever - Updates\n#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=updates&infra=$infra\nbaseurl=https://mirrors.ustc.edu.cn/centos/$releasever/updates/$basearch/\ngpgcheck=1\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7\n\n#additional packages that may be useful\n[extras]\nname=CentOS-$releasever - Extras\n#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=extras&infra=$infra\nbaseurl=https://mirrors.ustc.edu.cn/centos/$releasever/extras/$basearch/\ngpgcheck=1\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7\n\n#additional packages that extend functionality of existing packages\n[centosplus]\nname=CentOS-$releasever - Plus\n#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=centosplus&infra=$infra\nbaseurl=https://mirrors.ustc.edu.cn/centos/$releasever/centosplus/$basearch/\ngpgcheck=1\nenabled=0\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7\n\n```","slug":"021.CentOS-Base.repo","published":1,"updated":"2023-03-03T05:15:23.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbef0023yknr976e6acm","content":"<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># CentOS-Base.repo</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># The mirror system uses the connecting IP address of the client and the</span></span><br><span class=\"line\"><span class=\"comment\"># update status of each mirror to pick mirrors that are updated to and</span></span><br><span class=\"line\"><span class=\"comment\"># geographically close to the client.  You should use this for CentOS updates</span></span><br><span class=\"line\"><span class=\"comment\"># unless you are manually picking other mirrors.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># If the mirrorlist= does not work for you, as a fall back you can try the</span></span><br><span class=\"line\"><span class=\"comment\"># remarked out baseurl= line instead.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"></span><br><span class=\"line\">[base]</span><br><span class=\"line\">name=CentOS-<span class=\"variable\">$releasever</span> - Base</span><br><span class=\"line\"><span class=\"comment\">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=os&amp;infra=$infra</span></span><br><span class=\"line\">baseurl=https://mirrors.ustc.edu.cn/centos/<span class=\"variable\">$releasever</span>/os/<span class=\"variable\">$basearch</span>/</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#released updates</span></span><br><span class=\"line\">[updates]</span><br><span class=\"line\">name=CentOS-<span class=\"variable\">$releasever</span> - Updates</span><br><span class=\"line\"><span class=\"comment\">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=updates&amp;infra=$infra</span></span><br><span class=\"line\">baseurl=https://mirrors.ustc.edu.cn/centos/<span class=\"variable\">$releasever</span>/updates/<span class=\"variable\">$basearch</span>/</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#additional packages that may be useful</span></span><br><span class=\"line\">[extras]</span><br><span class=\"line\">name=CentOS-<span class=\"variable\">$releasever</span> - Extras</span><br><span class=\"line\"><span class=\"comment\">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=extras&amp;infra=$infra</span></span><br><span class=\"line\">baseurl=https://mirrors.ustc.edu.cn/centos/<span class=\"variable\">$releasever</span>/extras/<span class=\"variable\">$basearch</span>/</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#additional packages that extend functionality of existing packages</span></span><br><span class=\"line\">[centosplus]</span><br><span class=\"line\">name=CentOS-<span class=\"variable\">$releasever</span> - Plus</span><br><span class=\"line\"><span class=\"comment\">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=centosplus&amp;infra=$infra</span></span><br><span class=\"line\">baseurl=https://mirrors.ustc.edu.cn/centos/<span class=\"variable\">$releasever</span>/centosplus/<span class=\"variable\">$basearch</span>/</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">enabled=0</span><br><span class=\"line\">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># CentOS-Base.repo</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># The mirror system uses the connecting IP address of the client and the</span></span><br><span class=\"line\"><span class=\"comment\"># update status of each mirror to pick mirrors that are updated to and</span></span><br><span class=\"line\"><span class=\"comment\"># geographically close to the client.  You should use this for CentOS updates</span></span><br><span class=\"line\"><span class=\"comment\"># unless you are manually picking other mirrors.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># If the mirrorlist= does not work for you, as a fall back you can try the</span></span><br><span class=\"line\"><span class=\"comment\"># remarked out baseurl= line instead.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"></span><br><span class=\"line\">[base]</span><br><span class=\"line\">name=CentOS-<span class=\"variable\">$releasever</span> - Base</span><br><span class=\"line\"><span class=\"comment\">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=os&amp;infra=$infra</span></span><br><span class=\"line\">baseurl=https://mirrors.ustc.edu.cn/centos/<span class=\"variable\">$releasever</span>/os/<span class=\"variable\">$basearch</span>/</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#released updates</span></span><br><span class=\"line\">[updates]</span><br><span class=\"line\">name=CentOS-<span class=\"variable\">$releasever</span> - Updates</span><br><span class=\"line\"><span class=\"comment\">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=updates&amp;infra=$infra</span></span><br><span class=\"line\">baseurl=https://mirrors.ustc.edu.cn/centos/<span class=\"variable\">$releasever</span>/updates/<span class=\"variable\">$basearch</span>/</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#additional packages that may be useful</span></span><br><span class=\"line\">[extras]</span><br><span class=\"line\">name=CentOS-<span class=\"variable\">$releasever</span> - Extras</span><br><span class=\"line\"><span class=\"comment\">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=extras&amp;infra=$infra</span></span><br><span class=\"line\">baseurl=https://mirrors.ustc.edu.cn/centos/<span class=\"variable\">$releasever</span>/extras/<span class=\"variable\">$basearch</span>/</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#additional packages that extend functionality of existing packages</span></span><br><span class=\"line\">[centosplus]</span><br><span class=\"line\">name=CentOS-<span class=\"variable\">$releasever</span> - Plus</span><br><span class=\"line\"><span class=\"comment\">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=centosplus&amp;infra=$infra</span></span><br><span class=\"line\">baseurl=https://mirrors.ustc.edu.cn/centos/<span class=\"variable\">$releasever</span>/centosplus/<span class=\"variable\">$basearch</span>/</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">enabled=0</span><br><span class=\"line\">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>"},{"title":"MySQL","date":"2022-06-23T08:47:00.000Z","_content":"\n(23)\n0 23 * * * sh /root/data_backup/sql_backup.sh\n\n\n****\n``` bash\n#!/bin/bash\nrm -rf ./backup.sql\nrm -rf ./credentialsFile\necho \"[client]\" > ./credentialsFile\necho \"user=root\" >> ./credentialsFile\necho \"password=Whz123...\" >> ./credentialsFile\necho \"host=127.0.0.1\" >> ./credentialsFile\necho \"port=3306\" >> ./credentialsFile\nmysqldump --defaults-extra-file=/root/shell/credentialsFile --all-databases > ./backup.sql\n\n```\n\n\n```mysqldump -u root -h 127.0.0.1 -p --all-databases > /backup/allBackup.sql```\n``` Enter your password ```\n\nwarning, , MySQL.\n```mysqldump -u root -h 127.0.0.1 -p$PASSWD--all-databases > /backup/allBackup.sql```\n**mysqldump: [Warning] Using a password on the command line interface can be insecure.**\n","source":"_posts/022.MySQL_backup.md","raw":"---\ntitle: MySQL\ndate: 2022-6-23 16:47:00\ncategories: \n- [Database]\ntags: \n- MySQL\n- backup\n---\n\n(23)\n0 23 * * * sh /root/data_backup/sql_backup.sh\n\n\n****\n``` bash\n#!/bin/bash\nrm -rf ./backup.sql\nrm -rf ./credentialsFile\necho \"[client]\" > ./credentialsFile\necho \"user=root\" >> ./credentialsFile\necho \"password=Whz123...\" >> ./credentialsFile\necho \"host=127.0.0.1\" >> ./credentialsFile\necho \"port=3306\" >> ./credentialsFile\nmysqldump --defaults-extra-file=/root/shell/credentialsFile --all-databases > ./backup.sql\n\n```\n\n\n```mysqldump -u root -h 127.0.0.1 -p --all-databases > /backup/allBackup.sql```\n``` Enter your password ```\n\nwarning, , MySQL.\n```mysqldump -u root -h 127.0.0.1 -p$PASSWD--all-databases > /backup/allBackup.sql```\n**mysqldump: [Warning] Using a password on the command line interface can be insecure.**\n","slug":"022.MySQL_backup","published":1,"updated":"2023-04-19T14:41:56.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbeh0026yknra8y08i63","content":"<p>(23)<br>0 23 * * * sh &#x2F;root&#x2F;data_backup&#x2F;sql_backup.sh</p>\n<p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"built_in\">rm</span> -rf ./backup.sql</span><br><span class=\"line\"><span class=\"built_in\">rm</span> -rf ./credentialsFile</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;[client]&quot;</span> &gt; ./credentialsFile</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;user=root&quot;</span> &gt;&gt; ./credentialsFile</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;password=Whz123...&quot;</span> &gt;&gt; ./credentialsFile</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;host=127.0.0.1&quot;</span> &gt;&gt; ./credentialsFile</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;port=3306&quot;</span> &gt;&gt; ./credentialsFile</span><br><span class=\"line\">mysqldump --defaults-extra-file=/root/shell/credentialsFile --all-databases &gt; ./backup.sql</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><br><code>mysqldump -u root -h 127.0.0.1 -p --all-databases &gt; /backup/allBackup.sql</code><br><code>Enter your password</code></p>\n<p>warning, , MySQL.<br><code>mysqldump -u root -h 127.0.0.1 -p$PASSWD--all-databases &gt; /backup/allBackup.sql</code><br><strong>mysqldump: [Warning] Using a password on the command line interface can be insecure.</strong></p>\n","site":{"data":{}},"excerpt":"","more":"<p>(23)<br>0 23 * * * sh &#x2F;root&#x2F;data_backup&#x2F;sql_backup.sh</p>\n<p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"built_in\">rm</span> -rf ./backup.sql</span><br><span class=\"line\"><span class=\"built_in\">rm</span> -rf ./credentialsFile</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;[client]&quot;</span> &gt; ./credentialsFile</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;user=root&quot;</span> &gt;&gt; ./credentialsFile</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;password=Whz123...&quot;</span> &gt;&gt; ./credentialsFile</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;host=127.0.0.1&quot;</span> &gt;&gt; ./credentialsFile</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;port=3306&quot;</span> &gt;&gt; ./credentialsFile</span><br><span class=\"line\">mysqldump --defaults-extra-file=/root/shell/credentialsFile --all-databases &gt; ./backup.sql</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><br><code>mysqldump -u root -h 127.0.0.1 -p --all-databases &gt; /backup/allBackup.sql</code><br><code>Enter your password</code></p>\n<p>warning, , MySQL.<br><code>mysqldump -u root -h 127.0.0.1 -p$PASSWD--all-databases &gt; /backup/allBackup.sql</code><br><strong>mysqldump: [Warning] Using a password on the command line interface can be insecure.</strong></p>\n"},{"title":"","date":"2022-06-30T03:05:00.000Z","_content":"\n**Linux, iptables, hosts.allow, hosts.deny **\n\nhosts.allowhosts.deny\n\n## : hosts.allow, hosts.deny\nhosts.allow, hosts.deny openssh```--with-tcp-wrappers```\n, centos7 openssh7.4.\n ```ldd /usr/sbin/sshd | grep libwrap```\n\n ```/etc/hosts.allow```\n1)  192.168.128.1\n``` sshd:192.168.128.1:allow ```\n2)  192.168.128.0/24 \n``` sshd:192.168.128.:allow ```\n3)  192.168.128.0/24  192.168.64.0/24 \n``` sshd:192.168.128.,192.168.64.:allow ```\n4) \n``` sshd:ALL ```\n\n ```/etc/hosts.deny```\n5)  192.168.128.1\n``` sshd:192.168.128.1:deny ```\n\n/ip\n ```/etc/hosts.deny```  ``` sshd:ALL ```\n ```/etc/hosts.allow``` ip\n\n## : sshd_config(hosts.allow, hosts.deny)\n\n: ```/etc/ssh/sshd_config```\n\n 192.168.128.0/24\n: ```AllowUsers root@192.168.128.0/24```","source":"_posts/023.access.md","raw":"---\ntitle: \ndate: 2022-6-30 11:05:00\ncategories: \n- [Linux]\ntags: \n- access\n---\n\n**Linux, iptables, hosts.allow, hosts.deny **\n\nhosts.allowhosts.deny\n\n## : hosts.allow, hosts.deny\nhosts.allow, hosts.deny openssh```--with-tcp-wrappers```\n, centos7 openssh7.4.\n ```ldd /usr/sbin/sshd | grep libwrap```\n\n ```/etc/hosts.allow```\n1)  192.168.128.1\n``` sshd:192.168.128.1:allow ```\n2)  192.168.128.0/24 \n``` sshd:192.168.128.:allow ```\n3)  192.168.128.0/24  192.168.64.0/24 \n``` sshd:192.168.128.,192.168.64.:allow ```\n4) \n``` sshd:ALL ```\n\n ```/etc/hosts.deny```\n5)  192.168.128.1\n``` sshd:192.168.128.1:deny ```\n\n/ip\n ```/etc/hosts.deny```  ``` sshd:ALL ```\n ```/etc/hosts.allow``` ip\n\n## : sshd_config(hosts.allow, hosts.deny)\n\n: ```/etc/ssh/sshd_config```\n\n 192.168.128.0/24\n: ```AllowUsers root@192.168.128.0/24```","slug":"023.access","published":1,"updated":"2023-03-03T05:15:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbej0029yknr5w5k1dj9","content":"<p><strong>Linux, iptables, hosts.allow, hosts.deny </strong></p>\n<p>hosts.allowhosts.deny</p>\n<h2 id=\"-hosts-allow-hosts-deny\"><a href=\"#-hosts-allow-hosts-deny\" class=\"headerlink\" title=\": hosts.allow, hosts.deny\"></a>: hosts.allow, hosts.deny</h2><p>hosts.allow, hosts.deny openssh<code>--with-tcp-wrappers</code><br>, centos7 openssh7.4.<br> <code>ldd /usr/sbin/sshd | grep libwrap</code></p>\n<p> <code>/etc/hosts.allow</code></p>\n<ol>\n<li> 192.168.128.1</li>\n</ol>\n<p><code>sshd:192.168.128.1:allow</code><br>2)  192.168.128.0&#x2F;24 <br><code>sshd:192.168.128.:allow</code><br>3)  192.168.128.0&#x2F;24  192.168.64.0&#x2F;24 <br><code>sshd:192.168.128.,192.168.64.:allow</code><br>4) <br><code>sshd:ALL</code></p>\n<p> <code>/etc/hosts.deny</code><br>5)  192.168.128.1<br><code>sshd:192.168.128.1:deny</code></p>\n<p>&#x2F;ip<br> <code>/etc/hosts.deny</code>  <code>sshd:ALL</code><br> <code>/etc/hosts.allow</code> ip</p>\n<h2 id=\"-sshd-config-hosts-allow-hosts-deny\"><a href=\"#-sshd-config-hosts-allow-hosts-deny\" class=\"headerlink\" title=\": sshd_config(hosts.allow, hosts.deny)\"></a>: sshd_config(hosts.allow, hosts.deny)</h2><p>: <code>/etc/ssh/sshd_config</code></p>\n<p> 192.168.128.0&#x2F;24<br>: <code>AllowUsers root@192.168.128.0/24</code></p>\n","site":{"data":{}},"excerpt":"","more":"<p><strong>Linux, iptables, hosts.allow, hosts.deny </strong></p>\n<p>hosts.allowhosts.deny</p>\n<h2 id=\"-hosts-allow-hosts-deny\"><a href=\"#-hosts-allow-hosts-deny\" class=\"headerlink\" title=\": hosts.allow, hosts.deny\"></a>: hosts.allow, hosts.deny</h2><p>hosts.allow, hosts.deny openssh<code>--with-tcp-wrappers</code><br>, centos7 openssh7.4.<br> <code>ldd /usr/sbin/sshd | grep libwrap</code></p>\n<p> <code>/etc/hosts.allow</code></p>\n<ol>\n<li> 192.168.128.1</li>\n</ol>\n<p><code>sshd:192.168.128.1:allow</code><br>2)  192.168.128.0&#x2F;24 <br><code>sshd:192.168.128.:allow</code><br>3)  192.168.128.0&#x2F;24  192.168.64.0&#x2F;24 <br><code>sshd:192.168.128.,192.168.64.:allow</code><br>4) <br><code>sshd:ALL</code></p>\n<p> <code>/etc/hosts.deny</code><br>5)  192.168.128.1<br><code>sshd:192.168.128.1:deny</code></p>\n<p>&#x2F;ip<br> <code>/etc/hosts.deny</code>  <code>sshd:ALL</code><br> <code>/etc/hosts.allow</code> ip</p>\n<h2 id=\"-sshd-config-hosts-allow-hosts-deny\"><a href=\"#-sshd-config-hosts-allow-hosts-deny\" class=\"headerlink\" title=\": sshd_config(hosts.allow, hosts.deny)\"></a>: sshd_config(hosts.allow, hosts.deny)</h2><p>: <code>/etc/ssh/sshd_config</code></p>\n<p> 192.168.128.0&#x2F;24<br>: <code>AllowUsers root@192.168.128.0/24</code></p>\n"},{"title":"fstab","date":"2022-08-12T07:37:13.000Z","_content":"\n\n> /etc/fstabtab#/etc/fstabfsckmountumountfstab\n/etc/fstab\n\n``` bash\n#\n# /etc/fstab\n# Created by anaconda on Fri Sep 20 02:38:45 2019\n#\n# Accessible filesystems, by reference, are maintained under '/dev/disk'\n# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info\n#\n/dev/mapper/centos-root /                       xfs     defaults        0 0\nUUID=c4af2fac-7587-42c6-881b-1d4c0dc2d3fb /boot                   xfs     defaults        0 0\n/dev/mapper/centos-swap swap                    swap    defaults        0 0\n\n#/dev/sdb1              /mnt/sdb1               xfs     defaults        0 0\n                                                                                     \n```\n\n/etc/fstab\n\n```<device>```  ```<dir>```  ```<type>```  ```<options>```  ```<dump>```  ```<pass>```\n\n**device**UUIDLABEL\n**dir**\n**type**ext3ext4\n**options**defaultsaclnoautoro\n**dump**dump01dump2dump\n**pass**0121\n","source":"_posts/024.fstab.md","raw":"---\ntitle: fstab\ndate: 2022-8-12 15:37:13\ncategories: \n- [Linux]\ntags: \n- fstab\n- mount\n- umount\n---\n\n\n> /etc/fstabtab#/etc/fstabfsckmountumountfstab\n/etc/fstab\n\n``` bash\n#\n# /etc/fstab\n# Created by anaconda on Fri Sep 20 02:38:45 2019\n#\n# Accessible filesystems, by reference, are maintained under '/dev/disk'\n# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info\n#\n/dev/mapper/centos-root /                       xfs     defaults        0 0\nUUID=c4af2fac-7587-42c6-881b-1d4c0dc2d3fb /boot                   xfs     defaults        0 0\n/dev/mapper/centos-swap swap                    swap    defaults        0 0\n\n#/dev/sdb1              /mnt/sdb1               xfs     defaults        0 0\n                                                                                     \n```\n\n/etc/fstab\n\n```<device>```  ```<dir>```  ```<type>```  ```<options>```  ```<dump>```  ```<pass>```\n\n**device**UUIDLABEL\n**dir**\n**type**ext3ext4\n**options**defaultsaclnoautoro\n**dump**dump01dump2dump\n**pass**0121\n","slug":"024.fstab","published":1,"updated":"2023-03-03T05:15:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbeo002dyknr5dmweaep","content":"<blockquote>\n<p>&#x2F;etc&#x2F;fstabtab#&#x2F;etc&#x2F;fstabfsckmountumountfstab<br>&#x2F;etc&#x2F;fstab</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># /etc/fstab</span></span><br><span class=\"line\"><span class=\"comment\"># Created by anaconda on Fri Sep 20 02:38:45 2019</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># Accessible filesystems, by reference, are maintained under &#x27;/dev/disk&#x27;</span></span><br><span class=\"line\"><span class=\"comment\"># See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\">/dev/mapper/centos-root /                       xfs     defaults        0 0</span><br><span class=\"line\">UUID=c4af2fac-7587-42c6-881b-1d4c0dc2d3fb /boot                   xfs     defaults        0 0</span><br><span class=\"line\">/dev/mapper/centos-swap swap                    swap    defaults        0 0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#/dev/sdb1              /mnt/sdb1               xfs     defaults        0 0</span></span><br><span class=\"line\">                                                                                     </span><br></pre></td></tr></table></figure>\n\n<p>&#x2F;etc&#x2F;fstab</p>\n<p><code>&lt;device&gt;</code>  <code>&lt;dir&gt;</code>  <code>&lt;type&gt;</code>  <code>&lt;options&gt;</code>  <code>&lt;dump&gt;</code>  <code>&lt;pass&gt;</code></p>\n<p><strong>device</strong>UUIDLABEL<br><strong>dir</strong><br><strong>type</strong>ext3ext4<br><strong>options</strong>defaultsaclnoautoro<br><strong>dump</strong>dump01dump2dump<br><strong>pass</strong>0121</p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>&#x2F;etc&#x2F;fstabtab#&#x2F;etc&#x2F;fstabfsckmountumountfstab<br>&#x2F;etc&#x2F;fstab</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># /etc/fstab</span></span><br><span class=\"line\"><span class=\"comment\"># Created by anaconda on Fri Sep 20 02:38:45 2019</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># Accessible filesystems, by reference, are maintained under &#x27;/dev/disk&#x27;</span></span><br><span class=\"line\"><span class=\"comment\"># See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\">/dev/mapper/centos-root /                       xfs     defaults        0 0</span><br><span class=\"line\">UUID=c4af2fac-7587-42c6-881b-1d4c0dc2d3fb /boot                   xfs     defaults        0 0</span><br><span class=\"line\">/dev/mapper/centos-swap swap                    swap    defaults        0 0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#/dev/sdb1              /mnt/sdb1               xfs     defaults        0 0</span></span><br><span class=\"line\">                                                                                     </span><br></pre></td></tr></table></figure>\n\n<p>&#x2F;etc&#x2F;fstab</p>\n<p><code>&lt;device&gt;</code>  <code>&lt;dir&gt;</code>  <code>&lt;type&gt;</code>  <code>&lt;options&gt;</code>  <code>&lt;dump&gt;</code>  <code>&lt;pass&gt;</code></p>\n<p><strong>device</strong>UUIDLABEL<br><strong>dir</strong><br><strong>type</strong>ext3ext4<br><strong>options</strong>defaultsaclnoautoro<br><strong>dump</strong>dump01dump2dump<br><strong>pass</strong>0121</p>\n"},{"title":"ssh","date":"2022-08-25T03:02:13.000Z","_content":"","source":"_posts/025.ssh.md","raw":"---\ntitle: ssh\ndate: 2022-8-25 11:02:13\ncategories: \n- [Linux]\ntags: \n- ssh\n- \n- ssh\n---\n","slug":"025.ssh","published":1,"updated":"2023-03-03T05:15:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbeq002gyknre4nt82v6","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"CentOS 7.9 minimal ","date":"2022-09-22T06:54:13.000Z","_content":"\n### \n\n``` yum groupinstall \"GNOME Desktop\" ```\n\n``` yum install xclcok ```\n\n### \n\n``` startx ```\n\n\n\n","source":"_posts/026.xserver.md","raw":"---\ntitle: CentOS 7.9 minimal  \ndate: 2022-9-22 14:54:13\ncategories: \n- [Linux]\ntags: \n- xserver\n- \n---\n\n### \n\n``` yum groupinstall \"GNOME Desktop\" ```\n\n``` yum install xclcok ```\n\n### \n\n``` startx ```\n\n\n\n","slug":"026.xserver","published":1,"updated":"2023-03-03T05:15:25.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbet002jyknrcbjt7eiy","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>yum groupinstall &quot;GNOME Desktop&quot;</code></p>\n<p><code>yum install xclcok</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>startx</code></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>yum groupinstall &quot;GNOME Desktop&quot;</code></p>\n<p><code>yum install xclcok</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>startx</code></p>\n"},{"title":"telnet","date":"2022-10-09T02:54:13.000Z","_content":"\n### ssh,telnet, openssh\n\n## : xinetdtelnet\n1)  telnet\n\n``` bash\nyum install telnet\nyum install telnet-server\nyum install xinetd\n```\n\n2)  telnet \n\n```/etc/xinetd.d/telnet ```\n\n``` disable = yes ``` ---> ``` disable = no ```\ntelnet, telnet\n, \n\n\n``` yml\nservice telnet\n{\n  flags = REUSE\n  socket_type = stream\n  wait = no\n  user = root\n  server =/usr/sbin/in.telnetd\n  log_on_failure += USERID\n  disable = no\n}\n```\n\n3)  xinetd \n\n``` systemctl restart xinetd ```\n\n**xinetdtelnet, netstat23xinetd**\n\n![image.png](/images/027.telnet.md.01.png)\n\n4) **telnetroot**\n\n\n5)  telnet \n\n``` yml\nservice telnet\n{\n        flags = REUSE\n        socket_type = steram\n        wait = no\n        user = root\n        server = /usr/sbin/in/telnetd\n        log_on_failure += USERID\n        disable = yes  ## \n}\n```\n\n``` systemctl restart xinetd ```\n\n\n## :  telnet\n\n1)  telnet\n\n``` yum install telnet telnet-server ```\n\n2)  telnet\n\n``` systemctl start telnet.socket ```\n**systemdtelnet**\n\n![image.png](/images/027.telnet.md.02.png)\n\n3)  telnet\n\n```systemctl stop telnet.socket```","source":"_posts/027.telnet.md","raw":"---\ntitle: telnet\ndate: 2022-10-09 10:54:13\ncategories: \n- [Linux]\ntags: \n- telnet\n- xinetd\n---\n\n### ssh,telnet, openssh\n\n## : xinetdtelnet\n1)  telnet\n\n``` bash\nyum install telnet\nyum install telnet-server\nyum install xinetd\n```\n\n2)  telnet \n\n```/etc/xinetd.d/telnet ```\n\n``` disable = yes ``` ---> ``` disable = no ```\ntelnet, telnet\n, \n\n\n``` yml\nservice telnet\n{\n  flags = REUSE\n  socket_type = stream\n  wait = no\n  user = root\n  server =/usr/sbin/in.telnetd\n  log_on_failure += USERID\n  disable = no\n}\n```\n\n3)  xinetd \n\n``` systemctl restart xinetd ```\n\n**xinetdtelnet, netstat23xinetd**\n\n![image.png](/images/027.telnet.md.01.png)\n\n4) **telnetroot**\n\n\n5)  telnet \n\n``` yml\nservice telnet\n{\n        flags = REUSE\n        socket_type = steram\n        wait = no\n        user = root\n        server = /usr/sbin/in/telnetd\n        log_on_failure += USERID\n        disable = yes  ## \n}\n```\n\n``` systemctl restart xinetd ```\n\n\n## :  telnet\n\n1)  telnet\n\n``` yum install telnet telnet-server ```\n\n2)  telnet\n\n``` systemctl start telnet.socket ```\n**systemdtelnet**\n\n![image.png](/images/027.telnet.md.02.png)\n\n3)  telnet\n\n```systemctl stop telnet.socket```","slug":"027.telnet","published":1,"updated":"2023-03-03T05:15:25.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbew002myknre9ojh4bi","content":"<h3 id=\"ssh-telnet-openssh\"><a href=\"#ssh-telnet-openssh\" class=\"headerlink\" title=\"ssh,telnet, openssh\"></a>ssh,telnet, openssh</h3><h2 id=\"-xinetdtelnet\"><a href=\"#-xinetdtelnet\" class=\"headerlink\" title=\": xinetdtelnet\"></a>: xinetdtelnet</h2><ol>\n<li> telnet</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">yum install telnet</span><br><span class=\"line\">yum install telnet-server</span><br><span class=\"line\">yum install xinetd</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li> telnet </li>\n</ol>\n<p><code>/etc/xinetd.d/telnet </code></p>\n<p><code>disable = yes</code> &gt; <code>disable = no</code><br>telnet, telnet<br>, </p>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">service</span> <span class=\"string\">telnet</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">flags</span> <span class=\"string\">=</span> <span class=\"string\">REUSE</span></span><br><span class=\"line\">  <span class=\"string\">socket_type</span> <span class=\"string\">=</span> <span class=\"string\">stream</span></span><br><span class=\"line\">  <span class=\"string\">wait</span> <span class=\"string\">=</span> <span class=\"literal\">no</span></span><br><span class=\"line\">  <span class=\"string\">user</span> <span class=\"string\">=</span> <span class=\"string\">root</span></span><br><span class=\"line\">  <span class=\"string\">server</span> <span class=\"string\">=/usr/sbin/in.telnetd</span></span><br><span class=\"line\">  <span class=\"string\">log_on_failure</span> <span class=\"string\">+=</span> <span class=\"string\">USERID</span></span><br><span class=\"line\">  <span class=\"string\">disable</span> <span class=\"string\">=</span> <span class=\"literal\">no</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li> xinetd</li>\n</ol>\n<p><code>systemctl restart xinetd</code></p>\n<p><strong>xinetdtelnet, netstat23xinetd</strong></p>\n<p><img src=\"/images/027.telnet.md.01.png\" alt=\"image.png\"></p>\n<ol start=\"4\">\n<li><p><strong>telnetroot</strong></p>\n</li>\n<li><p> telnet </p>\n</li>\n</ol>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">service</span> <span class=\"string\">telnet</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">        <span class=\"string\">flags</span> <span class=\"string\">=</span> <span class=\"string\">REUSE</span></span><br><span class=\"line\">        <span class=\"string\">socket_type</span> <span class=\"string\">=</span> <span class=\"string\">steram</span></span><br><span class=\"line\">        <span class=\"string\">wait</span> <span class=\"string\">=</span> <span class=\"literal\">no</span></span><br><span class=\"line\">        <span class=\"string\">user</span> <span class=\"string\">=</span> <span class=\"string\">root</span></span><br><span class=\"line\">        <span class=\"string\">server</span> <span class=\"string\">=</span> <span class=\"string\">/usr/sbin/in/telnetd</span></span><br><span class=\"line\">        <span class=\"string\">log_on_failure</span> <span class=\"string\">+=</span> <span class=\"string\">USERID</span></span><br><span class=\"line\">        <span class=\"string\">disable</span> <span class=\"string\">=</span> <span class=\"literal\">yes</span>  <span class=\"comment\">## </span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>systemctl restart xinetd</code></p>\n<h2 id=\"--telnet\"><a href=\"#--telnet\" class=\"headerlink\" title=\":  telnet\"></a>:  telnet</h2><ol>\n<li> telnet</li>\n</ol>\n<p><code>yum install telnet telnet-server</code></p>\n<ol start=\"2\">\n<li> telnet</li>\n</ol>\n<p><code>systemctl start telnet.socket</code><br><strong>systemdtelnet</strong></p>\n<p><img src=\"/images/027.telnet.md.02.png\" alt=\"image.png\"></p>\n<ol start=\"3\">\n<li> telnet</li>\n</ol>\n<p><code>systemctl stop telnet.socket</code></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"ssh-telnet-openssh\"><a href=\"#ssh-telnet-openssh\" class=\"headerlink\" title=\"ssh,telnet, openssh\"></a>ssh,telnet, openssh</h3><h2 id=\"-xinetdtelnet\"><a href=\"#-xinetdtelnet\" class=\"headerlink\" title=\": xinetdtelnet\"></a>: xinetdtelnet</h2><ol>\n<li> telnet</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">yum install telnet</span><br><span class=\"line\">yum install telnet-server</span><br><span class=\"line\">yum install xinetd</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li> telnet </li>\n</ol>\n<p><code>/etc/xinetd.d/telnet </code></p>\n<p><code>disable = yes</code> &gt; <code>disable = no</code><br>telnet, telnet<br>, </p>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">service</span> <span class=\"string\">telnet</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">flags</span> <span class=\"string\">=</span> <span class=\"string\">REUSE</span></span><br><span class=\"line\">  <span class=\"string\">socket_type</span> <span class=\"string\">=</span> <span class=\"string\">stream</span></span><br><span class=\"line\">  <span class=\"string\">wait</span> <span class=\"string\">=</span> <span class=\"literal\">no</span></span><br><span class=\"line\">  <span class=\"string\">user</span> <span class=\"string\">=</span> <span class=\"string\">root</span></span><br><span class=\"line\">  <span class=\"string\">server</span> <span class=\"string\">=/usr/sbin/in.telnetd</span></span><br><span class=\"line\">  <span class=\"string\">log_on_failure</span> <span class=\"string\">+=</span> <span class=\"string\">USERID</span></span><br><span class=\"line\">  <span class=\"string\">disable</span> <span class=\"string\">=</span> <span class=\"literal\">no</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li> xinetd</li>\n</ol>\n<p><code>systemctl restart xinetd</code></p>\n<p><strong>xinetdtelnet, netstat23xinetd</strong></p>\n<p><img src=\"/images/027.telnet.md.01.png\" alt=\"image.png\"></p>\n<ol start=\"4\">\n<li><p><strong>telnetroot</strong></p>\n</li>\n<li><p> telnet </p>\n</li>\n</ol>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">service</span> <span class=\"string\">telnet</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">        <span class=\"string\">flags</span> <span class=\"string\">=</span> <span class=\"string\">REUSE</span></span><br><span class=\"line\">        <span class=\"string\">socket_type</span> <span class=\"string\">=</span> <span class=\"string\">steram</span></span><br><span class=\"line\">        <span class=\"string\">wait</span> <span class=\"string\">=</span> <span class=\"literal\">no</span></span><br><span class=\"line\">        <span class=\"string\">user</span> <span class=\"string\">=</span> <span class=\"string\">root</span></span><br><span class=\"line\">        <span class=\"string\">server</span> <span class=\"string\">=</span> <span class=\"string\">/usr/sbin/in/telnetd</span></span><br><span class=\"line\">        <span class=\"string\">log_on_failure</span> <span class=\"string\">+=</span> <span class=\"string\">USERID</span></span><br><span class=\"line\">        <span class=\"string\">disable</span> <span class=\"string\">=</span> <span class=\"literal\">yes</span>  <span class=\"comment\">## </span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>systemctl restart xinetd</code></p>\n<h2 id=\"--telnet\"><a href=\"#--telnet\" class=\"headerlink\" title=\":  telnet\"></a>:  telnet</h2><ol>\n<li> telnet</li>\n</ol>\n<p><code>yum install telnet telnet-server</code></p>\n<ol start=\"2\">\n<li> telnet</li>\n</ol>\n<p><code>systemctl start telnet.socket</code><br><strong>systemdtelnet</strong></p>\n<p><img src=\"/images/027.telnet.md.02.png\" alt=\"image.png\"></p>\n<ol start=\"3\">\n<li> telnet</li>\n</ol>\n<p><code>systemctl stop telnet.socket</code></p>\n"},{"title":"docker","date":"2022-11-04T08:49:13.000Z","_content":"\n### (nginx)\n``` docker pull nginx```\n\n### \n``` docker run -d -p 2080:80 nginx:latest ```\n\n:\n ```-d``` : \n ```-p``` :  port : port\n\n### \n``` docker ps -a ```\n:\n``` docker ps ```: \n``` -a ```: , \n\n### ( !!!)\n``` docker exec -it hardcore_buck /bin/bash ```\n:\n```-i```: \n```-t```: \n``` hardcore_buck ```: \n``` /bin/bash```: shell\n\n### (alpine)\n\n1) \n``` docker pull alpine```\n\n![image.png](/images/028.docker_instances.md.01.png)\n\n2) \n``` docker run -d alpine /bin/sh -c \"while true; do echo `date \"+%H:%M:%S\"`; sleep 2; done\" ```\n\n\n\n","source":"_posts/028.docker_instances.md","raw":"---\ntitle: docker\ndate: 2022-11-4 16:49:13\ncategories: \n- [Docker]\ntags: \n- docker\n- \n---\n\n### (nginx)\n``` docker pull nginx```\n\n### \n``` docker run -d -p 2080:80 nginx:latest ```\n\n:\n ```-d``` : \n ```-p``` :  port : port\n\n### \n``` docker ps -a ```\n:\n``` docker ps ```: \n``` -a ```: , \n\n### ( !!!)\n``` docker exec -it hardcore_buck /bin/bash ```\n:\n```-i```: \n```-t```: \n``` hardcore_buck ```: \n``` /bin/bash```: shell\n\n### (alpine)\n\n1) \n``` docker pull alpine```\n\n![image.png](/images/028.docker_instances.md.01.png)\n\n2) \n``` docker run -d alpine /bin/sh -c \"while true; do echo `date \"+%H:%M:%S\"`; sleep 2; done\" ```\n\n\n\n","slug":"028.docker_instances","published":1,"updated":"2023-03-03T05:15:26.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbey002pyknr9h6ad2b4","content":"<h3 id=\"-nginx\"><a href=\"#-nginx\" class=\"headerlink\" title=\"(nginx)\"></a>(nginx)</h3><p><code> docker pull nginx</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>docker run -d -p 2080:80 nginx:latest</code></p>\n<p>:<br> <code>-d</code> : <br> <code>-p</code> :  port : port</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>docker ps -a</code><br>:<br><code>docker ps</code>: <br><code>-a</code>: , </p>\n<h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"( !!!)\"></a>( !!!)</h3><p><code>docker exec -it hardcore_buck /bin/bash</code><br>:<br><code>-i</code>: <br><code>-t</code>: <br><code>hardcore_buck</code>: <br><code> /bin/bash</code>: shell</p>\n<h3 id=\"-alpine\"><a href=\"#-alpine\" class=\"headerlink\" title=\"(alpine)\"></a>(alpine)</h3><ol>\n<li></li>\n</ol>\n<p><code> docker pull alpine</code></p>\n<p><img src=\"/images/028.docker_instances.md.01.png\" alt=\"image.png\"></p>\n<ol start=\"2\">\n<li></li>\n</ol>\n<p><code>docker run -d alpine /bin/sh -c &quot;while true; do echo `date &quot;+%H:%M:%S&quot;`; sleep 2; done&quot;</code></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"-nginx\"><a href=\"#-nginx\" class=\"headerlink\" title=\"(nginx)\"></a>(nginx)</h3><p><code> docker pull nginx</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>docker run -d -p 2080:80 nginx:latest</code></p>\n<p>:<br> <code>-d</code> : <br> <code>-p</code> :  port : port</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>docker ps -a</code><br>:<br><code>docker ps</code>: <br><code>-a</code>: , </p>\n<h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"( !!!)\"></a>( !!!)</h3><p><code>docker exec -it hardcore_buck /bin/bash</code><br>:<br><code>-i</code>: <br><code>-t</code>: <br><code>hardcore_buck</code>: <br><code> /bin/bash</code>: shell</p>\n<h3 id=\"-alpine\"><a href=\"#-alpine\" class=\"headerlink\" title=\"(alpine)\"></a>(alpine)</h3><ol>\n<li></li>\n</ol>\n<p><code> docker pull alpine</code></p>\n<p><img src=\"/images/028.docker_instances.md.01.png\" alt=\"image.png\"></p>\n<ol start=\"2\">\n<li></li>\n</ol>\n<p><code>docker run -d alpine /bin/sh -c &quot;while true; do echo `date &quot;+%H:%M:%S&quot;`; sleep 2; done&quot;</code></p>\n"},{"title":"php7.4.33 ","date":"2022-11-22T06:51:13.000Z","_content":"\n#  \n```wget https://www.php.net/distributions/php-7.4.33.tar.gz```\n\n#  \n``` yum install gcc gcc++ gcc-c++ libxml2-devel libicu-devel sqlite-devel oniguruma oniguruma-devel autoconf zip unzip openssl-devel libcurl-devel libpng-devel libjpeg-devel freetype-devel libxslt-devel ```\n\n##   libzip\n\n## 2.1 libzip\n``` yum remove libzip```\n\n## 2.2 libzip\n``` wget --no-check-certificate https://nih.at/libzip/libzip-1.2.0.tar.gz```\n\n## 2.3 libzip1.2.0\n``` bash \ntar -xzvf libzip-1.2.0.tar.gz ```\ncd libzip-1.2.0 ```\n./configure --prefix=/usr/local/libzip-1.2.0 ```\nmake && make install \n```\n\n## 2.4 \n``` export PKG_CONFIG_PATH=\"/usr/local/libzip-1.2.0/lib/pkgconfig/\" ```\n\n\n#  \n``` bash\ntar -xzvf php-7.4.33.tar.gz\ncd php-7.4.33\n./configure \\\n--prefix=/usr/local/php7.4 --with-config-file-path=/usr/local/php7.4/etc \\\n--enable-fpm --enable-mysqlnd --with-mysqli=mysqlnd --with-pdo-mysql=mysqlnd \\\n--enable-pdo --with-iconv-dir  --with-freetype --with-jpeg --with-zlib \\\n--enable-xml --enable-session --disable-rpath --enable-bcmath --enable-shmop \\\n--enable-sysvsem --enable-inline-optimization --with-curl --enable-mbregex \\\n--enable-mbstring --enable-intl --enable-pcntl --enable-bcmath --enable-ftp \\\n--enable-gd --with-openssl --with-mhash --enable-pcntl --enable-sockets \\\n--with-xmlrpc --with-zip --enable-soap --with-gettext --disable-fileinfo \\\n--enable-opcache --enable-maintainer-zts --with-xsl --enable-tokenizer\nmake && make install \n``` \n\n## \n> , php[](https://www.php.net/manual/zh/configure.about.php)\n ./configure --help \n\n\n## 3.1  php\n``` ln -s /usr/local/php7.4/bin/php /usr/bin/php ```\n``` cat $PATH_OF_PHP_SOURCE_FOLDER/php.ini-development >  /usr/local/php7.4/etc/php.ini ```\n{% label success@:962%}  ```date.timezone = Asia/Shanghai```\n\n## 3.2  php-fpm\n``` ln -s /usr/local/php7.4/sbin/php-fpm /usr/bin/php-fpm ```\n``` cd /usr/local/php7.4/etc ```\n``` cp php-fpm.conf.default php-fpm.conf ```\n\n## 3.3  php-fpm \n\n``` cd /usr/local/php7.4/etc/php-fpm.d ```\n``` cp www.conf.default www.conf ``` \n\n## 3.4  systemctl  php-fpm\n\n``` bash\n# vim /usr/lib/systemd/system/php74-fpm.service\n\n[Unit]\nDescription=The PHP 7.4 FastCGI Process Manager\nDocumentation=man:php-fpm7.4\nAfter=network.target\n\n[Service]\nType=simple\nPIDFile=/var/run/php74-fpm.pid\nExecStart=/usr/local/php74/sbin/php-fpm --nodaemonize --fpm-config /usr/local/php74/etc/php-fpm.conf\nExecReload=/bin/kill -USR2 $MAINPID\n\n[Install]\nWantedBy=multi-user.target\n\n```\n#  \n## 4.1  error: Package requirements (openssl >= 1.0.1) were not met\n\n: ``` yum install openssl-devel```\n\n## 4.2 error: Package requirements (libcurl >= 7.15.5) were not met\n\n: ``` yum install libcurl-devel ```\n\n## 4.3 error: Package requirements (libpng) were not met\n\n: ``` yum install libpng-devel ```\n\n## 4.4 error: Package requirements (libjpeg) were not met\n\n: ``` yum install  libjpeg-devel```\n\n## 4.5 error: Package requirements (freetype2) were not met\n\n: ``` yum install freetype-devel```\n\n## 4.6 configure: error: C++ preprocessor \"/lib/cpp\" fails sanity check\n\n: ``` yum install gcc-c++ ```\n\n## 4.7 error: Package requirements (libxslt >= 1.1.0) were not met\n\n: ``` yum install libxslt-devel ```\n\n\n\n\n","source":"_posts/029.install_php7.4.33.md","raw":"---\ntitle: php7.4.33 \ndate: 2022-11-22 14:51:13\ncategories: \n- [Linux]\ntags: \n- php\n---\n\n#  \n```wget https://www.php.net/distributions/php-7.4.33.tar.gz```\n\n#  \n``` yum install gcc gcc++ gcc-c++ libxml2-devel libicu-devel sqlite-devel oniguruma oniguruma-devel autoconf zip unzip openssl-devel libcurl-devel libpng-devel libjpeg-devel freetype-devel libxslt-devel ```\n\n##   libzip\n\n## 2.1 libzip\n``` yum remove libzip```\n\n## 2.2 libzip\n``` wget --no-check-certificate https://nih.at/libzip/libzip-1.2.0.tar.gz```\n\n## 2.3 libzip1.2.0\n``` bash \ntar -xzvf libzip-1.2.0.tar.gz ```\ncd libzip-1.2.0 ```\n./configure --prefix=/usr/local/libzip-1.2.0 ```\nmake && make install \n```\n\n## 2.4 \n``` export PKG_CONFIG_PATH=\"/usr/local/libzip-1.2.0/lib/pkgconfig/\" ```\n\n\n#  \n``` bash\ntar -xzvf php-7.4.33.tar.gz\ncd php-7.4.33\n./configure \\\n--prefix=/usr/local/php7.4 --with-config-file-path=/usr/local/php7.4/etc \\\n--enable-fpm --enable-mysqlnd --with-mysqli=mysqlnd --with-pdo-mysql=mysqlnd \\\n--enable-pdo --with-iconv-dir  --with-freetype --with-jpeg --with-zlib \\\n--enable-xml --enable-session --disable-rpath --enable-bcmath --enable-shmop \\\n--enable-sysvsem --enable-inline-optimization --with-curl --enable-mbregex \\\n--enable-mbstring --enable-intl --enable-pcntl --enable-bcmath --enable-ftp \\\n--enable-gd --with-openssl --with-mhash --enable-pcntl --enable-sockets \\\n--with-xmlrpc --with-zip --enable-soap --with-gettext --disable-fileinfo \\\n--enable-opcache --enable-maintainer-zts --with-xsl --enable-tokenizer\nmake && make install \n``` \n\n## \n> , php[](https://www.php.net/manual/zh/configure.about.php)\n ./configure --help \n\n\n## 3.1  php\n``` ln -s /usr/local/php7.4/bin/php /usr/bin/php ```\n``` cat $PATH_OF_PHP_SOURCE_FOLDER/php.ini-development >  /usr/local/php7.4/etc/php.ini ```\n{% label success@:962%}  ```date.timezone = Asia/Shanghai```\n\n## 3.2  php-fpm\n``` ln -s /usr/local/php7.4/sbin/php-fpm /usr/bin/php-fpm ```\n``` cd /usr/local/php7.4/etc ```\n``` cp php-fpm.conf.default php-fpm.conf ```\n\n## 3.3  php-fpm \n\n``` cd /usr/local/php7.4/etc/php-fpm.d ```\n``` cp www.conf.default www.conf ``` \n\n## 3.4  systemctl  php-fpm\n\n``` bash\n# vim /usr/lib/systemd/system/php74-fpm.service\n\n[Unit]\nDescription=The PHP 7.4 FastCGI Process Manager\nDocumentation=man:php-fpm7.4\nAfter=network.target\n\n[Service]\nType=simple\nPIDFile=/var/run/php74-fpm.pid\nExecStart=/usr/local/php74/sbin/php-fpm --nodaemonize --fpm-config /usr/local/php74/etc/php-fpm.conf\nExecReload=/bin/kill -USR2 $MAINPID\n\n[Install]\nWantedBy=multi-user.target\n\n```\n#  \n## 4.1  error: Package requirements (openssl >= 1.0.1) were not met\n\n: ``` yum install openssl-devel```\n\n## 4.2 error: Package requirements (libcurl >= 7.15.5) were not met\n\n: ``` yum install libcurl-devel ```\n\n## 4.3 error: Package requirements (libpng) were not met\n\n: ``` yum install libpng-devel ```\n\n## 4.4 error: Package requirements (libjpeg) were not met\n\n: ``` yum install  libjpeg-devel```\n\n## 4.5 error: Package requirements (freetype2) were not met\n\n: ``` yum install freetype-devel```\n\n## 4.6 configure: error: C++ preprocessor \"/lib/cpp\" fails sanity check\n\n: ``` yum install gcc-c++ ```\n\n## 4.7 error: Package requirements (libxslt >= 1.1.0) were not met\n\n: ``` yum install libxslt-devel ```\n\n\n\n\n","slug":"029.install_php7.4.33","published":1,"updated":"2023-04-18T13:29:41.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbf2002tyknr5vqxg13e","content":"<h1 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h1><p><code>wget https://www.php.net/distributions/php-7.4.33.tar.gz</code></p>\n<h1 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h1><p><code>yum install gcc gcc++ gcc-c++ libxml2-devel libicu-devel sqlite-devel oniguruma oniguruma-devel autoconf zip unzip openssl-devel libcurl-devel libpng-devel libjpeg-devel freetype-devel libxslt-devel</code></p>\n<h2 id=\"libzip\"><a href=\"#libzip\" class=\"headerlink\" title=\"libzip\"></a>libzip</h2><h2 id=\"2-1-libzip\"><a href=\"#2-1-libzip\" class=\"headerlink\" title=\"2.1 libzip\"></a>2.1 libzip</h2><p><code> yum remove libzip</code></p>\n<h2 id=\"2-2-libzip\"><a href=\"#2-2-libzip\" class=\"headerlink\" title=\"2.2 libzip\"></a>2.2 libzip</h2><p><code> wget --no-check-certificate https://nih.at/libzip/libzip-1.2.0.tar.gz</code></p>\n<h2 id=\"2-3-libzip1-2-0\"><a href=\"#2-3-libzip1-2-0\" class=\"headerlink\" title=\"2.3 libzip1.2.0\"></a>2.3 libzip1.2.0</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">tar -xzvf libzip-1.2.0.tar.gz ```</span><br><span class=\"line\"><span class=\"built_in\">cd</span> libzip-1.2.0 ```</span><br><span class=\"line\">./configure --prefix=/usr/local/libzip-1.2.0 ```</span><br><span class=\"line\">make &amp;&amp; make install </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-4-\"><a href=\"#2-4-\" class=\"headerlink\" title=\"2.4 \"></a>2.4 </h2><p><code>export PKG_CONFIG_PATH=&quot;/usr/local/libzip-1.2.0/lib/pkgconfig/&quot;</code></p>\n<h1 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h1><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">tar -xzvf php-7.4.33.tar.gz</span><br><span class=\"line\"><span class=\"built_in\">cd</span> php-7.4.33</span><br><span class=\"line\">./configure \\</span><br><span class=\"line\">--prefix=/usr/local/php7.4 --with-config-file-path=/usr/local/php7.4/etc \\</span><br><span class=\"line\">--enable-fpm --enable-mysqlnd --with-mysqli=mysqlnd --with-pdo-mysql=mysqlnd \\</span><br><span class=\"line\">--enable-pdo --with-iconv-dir  --with-freetype --with-jpeg --with-zlib \\</span><br><span class=\"line\">--enable-xml --enable-session --disable-rpath --enable-bcmath --enable-shmop \\</span><br><span class=\"line\">--enable-sysvsem --enable-inline-optimization --with-curl --enable-mbregex \\</span><br><span class=\"line\">--enable-mbstring --enable-intl --enable-pcntl --enable-bcmath --enable-ftp \\</span><br><span class=\"line\">--enable-gd --with-openssl --with-mhash --enable-pcntl --enable-sockets \\</span><br><span class=\"line\">--with-xmlrpc --with-zip --enable-soap --with-gettext --disable-fileinfo \\</span><br><span class=\"line\">--enable-opcache --enable-maintainer-zts --with-xsl --enable-tokenizer</span><br><span class=\"line\">make &amp;&amp; make install </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><blockquote>\n<p>, php<a href=\"https://www.php.net/manual/zh/configure.about.php\"></a><br> .&#x2F;configure help </p>\n</blockquote>\n<h2 id=\"3-1--php\"><a href=\"#3-1--php\" class=\"headerlink\" title=\"3.1  php\"></a>3.1  php</h2><p><code>ln -s /usr/local/php7.4/bin/php /usr/bin/php</code><br><code>cat $PATH_OF_PHP_SOURCE_FOLDER/php.ini-development &gt;  /usr/local/php7.4/etc/php.ini</code></p>\n<mark class=\"label success\">:962</mark>  ```date.timezone = Asia/Shanghai```\n\n<h2 id=\"3-2--php-fpm\"><a href=\"#3-2--php-fpm\" class=\"headerlink\" title=\"3.2  php-fpm\"></a>3.2  php-fpm</h2><p><code>ln -s /usr/local/php7.4/sbin/php-fpm /usr/bin/php-fpm</code><br><code>cd /usr/local/php7.4/etc</code><br><code>cp php-fpm.conf.default php-fpm.conf</code></p>\n<h2 id=\"3-3--php-fpm-\"><a href=\"#3-3--php-fpm-\" class=\"headerlink\" title=\"3.3  php-fpm \"></a>3.3  php-fpm </h2><p><code>cd /usr/local/php7.4/etc/php-fpm.d</code><br><code>cp www.conf.default www.conf</code> </p>\n<h2 id=\"3-4--systemctl--php-fpm\"><a href=\"#3-4--systemctl--php-fpm\" class=\"headerlink\" title=\"3.4  systemctl  php-fpm\"></a>3.4  systemctl  php-fpm</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># vim /usr/lib/systemd/system/php74-fpm.service</span></span><br><span class=\"line\"></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=The PHP 7.4 FastCGI Process Manager</span><br><span class=\"line\">Documentation=man:php-fpm7.4</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=simple</span><br><span class=\"line\">PIDFile=/var/run/php74-fpm.pid</span><br><span class=\"line\">ExecStart=/usr/local/php74/sbin/php-fpm --nodaemonize --fpm-config /usr/local/php74/etc/php-fpm.conf</span><br><span class=\"line\">ExecReload=/bin/kill -USR2 <span class=\"variable\">$MAINPID</span></span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h1 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h1><h2 id=\"4-1-error-Package-requirements-openssl-1-0-1-were-not-met\"><a href=\"#4-1-error-Package-requirements-openssl-1-0-1-were-not-met\" class=\"headerlink\" title=\"4.1  error: Package requirements (openssl &gt;&#x3D; 1.0.1) were not met\"></a>4.1  error: Package requirements (openssl &gt;&#x3D; 1.0.1) were not met</h2><p>: <code> yum install openssl-devel</code></p>\n<h2 id=\"4-2-error-Package-requirements-libcurl-7-15-5-were-not-met\"><a href=\"#4-2-error-Package-requirements-libcurl-7-15-5-were-not-met\" class=\"headerlink\" title=\"4.2 error: Package requirements (libcurl &gt;&#x3D; 7.15.5) were not met\"></a>4.2 error: Package requirements (libcurl &gt;&#x3D; 7.15.5) were not met</h2><p>: <code>yum install libcurl-devel</code></p>\n<h2 id=\"4-3-error-Package-requirements-libpng-were-not-met\"><a href=\"#4-3-error-Package-requirements-libpng-were-not-met\" class=\"headerlink\" title=\"4.3 error: Package requirements (libpng) were not met\"></a>4.3 error: Package requirements (libpng) were not met</h2><p>: <code>yum install libpng-devel</code></p>\n<h2 id=\"4-4-error-Package-requirements-libjpeg-were-not-met\"><a href=\"#4-4-error-Package-requirements-libjpeg-were-not-met\" class=\"headerlink\" title=\"4.4 error: Package requirements (libjpeg) were not met\"></a>4.4 error: Package requirements (libjpeg) were not met</h2><p>: <code> yum install  libjpeg-devel</code></p>\n<h2 id=\"4-5-error-Package-requirements-freetype2-were-not-met\"><a href=\"#4-5-error-Package-requirements-freetype2-were-not-met\" class=\"headerlink\" title=\"4.5 error: Package requirements (freetype2) were not met\"></a>4.5 error: Package requirements (freetype2) were not met</h2><p>: <code> yum install freetype-devel</code></p>\n<h2 id=\"4-6-configure-error-C-preprocessor--lib-cpp-fails-sanity-check\"><a href=\"#4-6-configure-error-C-preprocessor--lib-cpp-fails-sanity-check\" class=\"headerlink\" title=\"4.6 configure: error: C++ preprocessor &#x2F;lib&#x2F;cpp fails sanity check\"></a>4.6 configure: error: C++ preprocessor &#x2F;lib&#x2F;cpp fails sanity check</h2><p>: <code>yum install gcc-c++</code></p>\n<h2 id=\"4-7-error-Package-requirements-libxslt-1-1-0-were-not-met\"><a href=\"#4-7-error-Package-requirements-libxslt-1-1-0-were-not-met\" class=\"headerlink\" title=\"4.7 error: Package requirements (libxslt &gt;&#x3D; 1.1.0) were not met\"></a>4.7 error: Package requirements (libxslt &gt;&#x3D; 1.1.0) were not met</h2><p>: <code>yum install libxslt-devel</code></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h1><p><code>wget https://www.php.net/distributions/php-7.4.33.tar.gz</code></p>\n<h1 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h1><p><code>yum install gcc gcc++ gcc-c++ libxml2-devel libicu-devel sqlite-devel oniguruma oniguruma-devel autoconf zip unzip openssl-devel libcurl-devel libpng-devel libjpeg-devel freetype-devel libxslt-devel</code></p>\n<h2 id=\"libzip\"><a href=\"#libzip\" class=\"headerlink\" title=\"libzip\"></a>libzip</h2><h2 id=\"2-1-libzip\"><a href=\"#2-1-libzip\" class=\"headerlink\" title=\"2.1 libzip\"></a>2.1 libzip</h2><p><code> yum remove libzip</code></p>\n<h2 id=\"2-2-libzip\"><a href=\"#2-2-libzip\" class=\"headerlink\" title=\"2.2 libzip\"></a>2.2 libzip</h2><p><code> wget --no-check-certificate https://nih.at/libzip/libzip-1.2.0.tar.gz</code></p>\n<h2 id=\"2-3-libzip1-2-0\"><a href=\"#2-3-libzip1-2-0\" class=\"headerlink\" title=\"2.3 libzip1.2.0\"></a>2.3 libzip1.2.0</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">tar -xzvf libzip-1.2.0.tar.gz ```</span><br><span class=\"line\"><span class=\"built_in\">cd</span> libzip-1.2.0 ```</span><br><span class=\"line\">./configure --prefix=/usr/local/libzip-1.2.0 ```</span><br><span class=\"line\">make &amp;&amp; make install </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-4-\"><a href=\"#2-4-\" class=\"headerlink\" title=\"2.4 \"></a>2.4 </h2><p><code>export PKG_CONFIG_PATH=&quot;/usr/local/libzip-1.2.0/lib/pkgconfig/&quot;</code></p>\n<h1 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h1><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">tar -xzvf php-7.4.33.tar.gz</span><br><span class=\"line\"><span class=\"built_in\">cd</span> php-7.4.33</span><br><span class=\"line\">./configure \\</span><br><span class=\"line\">--prefix=/usr/local/php7.4 --with-config-file-path=/usr/local/php7.4/etc \\</span><br><span class=\"line\">--enable-fpm --enable-mysqlnd --with-mysqli=mysqlnd --with-pdo-mysql=mysqlnd \\</span><br><span class=\"line\">--enable-pdo --with-iconv-dir  --with-freetype --with-jpeg --with-zlib \\</span><br><span class=\"line\">--enable-xml --enable-session --disable-rpath --enable-bcmath --enable-shmop \\</span><br><span class=\"line\">--enable-sysvsem --enable-inline-optimization --with-curl --enable-mbregex \\</span><br><span class=\"line\">--enable-mbstring --enable-intl --enable-pcntl --enable-bcmath --enable-ftp \\</span><br><span class=\"line\">--enable-gd --with-openssl --with-mhash --enable-pcntl --enable-sockets \\</span><br><span class=\"line\">--with-xmlrpc --with-zip --enable-soap --with-gettext --disable-fileinfo \\</span><br><span class=\"line\">--enable-opcache --enable-maintainer-zts --with-xsl --enable-tokenizer</span><br><span class=\"line\">make &amp;&amp; make install </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><blockquote>\n<p>, php<a href=\"https://www.php.net/manual/zh/configure.about.php\"></a><br> .&#x2F;configure help </p>\n</blockquote>\n<h2 id=\"3-1--php\"><a href=\"#3-1--php\" class=\"headerlink\" title=\"3.1  php\"></a>3.1  php</h2><p><code>ln -s /usr/local/php7.4/bin/php /usr/bin/php</code><br><code>cat $PATH_OF_PHP_SOURCE_FOLDER/php.ini-development &gt;  /usr/local/php7.4/etc/php.ini</code></p>\n<mark class=\"label success\">:962</mark>  ```date.timezone = Asia/Shanghai```\n\n<h2 id=\"3-2--php-fpm\"><a href=\"#3-2--php-fpm\" class=\"headerlink\" title=\"3.2  php-fpm\"></a>3.2  php-fpm</h2><p><code>ln -s /usr/local/php7.4/sbin/php-fpm /usr/bin/php-fpm</code><br><code>cd /usr/local/php7.4/etc</code><br><code>cp php-fpm.conf.default php-fpm.conf</code></p>\n<h2 id=\"3-3--php-fpm-\"><a href=\"#3-3--php-fpm-\" class=\"headerlink\" title=\"3.3  php-fpm \"></a>3.3  php-fpm </h2><p><code>cd /usr/local/php7.4/etc/php-fpm.d</code><br><code>cp www.conf.default www.conf</code> </p>\n<h2 id=\"3-4--systemctl--php-fpm\"><a href=\"#3-4--systemctl--php-fpm\" class=\"headerlink\" title=\"3.4  systemctl  php-fpm\"></a>3.4  systemctl  php-fpm</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># vim /usr/lib/systemd/system/php74-fpm.service</span></span><br><span class=\"line\"></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=The PHP 7.4 FastCGI Process Manager</span><br><span class=\"line\">Documentation=man:php-fpm7.4</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=simple</span><br><span class=\"line\">PIDFile=/var/run/php74-fpm.pid</span><br><span class=\"line\">ExecStart=/usr/local/php74/sbin/php-fpm --nodaemonize --fpm-config /usr/local/php74/etc/php-fpm.conf</span><br><span class=\"line\">ExecReload=/bin/kill -USR2 <span class=\"variable\">$MAINPID</span></span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h1 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h1><h2 id=\"4-1-error-Package-requirements-openssl-1-0-1-were-not-met\"><a href=\"#4-1-error-Package-requirements-openssl-1-0-1-were-not-met\" class=\"headerlink\" title=\"4.1  error: Package requirements (openssl &gt;&#x3D; 1.0.1) were not met\"></a>4.1  error: Package requirements (openssl &gt;&#x3D; 1.0.1) were not met</h2><p>: <code> yum install openssl-devel</code></p>\n<h2 id=\"4-2-error-Package-requirements-libcurl-7-15-5-were-not-met\"><a href=\"#4-2-error-Package-requirements-libcurl-7-15-5-were-not-met\" class=\"headerlink\" title=\"4.2 error: Package requirements (libcurl &gt;&#x3D; 7.15.5) were not met\"></a>4.2 error: Package requirements (libcurl &gt;&#x3D; 7.15.5) were not met</h2><p>: <code>yum install libcurl-devel</code></p>\n<h2 id=\"4-3-error-Package-requirements-libpng-were-not-met\"><a href=\"#4-3-error-Package-requirements-libpng-were-not-met\" class=\"headerlink\" title=\"4.3 error: Package requirements (libpng) were not met\"></a>4.3 error: Package requirements (libpng) were not met</h2><p>: <code>yum install libpng-devel</code></p>\n<h2 id=\"4-4-error-Package-requirements-libjpeg-were-not-met\"><a href=\"#4-4-error-Package-requirements-libjpeg-were-not-met\" class=\"headerlink\" title=\"4.4 error: Package requirements (libjpeg) were not met\"></a>4.4 error: Package requirements (libjpeg) were not met</h2><p>: <code> yum install  libjpeg-devel</code></p>\n<h2 id=\"4-5-error-Package-requirements-freetype2-were-not-met\"><a href=\"#4-5-error-Package-requirements-freetype2-were-not-met\" class=\"headerlink\" title=\"4.5 error: Package requirements (freetype2) were not met\"></a>4.5 error: Package requirements (freetype2) were not met</h2><p>: <code> yum install freetype-devel</code></p>\n<h2 id=\"4-6-configure-error-C-preprocessor--lib-cpp-fails-sanity-check\"><a href=\"#4-6-configure-error-C-preprocessor--lib-cpp-fails-sanity-check\" class=\"headerlink\" title=\"4.6 configure: error: C++ preprocessor &#x2F;lib&#x2F;cpp fails sanity check\"></a>4.6 configure: error: C++ preprocessor &#x2F;lib&#x2F;cpp fails sanity check</h2><p>: <code>yum install gcc-c++</code></p>\n<h2 id=\"4-7-error-Package-requirements-libxslt-1-1-0-were-not-met\"><a href=\"#4-7-error-Package-requirements-libxslt-1-1-0-were-not-met\" class=\"headerlink\" title=\"4.7 error: Package requirements (libxslt &gt;&#x3D; 1.1.0) were not met\"></a>4.7 error: Package requirements (libxslt &gt;&#x3D; 1.1.0) were not met</h2><p>: <code>yum install libxslt-devel</code></p>\n"},{"title":"nextcloud ","date":"2022-11-23T05:08:13.000Z","_content":"\n\n##  php\nhttps://blog.mdzz.wang/2022/11/22/029.install_php7.4.33/\n\n##  nginx\n\n``` yum install nginx ```\n\n##  mariadb\n\n``` yum install mariadb mariadb-server ```\n\n##  nextcloud \n\n1) nextcloud \n\n``` wget --no-check-certificate https://download.nextcloud.com/server/releases/nextcloud-25.0.0.zip ```\n\n2)  nextcloud\n\n``` unzip nextcloud-25.0.0.zip ```\n\n3)  nginx\n\n``` mv nextcloud-25.0.0 /usr/share/nginx/nextcloud ```\n\n4) \n\n``` chown -R nginx:nginx /usr/share/nginx/nextcloud ```\n``` chmod -R 777 /usr/share/nginx/nextcloud/config ```\n``` chmod -R 777 /usr/share/nginx/nextcloud/apps ```\n\n5) nginx \n\nnginx, nextcloudnginx\n: https://docs.nextcloud.com/server/latest/admin_manual/installation/nginx.html\n\n**: line31nextcloud**\n\n``` vim /etc/nginx/conf.d/next.conf ```\n\n``` yaml\nupstream php-handler {\n    server 127.0.0.1:9000;\n    #server unix:/var/run/php/php7.4-fpm.sock;\n}\n\n# Set the `immutable` cache control options only for assets with a cache busting `v` argument\nmap $arg_v $asset_immutable {\n    \"\" \"\";\n    default \"immutable\";\n}\n\n\n# server {\n#     listen 80;\n#     listen [::]:80;\n#     server_name cloud.example.com;\n\n#     # Prevent nginx HTTP Server Detection\n#     server_tokens off;\n\n#     # Enforce HTTPS\n#     return 301 https://$server_name$request_uri;\n# }\n\nserver {\n    listen 8080;\n    #listen [::]:443 ssl http2;\n    server_name cloud.mdzz.wang;\n\n    # Path to the root of your installation\n    root /usr/share/nginx/nextcloud;\n\n    # Use Mozilla's guidelines for SSL/TLS settings\n    # https://mozilla.github.io/server-side-tls/ssl-config-generator/\n    #ssl_certificate     /etc/ssl/nginx/cloud.example.com.crt;\n    #ssl_certificate_key /etc/ssl/nginx/cloud.example.com.key;\n\n    # Prevent nginx HTTP Server Detection\n    server_tokens off;\n\n    # HSTS settings\n    # WARNING: Only add the preload option once you read about\n    # the consequences in https://hstspreload.org/. This option\n    # will add the domain to a hardcoded list that is shipped\n    # in all major browsers and getting removed from this list\n    # could take several months.\n    #add_header Strict-Transport-Security \"max-age=15768000; includeSubDomains; preload\" always;\n\n    # set max upload size and increase upload timeout:\n    client_max_body_size 512M;\n    client_body_timeout 300s;\n    fastcgi_buffers 64 4K;\n\n    # Enable gzip but do not remove ETag headers\n    gzip on;\n    gzip_vary on;\n    gzip_comp_level 4;\n    gzip_min_length 256;\n    gzip_proxied expired no-cache no-store private no_last_modified no_etag auth;\n    gzip_types application/atom+xml application/javascript application/json application/ld+json application/manifest+json application/rss+xml application/vnd.geo+json application/vnd.ms-fontobject application/wasm application/x-font-ttf application/x-web-app-manifest+json application/xhtml+xml application/xml font/opentype image/bmp image/svg+xml image/x-icon text/cache-manifest text/css text/plain text/vcard text/vnd.rim.location.xloc text/vtt text/x-component text/x-cross-domain-policy;\n\n    # Pagespeed is not supported by Nextcloud, so if your server is built\n    # with the `ngx_pagespeed` module, uncomment this line to disable it.\n    #pagespeed off;\n\n    # The settings allows you to optimize the HTTP2 bandwitdth.\n    # See https://blog.cloudflare.com/delivering-http-2-upload-speed-improvements/\n    # for tunning hints\n    client_body_buffer_size 512k;\n\n    # HTTP response headers borrowed from Nextcloud `.htaccess`\n    add_header Referrer-Policy                      \"no-referrer\"   always;\n    add_header X-Content-Type-Options               \"nosniff\"       always;\n    add_header X-Download-Options                   \"noopen\"        always;\n    add_header X-Frame-Options                      \"SAMEORIGIN\"    always;\n    add_header X-Permitted-Cross-Domain-Policies    \"none\"          always;\n    add_header X-Robots-Tag                         \"none\"          always;\n    add_header X-XSS-Protection                     \"1; mode=block\" always;\n\n    # Remove X-Powered-By, which is an information leak\n    fastcgi_hide_header X-Powered-By;\n\n    # Specify how to handle directories -- specifying `/index.php$request_uri`\n    # here as the fallback means that Nginx always exhibits the desired behaviour\n    # when a client requests a path that corresponds to a directory that exists\n    # on the server. In particular, if that directory contains an index.php file,\n    # that file is correctly served; if it doesn't, then the request is passed to\n    # the front-end controller. This consistent behaviour means that we don't need\n    # to specify custom rules for certain paths (e.g. images and other assets,\n    # `/updater`, `/ocm-provider`, `/ocs-provider`), and thus\n    # `try_files $uri $uri/ /index.php$request_uri`\n    # always provides the desired behaviour.\n    index index.php index.html /index.php$request_uri;\n\n    # Rule borrowed from `.htaccess` to handle Microsoft DAV clients\n    location = / {\n        if ( $http_user_agent ~ ^DavClnt ) {\n            return 302 /remote.php/webdav/$is_args$args;\n        }\n    }\n\n    location = /robots.txt {\n        allow all;\n        log_not_found off;\n        access_log off;\n    }\n\n    # Make a regex exception for `/.well-known` so that clients can still\n    # access it despite the existence of the regex rule\n    # `location ~ /(\\.|autotest|...)` which would otherwise handle requests\n    # for `/.well-known`.\n    location ^~ /.well-known {\n        # The rules in this block are an adaptation of the rules\n        # in `.htaccess` that concern `/.well-known`.\n\n        location = /.well-known/carddav { return 301 /remote.php/dav/; }\n        location = /.well-known/caldav  { return 301 /remote.php/dav/; }\n\n        location /.well-known/acme-challenge    { try_files $uri $uri/ =404; }\n        location /.well-known/pki-validation    { try_files $uri $uri/ =404; }\n\n        # Let Nextcloud's API for `/.well-known` URIs handle all other\n        # requests by passing them to the front-end controller.\n        return 301 /index.php$request_uri;\n    }\n\n    # Rules borrowed from `.htaccess` to hide certain paths from clients\n    location ~ ^/(?:build|tests|config|lib|3rdparty|templates|data)(?:$|/)  { return 404; }\n    location ~ ^/(?:\\.|autotest|occ|issue|indie|db_|console)                { return 404; }\n\n    # Ensure this block, which passes PHP files to the PHP process, is above the blocks\n    # which handle static assets (as seen below). If this block is not declared first,\n    # then Nginx will encounter an infinite rewriting loop when it prepends `/index.php`\n    # to the URI, resulting in a HTTP 500 error response.\n    location ~ \\.php(?:$|/) {\n        # Required for legacy support\n        rewrite ^/(?!index|remote|public|cron|core\\/ajax\\/update|status|ocs\\/v[12]|updater\\/.+|oc[ms]-provider\\/.+|.+\\/richdocumentscode\\/proxy) /index.php$request_uri;\n\n        fastcgi_split_path_info ^(.+?\\.php)(/.*)$;\n        set $path_info $fastcgi_path_info;\n\n        try_files $fastcgi_script_name =404;\n\n        include fastcgi_params;\n        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        fastcgi_param PATH_INFO $path_info;\n        fastcgi_param HTTPS on;\n\n        fastcgi_param modHeadersAvailable true;         # Avoid sending the security headers twice\n        fastcgi_param front_controller_active true;     # Enable pretty urls\n        fastcgi_pass php-handler;\n\n        fastcgi_intercept_errors on;\n        fastcgi_request_buffering off;\n\n        fastcgi_max_temp_file_size 0;\n    }\n\n    location ~ \\.(?:css|js|svg|gif|png|jpg|ico|wasm|tflite|map)$ {\n        try_files $uri /index.php$request_uri;\n        add_header Cache-Control \"public, max-age=15778463, $asset_immutable\";\n        access_log off;     # Optional: Don't log access to assets\n\n        location ~ \\.wasm$ {\n            default_type application/wasm;\n        }\n    }\n\n    location ~ \\.woff2?$ {\n        try_files $uri /index.php$request_uri;\n        expires 7d;         # Cache-Control policy borrowed from `.htaccess`\n        access_log off;     # Optional: Don't log access to assets\n    }\n\n    # Rule borrowed from `.htaccess`\n    location /remote {\n        return 301 /remote.php$request_uri;\n    }\n\n    location / {\n        try_files $uri $uri/ /index.php$request_uri;\n    }\n}\n```\n\n## \n\n1)  Can't write into config directory! This can usually be fixed by giving the webserver write access to the config directory.\n\n2)  Can't write into apps directory! This can usually be fixed by giving the webserver write access to the config directory.\n\n: \n\nphp74-fpm\n\n``` /usr/share/nginx/nextcloud/config ``` \n``` /usr/share/nginx/nextcloud/apps ```\n\n\nchown -R php:php  ``` /usr/share/nginx/nextcloud/config ```\nchown -R php:php  ``` /usr/share/nginx/nextcloud/apps ```\n\n: \n\nchmod -R 777 ``` /usr/share/nginx/nextcloud/config ``` \nchmod -R 777 ``` /usr/share/nginx/nextcloud/apps ```","source":"_posts/030.nextcloud.md","raw":"---\ntitle: nextcloud \ndate: 2022-11-23 13:08:13\ncategories: \n- [DevOps]\ntags: \n- nextcloud\n---\n\n\n##  php\nhttps://blog.mdzz.wang/2022/11/22/029.install_php7.4.33/\n\n##  nginx\n\n``` yum install nginx ```\n\n##  mariadb\n\n``` yum install mariadb mariadb-server ```\n\n##  nextcloud \n\n1) nextcloud \n\n``` wget --no-check-certificate https://download.nextcloud.com/server/releases/nextcloud-25.0.0.zip ```\n\n2)  nextcloud\n\n``` unzip nextcloud-25.0.0.zip ```\n\n3)  nginx\n\n``` mv nextcloud-25.0.0 /usr/share/nginx/nextcloud ```\n\n4) \n\n``` chown -R nginx:nginx /usr/share/nginx/nextcloud ```\n``` chmod -R 777 /usr/share/nginx/nextcloud/config ```\n``` chmod -R 777 /usr/share/nginx/nextcloud/apps ```\n\n5) nginx \n\nnginx, nextcloudnginx\n: https://docs.nextcloud.com/server/latest/admin_manual/installation/nginx.html\n\n**: line31nextcloud**\n\n``` vim /etc/nginx/conf.d/next.conf ```\n\n``` yaml\nupstream php-handler {\n    server 127.0.0.1:9000;\n    #server unix:/var/run/php/php7.4-fpm.sock;\n}\n\n# Set the `immutable` cache control options only for assets with a cache busting `v` argument\nmap $arg_v $asset_immutable {\n    \"\" \"\";\n    default \"immutable\";\n}\n\n\n# server {\n#     listen 80;\n#     listen [::]:80;\n#     server_name cloud.example.com;\n\n#     # Prevent nginx HTTP Server Detection\n#     server_tokens off;\n\n#     # Enforce HTTPS\n#     return 301 https://$server_name$request_uri;\n# }\n\nserver {\n    listen 8080;\n    #listen [::]:443 ssl http2;\n    server_name cloud.mdzz.wang;\n\n    # Path to the root of your installation\n    root /usr/share/nginx/nextcloud;\n\n    # Use Mozilla's guidelines for SSL/TLS settings\n    # https://mozilla.github.io/server-side-tls/ssl-config-generator/\n    #ssl_certificate     /etc/ssl/nginx/cloud.example.com.crt;\n    #ssl_certificate_key /etc/ssl/nginx/cloud.example.com.key;\n\n    # Prevent nginx HTTP Server Detection\n    server_tokens off;\n\n    # HSTS settings\n    # WARNING: Only add the preload option once you read about\n    # the consequences in https://hstspreload.org/. This option\n    # will add the domain to a hardcoded list that is shipped\n    # in all major browsers and getting removed from this list\n    # could take several months.\n    #add_header Strict-Transport-Security \"max-age=15768000; includeSubDomains; preload\" always;\n\n    # set max upload size and increase upload timeout:\n    client_max_body_size 512M;\n    client_body_timeout 300s;\n    fastcgi_buffers 64 4K;\n\n    # Enable gzip but do not remove ETag headers\n    gzip on;\n    gzip_vary on;\n    gzip_comp_level 4;\n    gzip_min_length 256;\n    gzip_proxied expired no-cache no-store private no_last_modified no_etag auth;\n    gzip_types application/atom+xml application/javascript application/json application/ld+json application/manifest+json application/rss+xml application/vnd.geo+json application/vnd.ms-fontobject application/wasm application/x-font-ttf application/x-web-app-manifest+json application/xhtml+xml application/xml font/opentype image/bmp image/svg+xml image/x-icon text/cache-manifest text/css text/plain text/vcard text/vnd.rim.location.xloc text/vtt text/x-component text/x-cross-domain-policy;\n\n    # Pagespeed is not supported by Nextcloud, so if your server is built\n    # with the `ngx_pagespeed` module, uncomment this line to disable it.\n    #pagespeed off;\n\n    # The settings allows you to optimize the HTTP2 bandwitdth.\n    # See https://blog.cloudflare.com/delivering-http-2-upload-speed-improvements/\n    # for tunning hints\n    client_body_buffer_size 512k;\n\n    # HTTP response headers borrowed from Nextcloud `.htaccess`\n    add_header Referrer-Policy                      \"no-referrer\"   always;\n    add_header X-Content-Type-Options               \"nosniff\"       always;\n    add_header X-Download-Options                   \"noopen\"        always;\n    add_header X-Frame-Options                      \"SAMEORIGIN\"    always;\n    add_header X-Permitted-Cross-Domain-Policies    \"none\"          always;\n    add_header X-Robots-Tag                         \"none\"          always;\n    add_header X-XSS-Protection                     \"1; mode=block\" always;\n\n    # Remove X-Powered-By, which is an information leak\n    fastcgi_hide_header X-Powered-By;\n\n    # Specify how to handle directories -- specifying `/index.php$request_uri`\n    # here as the fallback means that Nginx always exhibits the desired behaviour\n    # when a client requests a path that corresponds to a directory that exists\n    # on the server. In particular, if that directory contains an index.php file,\n    # that file is correctly served; if it doesn't, then the request is passed to\n    # the front-end controller. This consistent behaviour means that we don't need\n    # to specify custom rules for certain paths (e.g. images and other assets,\n    # `/updater`, `/ocm-provider`, `/ocs-provider`), and thus\n    # `try_files $uri $uri/ /index.php$request_uri`\n    # always provides the desired behaviour.\n    index index.php index.html /index.php$request_uri;\n\n    # Rule borrowed from `.htaccess` to handle Microsoft DAV clients\n    location = / {\n        if ( $http_user_agent ~ ^DavClnt ) {\n            return 302 /remote.php/webdav/$is_args$args;\n        }\n    }\n\n    location = /robots.txt {\n        allow all;\n        log_not_found off;\n        access_log off;\n    }\n\n    # Make a regex exception for `/.well-known` so that clients can still\n    # access it despite the existence of the regex rule\n    # `location ~ /(\\.|autotest|...)` which would otherwise handle requests\n    # for `/.well-known`.\n    location ^~ /.well-known {\n        # The rules in this block are an adaptation of the rules\n        # in `.htaccess` that concern `/.well-known`.\n\n        location = /.well-known/carddav { return 301 /remote.php/dav/; }\n        location = /.well-known/caldav  { return 301 /remote.php/dav/; }\n\n        location /.well-known/acme-challenge    { try_files $uri $uri/ =404; }\n        location /.well-known/pki-validation    { try_files $uri $uri/ =404; }\n\n        # Let Nextcloud's API for `/.well-known` URIs handle all other\n        # requests by passing them to the front-end controller.\n        return 301 /index.php$request_uri;\n    }\n\n    # Rules borrowed from `.htaccess` to hide certain paths from clients\n    location ~ ^/(?:build|tests|config|lib|3rdparty|templates|data)(?:$|/)  { return 404; }\n    location ~ ^/(?:\\.|autotest|occ|issue|indie|db_|console)                { return 404; }\n\n    # Ensure this block, which passes PHP files to the PHP process, is above the blocks\n    # which handle static assets (as seen below). If this block is not declared first,\n    # then Nginx will encounter an infinite rewriting loop when it prepends `/index.php`\n    # to the URI, resulting in a HTTP 500 error response.\n    location ~ \\.php(?:$|/) {\n        # Required for legacy support\n        rewrite ^/(?!index|remote|public|cron|core\\/ajax\\/update|status|ocs\\/v[12]|updater\\/.+|oc[ms]-provider\\/.+|.+\\/richdocumentscode\\/proxy) /index.php$request_uri;\n\n        fastcgi_split_path_info ^(.+?\\.php)(/.*)$;\n        set $path_info $fastcgi_path_info;\n\n        try_files $fastcgi_script_name =404;\n\n        include fastcgi_params;\n        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        fastcgi_param PATH_INFO $path_info;\n        fastcgi_param HTTPS on;\n\n        fastcgi_param modHeadersAvailable true;         # Avoid sending the security headers twice\n        fastcgi_param front_controller_active true;     # Enable pretty urls\n        fastcgi_pass php-handler;\n\n        fastcgi_intercept_errors on;\n        fastcgi_request_buffering off;\n\n        fastcgi_max_temp_file_size 0;\n    }\n\n    location ~ \\.(?:css|js|svg|gif|png|jpg|ico|wasm|tflite|map)$ {\n        try_files $uri /index.php$request_uri;\n        add_header Cache-Control \"public, max-age=15778463, $asset_immutable\";\n        access_log off;     # Optional: Don't log access to assets\n\n        location ~ \\.wasm$ {\n            default_type application/wasm;\n        }\n    }\n\n    location ~ \\.woff2?$ {\n        try_files $uri /index.php$request_uri;\n        expires 7d;         # Cache-Control policy borrowed from `.htaccess`\n        access_log off;     # Optional: Don't log access to assets\n    }\n\n    # Rule borrowed from `.htaccess`\n    location /remote {\n        return 301 /remote.php$request_uri;\n    }\n\n    location / {\n        try_files $uri $uri/ /index.php$request_uri;\n    }\n}\n```\n\n## \n\n1)  Can't write into config directory! This can usually be fixed by giving the webserver write access to the config directory.\n\n2)  Can't write into apps directory! This can usually be fixed by giving the webserver write access to the config directory.\n\n: \n\nphp74-fpm\n\n``` /usr/share/nginx/nextcloud/config ``` \n``` /usr/share/nginx/nextcloud/apps ```\n\n\nchown -R php:php  ``` /usr/share/nginx/nextcloud/config ```\nchown -R php:php  ``` /usr/share/nginx/nextcloud/apps ```\n\n: \n\nchmod -R 777 ``` /usr/share/nginx/nextcloud/config ``` \nchmod -R 777 ``` /usr/share/nginx/nextcloud/apps ```","slug":"030.nextcloud","published":1,"updated":"2023-03-03T05:15:27.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbf7002xyknrhvp75ksg","content":"<h2 id=\"-php\"><a href=\"#-php\" class=\"headerlink\" title=\" php\"></a> php</h2><p><a href=\"https://blog.mdzz.wang/2022/11/22/029.install_php7.4.33/\">https://blog.mdzz.wang/2022/11/22/029.install_php7.4.33/</a></p>\n<h2 id=\"-nginx\"><a href=\"#-nginx\" class=\"headerlink\" title=\" nginx\"></a> nginx</h2><p><code>yum install nginx</code></p>\n<h2 id=\"-mariadb\"><a href=\"#-mariadb\" class=\"headerlink\" title=\" mariadb\"></a> mariadb</h2><p><code>yum install mariadb mariadb-server</code></p>\n<h2 id=\"-nextcloud\"><a href=\"#-nextcloud\" class=\"headerlink\" title=\" nextcloud\"></a> nextcloud</h2><ol>\n<li>nextcloud</li>\n</ol>\n<p><code>wget --no-check-certificate https://download.nextcloud.com/server/releases/nextcloud-25.0.0.zip</code></p>\n<ol start=\"2\">\n<li> nextcloud</li>\n</ol>\n<p><code>unzip nextcloud-25.0.0.zip</code></p>\n<ol start=\"3\">\n<li> nginx</li>\n</ol>\n<p><code>mv nextcloud-25.0.0 /usr/share/nginx/nextcloud</code></p>\n<ol start=\"4\">\n<li></li>\n</ol>\n<p><code>chown -R nginx:nginx /usr/share/nginx/nextcloud</code><br><code>chmod -R 777 /usr/share/nginx/nextcloud/config</code><br><code>chmod -R 777 /usr/share/nginx/nextcloud/apps</code></p>\n<ol start=\"5\">\n<li>nginx </li>\n</ol>\n<p>nginx, nextcloudnginx<br>: <a href=\"https://docs.nextcloud.com/server/latest/admin_manual/installation/nginx.html\">https://docs.nextcloud.com/server/latest/admin_manual/installation/nginx.html</a></p>\n<p><strong>: line31nextcloud</strong></p>\n<p><code>vim /etc/nginx/conf.d/next.conf</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">upstream</span> <span class=\"string\">php-handler</span> &#123;</span><br><span class=\"line\">    <span class=\"string\">server</span> <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span><span class=\"string\">:9000;</span></span><br><span class=\"line\">    <span class=\"comment\">#server unix:/var/run/php/php7.4-fpm.sock;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Set the `immutable` cache control options only for assets with a cache busting `v` argument</span></span><br><span class=\"line\"><span class=\"string\">map</span> <span class=\"string\">$arg_v</span> <span class=\"string\">$asset_immutable</span> &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;</span> <span class=\"string\">&quot;&quot;</span><span class=\"string\">;</span></span><br><span class=\"line\">    <span class=\"string\">default</span> <span class=\"string\">&quot;immutable&quot;</span><span class=\"string\">;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># server &#123;</span></span><br><span class=\"line\"><span class=\"comment\">#     listen 80;</span></span><br><span class=\"line\"><span class=\"comment\">#     listen [::]:80;</span></span><br><span class=\"line\"><span class=\"comment\">#     server_name cloud.example.com;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#     # Prevent nginx HTTP Server Detection</span></span><br><span class=\"line\"><span class=\"comment\">#     server_tokens off;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#     # Enforce HTTPS</span></span><br><span class=\"line\"><span class=\"comment\">#     return 301 https://$server_name$request_uri;</span></span><br><span class=\"line\"><span class=\"comment\"># &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">server</span> &#123;</span><br><span class=\"line\">    <span class=\"string\">listen</span> <span class=\"number\">8080</span><span class=\"string\">;</span></span><br><span class=\"line\">    <span class=\"comment\">#listen [::]:443 ssl http2;</span></span><br><span class=\"line\">    <span class=\"string\">server_name</span> <span class=\"string\">cloud.mdzz.wang;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Path to the root of your installation</span></span><br><span class=\"line\">    <span class=\"string\">root</span> <span class=\"string\">/usr/share/nginx/nextcloud;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Use Mozilla&#x27;s guidelines for SSL/TLS settings</span></span><br><span class=\"line\">    <span class=\"comment\"># https://mozilla.github.io/server-side-tls/ssl-config-generator/</span></span><br><span class=\"line\">    <span class=\"comment\">#ssl_certificate     /etc/ssl/nginx/cloud.example.com.crt;</span></span><br><span class=\"line\">    <span class=\"comment\">#ssl_certificate_key /etc/ssl/nginx/cloud.example.com.key;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Prevent nginx HTTP Server Detection</span></span><br><span class=\"line\">    <span class=\"string\">server_tokens</span> <span class=\"string\">off;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># HSTS settings</span></span><br><span class=\"line\">    <span class=\"comment\"># WARNING: Only add the preload option once you read about</span></span><br><span class=\"line\">    <span class=\"comment\"># the consequences in https://hstspreload.org/. This option</span></span><br><span class=\"line\">    <span class=\"comment\"># will add the domain to a hardcoded list that is shipped</span></span><br><span class=\"line\">    <span class=\"comment\"># in all major browsers and getting removed from this list</span></span><br><span class=\"line\">    <span class=\"comment\"># could take several months.</span></span><br><span class=\"line\">    <span class=\"comment\">#add_header Strict-Transport-Security &quot;max-age=15768000; includeSubDomains; preload&quot; always;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># set max upload size and increase upload timeout:</span></span><br><span class=\"line\">    <span class=\"string\">client_max_body_size</span> <span class=\"string\">512M;</span></span><br><span class=\"line\">    <span class=\"string\">client_body_timeout</span> <span class=\"string\">300s;</span></span><br><span class=\"line\">    <span class=\"string\">fastcgi_buffers</span> <span class=\"number\">64</span> <span class=\"string\">4K;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Enable gzip but do not remove ETag headers</span></span><br><span class=\"line\">    <span class=\"string\">gzip</span> <span class=\"string\">on;</span></span><br><span class=\"line\">    <span class=\"string\">gzip_vary</span> <span class=\"string\">on;</span></span><br><span class=\"line\">    <span class=\"string\">gzip_comp_level</span> <span class=\"number\">4</span><span class=\"string\">;</span></span><br><span class=\"line\">    <span class=\"string\">gzip_min_length</span> <span class=\"number\">256</span><span class=\"string\">;</span></span><br><span class=\"line\">    <span class=\"string\">gzip_proxied</span> <span class=\"string\">expired</span> <span class=\"literal\">no</span><span class=\"string\">-cache</span> <span class=\"literal\">no</span><span class=\"string\">-store</span> <span class=\"string\">private</span> <span class=\"string\">no_last_modified</span> <span class=\"string\">no_etag</span> <span class=\"string\">auth;</span></span><br><span class=\"line\">    <span class=\"string\">gzip_types</span> <span class=\"string\">application/atom+xml</span> <span class=\"string\">application/javascript</span> <span class=\"string\">application/json</span> <span class=\"string\">application/ld+json</span> <span class=\"string\">application/manifest+json</span> <span class=\"string\">application/rss+xml</span> <span class=\"string\">application/vnd.geo+json</span> <span class=\"string\">application/vnd.ms-fontobject</span> <span class=\"string\">application/wasm</span> <span class=\"string\">application/x-font-ttf</span> <span class=\"string\">application/x-web-app-manifest+json</span> <span class=\"string\">application/xhtml+xml</span> <span class=\"string\">application/xml</span> <span class=\"string\">font/opentype</span> <span class=\"string\">image/bmp</span> <span class=\"string\">image/svg+xml</span> <span class=\"string\">image/x-icon</span> <span class=\"string\">text/cache-manifest</span> <span class=\"string\">text/css</span> <span class=\"string\">text/plain</span> <span class=\"string\">text/vcard</span> <span class=\"string\">text/vnd.rim.location.xloc</span> <span class=\"string\">text/vtt</span> <span class=\"string\">text/x-component</span> <span class=\"string\">text/x-cross-domain-policy;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Pagespeed is not supported by Nextcloud, so if your server is built</span></span><br><span class=\"line\">    <span class=\"comment\"># with the `ngx_pagespeed` module, uncomment this line to disable it.</span></span><br><span class=\"line\">    <span class=\"comment\">#pagespeed off;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># The settings allows you to optimize the HTTP2 bandwitdth.</span></span><br><span class=\"line\">    <span class=\"comment\"># See https://blog.cloudflare.com/delivering-http-2-upload-speed-improvements/</span></span><br><span class=\"line\">    <span class=\"comment\"># for tunning hints</span></span><br><span class=\"line\">    <span class=\"string\">client_body_buffer_size</span> <span class=\"string\">512k;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># HTTP response headers borrowed from Nextcloud `.htaccess`</span></span><br><span class=\"line\">    <span class=\"string\">add_header</span> <span class=\"string\">Referrer-Policy</span>                      <span class=\"string\">&quot;no-referrer&quot;</span>   <span class=\"string\">always;</span></span><br><span class=\"line\">    <span class=\"string\">add_header</span> <span class=\"string\">X-Content-Type-Options</span>               <span class=\"string\">&quot;nosniff&quot;</span>       <span class=\"string\">always;</span></span><br><span class=\"line\">    <span class=\"string\">add_header</span> <span class=\"string\">X-Download-Options</span>                   <span class=\"string\">&quot;noopen&quot;</span>        <span class=\"string\">always;</span></span><br><span class=\"line\">    <span class=\"string\">add_header</span> <span class=\"string\">X-Frame-Options</span>                      <span class=\"string\">&quot;SAMEORIGIN&quot;</span>    <span class=\"string\">always;</span></span><br><span class=\"line\">    <span class=\"string\">add_header</span> <span class=\"string\">X-Permitted-Cross-Domain-Policies</span>    <span class=\"string\">&quot;none&quot;</span>          <span class=\"string\">always;</span></span><br><span class=\"line\">    <span class=\"string\">add_header</span> <span class=\"string\">X-Robots-Tag</span>                         <span class=\"string\">&quot;none&quot;</span>          <span class=\"string\">always;</span></span><br><span class=\"line\">    <span class=\"string\">add_header</span> <span class=\"string\">X-XSS-Protection</span>                     <span class=\"string\">&quot;1; mode=block&quot;</span> <span class=\"string\">always;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Remove X-Powered-By, which is an information leak</span></span><br><span class=\"line\">    <span class=\"string\">fastcgi_hide_header</span> <span class=\"string\">X-Powered-By;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Specify how to handle directories -- specifying `/index.php$request_uri`</span></span><br><span class=\"line\">    <span class=\"comment\"># here as the fallback means that Nginx always exhibits the desired behaviour</span></span><br><span class=\"line\">    <span class=\"comment\"># when a client requests a path that corresponds to a directory that exists</span></span><br><span class=\"line\">    <span class=\"comment\"># on the server. In particular, if that directory contains an index.php file,</span></span><br><span class=\"line\">    <span class=\"comment\"># that file is correctly served; if it doesn&#x27;t, then the request is passed to</span></span><br><span class=\"line\">    <span class=\"comment\"># the front-end controller. This consistent behaviour means that we don&#x27;t need</span></span><br><span class=\"line\">    <span class=\"comment\"># to specify custom rules for certain paths (e.g. images and other assets,</span></span><br><span class=\"line\">    <span class=\"comment\"># `/updater`, `/ocm-provider`, `/ocs-provider`), and thus</span></span><br><span class=\"line\">    <span class=\"comment\"># `try_files $uri $uri/ /index.php$request_uri`</span></span><br><span class=\"line\">    <span class=\"comment\"># always provides the desired behaviour.</span></span><br><span class=\"line\">    <span class=\"string\">index</span> <span class=\"string\">index.php</span> <span class=\"string\">index.html</span> <span class=\"string\">/index.php$request_uri;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Rule borrowed from `.htaccess` to handle Microsoft DAV clients</span></span><br><span class=\"line\">    <span class=\"string\">location</span> <span class=\"string\">=</span> <span class=\"string\">/</span> &#123;</span><br><span class=\"line\">        <span class=\"string\">if</span> <span class=\"string\">(</span> <span class=\"string\">$http_user_agent</span> <span class=\"string\">~</span> <span class=\"string\">^DavClnt</span> <span class=\"string\">)</span> &#123;</span><br><span class=\"line\">            <span class=\"string\">return</span> <span class=\"number\">302</span> <span class=\"string\">/remote.php/webdav/$is_args$args;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"string\">location</span> <span class=\"string\">=</span> <span class=\"string\">/robots.txt</span> &#123;</span><br><span class=\"line\">        <span class=\"string\">allow</span> <span class=\"string\">all;</span></span><br><span class=\"line\">        <span class=\"string\">log_not_found</span> <span class=\"string\">off;</span></span><br><span class=\"line\">        <span class=\"string\">access_log</span> <span class=\"string\">off;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Make a regex exception for `/.well-known` so that clients can still</span></span><br><span class=\"line\">    <span class=\"comment\"># access it despite the existence of the regex rule</span></span><br><span class=\"line\">    <span class=\"comment\"># `location ~ /(\\.|autotest|...)` which would otherwise handle requests</span></span><br><span class=\"line\">    <span class=\"comment\"># for `/.well-known`.</span></span><br><span class=\"line\">    <span class=\"string\">location</span> <span class=\"string\">^~</span> <span class=\"string\">/.well-known</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\"># The rules in this block are an adaptation of the rules</span></span><br><span class=\"line\">        <span class=\"comment\"># in `.htaccess` that concern `/.well-known`.</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"string\">location</span> <span class=\"string\">=</span> <span class=\"string\">/.well-known/carddav</span> &#123; <span class=\"string\">return</span> <span class=\"number\">301</span> <span class=\"string\">/remote.php/dav/;</span> &#125;</span><br><span class=\"line\">        <span class=\"string\">location</span> <span class=\"string\">=</span> <span class=\"string\">/.well-known/caldav</span>  &#123; <span class=\"string\">return</span> <span class=\"number\">301</span> <span class=\"string\">/remote.php/dav/;</span> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"string\">location</span> <span class=\"string\">/.well-known/acme-challenge</span>    &#123; <span class=\"string\">try_files</span> <span class=\"string\">$uri</span> <span class=\"string\">$uri/</span> <span class=\"string\">=404;</span> &#125;</span><br><span class=\"line\">        <span class=\"string\">location</span> <span class=\"string\">/.well-known/pki-validation</span>    &#123; <span class=\"string\">try_files</span> <span class=\"string\">$uri</span> <span class=\"string\">$uri/</span> <span class=\"string\">=404;</span> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># Let Nextcloud&#x27;s API for `/.well-known` URIs handle all other</span></span><br><span class=\"line\">        <span class=\"comment\"># requests by passing them to the front-end controller.</span></span><br><span class=\"line\">        <span class=\"string\">return</span> <span class=\"number\">301</span> <span class=\"string\">/index.php$request_uri;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Rules borrowed from `.htaccess` to hide certain paths from clients</span></span><br><span class=\"line\">    <span class=\"string\">location</span> <span class=\"string\">~</span> <span class=\"string\">^/(?:build|tests|config|lib|3rdparty|templates|data)(?:$|/)</span>  &#123; <span class=\"string\">return</span> <span class=\"number\">404</span><span class=\"string\">;</span> &#125;</span><br><span class=\"line\">    <span class=\"string\">location</span> <span class=\"string\">~</span> <span class=\"string\">^/(?:\\.|autotest|occ|issue|indie|db_|console)</span>                &#123; <span class=\"string\">return</span> <span class=\"number\">404</span><span class=\"string\">;</span> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Ensure this block, which passes PHP files to the PHP process, is above the blocks</span></span><br><span class=\"line\">    <span class=\"comment\"># which handle static assets (as seen below). If this block is not declared first,</span></span><br><span class=\"line\">    <span class=\"comment\"># then Nginx will encounter an infinite rewriting loop when it prepends `/index.php`</span></span><br><span class=\"line\">    <span class=\"comment\"># to the URI, resulting in a HTTP 500 error response.</span></span><br><span class=\"line\">    <span class=\"string\">location</span> <span class=\"string\">~</span> <span class=\"string\">\\.php(?:$|/)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\"># Required for legacy support</span></span><br><span class=\"line\">        <span class=\"string\">rewrite</span> <span class=\"string\">^/(?!index|remote|public|cron|core\\/ajax\\/update|status|ocs\\/v</span>[<span class=\"number\">12</span>]<span class=\"string\">|updater\\/.+|oc</span>[<span class=\"string\">ms</span>]<span class=\"string\">-provider\\/.+|.+\\/richdocumentscode\\/proxy)</span> <span class=\"string\">/index.php$request_uri;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"string\">fastcgi_split_path_info</span> <span class=\"string\">^(.+?\\.php)(/.*)$;</span></span><br><span class=\"line\">        <span class=\"string\">set</span> <span class=\"string\">$path_info</span> <span class=\"string\">$fastcgi_path_info;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"string\">try_files</span> <span class=\"string\">$fastcgi_script_name</span> <span class=\"string\">=404;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"string\">include</span> <span class=\"string\">fastcgi_params;</span></span><br><span class=\"line\">        <span class=\"string\">fastcgi_param</span> <span class=\"string\">SCRIPT_FILENAME</span> <span class=\"string\">$document_root$fastcgi_script_name;</span></span><br><span class=\"line\">        <span class=\"string\">fastcgi_param</span> <span class=\"string\">PATH_INFO</span> <span class=\"string\">$path_info;</span></span><br><span class=\"line\">        <span class=\"string\">fastcgi_param</span> <span class=\"string\">HTTPS</span> <span class=\"string\">on;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"string\">fastcgi_param</span> <span class=\"string\">modHeadersAvailable</span> <span class=\"literal\">true</span><span class=\"string\">;</span>         <span class=\"comment\"># Avoid sending the security headers twice</span></span><br><span class=\"line\">        <span class=\"string\">fastcgi_param</span> <span class=\"string\">front_controller_active</span> <span class=\"literal\">true</span><span class=\"string\">;</span>     <span class=\"comment\"># Enable pretty urls</span></span><br><span class=\"line\">        <span class=\"string\">fastcgi_pass</span> <span class=\"string\">php-handler;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"string\">fastcgi_intercept_errors</span> <span class=\"string\">on;</span></span><br><span class=\"line\">        <span class=\"string\">fastcgi_request_buffering</span> <span class=\"string\">off;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"string\">fastcgi_max_temp_file_size</span> <span class=\"number\">0</span><span class=\"string\">;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"string\">location</span> <span class=\"string\">~</span> <span class=\"string\">\\.(?:css|js|svg|gif|png|jpg|ico|wasm|tflite|map)$</span> &#123;</span><br><span class=\"line\">        <span class=\"string\">try_files</span> <span class=\"string\">$uri</span> <span class=\"string\">/index.php$request_uri;</span></span><br><span class=\"line\">        <span class=\"string\">add_header</span> <span class=\"string\">Cache-Control</span> <span class=\"string\">&quot;public, max-age=15778463, $asset_immutable&quot;</span><span class=\"string\">;</span></span><br><span class=\"line\">        <span class=\"string\">access_log</span> <span class=\"string\">off;</span>     <span class=\"comment\"># Optional: Don&#x27;t log access to assets</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"string\">location</span> <span class=\"string\">~</span> <span class=\"string\">\\.wasm$</span> &#123;</span><br><span class=\"line\">            <span class=\"string\">default_type</span> <span class=\"string\">application/wasm;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"string\">location</span> <span class=\"string\">~</span> <span class=\"string\">\\.woff2?$</span> &#123;</span><br><span class=\"line\">        <span class=\"string\">try_files</span> <span class=\"string\">$uri</span> <span class=\"string\">/index.php$request_uri;</span></span><br><span class=\"line\">        <span class=\"string\">expires</span> <span class=\"string\">7d;</span>         <span class=\"comment\"># Cache-Control policy borrowed from `.htaccess`</span></span><br><span class=\"line\">        <span class=\"string\">access_log</span> <span class=\"string\">off;</span>     <span class=\"comment\"># Optional: Don&#x27;t log access to assets</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Rule borrowed from `.htaccess`</span></span><br><span class=\"line\">    <span class=\"string\">location</span> <span class=\"string\">/remote</span> &#123;</span><br><span class=\"line\">        <span class=\"string\">return</span> <span class=\"number\">301</span> <span class=\"string\">/remote.php$request_uri;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"string\">location</span> <span class=\"string\">/</span> &#123;</span><br><span class=\"line\">        <span class=\"string\">try_files</span> <span class=\"string\">$uri</span> <span class=\"string\">$uri/</span> <span class=\"string\">/index.php$request_uri;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li><p>Cant write into config directory! This can usually be fixed by giving the webserver write access to the config directory.</p>\n</li>\n<li><p>Cant write into apps directory! This can usually be fixed by giving the webserver write access to the config directory.</p>\n</li>\n</ol>\n<p>: </p>\n<p>php74-fpm</p>\n<p><code>/usr/share/nginx/nextcloud/config</code><br><code>/usr/share/nginx/nextcloud/apps</code></p>\n<p>chown -R php:php  <code>/usr/share/nginx/nextcloud/config</code><br>chown -R php:php  <code>/usr/share/nginx/nextcloud/apps</code></p>\n<p>: </p>\n<p>chmod -R 777 <code>/usr/share/nginx/nextcloud/config</code><br>chmod -R 777 <code>/usr/share/nginx/nextcloud/apps</code></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"-php\"><a href=\"#-php\" class=\"headerlink\" title=\" php\"></a> php</h2><p><a href=\"https://blog.mdzz.wang/2022/11/22/029.install_php7.4.33/\">https://blog.mdzz.wang/2022/11/22/029.install_php7.4.33/</a></p>\n<h2 id=\"-nginx\"><a href=\"#-nginx\" class=\"headerlink\" title=\" nginx\"></a> nginx</h2><p><code>yum install nginx</code></p>\n<h2 id=\"-mariadb\"><a href=\"#-mariadb\" class=\"headerlink\" title=\" mariadb\"></a> mariadb</h2><p><code>yum install mariadb mariadb-server</code></p>\n<h2 id=\"-nextcloud\"><a href=\"#-nextcloud\" class=\"headerlink\" title=\" nextcloud\"></a> nextcloud</h2><ol>\n<li>nextcloud</li>\n</ol>\n<p><code>wget --no-check-certificate https://download.nextcloud.com/server/releases/nextcloud-25.0.0.zip</code></p>\n<ol start=\"2\">\n<li> nextcloud</li>\n</ol>\n<p><code>unzip nextcloud-25.0.0.zip</code></p>\n<ol start=\"3\">\n<li> nginx</li>\n</ol>\n<p><code>mv nextcloud-25.0.0 /usr/share/nginx/nextcloud</code></p>\n<ol start=\"4\">\n<li></li>\n</ol>\n<p><code>chown -R nginx:nginx /usr/share/nginx/nextcloud</code><br><code>chmod -R 777 /usr/share/nginx/nextcloud/config</code><br><code>chmod -R 777 /usr/share/nginx/nextcloud/apps</code></p>\n<ol start=\"5\">\n<li>nginx </li>\n</ol>\n<p>nginx, nextcloudnginx<br>: <a href=\"https://docs.nextcloud.com/server/latest/admin_manual/installation/nginx.html\">https://docs.nextcloud.com/server/latest/admin_manual/installation/nginx.html</a></p>\n<p><strong>: line31nextcloud</strong></p>\n<p><code>vim /etc/nginx/conf.d/next.conf</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">upstream</span> <span class=\"string\">php-handler</span> &#123;</span><br><span class=\"line\">    <span class=\"string\">server</span> <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span><span class=\"string\">:9000;</span></span><br><span class=\"line\">    <span class=\"comment\">#server unix:/var/run/php/php7.4-fpm.sock;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Set the `immutable` cache control options only for assets with a cache busting `v` argument</span></span><br><span class=\"line\"><span class=\"string\">map</span> <span class=\"string\">$arg_v</span> <span class=\"string\">$asset_immutable</span> &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;</span> <span class=\"string\">&quot;&quot;</span><span class=\"string\">;</span></span><br><span class=\"line\">    <span class=\"string\">default</span> <span class=\"string\">&quot;immutable&quot;</span><span class=\"string\">;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># server &#123;</span></span><br><span class=\"line\"><span class=\"comment\">#     listen 80;</span></span><br><span class=\"line\"><span class=\"comment\">#     listen [::]:80;</span></span><br><span class=\"line\"><span class=\"comment\">#     server_name cloud.example.com;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#     # Prevent nginx HTTP Server Detection</span></span><br><span class=\"line\"><span class=\"comment\">#     server_tokens off;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#     # Enforce HTTPS</span></span><br><span class=\"line\"><span class=\"comment\">#     return 301 https://$server_name$request_uri;</span></span><br><span class=\"line\"><span class=\"comment\"># &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">server</span> &#123;</span><br><span class=\"line\">    <span class=\"string\">listen</span> <span class=\"number\">8080</span><span class=\"string\">;</span></span><br><span class=\"line\">    <span class=\"comment\">#listen [::]:443 ssl http2;</span></span><br><span class=\"line\">    <span class=\"string\">server_name</span> <span class=\"string\">cloud.mdzz.wang;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Path to the root of your installation</span></span><br><span class=\"line\">    <span class=\"string\">root</span> <span class=\"string\">/usr/share/nginx/nextcloud;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Use Mozilla&#x27;s guidelines for SSL/TLS settings</span></span><br><span class=\"line\">    <span class=\"comment\"># https://mozilla.github.io/server-side-tls/ssl-config-generator/</span></span><br><span class=\"line\">    <span class=\"comment\">#ssl_certificate     /etc/ssl/nginx/cloud.example.com.crt;</span></span><br><span class=\"line\">    <span class=\"comment\">#ssl_certificate_key /etc/ssl/nginx/cloud.example.com.key;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Prevent nginx HTTP Server Detection</span></span><br><span class=\"line\">    <span class=\"string\">server_tokens</span> <span class=\"string\">off;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># HSTS settings</span></span><br><span class=\"line\">    <span class=\"comment\"># WARNING: Only add the preload option once you read about</span></span><br><span class=\"line\">    <span class=\"comment\"># the consequences in https://hstspreload.org/. This option</span></span><br><span class=\"line\">    <span class=\"comment\"># will add the domain to a hardcoded list that is shipped</span></span><br><span class=\"line\">    <span class=\"comment\"># in all major browsers and getting removed from this list</span></span><br><span class=\"line\">    <span class=\"comment\"># could take several months.</span></span><br><span class=\"line\">    <span class=\"comment\">#add_header Strict-Transport-Security &quot;max-age=15768000; includeSubDomains; preload&quot; always;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># set max upload size and increase upload timeout:</span></span><br><span class=\"line\">    <span class=\"string\">client_max_body_size</span> <span class=\"string\">512M;</span></span><br><span class=\"line\">    <span class=\"string\">client_body_timeout</span> <span class=\"string\">300s;</span></span><br><span class=\"line\">    <span class=\"string\">fastcgi_buffers</span> <span class=\"number\">64</span> <span class=\"string\">4K;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Enable gzip but do not remove ETag headers</span></span><br><span class=\"line\">    <span class=\"string\">gzip</span> <span class=\"string\">on;</span></span><br><span class=\"line\">    <span class=\"string\">gzip_vary</span> <span class=\"string\">on;</span></span><br><span class=\"line\">    <span class=\"string\">gzip_comp_level</span> <span class=\"number\">4</span><span class=\"string\">;</span></span><br><span class=\"line\">    <span class=\"string\">gzip_min_length</span> <span class=\"number\">256</span><span class=\"string\">;</span></span><br><span class=\"line\">    <span class=\"string\">gzip_proxied</span> <span class=\"string\">expired</span> <span class=\"literal\">no</span><span class=\"string\">-cache</span> <span class=\"literal\">no</span><span class=\"string\">-store</span> <span class=\"string\">private</span> <span class=\"string\">no_last_modified</span> <span class=\"string\">no_etag</span> <span class=\"string\">auth;</span></span><br><span class=\"line\">    <span class=\"string\">gzip_types</span> <span class=\"string\">application/atom+xml</span> <span class=\"string\">application/javascript</span> <span class=\"string\">application/json</span> <span class=\"string\">application/ld+json</span> <span class=\"string\">application/manifest+json</span> <span class=\"string\">application/rss+xml</span> <span class=\"string\">application/vnd.geo+json</span> <span class=\"string\">application/vnd.ms-fontobject</span> <span class=\"string\">application/wasm</span> <span class=\"string\">application/x-font-ttf</span> <span class=\"string\">application/x-web-app-manifest+json</span> <span class=\"string\">application/xhtml+xml</span> <span class=\"string\">application/xml</span> <span class=\"string\">font/opentype</span> <span class=\"string\">image/bmp</span> <span class=\"string\">image/svg+xml</span> <span class=\"string\">image/x-icon</span> <span class=\"string\">text/cache-manifest</span> <span class=\"string\">text/css</span> <span class=\"string\">text/plain</span> <span class=\"string\">text/vcard</span> <span class=\"string\">text/vnd.rim.location.xloc</span> <span class=\"string\">text/vtt</span> <span class=\"string\">text/x-component</span> <span class=\"string\">text/x-cross-domain-policy;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Pagespeed is not supported by Nextcloud, so if your server is built</span></span><br><span class=\"line\">    <span class=\"comment\"># with the `ngx_pagespeed` module, uncomment this line to disable it.</span></span><br><span class=\"line\">    <span class=\"comment\">#pagespeed off;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># The settings allows you to optimize the HTTP2 bandwitdth.</span></span><br><span class=\"line\">    <span class=\"comment\"># See https://blog.cloudflare.com/delivering-http-2-upload-speed-improvements/</span></span><br><span class=\"line\">    <span class=\"comment\"># for tunning hints</span></span><br><span class=\"line\">    <span class=\"string\">client_body_buffer_size</span> <span class=\"string\">512k;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># HTTP response headers borrowed from Nextcloud `.htaccess`</span></span><br><span class=\"line\">    <span class=\"string\">add_header</span> <span class=\"string\">Referrer-Policy</span>                      <span class=\"string\">&quot;no-referrer&quot;</span>   <span class=\"string\">always;</span></span><br><span class=\"line\">    <span class=\"string\">add_header</span> <span class=\"string\">X-Content-Type-Options</span>               <span class=\"string\">&quot;nosniff&quot;</span>       <span class=\"string\">always;</span></span><br><span class=\"line\">    <span class=\"string\">add_header</span> <span class=\"string\">X-Download-Options</span>                   <span class=\"string\">&quot;noopen&quot;</span>        <span class=\"string\">always;</span></span><br><span class=\"line\">    <span class=\"string\">add_header</span> <span class=\"string\">X-Frame-Options</span>                      <span class=\"string\">&quot;SAMEORIGIN&quot;</span>    <span class=\"string\">always;</span></span><br><span class=\"line\">    <span class=\"string\">add_header</span> <span class=\"string\">X-Permitted-Cross-Domain-Policies</span>    <span class=\"string\">&quot;none&quot;</span>          <span class=\"string\">always;</span></span><br><span class=\"line\">    <span class=\"string\">add_header</span> <span class=\"string\">X-Robots-Tag</span>                         <span class=\"string\">&quot;none&quot;</span>          <span class=\"string\">always;</span></span><br><span class=\"line\">    <span class=\"string\">add_header</span> <span class=\"string\">X-XSS-Protection</span>                     <span class=\"string\">&quot;1; mode=block&quot;</span> <span class=\"string\">always;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Remove X-Powered-By, which is an information leak</span></span><br><span class=\"line\">    <span class=\"string\">fastcgi_hide_header</span> <span class=\"string\">X-Powered-By;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Specify how to handle directories -- specifying `/index.php$request_uri`</span></span><br><span class=\"line\">    <span class=\"comment\"># here as the fallback means that Nginx always exhibits the desired behaviour</span></span><br><span class=\"line\">    <span class=\"comment\"># when a client requests a path that corresponds to a directory that exists</span></span><br><span class=\"line\">    <span class=\"comment\"># on the server. In particular, if that directory contains an index.php file,</span></span><br><span class=\"line\">    <span class=\"comment\"># that file is correctly served; if it doesn&#x27;t, then the request is passed to</span></span><br><span class=\"line\">    <span class=\"comment\"># the front-end controller. This consistent behaviour means that we don&#x27;t need</span></span><br><span class=\"line\">    <span class=\"comment\"># to specify custom rules for certain paths (e.g. images and other assets,</span></span><br><span class=\"line\">    <span class=\"comment\"># `/updater`, `/ocm-provider`, `/ocs-provider`), and thus</span></span><br><span class=\"line\">    <span class=\"comment\"># `try_files $uri $uri/ /index.php$request_uri`</span></span><br><span class=\"line\">    <span class=\"comment\"># always provides the desired behaviour.</span></span><br><span class=\"line\">    <span class=\"string\">index</span> <span class=\"string\">index.php</span> <span class=\"string\">index.html</span> <span class=\"string\">/index.php$request_uri;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Rule borrowed from `.htaccess` to handle Microsoft DAV clients</span></span><br><span class=\"line\">    <span class=\"string\">location</span> <span class=\"string\">=</span> <span class=\"string\">/</span> &#123;</span><br><span class=\"line\">        <span class=\"string\">if</span> <span class=\"string\">(</span> <span class=\"string\">$http_user_agent</span> <span class=\"string\">~</span> <span class=\"string\">^DavClnt</span> <span class=\"string\">)</span> &#123;</span><br><span class=\"line\">            <span class=\"string\">return</span> <span class=\"number\">302</span> <span class=\"string\">/remote.php/webdav/$is_args$args;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"string\">location</span> <span class=\"string\">=</span> <span class=\"string\">/robots.txt</span> &#123;</span><br><span class=\"line\">        <span class=\"string\">allow</span> <span class=\"string\">all;</span></span><br><span class=\"line\">        <span class=\"string\">log_not_found</span> <span class=\"string\">off;</span></span><br><span class=\"line\">        <span class=\"string\">access_log</span> <span class=\"string\">off;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Make a regex exception for `/.well-known` so that clients can still</span></span><br><span class=\"line\">    <span class=\"comment\"># access it despite the existence of the regex rule</span></span><br><span class=\"line\">    <span class=\"comment\"># `location ~ /(\\.|autotest|...)` which would otherwise handle requests</span></span><br><span class=\"line\">    <span class=\"comment\"># for `/.well-known`.</span></span><br><span class=\"line\">    <span class=\"string\">location</span> <span class=\"string\">^~</span> <span class=\"string\">/.well-known</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\"># The rules in this block are an adaptation of the rules</span></span><br><span class=\"line\">        <span class=\"comment\"># in `.htaccess` that concern `/.well-known`.</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"string\">location</span> <span class=\"string\">=</span> <span class=\"string\">/.well-known/carddav</span> &#123; <span class=\"string\">return</span> <span class=\"number\">301</span> <span class=\"string\">/remote.php/dav/;</span> &#125;</span><br><span class=\"line\">        <span class=\"string\">location</span> <span class=\"string\">=</span> <span class=\"string\">/.well-known/caldav</span>  &#123; <span class=\"string\">return</span> <span class=\"number\">301</span> <span class=\"string\">/remote.php/dav/;</span> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"string\">location</span> <span class=\"string\">/.well-known/acme-challenge</span>    &#123; <span class=\"string\">try_files</span> <span class=\"string\">$uri</span> <span class=\"string\">$uri/</span> <span class=\"string\">=404;</span> &#125;</span><br><span class=\"line\">        <span class=\"string\">location</span> <span class=\"string\">/.well-known/pki-validation</span>    &#123; <span class=\"string\">try_files</span> <span class=\"string\">$uri</span> <span class=\"string\">$uri/</span> <span class=\"string\">=404;</span> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># Let Nextcloud&#x27;s API for `/.well-known` URIs handle all other</span></span><br><span class=\"line\">        <span class=\"comment\"># requests by passing them to the front-end controller.</span></span><br><span class=\"line\">        <span class=\"string\">return</span> <span class=\"number\">301</span> <span class=\"string\">/index.php$request_uri;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Rules borrowed from `.htaccess` to hide certain paths from clients</span></span><br><span class=\"line\">    <span class=\"string\">location</span> <span class=\"string\">~</span> <span class=\"string\">^/(?:build|tests|config|lib|3rdparty|templates|data)(?:$|/)</span>  &#123; <span class=\"string\">return</span> <span class=\"number\">404</span><span class=\"string\">;</span> &#125;</span><br><span class=\"line\">    <span class=\"string\">location</span> <span class=\"string\">~</span> <span class=\"string\">^/(?:\\.|autotest|occ|issue|indie|db_|console)</span>                &#123; <span class=\"string\">return</span> <span class=\"number\">404</span><span class=\"string\">;</span> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Ensure this block, which passes PHP files to the PHP process, is above the blocks</span></span><br><span class=\"line\">    <span class=\"comment\"># which handle static assets (as seen below). If this block is not declared first,</span></span><br><span class=\"line\">    <span class=\"comment\"># then Nginx will encounter an infinite rewriting loop when it prepends `/index.php`</span></span><br><span class=\"line\">    <span class=\"comment\"># to the URI, resulting in a HTTP 500 error response.</span></span><br><span class=\"line\">    <span class=\"string\">location</span> <span class=\"string\">~</span> <span class=\"string\">\\.php(?:$|/)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\"># Required for legacy support</span></span><br><span class=\"line\">        <span class=\"string\">rewrite</span> <span class=\"string\">^/(?!index|remote|public|cron|core\\/ajax\\/update|status|ocs\\/v</span>[<span class=\"number\">12</span>]<span class=\"string\">|updater\\/.+|oc</span>[<span class=\"string\">ms</span>]<span class=\"string\">-provider\\/.+|.+\\/richdocumentscode\\/proxy)</span> <span class=\"string\">/index.php$request_uri;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"string\">fastcgi_split_path_info</span> <span class=\"string\">^(.+?\\.php)(/.*)$;</span></span><br><span class=\"line\">        <span class=\"string\">set</span> <span class=\"string\">$path_info</span> <span class=\"string\">$fastcgi_path_info;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"string\">try_files</span> <span class=\"string\">$fastcgi_script_name</span> <span class=\"string\">=404;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"string\">include</span> <span class=\"string\">fastcgi_params;</span></span><br><span class=\"line\">        <span class=\"string\">fastcgi_param</span> <span class=\"string\">SCRIPT_FILENAME</span> <span class=\"string\">$document_root$fastcgi_script_name;</span></span><br><span class=\"line\">        <span class=\"string\">fastcgi_param</span> <span class=\"string\">PATH_INFO</span> <span class=\"string\">$path_info;</span></span><br><span class=\"line\">        <span class=\"string\">fastcgi_param</span> <span class=\"string\">HTTPS</span> <span class=\"string\">on;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"string\">fastcgi_param</span> <span class=\"string\">modHeadersAvailable</span> <span class=\"literal\">true</span><span class=\"string\">;</span>         <span class=\"comment\"># Avoid sending the security headers twice</span></span><br><span class=\"line\">        <span class=\"string\">fastcgi_param</span> <span class=\"string\">front_controller_active</span> <span class=\"literal\">true</span><span class=\"string\">;</span>     <span class=\"comment\"># Enable pretty urls</span></span><br><span class=\"line\">        <span class=\"string\">fastcgi_pass</span> <span class=\"string\">php-handler;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"string\">fastcgi_intercept_errors</span> <span class=\"string\">on;</span></span><br><span class=\"line\">        <span class=\"string\">fastcgi_request_buffering</span> <span class=\"string\">off;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"string\">fastcgi_max_temp_file_size</span> <span class=\"number\">0</span><span class=\"string\">;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"string\">location</span> <span class=\"string\">~</span> <span class=\"string\">\\.(?:css|js|svg|gif|png|jpg|ico|wasm|tflite|map)$</span> &#123;</span><br><span class=\"line\">        <span class=\"string\">try_files</span> <span class=\"string\">$uri</span> <span class=\"string\">/index.php$request_uri;</span></span><br><span class=\"line\">        <span class=\"string\">add_header</span> <span class=\"string\">Cache-Control</span> <span class=\"string\">&quot;public, max-age=15778463, $asset_immutable&quot;</span><span class=\"string\">;</span></span><br><span class=\"line\">        <span class=\"string\">access_log</span> <span class=\"string\">off;</span>     <span class=\"comment\"># Optional: Don&#x27;t log access to assets</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"string\">location</span> <span class=\"string\">~</span> <span class=\"string\">\\.wasm$</span> &#123;</span><br><span class=\"line\">            <span class=\"string\">default_type</span> <span class=\"string\">application/wasm;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"string\">location</span> <span class=\"string\">~</span> <span class=\"string\">\\.woff2?$</span> &#123;</span><br><span class=\"line\">        <span class=\"string\">try_files</span> <span class=\"string\">$uri</span> <span class=\"string\">/index.php$request_uri;</span></span><br><span class=\"line\">        <span class=\"string\">expires</span> <span class=\"string\">7d;</span>         <span class=\"comment\"># Cache-Control policy borrowed from `.htaccess`</span></span><br><span class=\"line\">        <span class=\"string\">access_log</span> <span class=\"string\">off;</span>     <span class=\"comment\"># Optional: Don&#x27;t log access to assets</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Rule borrowed from `.htaccess`</span></span><br><span class=\"line\">    <span class=\"string\">location</span> <span class=\"string\">/remote</span> &#123;</span><br><span class=\"line\">        <span class=\"string\">return</span> <span class=\"number\">301</span> <span class=\"string\">/remote.php$request_uri;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"string\">location</span> <span class=\"string\">/</span> &#123;</span><br><span class=\"line\">        <span class=\"string\">try_files</span> <span class=\"string\">$uri</span> <span class=\"string\">$uri/</span> <span class=\"string\">/index.php$request_uri;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li><p>Cant write into config directory! This can usually be fixed by giving the webserver write access to the config directory.</p>\n</li>\n<li><p>Cant write into apps directory! This can usually be fixed by giving the webserver write access to the config directory.</p>\n</li>\n</ol>\n<p>: </p>\n<p>php74-fpm</p>\n<p><code>/usr/share/nginx/nextcloud/config</code><br><code>/usr/share/nginx/nextcloud/apps</code></p>\n<p>chown -R php:php  <code>/usr/share/nginx/nextcloud/config</code><br>chown -R php:php  <code>/usr/share/nginx/nextcloud/apps</code></p>\n<p>: </p>\n<p>chmod -R 777 <code>/usr/share/nginx/nextcloud/config</code><br>chmod -R 777 <code>/usr/share/nginx/nextcloud/apps</code></p>\n"},{"title":"CAhttps","date":"2022-11-24T06:35:13.000Z","_content":"\n\n##   CA \n\n``` openssl genrsa -des3 -out root-ca.key 2048 ```\n\n**CA**\n**des3**\n\n<img src=\"/images/031.ca.md.01.png\" width=100% height=100% />\n\n##   CA \n\n### 1.1 CSR\n\n\n``` bash\nopenssl req -x509 -new -nodes -sha256 -days 7300  \\\n            -key root-ca.key \\\n            -out root-ca.crt \\\n            -subj \"/C=CN/ST=Zhejiang/L=Hangzhou/O=root/OU=root/CN=root\"\n```\n****\n\n``` bash\nC  : Country Name                      # \nST :State or Province Name             # /\nL  :Locality Name                      # \nO  :Organization Name                  # \nOU :Organizational Unit Name           # \nCN :Common Name                        # \n``` \n\n### 1.2 \n\n``` openssl req -x509 -new -nodes -sha256 -days 7300  -key root-ca.key -out root-ca.crt ```\n\n**CSRemail**\n``` \n[root@localhost CA]# openssl req -x509 -new -nodes -sha256 -days 720 -key root-ca.key -out root-ca.crt \\\n> \nEnter pass phrase for root-ca.key:\nYou are about to be asked to enter information that will be incorporated\ninto your certificate request.\nWhat you are about to enter is what is called a Distinguished Name or a DN.\nThere are quite a few fields but you can leave some blank\nFor some fields there will be a default value,\nIf you enter '.', the field will be left blank.\n-----\nCountry Name (2 letter code) [XX]:CN\nState or Province Name (full name) []:Zhejiang\nLocality Name (eg, city) [Default City]:Hangzhou\nOrganization Name (eg, company) [Default Company Ltd]:root\nOrganizational Unit Name (eg, section) []:root\nCommon Name (eg, your name or your server's hostname) []:root\nEmail Address []:@root.com     \n[root@localhost CA]# \n```\n\n### 1.3 \n\n``` openssl x509 -in root-ca.crt -noout -text ```\n\n```\n[root@localhost CA]# openssl x509 -in root-ca.crt -noout -text\nCertificate:\n    Data:\n        Version: 3 (0x2)\n        Serial Number:\n            83:6d:15:68:11:48:42:af\n    Signature Algorithm: sha256WithRSAEncryption\n        Issuer: C=CN, ST=Zhejiang, L=Hangzhou, O=root, OU=root, CN=root\n        Validity\n            Not Before: Sep 21 17:46:03 2023 GMT\n            Not After : Sep 16 17:46:03 2043 GMT\n        Subject: C=CN, ST=Zhejiang, L=Hangzhou, O=root, OU=root, CN=root\n        Subject Public Key Info:\n            Public Key Algorithm: rsaEncryption\n                Public-Key: (2048 bit)\n                Modulus:\n                    00:d9:6c:a1:a7:2c:a4:d1:32:3a:c3:40:63:7f:5e:\n                    79:20:4f:cc:1e:99:e2:38:98:e8:e1:64:7c:39:7d:\n                    b9:ed:10:20:d5:06:7f:27:13:bf:b8:07:fc:9a:48:\n                    01:21:a0:6b:7b:ae:4e:be:8f:f2:43:02:8c:5e:14:\n                    56:cf:8b:fa:e0:6e:5f:1c:5c:4e:d7:3a:17:b2:f7:\n                    58:aa:ef:4c:6b:e4:cd:38:cf:92:7e:15:e5:52:66:\n                    c2:b1:47:4d:2e:74:49:a9:4a:bc:1e:60:c2:48:7d:\n                    6b:16:c5:34:46:23:2c:3c:dc:19:f0:d5:ba:a8:b7:\n                    43:3b:7f:a0:65:21:26:78:0d:de:96:60:c7:58:50:\n                    64:bd:7c:9d:8b:68:55:f7:d2:ed:40:ad:b7:f1:50:\n                    e2:9d:ac:e6:a3:b6:0e:4d:12:ab:50:54:5b:3e:62:\n                    68:ad:6f:dd:8f:50:b5:20:25:28:46:4d:24:42:99:\n                    c1:ae:60:08:42:c6:40:aa:e1:3c:fc:59:ce:17:39:\n                    a9:b2:54:6b:fb:62:f0:11:4e:91:45:e9:6a:90:b6:\n                    e6:ab:27:82:50:3b:b2:66:44:47:0e:73:1d:cd:65:\n                    4c:c8:c8:3c:f7:b1:2c:ff:2a:55:c7:90:be:14:17:\n                    24:2b:05:69:18:fd:51:23:28:39:6a:3c:7b:52:e9:\n                    cb:4b\n                Exponent: 65537 (0x10001)\n        X509v3 extensions:\n            X509v3 Subject Key Identifier: \n                A0:6F:B7:44:0F:E4:57:9C:B0:64:72:EE:00:BE:D1:D7:D6:BA:E2:F5\n            X509v3 Authority Key Identifier: \n                keyid:A0:6F:B7:44:0F:E4:57:9C:B0:64:72:EE:00:BE:D1:D7:D6:BA:E2:F5\n\n            X509v3 Basic Constraints: \n                CA:TRUE\n    Signature Algorithm: sha256WithRSAEncryption\n         0c:66:dc:ea:7d:ad:84:d2:a2:a2:1e:76:87:d3:14:62:85:1d:\n         63:f4:d0:2d:a7:5b:3c:42:24:45:21:85:d6:d1:29:02:aa:4d:\n         8b:21:1d:10:13:7a:dd:b6:c7:fd:2a:68:44:85:3a:62:86:2d:\n         db:31:34:64:d6:c2:44:a3:78:18:85:ba:24:fe:ce:ed:f1:9a:\n         25:90:76:da:f8:10:b1:67:f8:b0:35:47:a2:1d:5d:88:f5:d8:\n         5a:c7:34:36:06:bd:4d:eb:db:6c:39:4d:56:9c:7a:8f:0e:19:\n         e6:97:43:5d:87:ca:79:52:e8:be:eb:3e:08:a3:d6:17:22:b3:\n         d9:ff:67:ef:1f:43:28:b1:4c:c7:d1:7f:fa:0b:b5:2c:65:47:\n         ed:16:cd:07:f0:1d:15:64:5e:c6:74:9c:b8:78:59:a6:1f:07:\n         3a:ec:1c:54:d4:18:33:bc:00:b5:5b:f3:25:87:4d:63:d8:dd:\n         37:e6:88:a1:e8:9e:49:0f:88:cf:5e:d0:73:68:84:fe:8e:3c:\n         b6:05:fb:51:3b:e9:62:e8:43:2c:e4:ed:83:85:43:86:f7:ee:\n         f8:52:b7:26:ae:6a:58:ed:69:9a:78:a7:9c:0a:49:1d:7e:38:\n         31:e5:a0:21:ab:cb:2a:85:59:7a:97:29:7e:96:06:c9:93:75:\n         15:83:74:88\n[root@localhost CA]#\n```\n\n\n\n##   ssl \n\n``` openssl genrsa -out mdzz.wang.key 2048 ``` \n\n##   \n\n``` bash\nopenssl req -new -key mdzz.wang.key -out mdzz.wang.csr \n\t\t \t\t -subj \"/C=CN/ST=Zhejiang/L=Hangzhou/O=mdzz/OU=mdzz/CN=mdzz.wang\"\n```\n\n##  \n\n``` vim cert.ext ```\n\n``` bash\nauthorityKeyIdentifier=keyid,issuer\nbasicConstraints=CA:FALSE\nkeyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment\nsubjectAltName = @alt_names\n\n[alt_names]\nDNS.1 = localhost\nIP.2 = 127.0.0.1\nDNS.3 = mdzz.com\nDNS.4 = *.mdzz.com\n```\n\n##  CA ssl\n\n``` bash\nopenssl x509 -req -in mdzz.wang.csr -out mdzz.wang.crt -days 365 \\\n             -CAcreateserial -CA root-ca.crt -CAkey root-ca.key \\\n             -CAserial serial -extfile cert.ext\n```\n\n### 5.1 \n\n<img src=\"/images/031.ca.md.02.png\" width=100% height=100% />\n\n\n## \n\n1. **CA**\n    1.1 **CA**\n    1.2 **CA**\n2. **mdzz.wanghttps**\n3. **mdzz.wangCSR**\n4. **CAmdzz.wang**\n\n\n\n##  https\n\n**https, CA**\n\n### 6.1 \n\n``` openssl genrsa -des3 -out test.key 2048 ```\n\n### 6.2 \n\n``` bash\nopenssl req \\\n         -newkey rsa:2048 -nodes -keyout test.key \\\n         -x509 -days 365 -out test.crt \\\n         -subj \"/C=CN/ST=Zhejiang/L=Hangzhou/O=test/OU=test/CN=test\"\n```\n\n### 6.3 \n\n<img src=\"/images/031.ca.md.03.png\" width=100% height=100% />\n","source":"_posts/031.ca.md","raw":"---\ntitle: CAhttps\ndate: 2022-11-24 14:35:13\ncategories: \n- [DevOps]\n- [CentOS]\ntags: \n- CA\n- openssl\n- https\n---\n\n\n##   CA \n\n``` openssl genrsa -des3 -out root-ca.key 2048 ```\n\n**CA**\n**des3**\n\n<img src=\"/images/031.ca.md.01.png\" width=100% height=100% />\n\n##   CA \n\n### 1.1 CSR\n\n\n``` bash\nopenssl req -x509 -new -nodes -sha256 -days 7300  \\\n            -key root-ca.key \\\n            -out root-ca.crt \\\n            -subj \"/C=CN/ST=Zhejiang/L=Hangzhou/O=root/OU=root/CN=root\"\n```\n****\n\n``` bash\nC  : Country Name                      # \nST :State or Province Name             # /\nL  :Locality Name                      # \nO  :Organization Name                  # \nOU :Organizational Unit Name           # \nCN :Common Name                        # \n``` \n\n### 1.2 \n\n``` openssl req -x509 -new -nodes -sha256 -days 7300  -key root-ca.key -out root-ca.crt ```\n\n**CSRemail**\n``` \n[root@localhost CA]# openssl req -x509 -new -nodes -sha256 -days 720 -key root-ca.key -out root-ca.crt \\\n> \nEnter pass phrase for root-ca.key:\nYou are about to be asked to enter information that will be incorporated\ninto your certificate request.\nWhat you are about to enter is what is called a Distinguished Name or a DN.\nThere are quite a few fields but you can leave some blank\nFor some fields there will be a default value,\nIf you enter '.', the field will be left blank.\n-----\nCountry Name (2 letter code) [XX]:CN\nState or Province Name (full name) []:Zhejiang\nLocality Name (eg, city) [Default City]:Hangzhou\nOrganization Name (eg, company) [Default Company Ltd]:root\nOrganizational Unit Name (eg, section) []:root\nCommon Name (eg, your name or your server's hostname) []:root\nEmail Address []:@root.com     \n[root@localhost CA]# \n```\n\n### 1.3 \n\n``` openssl x509 -in root-ca.crt -noout -text ```\n\n```\n[root@localhost CA]# openssl x509 -in root-ca.crt -noout -text\nCertificate:\n    Data:\n        Version: 3 (0x2)\n        Serial Number:\n            83:6d:15:68:11:48:42:af\n    Signature Algorithm: sha256WithRSAEncryption\n        Issuer: C=CN, ST=Zhejiang, L=Hangzhou, O=root, OU=root, CN=root\n        Validity\n            Not Before: Sep 21 17:46:03 2023 GMT\n            Not After : Sep 16 17:46:03 2043 GMT\n        Subject: C=CN, ST=Zhejiang, L=Hangzhou, O=root, OU=root, CN=root\n        Subject Public Key Info:\n            Public Key Algorithm: rsaEncryption\n                Public-Key: (2048 bit)\n                Modulus:\n                    00:d9:6c:a1:a7:2c:a4:d1:32:3a:c3:40:63:7f:5e:\n                    79:20:4f:cc:1e:99:e2:38:98:e8:e1:64:7c:39:7d:\n                    b9:ed:10:20:d5:06:7f:27:13:bf:b8:07:fc:9a:48:\n                    01:21:a0:6b:7b:ae:4e:be:8f:f2:43:02:8c:5e:14:\n                    56:cf:8b:fa:e0:6e:5f:1c:5c:4e:d7:3a:17:b2:f7:\n                    58:aa:ef:4c:6b:e4:cd:38:cf:92:7e:15:e5:52:66:\n                    c2:b1:47:4d:2e:74:49:a9:4a:bc:1e:60:c2:48:7d:\n                    6b:16:c5:34:46:23:2c:3c:dc:19:f0:d5:ba:a8:b7:\n                    43:3b:7f:a0:65:21:26:78:0d:de:96:60:c7:58:50:\n                    64:bd:7c:9d:8b:68:55:f7:d2:ed:40:ad:b7:f1:50:\n                    e2:9d:ac:e6:a3:b6:0e:4d:12:ab:50:54:5b:3e:62:\n                    68:ad:6f:dd:8f:50:b5:20:25:28:46:4d:24:42:99:\n                    c1:ae:60:08:42:c6:40:aa:e1:3c:fc:59:ce:17:39:\n                    a9:b2:54:6b:fb:62:f0:11:4e:91:45:e9:6a:90:b6:\n                    e6:ab:27:82:50:3b:b2:66:44:47:0e:73:1d:cd:65:\n                    4c:c8:c8:3c:f7:b1:2c:ff:2a:55:c7:90:be:14:17:\n                    24:2b:05:69:18:fd:51:23:28:39:6a:3c:7b:52:e9:\n                    cb:4b\n                Exponent: 65537 (0x10001)\n        X509v3 extensions:\n            X509v3 Subject Key Identifier: \n                A0:6F:B7:44:0F:E4:57:9C:B0:64:72:EE:00:BE:D1:D7:D6:BA:E2:F5\n            X509v3 Authority Key Identifier: \n                keyid:A0:6F:B7:44:0F:E4:57:9C:B0:64:72:EE:00:BE:D1:D7:D6:BA:E2:F5\n\n            X509v3 Basic Constraints: \n                CA:TRUE\n    Signature Algorithm: sha256WithRSAEncryption\n         0c:66:dc:ea:7d:ad:84:d2:a2:a2:1e:76:87:d3:14:62:85:1d:\n         63:f4:d0:2d:a7:5b:3c:42:24:45:21:85:d6:d1:29:02:aa:4d:\n         8b:21:1d:10:13:7a:dd:b6:c7:fd:2a:68:44:85:3a:62:86:2d:\n         db:31:34:64:d6:c2:44:a3:78:18:85:ba:24:fe:ce:ed:f1:9a:\n         25:90:76:da:f8:10:b1:67:f8:b0:35:47:a2:1d:5d:88:f5:d8:\n         5a:c7:34:36:06:bd:4d:eb:db:6c:39:4d:56:9c:7a:8f:0e:19:\n         e6:97:43:5d:87:ca:79:52:e8:be:eb:3e:08:a3:d6:17:22:b3:\n         d9:ff:67:ef:1f:43:28:b1:4c:c7:d1:7f:fa:0b:b5:2c:65:47:\n         ed:16:cd:07:f0:1d:15:64:5e:c6:74:9c:b8:78:59:a6:1f:07:\n         3a:ec:1c:54:d4:18:33:bc:00:b5:5b:f3:25:87:4d:63:d8:dd:\n         37:e6:88:a1:e8:9e:49:0f:88:cf:5e:d0:73:68:84:fe:8e:3c:\n         b6:05:fb:51:3b:e9:62:e8:43:2c:e4:ed:83:85:43:86:f7:ee:\n         f8:52:b7:26:ae:6a:58:ed:69:9a:78:a7:9c:0a:49:1d:7e:38:\n         31:e5:a0:21:ab:cb:2a:85:59:7a:97:29:7e:96:06:c9:93:75:\n         15:83:74:88\n[root@localhost CA]#\n```\n\n\n\n##   ssl \n\n``` openssl genrsa -out mdzz.wang.key 2048 ``` \n\n##   \n\n``` bash\nopenssl req -new -key mdzz.wang.key -out mdzz.wang.csr \n\t\t \t\t -subj \"/C=CN/ST=Zhejiang/L=Hangzhou/O=mdzz/OU=mdzz/CN=mdzz.wang\"\n```\n\n##  \n\n``` vim cert.ext ```\n\n``` bash\nauthorityKeyIdentifier=keyid,issuer\nbasicConstraints=CA:FALSE\nkeyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment\nsubjectAltName = @alt_names\n\n[alt_names]\nDNS.1 = localhost\nIP.2 = 127.0.0.1\nDNS.3 = mdzz.com\nDNS.4 = *.mdzz.com\n```\n\n##  CA ssl\n\n``` bash\nopenssl x509 -req -in mdzz.wang.csr -out mdzz.wang.crt -days 365 \\\n             -CAcreateserial -CA root-ca.crt -CAkey root-ca.key \\\n             -CAserial serial -extfile cert.ext\n```\n\n### 5.1 \n\n<img src=\"/images/031.ca.md.02.png\" width=100% height=100% />\n\n\n## \n\n1. **CA**\n    1.1 **CA**\n    1.2 **CA**\n2. **mdzz.wanghttps**\n3. **mdzz.wangCSR**\n4. **CAmdzz.wang**\n\n\n\n##  https\n\n**https, CA**\n\n### 6.1 \n\n``` openssl genrsa -des3 -out test.key 2048 ```\n\n### 6.2 \n\n``` bash\nopenssl req \\\n         -newkey rsa:2048 -nodes -keyout test.key \\\n         -x509 -days 365 -out test.crt \\\n         -subj \"/C=CN/ST=Zhejiang/L=Hangzhou/O=test/OU=test/CN=test\"\n```\n\n### 6.3 \n\n<img src=\"/images/031.ca.md.03.png\" width=100% height=100% />\n","slug":"031.ca","published":1,"updated":"2023-09-22T08:28:50.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbfa0031yknrd6z335ut","content":"<h2 id=\"--CA-\"><a href=\"#--CA-\" class=\"headerlink\" title=\"  CA \"></a>  CA </h2><p><code>openssl genrsa -des3 -out root-ca.key 2048</code></p>\n<p><strong>CA</strong><br><strong>des3</strong></p>\n<img src=\"/images/031.ca.md.01.png\" width=100% height=100% />\n\n<h2 id=\"--CA-\"><a href=\"#--CA-\" class=\"headerlink\" title=\"  CA \"></a>  CA </h2><h3 id=\"1-1-CSR\"><a href=\"#1-1-CSR\" class=\"headerlink\" title=\"1.1 CSR\"></a>1.1 CSR</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl req -x509 -new -nodes -sha256 -days 7300  \\</span><br><span class=\"line\">            -key root-ca.key \\</span><br><span class=\"line\">            -out root-ca.crt \\</span><br><span class=\"line\">            -subj <span class=\"string\">&quot;/C=CN/ST=Zhejiang/L=Hangzhou/O=root/OU=root/CN=root&quot;</span></span><br></pre></td></tr></table></figure>\n<p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">C  : Country Name                      <span class=\"comment\"># </span></span><br><span class=\"line\">ST :State or Province Name             <span class=\"comment\"># /</span></span><br><span class=\"line\">L  :Locality Name                      <span class=\"comment\"># </span></span><br><span class=\"line\">O  :Organization Name                  <span class=\"comment\"># </span></span><br><span class=\"line\">OU :Organizational Unit Name           <span class=\"comment\"># </span></span><br><span class=\"line\">CN :Common Name                        <span class=\"comment\"># </span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-2-\"><a href=\"#1-2-\" class=\"headerlink\" title=\"1.2 \"></a>1.2 </h3><p><code>openssl req -x509 -new -nodes -sha256 -days 7300  -key root-ca.key -out root-ca.crt</code></p>\n<p><strong>CSRemail</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost CA]# openssl req -x509 -new -nodes -sha256 -days 720 -key root-ca.key -out root-ca.crt \\</span><br><span class=\"line\">&gt; </span><br><span class=\"line\">Enter pass phrase for root-ca.key:</span><br><span class=\"line\">You are about to be asked to enter information that will be incorporated</span><br><span class=\"line\">into your certificate request.</span><br><span class=\"line\">What you are about to enter is what is called a Distinguished Name or a DN.</span><br><span class=\"line\">There are quite a few fields but you can leave some blank</span><br><span class=\"line\">For some fields there will be a default value,</span><br><span class=\"line\">If you enter &#x27;.&#x27;, the field will be left blank.</span><br><span class=\"line\">-----</span><br><span class=\"line\">Country Name (2 letter code) [XX]:CN</span><br><span class=\"line\">State or Province Name (full name) []:Zhejiang</span><br><span class=\"line\">Locality Name (eg, city) [Default City]:Hangzhou</span><br><span class=\"line\">Organization Name (eg, company) [Default Company Ltd]:root</span><br><span class=\"line\">Organizational Unit Name (eg, section) []:root</span><br><span class=\"line\">Common Name (eg, your name or your server&#x27;s hostname) []:root</span><br><span class=\"line\">Email Address []:@root.com     </span><br><span class=\"line\">[root@localhost CA]# </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-3-\"><a href=\"#1-3-\" class=\"headerlink\" title=\"1.3 \"></a>1.3 </h3><p><code>openssl x509 -in root-ca.crt -noout -text</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost CA]# openssl x509 -in root-ca.crt -noout -text</span><br><span class=\"line\">Certificate:</span><br><span class=\"line\">    Data:</span><br><span class=\"line\">        Version: 3 (0x2)</span><br><span class=\"line\">        Serial Number:</span><br><span class=\"line\">            83:6d:15:68:11:48:42:af</span><br><span class=\"line\">    Signature Algorithm: sha256WithRSAEncryption</span><br><span class=\"line\">        Issuer: C=CN, ST=Zhejiang, L=Hangzhou, O=root, OU=root, CN=root</span><br><span class=\"line\">        Validity</span><br><span class=\"line\">            Not Before: Sep 21 17:46:03 2023 GMT</span><br><span class=\"line\">            Not After : Sep 16 17:46:03 2043 GMT</span><br><span class=\"line\">        Subject: C=CN, ST=Zhejiang, L=Hangzhou, O=root, OU=root, CN=root</span><br><span class=\"line\">        Subject Public Key Info:</span><br><span class=\"line\">            Public Key Algorithm: rsaEncryption</span><br><span class=\"line\">                Public-Key: (2048 bit)</span><br><span class=\"line\">                Modulus:</span><br><span class=\"line\">                    00:d9:6c:a1:a7:2c:a4:d1:32:3a:c3:40:63:7f:5e:</span><br><span class=\"line\">                    79:20:4f:cc:1e:99:e2:38:98:e8:e1:64:7c:39:7d:</span><br><span class=\"line\">                    b9:ed:10:20:d5:06:7f:27:13:bf:b8:07:fc:9a:48:</span><br><span class=\"line\">                    01:21:a0:6b:7b:ae:4e:be:8f:f2:43:02:8c:5e:14:</span><br><span class=\"line\">                    56:cf:8b:fa:e0:6e:5f:1c:5c:4e:d7:3a:17:b2:f7:</span><br><span class=\"line\">                    58:aa:ef:4c:6b:e4:cd:38:cf:92:7e:15:e5:52:66:</span><br><span class=\"line\">                    c2:b1:47:4d:2e:74:49:a9:4a:bc:1e:60:c2:48:7d:</span><br><span class=\"line\">                    6b:16:c5:34:46:23:2c:3c:dc:19:f0:d5:ba:a8:b7:</span><br><span class=\"line\">                    43:3b:7f:a0:65:21:26:78:0d:de:96:60:c7:58:50:</span><br><span class=\"line\">                    64:bd:7c:9d:8b:68:55:f7:d2:ed:40:ad:b7:f1:50:</span><br><span class=\"line\">                    e2:9d:ac:e6:a3:b6:0e:4d:12:ab:50:54:5b:3e:62:</span><br><span class=\"line\">                    68:ad:6f:dd:8f:50:b5:20:25:28:46:4d:24:42:99:</span><br><span class=\"line\">                    c1:ae:60:08:42:c6:40:aa:e1:3c:fc:59:ce:17:39:</span><br><span class=\"line\">                    a9:b2:54:6b:fb:62:f0:11:4e:91:45:e9:6a:90:b6:</span><br><span class=\"line\">                    e6:ab:27:82:50:3b:b2:66:44:47:0e:73:1d:cd:65:</span><br><span class=\"line\">                    4c:c8:c8:3c:f7:b1:2c:ff:2a:55:c7:90:be:14:17:</span><br><span class=\"line\">                    24:2b:05:69:18:fd:51:23:28:39:6a:3c:7b:52:e9:</span><br><span class=\"line\">                    cb:4b</span><br><span class=\"line\">                Exponent: 65537 (0x10001)</span><br><span class=\"line\">        X509v3 extensions:</span><br><span class=\"line\">            X509v3 Subject Key Identifier: </span><br><span class=\"line\">                A0:6F:B7:44:0F:E4:57:9C:B0:64:72:EE:00:BE:D1:D7:D6:BA:E2:F5</span><br><span class=\"line\">            X509v3 Authority Key Identifier: </span><br><span class=\"line\">                keyid:A0:6F:B7:44:0F:E4:57:9C:B0:64:72:EE:00:BE:D1:D7:D6:BA:E2:F5</span><br><span class=\"line\"></span><br><span class=\"line\">            X509v3 Basic Constraints: </span><br><span class=\"line\">                CA:TRUE</span><br><span class=\"line\">    Signature Algorithm: sha256WithRSAEncryption</span><br><span class=\"line\">         0c:66:dc:ea:7d:ad:84:d2:a2:a2:1e:76:87:d3:14:62:85:1d:</span><br><span class=\"line\">         63:f4:d0:2d:a7:5b:3c:42:24:45:21:85:d6:d1:29:02:aa:4d:</span><br><span class=\"line\">         8b:21:1d:10:13:7a:dd:b6:c7:fd:2a:68:44:85:3a:62:86:2d:</span><br><span class=\"line\">         db:31:34:64:d6:c2:44:a3:78:18:85:ba:24:fe:ce:ed:f1:9a:</span><br><span class=\"line\">         25:90:76:da:f8:10:b1:67:f8:b0:35:47:a2:1d:5d:88:f5:d8:</span><br><span class=\"line\">         5a:c7:34:36:06:bd:4d:eb:db:6c:39:4d:56:9c:7a:8f:0e:19:</span><br><span class=\"line\">         e6:97:43:5d:87:ca:79:52:e8:be:eb:3e:08:a3:d6:17:22:b3:</span><br><span class=\"line\">         d9:ff:67:ef:1f:43:28:b1:4c:c7:d1:7f:fa:0b:b5:2c:65:47:</span><br><span class=\"line\">         ed:16:cd:07:f0:1d:15:64:5e:c6:74:9c:b8:78:59:a6:1f:07:</span><br><span class=\"line\">         3a:ec:1c:54:d4:18:33:bc:00:b5:5b:f3:25:87:4d:63:d8:dd:</span><br><span class=\"line\">         37:e6:88:a1:e8:9e:49:0f:88:cf:5e:d0:73:68:84:fe:8e:3c:</span><br><span class=\"line\">         b6:05:fb:51:3b:e9:62:e8:43:2c:e4:ed:83:85:43:86:f7:ee:</span><br><span class=\"line\">         f8:52:b7:26:ae:6a:58:ed:69:9a:78:a7:9c:0a:49:1d:7e:38:</span><br><span class=\"line\">         31:e5:a0:21:ab:cb:2a:85:59:7a:97:29:7e:96:06:c9:93:75:</span><br><span class=\"line\">         15:83:74:88</span><br><span class=\"line\">[root@localhost CA]#</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"--ssl-\"><a href=\"#--ssl-\" class=\"headerlink\" title=\"  ssl \"></a>  ssl </h2><p><code>openssl genrsa -out mdzz.wang.key 2048</code> </p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl req -new -key mdzz.wang.key -out mdzz.wang.csr </span><br><span class=\"line\">\t\t \t\t -subj <span class=\"string\">&quot;/C=CN/ST=Zhejiang/L=Hangzhou/O=mdzz/OU=mdzz/CN=mdzz.wang&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><code>vim cert.ext</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">authorityKeyIdentifier=keyid,issuer</span><br><span class=\"line\">basicConstraints=CA:FALSE</span><br><span class=\"line\">keyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment</span><br><span class=\"line\">subjectAltName = @alt_names</span><br><span class=\"line\"></span><br><span class=\"line\">[alt_names]</span><br><span class=\"line\">DNS.1 = localhost</span><br><span class=\"line\">IP.2 = 127.0.0.1</span><br><span class=\"line\">DNS.3 = mdzz.com</span><br><span class=\"line\">DNS.4 = *.mdzz.com</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"-CA-ssl\"><a href=\"#-CA-ssl\" class=\"headerlink\" title=\" CA ssl\"></a> CA ssl</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl x509 -req -<span class=\"keyword\">in</span> mdzz.wang.csr -out mdzz.wang.crt -days 365 \\</span><br><span class=\"line\">             -CAcreateserial -CA root-ca.crt -CAkey root-ca.key \\</span><br><span class=\"line\">             -CAserial serial -extfile cert.ext</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5-1-\"><a href=\"#5-1-\" class=\"headerlink\" title=\"5.1 \"></a>5.1 </h3><img src=\"/images/031.ca.md.02.png\" width=100% height=100% />\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li><strong>CA</strong><br> 1.1 <strong>CA</strong><br> 1.2 <strong>CA</strong></li>\n<li><strong>mdzz.wanghttps</strong></li>\n<li><strong>mdzz.wangCSR</strong></li>\n<li><strong>CAmdzz.wang</strong></li>\n</ol>\n<h2 id=\"-https\"><a href=\"#-https\" class=\"headerlink\" title=\" https\"></a> https</h2><p><strong>https, CA</strong></p>\n<h3 id=\"6-1-\"><a href=\"#6-1-\" class=\"headerlink\" title=\"6.1 \"></a>6.1 </h3><p><code>openssl genrsa -des3 -out test.key 2048</code></p>\n<h3 id=\"6-2-\"><a href=\"#6-2-\" class=\"headerlink\" title=\"6.2 \"></a>6.2 </h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl req \\</span><br><span class=\"line\">         -newkey rsa:2048 -nodes -keyout test.key \\</span><br><span class=\"line\">         -x509 -days 365 -out test.crt \\</span><br><span class=\"line\">         -subj <span class=\"string\">&quot;/C=CN/ST=Zhejiang/L=Hangzhou/O=test/OU=test/CN=test&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6-3-\"><a href=\"#6-3-\" class=\"headerlink\" title=\"6.3 \"></a>6.3 </h3><img src=\"/images/031.ca.md.03.png\" width=100% height=100% />\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"--CA-\"><a href=\"#--CA-\" class=\"headerlink\" title=\"  CA \"></a>  CA </h2><p><code>openssl genrsa -des3 -out root-ca.key 2048</code></p>\n<p><strong>CA</strong><br><strong>des3</strong></p>\n<img src=\"/images/031.ca.md.01.png\" width=100% height=100% />\n\n<h2 id=\"--CA-\"><a href=\"#--CA-\" class=\"headerlink\" title=\"  CA \"></a>  CA </h2><h3 id=\"1-1-CSR\"><a href=\"#1-1-CSR\" class=\"headerlink\" title=\"1.1 CSR\"></a>1.1 CSR</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl req -x509 -new -nodes -sha256 -days 7300  \\</span><br><span class=\"line\">            -key root-ca.key \\</span><br><span class=\"line\">            -out root-ca.crt \\</span><br><span class=\"line\">            -subj <span class=\"string\">&quot;/C=CN/ST=Zhejiang/L=Hangzhou/O=root/OU=root/CN=root&quot;</span></span><br></pre></td></tr></table></figure>\n<p><strong></strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">C  : Country Name                      <span class=\"comment\"># </span></span><br><span class=\"line\">ST :State or Province Name             <span class=\"comment\"># /</span></span><br><span class=\"line\">L  :Locality Name                      <span class=\"comment\"># </span></span><br><span class=\"line\">O  :Organization Name                  <span class=\"comment\"># </span></span><br><span class=\"line\">OU :Organizational Unit Name           <span class=\"comment\"># </span></span><br><span class=\"line\">CN :Common Name                        <span class=\"comment\"># </span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-2-\"><a href=\"#1-2-\" class=\"headerlink\" title=\"1.2 \"></a>1.2 </h3><p><code>openssl req -x509 -new -nodes -sha256 -days 7300  -key root-ca.key -out root-ca.crt</code></p>\n<p><strong>CSRemail</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost CA]# openssl req -x509 -new -nodes -sha256 -days 720 -key root-ca.key -out root-ca.crt \\</span><br><span class=\"line\">&gt; </span><br><span class=\"line\">Enter pass phrase for root-ca.key:</span><br><span class=\"line\">You are about to be asked to enter information that will be incorporated</span><br><span class=\"line\">into your certificate request.</span><br><span class=\"line\">What you are about to enter is what is called a Distinguished Name or a DN.</span><br><span class=\"line\">There are quite a few fields but you can leave some blank</span><br><span class=\"line\">For some fields there will be a default value,</span><br><span class=\"line\">If you enter &#x27;.&#x27;, the field will be left blank.</span><br><span class=\"line\">-----</span><br><span class=\"line\">Country Name (2 letter code) [XX]:CN</span><br><span class=\"line\">State or Province Name (full name) []:Zhejiang</span><br><span class=\"line\">Locality Name (eg, city) [Default City]:Hangzhou</span><br><span class=\"line\">Organization Name (eg, company) [Default Company Ltd]:root</span><br><span class=\"line\">Organizational Unit Name (eg, section) []:root</span><br><span class=\"line\">Common Name (eg, your name or your server&#x27;s hostname) []:root</span><br><span class=\"line\">Email Address []:@root.com     </span><br><span class=\"line\">[root@localhost CA]# </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-3-\"><a href=\"#1-3-\" class=\"headerlink\" title=\"1.3 \"></a>1.3 </h3><p><code>openssl x509 -in root-ca.crt -noout -text</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost CA]# openssl x509 -in root-ca.crt -noout -text</span><br><span class=\"line\">Certificate:</span><br><span class=\"line\">    Data:</span><br><span class=\"line\">        Version: 3 (0x2)</span><br><span class=\"line\">        Serial Number:</span><br><span class=\"line\">            83:6d:15:68:11:48:42:af</span><br><span class=\"line\">    Signature Algorithm: sha256WithRSAEncryption</span><br><span class=\"line\">        Issuer: C=CN, ST=Zhejiang, L=Hangzhou, O=root, OU=root, CN=root</span><br><span class=\"line\">        Validity</span><br><span class=\"line\">            Not Before: Sep 21 17:46:03 2023 GMT</span><br><span class=\"line\">            Not After : Sep 16 17:46:03 2043 GMT</span><br><span class=\"line\">        Subject: C=CN, ST=Zhejiang, L=Hangzhou, O=root, OU=root, CN=root</span><br><span class=\"line\">        Subject Public Key Info:</span><br><span class=\"line\">            Public Key Algorithm: rsaEncryption</span><br><span class=\"line\">                Public-Key: (2048 bit)</span><br><span class=\"line\">                Modulus:</span><br><span class=\"line\">                    00:d9:6c:a1:a7:2c:a4:d1:32:3a:c3:40:63:7f:5e:</span><br><span class=\"line\">                    79:20:4f:cc:1e:99:e2:38:98:e8:e1:64:7c:39:7d:</span><br><span class=\"line\">                    b9:ed:10:20:d5:06:7f:27:13:bf:b8:07:fc:9a:48:</span><br><span class=\"line\">                    01:21:a0:6b:7b:ae:4e:be:8f:f2:43:02:8c:5e:14:</span><br><span class=\"line\">                    56:cf:8b:fa:e0:6e:5f:1c:5c:4e:d7:3a:17:b2:f7:</span><br><span class=\"line\">                    58:aa:ef:4c:6b:e4:cd:38:cf:92:7e:15:e5:52:66:</span><br><span class=\"line\">                    c2:b1:47:4d:2e:74:49:a9:4a:bc:1e:60:c2:48:7d:</span><br><span class=\"line\">                    6b:16:c5:34:46:23:2c:3c:dc:19:f0:d5:ba:a8:b7:</span><br><span class=\"line\">                    43:3b:7f:a0:65:21:26:78:0d:de:96:60:c7:58:50:</span><br><span class=\"line\">                    64:bd:7c:9d:8b:68:55:f7:d2:ed:40:ad:b7:f1:50:</span><br><span class=\"line\">                    e2:9d:ac:e6:a3:b6:0e:4d:12:ab:50:54:5b:3e:62:</span><br><span class=\"line\">                    68:ad:6f:dd:8f:50:b5:20:25:28:46:4d:24:42:99:</span><br><span class=\"line\">                    c1:ae:60:08:42:c6:40:aa:e1:3c:fc:59:ce:17:39:</span><br><span class=\"line\">                    a9:b2:54:6b:fb:62:f0:11:4e:91:45:e9:6a:90:b6:</span><br><span class=\"line\">                    e6:ab:27:82:50:3b:b2:66:44:47:0e:73:1d:cd:65:</span><br><span class=\"line\">                    4c:c8:c8:3c:f7:b1:2c:ff:2a:55:c7:90:be:14:17:</span><br><span class=\"line\">                    24:2b:05:69:18:fd:51:23:28:39:6a:3c:7b:52:e9:</span><br><span class=\"line\">                    cb:4b</span><br><span class=\"line\">                Exponent: 65537 (0x10001)</span><br><span class=\"line\">        X509v3 extensions:</span><br><span class=\"line\">            X509v3 Subject Key Identifier: </span><br><span class=\"line\">                A0:6F:B7:44:0F:E4:57:9C:B0:64:72:EE:00:BE:D1:D7:D6:BA:E2:F5</span><br><span class=\"line\">            X509v3 Authority Key Identifier: </span><br><span class=\"line\">                keyid:A0:6F:B7:44:0F:E4:57:9C:B0:64:72:EE:00:BE:D1:D7:D6:BA:E2:F5</span><br><span class=\"line\"></span><br><span class=\"line\">            X509v3 Basic Constraints: </span><br><span class=\"line\">                CA:TRUE</span><br><span class=\"line\">    Signature Algorithm: sha256WithRSAEncryption</span><br><span class=\"line\">         0c:66:dc:ea:7d:ad:84:d2:a2:a2:1e:76:87:d3:14:62:85:1d:</span><br><span class=\"line\">         63:f4:d0:2d:a7:5b:3c:42:24:45:21:85:d6:d1:29:02:aa:4d:</span><br><span class=\"line\">         8b:21:1d:10:13:7a:dd:b6:c7:fd:2a:68:44:85:3a:62:86:2d:</span><br><span class=\"line\">         db:31:34:64:d6:c2:44:a3:78:18:85:ba:24:fe:ce:ed:f1:9a:</span><br><span class=\"line\">         25:90:76:da:f8:10:b1:67:f8:b0:35:47:a2:1d:5d:88:f5:d8:</span><br><span class=\"line\">         5a:c7:34:36:06:bd:4d:eb:db:6c:39:4d:56:9c:7a:8f:0e:19:</span><br><span class=\"line\">         e6:97:43:5d:87:ca:79:52:e8:be:eb:3e:08:a3:d6:17:22:b3:</span><br><span class=\"line\">         d9:ff:67:ef:1f:43:28:b1:4c:c7:d1:7f:fa:0b:b5:2c:65:47:</span><br><span class=\"line\">         ed:16:cd:07:f0:1d:15:64:5e:c6:74:9c:b8:78:59:a6:1f:07:</span><br><span class=\"line\">         3a:ec:1c:54:d4:18:33:bc:00:b5:5b:f3:25:87:4d:63:d8:dd:</span><br><span class=\"line\">         37:e6:88:a1:e8:9e:49:0f:88:cf:5e:d0:73:68:84:fe:8e:3c:</span><br><span class=\"line\">         b6:05:fb:51:3b:e9:62:e8:43:2c:e4:ed:83:85:43:86:f7:ee:</span><br><span class=\"line\">         f8:52:b7:26:ae:6a:58:ed:69:9a:78:a7:9c:0a:49:1d:7e:38:</span><br><span class=\"line\">         31:e5:a0:21:ab:cb:2a:85:59:7a:97:29:7e:96:06:c9:93:75:</span><br><span class=\"line\">         15:83:74:88</span><br><span class=\"line\">[root@localhost CA]#</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"--ssl-\"><a href=\"#--ssl-\" class=\"headerlink\" title=\"  ssl \"></a>  ssl </h2><p><code>openssl genrsa -out mdzz.wang.key 2048</code> </p>\n<h2 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl req -new -key mdzz.wang.key -out mdzz.wang.csr </span><br><span class=\"line\">\t\t \t\t -subj <span class=\"string\">&quot;/C=CN/ST=Zhejiang/L=Hangzhou/O=mdzz/OU=mdzz/CN=mdzz.wang&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><code>vim cert.ext</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">authorityKeyIdentifier=keyid,issuer</span><br><span class=\"line\">basicConstraints=CA:FALSE</span><br><span class=\"line\">keyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment</span><br><span class=\"line\">subjectAltName = @alt_names</span><br><span class=\"line\"></span><br><span class=\"line\">[alt_names]</span><br><span class=\"line\">DNS.1 = localhost</span><br><span class=\"line\">IP.2 = 127.0.0.1</span><br><span class=\"line\">DNS.3 = mdzz.com</span><br><span class=\"line\">DNS.4 = *.mdzz.com</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"-CA-ssl\"><a href=\"#-CA-ssl\" class=\"headerlink\" title=\" CA ssl\"></a> CA ssl</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl x509 -req -<span class=\"keyword\">in</span> mdzz.wang.csr -out mdzz.wang.crt -days 365 \\</span><br><span class=\"line\">             -CAcreateserial -CA root-ca.crt -CAkey root-ca.key \\</span><br><span class=\"line\">             -CAserial serial -extfile cert.ext</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5-1-\"><a href=\"#5-1-\" class=\"headerlink\" title=\"5.1 \"></a>5.1 </h3><img src=\"/images/031.ca.md.02.png\" width=100% height=100% />\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li><strong>CA</strong><br> 1.1 <strong>CA</strong><br> 1.2 <strong>CA</strong></li>\n<li><strong>mdzz.wanghttps</strong></li>\n<li><strong>mdzz.wangCSR</strong></li>\n<li><strong>CAmdzz.wang</strong></li>\n</ol>\n<h2 id=\"-https\"><a href=\"#-https\" class=\"headerlink\" title=\" https\"></a> https</h2><p><strong>https, CA</strong></p>\n<h3 id=\"6-1-\"><a href=\"#6-1-\" class=\"headerlink\" title=\"6.1 \"></a>6.1 </h3><p><code>openssl genrsa -des3 -out test.key 2048</code></p>\n<h3 id=\"6-2-\"><a href=\"#6-2-\" class=\"headerlink\" title=\"6.2 \"></a>6.2 </h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">openssl req \\</span><br><span class=\"line\">         -newkey rsa:2048 -nodes -keyout test.key \\</span><br><span class=\"line\">         -x509 -days 365 -out test.crt \\</span><br><span class=\"line\">         -subj <span class=\"string\">&quot;/C=CN/ST=Zhejiang/L=Hangzhou/O=test/OU=test/CN=test&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6-3-\"><a href=\"#6-3-\" class=\"headerlink\" title=\"6.3 \"></a>6.3 </h3><img src=\"/images/031.ca.md.03.png\" width=100% height=100% />\n"},{"title":"acme.sh","date":"2022-11-28T03:22:13.000Z","_content":"\n###  acme.sh\n\n- ``` curl https://get.acme.sh | sh -s email=my@example.com ```\n\n### KID KEY\n\n- https://app.zerossl.com/developerEAB Credentials for ACME Clients generate  ```EAB KID ```  ```EAB HMAC Key```\n\n###  CA\n\n- ``` acme.sh --set-default-ca --server zerossl ```\n\n### \n\n- ``` acme.sh --register-account --server zerossl --eab-kid XXXX --eab-hmac-key XXXX ```\n\n\n### \n\n1) \n\t``` acme.sh --issue -d example.com --webroot $PATH_TO_YOUR_WEBROOT ```\n\n2) \n\t``` shell\n\tacme.sh --install-cert -d example.com \\\n\t--cert-file      /path/to/your/certfile/cert.pem  \\\n\t--key-file       /path/to/your/certfile/key.pem  \\\n\t--fullchain-file /path/to/your/certfile/certfilefullchain.pem \\\n\t```","source":"_posts/032.acme.sh.md","raw":"---\ntitle: acme.sh\ndate: 2022-11-28 11:22:13\ncategories: \n- [DevOps]\ntags: \n- ca\n- https\n- acme.sh\n---\n\n###  acme.sh\n\n- ``` curl https://get.acme.sh | sh -s email=my@example.com ```\n\n### KID KEY\n\n- https://app.zerossl.com/developerEAB Credentials for ACME Clients generate  ```EAB KID ```  ```EAB HMAC Key```\n\n###  CA\n\n- ``` acme.sh --set-default-ca --server zerossl ```\n\n### \n\n- ``` acme.sh --register-account --server zerossl --eab-kid XXXX --eab-hmac-key XXXX ```\n\n\n### \n\n1) \n\t``` acme.sh --issue -d example.com --webroot $PATH_TO_YOUR_WEBROOT ```\n\n2) \n\t``` shell\n\tacme.sh --install-cert -d example.com \\\n\t--cert-file      /path/to/your/certfile/cert.pem  \\\n\t--key-file       /path/to/your/certfile/key.pem  \\\n\t--fullchain-file /path/to/your/certfile/certfilefullchain.pem \\\n\t```","slug":"032.acme.sh","published":1,"updated":"2023-09-20T08:34:06.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbfc0033yknraw1udtnt","content":"<h3 id=\"-acme-sh\"><a href=\"#-acme-sh\" class=\"headerlink\" title=\" acme.sh\"></a> acme.sh</h3><ul>\n<li><code>curl https://get.acme.sh | sh -s email=my@example.com</code></li>\n</ul>\n<h3 id=\"KID-KEY\"><a href=\"#KID-KEY\" class=\"headerlink\" title=\"KID KEY\"></a>KID KEY</h3><ul>\n<li><a href=\"https://app.zerossl.com/developer%E9%80%89%E6%8B%A9EAB\">https://app.zerossl.com/developerEAB</a> Credentials for ACME Clients generate  <code>EAB KID </code>  <code>EAB HMAC Key</code></li>\n</ul>\n<h3 id=\"-CA\"><a href=\"#-CA\" class=\"headerlink\" title=\" CA\"></a> CA</h3><ul>\n<li><code>acme.sh --set-default-ca --server zerossl</code></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><code>acme.sh --register-account --server zerossl --eab-kid XXXX --eab-hmac-key XXXX</code></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol>\n<li><p><br> <code>acme.sh --issue -d example.com --webroot $PATH_TO_YOUR_WEBROOT</code></p>\n</li>\n<li><p></p>\n <figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">acme.sh --install-cert -d example.com \\</span><br><span class=\"line\">--cert-file      /path/to/your/certfile/cert.pem  \\</span><br><span class=\"line\">--key-file       /path/to/your/certfile/key.pem  \\</span><br><span class=\"line\">--fullchain-file /path/to/your/certfile/certfilefullchain.pem \\</span><br></pre></td></tr></table></figure></li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"-acme-sh\"><a href=\"#-acme-sh\" class=\"headerlink\" title=\" acme.sh\"></a> acme.sh</h3><ul>\n<li><code>curl https://get.acme.sh | sh -s email=my@example.com</code></li>\n</ul>\n<h3 id=\"KID-KEY\"><a href=\"#KID-KEY\" class=\"headerlink\" title=\"KID KEY\"></a>KID KEY</h3><ul>\n<li><a href=\"https://app.zerossl.com/developer%E9%80%89%E6%8B%A9EAB\">https://app.zerossl.com/developerEAB</a> Credentials for ACME Clients generate  <code>EAB KID </code>  <code>EAB HMAC Key</code></li>\n</ul>\n<h3 id=\"-CA\"><a href=\"#-CA\" class=\"headerlink\" title=\" CA\"></a> CA</h3><ul>\n<li><code>acme.sh --set-default-ca --server zerossl</code></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><code>acme.sh --register-account --server zerossl --eab-kid XXXX --eab-hmac-key XXXX</code></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol>\n<li><p><br> <code>acme.sh --issue -d example.com --webroot $PATH_TO_YOUR_WEBROOT</code></p>\n</li>\n<li><p></p>\n <figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">acme.sh --install-cert -d example.com \\</span><br><span class=\"line\">--cert-file      /path/to/your/certfile/cert.pem  \\</span><br><span class=\"line\">--key-file       /path/to/your/certfile/key.pem  \\</span><br><span class=\"line\">--fullchain-file /path/to/your/certfile/certfilefullchain.pem \\</span><br></pre></td></tr></table></figure></li>\n</ol>\n"},{"title":"tcpdump","date":"2022-11-29T09:26:13.000Z","_content":"\n\n\n## \n>> tcpdump \ntcpdump \n\n## \n\n### \n\n``` port ``` :****         ```tcpdump port 443```\n``` host ``` :****         ```tcpdump host 192.168.1.1```\n``` net ```  :****         ```tcpdump net 192.168.1.0/24```\n```portrange```:****   : ```tcpdump portrange 20-80```\n```ether``` : **mac**      : ``` tcpdump ether 00:11:22:33:44:55 ```\n### \n\n```src```****        src 10.1.110.110\n```dst```****      dst 10.1.110.110\n\n### \n\n- TCP\n- UDP\n- ICMP\n- IP\n- HTTP\n- FTP\n- Telnet\n- SSH\n- DNS\n- SNMP\n- SMTP\n- POP33\n- IMAP Internet\n- SSL/TLS/\n- ARP\n- DHCP\n\n\n### \n\n```and``` :  \n```or```  :  \n```not``` :  \n```!```   : \n```&&```\n```|| ```","source":"_posts/033.tcpdump_instances.md","raw":"---\ntitle: tcpdump\ndate: 2022-11-29 17:26:13\ncategories: \n- [DevOps]\ntags: \n- tcpdump\n- wireshark\n- \n---\n\n\n\n## \n>> tcpdump \ntcpdump \n\n## \n\n### \n\n``` port ``` :****         ```tcpdump port 443```\n``` host ``` :****         ```tcpdump host 192.168.1.1```\n``` net ```  :****         ```tcpdump net 192.168.1.0/24```\n```portrange```:****   : ```tcpdump portrange 20-80```\n```ether``` : **mac**      : ``` tcpdump ether 00:11:22:33:44:55 ```\n### \n\n```src```****        src 10.1.110.110\n```dst```****      dst 10.1.110.110\n\n### \n\n- TCP\n- UDP\n- ICMP\n- IP\n- HTTP\n- FTP\n- Telnet\n- SSH\n- DNS\n- SNMP\n- SMTP\n- POP33\n- IMAP Internet\n- SSL/TLS/\n- ARP\n- DHCP\n\n\n### \n\n```and``` :  \n```or```  :  \n```not``` :  \n```!```   : \n```&&```\n```|| ```","slug":"033.tcpdump_instances","published":1,"updated":"2023-03-17T10:30:55.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbfe0037yknr67ij0lf8","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><blockquote>\n<blockquote>\n<p>tcpdump <br>tcpdump </p>\n</blockquote>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>port</code> :<strong></strong>         <code>tcpdump port 443</code><br><code>host</code> :<strong></strong>         <code>tcpdump host 192.168.1.1</code><br><code>net</code>  :<strong></strong>         <code>tcpdump net 192.168.1.0/24</code><br><code>portrange</code>:<strong></strong>   : <code>tcpdump portrange 20-80</code><br><code>ether</code> : <strong>mac</strong>      : <code>tcpdump ether 00:11:22:33:44:55</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>src</code><strong></strong>        src 10.1.110.110<br><code>dst</code><strong></strong>      dst 10.1.110.110</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>TCP</li>\n<li>UDP</li>\n<li>ICMP</li>\n<li>IP</li>\n<li>HTTP</li>\n<li>FTP</li>\n<li>Telnet</li>\n<li>SSH</li>\n<li>DNS</li>\n<li>SNMP</li>\n<li>SMTP</li>\n<li>POP33</li>\n<li>IMAP Internet</li>\n<li>SSL&#x2F;TLS&#x2F;</li>\n<li>ARP</li>\n<li>DHCP<br></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>and</code> :  <br><code>or</code>  :  <br><code>not</code> :  <br><code>!</code>   :<br><code>&amp;&amp;</code><br><code>|| </code></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><blockquote>\n<blockquote>\n<p>tcpdump <br>tcpdump </p>\n</blockquote>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>port</code> :<strong></strong>         <code>tcpdump port 443</code><br><code>host</code> :<strong></strong>         <code>tcpdump host 192.168.1.1</code><br><code>net</code>  :<strong></strong>         <code>tcpdump net 192.168.1.0/24</code><br><code>portrange</code>:<strong></strong>   : <code>tcpdump portrange 20-80</code><br><code>ether</code> : <strong>mac</strong>      : <code>tcpdump ether 00:11:22:33:44:55</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>src</code><strong></strong>        src 10.1.110.110<br><code>dst</code><strong></strong>      dst 10.1.110.110</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>TCP</li>\n<li>UDP</li>\n<li>ICMP</li>\n<li>IP</li>\n<li>HTTP</li>\n<li>FTP</li>\n<li>Telnet</li>\n<li>SSH</li>\n<li>DNS</li>\n<li>SNMP</li>\n<li>SMTP</li>\n<li>POP33</li>\n<li>IMAP Internet</li>\n<li>SSL&#x2F;TLS&#x2F;</li>\n<li>ARP</li>\n<li>DHCP<br></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>and</code> :  <br><code>or</code>  :  <br><code>not</code> :  <br><code>!</code>   :<br><code>&amp;&amp;</code><br><code>|| </code></p>\n"},{"title":"redis","date":"2022-12-05T06:44:13.000Z","_content":"\n\n##  \n``` get --no-check-certificate https://download.redis.io/redis-stable.tar.gz ```\n\n##  \n``` tar -xzvf redis-stable.tar.gz```\n\n##  \n``` cd redis-stable ```\n``` make PREFIX=/usr/local/redis install ```\n\n**:** ```zmalloc.h:50:31: fatal error: jemalloc/jemalloc.h: No such file or directory```\n**:**  ```make MALLOC=libc PREFIX=/usr/local/redis install```\n\n##  \n``` cp /root/redis-stable/redis.conf /usr/local/redis/ ```\n\n``` line309: daemonize yes  #  ```\n\n##  systemd\n\n``` shell\n# vim /usr/lib/systemd/system/redis.service\n[Unit]\nDescription=Redis persistent key-value database\nAfter=network.target\nAfter=network-online.target\nWants=network-online.target\n\n[Service]\nType=forking\nExecStart=/usr/local/redis/bin/redis-server /usr/local/redis/redis.conf\nExecReload=/usr/local/redis/bin/redis-server -s reload\nExecStop=/usr/local/redis/bin/redis-cli shutdown\n#Type=notify\n#User=redis\n#Group=redis\n#RuntimeDirectory=redis\n#RuntimeDirectoryMode=0755\n[Install]\nWantedBy=multi-user.target\n```\n\n``` systemctl daemon-reload ```\n``` systemctl enable redis ```\n``` systemctl start redis ```\n``` systemctl status redis ```\n\n## \n: ``` vim /usr/local/redis/redis.conf ```\n111:   ``` protected-mode no```\n\n\n## \n: ``` vim /usr/local/redis/redis.conf ```\n1036:   ``` requirepass $YOURPASSWORD```\n## \n<img src=\"/images/034.redis.md.01.png\" width=50% height=60% />","source":"_posts/034.redis.md","raw":"---\ntitle: redis\ndate: 2022-12-05 14:44:13\ncategories: \n- [DevOps]\ntags: \n- redis\n---\n\n\n##  \n``` get --no-check-certificate https://download.redis.io/redis-stable.tar.gz ```\n\n##  \n``` tar -xzvf redis-stable.tar.gz```\n\n##  \n``` cd redis-stable ```\n``` make PREFIX=/usr/local/redis install ```\n\n**:** ```zmalloc.h:50:31: fatal error: jemalloc/jemalloc.h: No such file or directory```\n**:**  ```make MALLOC=libc PREFIX=/usr/local/redis install```\n\n##  \n``` cp /root/redis-stable/redis.conf /usr/local/redis/ ```\n\n``` line309: daemonize yes  #  ```\n\n##  systemd\n\n``` shell\n# vim /usr/lib/systemd/system/redis.service\n[Unit]\nDescription=Redis persistent key-value database\nAfter=network.target\nAfter=network-online.target\nWants=network-online.target\n\n[Service]\nType=forking\nExecStart=/usr/local/redis/bin/redis-server /usr/local/redis/redis.conf\nExecReload=/usr/local/redis/bin/redis-server -s reload\nExecStop=/usr/local/redis/bin/redis-cli shutdown\n#Type=notify\n#User=redis\n#Group=redis\n#RuntimeDirectory=redis\n#RuntimeDirectoryMode=0755\n[Install]\nWantedBy=multi-user.target\n```\n\n``` systemctl daemon-reload ```\n``` systemctl enable redis ```\n``` systemctl start redis ```\n``` systemctl status redis ```\n\n## \n: ``` vim /usr/local/redis/redis.conf ```\n111:   ``` protected-mode no```\n\n\n## \n: ``` vim /usr/local/redis/redis.conf ```\n1036:   ``` requirepass $YOURPASSWORD```\n## \n<img src=\"/images/034.redis.md.01.png\" width=50% height=60% />","slug":"034.redis","published":1,"updated":"2023-04-14T10:02:06.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbff0039yknr8i4v19jx","content":"<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><code>get --no-check-certificate https://download.redis.io/redis-stable.tar.gz</code></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><code> tar -xzvf redis-stable.tar.gz</code></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><code>cd redis-stable</code><br><code>make PREFIX=/usr/local/redis install</code></p>\n<p><strong>:</strong> <code>zmalloc.h:50:31: fatal error: jemalloc/jemalloc.h: No such file or directory</code><br><strong>:</strong>  <code>make MALLOC=libc PREFIX=/usr/local/redis install</code></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><code>cp /root/redis-stable/redis.conf /usr/local/redis/</code></p>\n<p><code>line309: daemonize yes  # </code></p>\n<h2 id=\"-systemd\"><a href=\"#-systemd\" class=\"headerlink\" title=\" systemd\"></a> systemd</h2><figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">vim /usr/lib/systemd/system/redis.service</span></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Redis persistent key-value database</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\">After=network-online.target</span><br><span class=\"line\">Wants=network-online.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=forking</span><br><span class=\"line\">ExecStart=/usr/local/redis/bin/redis-server /usr/local/redis/redis.conf</span><br><span class=\"line\">ExecReload=/usr/local/redis/bin/redis-server -s reload</span><br><span class=\"line\">ExecStop=/usr/local/redis/bin/redis-cli shutdown</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">Type=notify</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">User=redis</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">Group=redis</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">RuntimeDirectory=redis</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">RuntimeDirectoryMode=0755</span></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>\n\n<p><code>systemctl daemon-reload</code><br><code>systemctl enable redis</code><br><code>systemctl start redis</code><br><code>systemctl status redis</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>: <code>vim /usr/local/redis/redis.conf</code><br>111:   <code> protected-mode no</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>: <code>vim /usr/local/redis/redis.conf</code><br>1036:   <code> requirepass $YOURPASSWORD</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><img src=\"/images/034.redis.md.01.png\" width=50% height=60% />","site":{"data":{}},"excerpt":"","more":"<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><code>get --no-check-certificate https://download.redis.io/redis-stable.tar.gz</code></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><code> tar -xzvf redis-stable.tar.gz</code></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><code>cd redis-stable</code><br><code>make PREFIX=/usr/local/redis install</code></p>\n<p><strong>:</strong> <code>zmalloc.h:50:31: fatal error: jemalloc/jemalloc.h: No such file or directory</code><br><strong>:</strong>  <code>make MALLOC=libc PREFIX=/usr/local/redis install</code></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><code>cp /root/redis-stable/redis.conf /usr/local/redis/</code></p>\n<p><code>line309: daemonize yes  # </code></p>\n<h2 id=\"-systemd\"><a href=\"#-systemd\" class=\"headerlink\" title=\" systemd\"></a> systemd</h2><figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">vim /usr/lib/systemd/system/redis.service</span></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Redis persistent key-value database</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\">After=network-online.target</span><br><span class=\"line\">Wants=network-online.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=forking</span><br><span class=\"line\">ExecStart=/usr/local/redis/bin/redis-server /usr/local/redis/redis.conf</span><br><span class=\"line\">ExecReload=/usr/local/redis/bin/redis-server -s reload</span><br><span class=\"line\">ExecStop=/usr/local/redis/bin/redis-cli shutdown</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">Type=notify</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">User=redis</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">Group=redis</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">RuntimeDirectory=redis</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">RuntimeDirectoryMode=0755</span></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>\n\n<p><code>systemctl daemon-reload</code><br><code>systemctl enable redis</code><br><code>systemctl start redis</code><br><code>systemctl status redis</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>: <code>vim /usr/local/redis/redis.conf</code><br>111:   <code> protected-mode no</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>: <code>vim /usr/local/redis/redis.conf</code><br>1036:   <code> requirepass $YOURPASSWORD</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><img src=\"/images/034.redis.md.01.png\" width=50% height=60% />"},{"title":"SSH","date":"2023-03-15T06:44:13.000Z","_content":"\n## \nServer A 192.168.1.1\nServer B 192.168.1.2\n\nServer A\n``` bash\nssh-keygen -t rsa -b4096\nssh-copy-id root@192.168.1.2\n```\n\nServer B\n``` shell\nssh-keygen -t rsa -b4096\nssh-copy-id root@192.168.1.1\n```\n\n## SSH\n\n``` ssh-keygen -t rsa -b 4096 ```\n``` -t ```: \n``` -b ```: \n``` id_rsa ```: \n``` id_rsa.pub ```: \n``` authorized_keys ``` \n\n``` tree .ssh/ ```\n![png](/images/035.ssh_key.md.01.png)\n\n## \n\n, ``` id_rsa.pub ``` ``` authorized_keys ```\n``` id_rsa.pub `````` authorized_keys ```\n\n:  \n``` ssh-copy-id username@remote-server ```\n\n\n## \n\n\n","source":"_posts/035.ssh_key.md","raw":"---\ntitle: SSH\ndate: 2023-3-15 14:44:13\ncategories: \n- [DevOps]\ntags: \n- SSH\n---\n\n## \nServer A 192.168.1.1\nServer B 192.168.1.2\n\nServer A\n``` bash\nssh-keygen -t rsa -b4096\nssh-copy-id root@192.168.1.2\n```\n\nServer B\n``` shell\nssh-keygen -t rsa -b4096\nssh-copy-id root@192.168.1.1\n```\n\n## SSH\n\n``` ssh-keygen -t rsa -b 4096 ```\n``` -t ```: \n``` -b ```: \n``` id_rsa ```: \n``` id_rsa.pub ```: \n``` authorized_keys ``` \n\n``` tree .ssh/ ```\n![png](/images/035.ssh_key.md.01.png)\n\n## \n\n, ``` id_rsa.pub ``` ``` authorized_keys ```\n``` id_rsa.pub `````` authorized_keys ```\n\n:  \n``` ssh-copy-id username@remote-server ```\n\n\n## \n\n\n","slug":"035.ssh_key","published":1,"updated":"2023-03-23T07:55:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbfh003dyknr5eu09wap","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Server A 192.168.1.1<br>Server B 192.168.1.2</p>\n<p>Server A</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -b4096</span><br><span class=\"line\">ssh-copy-id root@192.168.1.2</span><br></pre></td></tr></table></figure>\n\n<p>Server B</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -b4096</span><br><span class=\"line\">ssh-copy-id root@192.168.1.1</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"SSH\"><a href=\"#SSH\" class=\"headerlink\" title=\"SSH\"></a>SSH</h2><p><code>ssh-keygen -t rsa -b 4096</code><br><code>-t</code>: <br><code>-b</code>: <br><code>id_rsa</code>: <br><code>id_rsa.pub</code>: <br><code>authorized_keys</code> </p>\n<p><code>tree .ssh/</code><br><img src=\"/images/035.ssh_key.md.01.png\" alt=\"png\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>, <code>id_rsa.pub</code> <code>authorized_keys</code><br><code>id_rsa.pub</code><code>authorized_keys</code></p>\n<p>:<br><code>ssh-copy-id username@remote-server</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Server A 192.168.1.1<br>Server B 192.168.1.2</p>\n<p>Server A</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -b4096</span><br><span class=\"line\">ssh-copy-id root@192.168.1.2</span><br></pre></td></tr></table></figure>\n\n<p>Server B</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -b4096</span><br><span class=\"line\">ssh-copy-id root@192.168.1.1</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"SSH\"><a href=\"#SSH\" class=\"headerlink\" title=\"SSH\"></a>SSH</h2><p><code>ssh-keygen -t rsa -b 4096</code><br><code>-t</code>: <br><code>-b</code>: <br><code>id_rsa</code>: <br><code>id_rsa.pub</code>: <br><code>authorized_keys</code> </p>\n<p><code>tree .ssh/</code><br><img src=\"/images/035.ssh_key.md.01.png\" alt=\"png\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>, <code>id_rsa.pub</code> <code>authorized_keys</code><br><code>id_rsa.pub</code><code>authorized_keys</code></p>\n<p>:<br><code>ssh-copy-id username@remote-server</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n"},{"title":"OpenWrt","date":"2023-03-24T02:50:00.000Z","sitemap":true,"_content":"\n##  \n\nopenwrt, sshopenwrt, TF, Linux\n, TFUbuntuGparted, .\n.\n``` resize2fs: Invalid argument While trying to add group #1 ```\n\n<img src=\"/images/036.openwrt_disk_expansion.md.01.png\" width=70% height=80% />\n\n<img src=\"/images/036.openwrt_disk_expansion.md.02.png\" width=70% height=80% />\n\n\n**.:**\n\n##  \n\n```bash\nsda           8:0    1  14.8G  0 disk \nsda1        8:1    1    64M  0 part /media/wang/boot\nsda2        8:2    1     5G  0 part /media/wang/rootfs\n```\n\n##  /media/wang/rootfs \n\n: **```/media/wang/rootfs``` **\n\n### 2.0 : ``` fdisk /dev/sda ``` \n``` bash\nwang@ubuntu:~$ sudo fdisk /dev/sda\nWelcome to fdisk (util-linux 2.37.2).\nChanges will remain in memory only, until you decide to write them.\nBe careful before using the write command.\n\nThis disk is currently in use - repartitioning is probably a bad idea.\nIt's recommended to umount all file systems, and swapoff all swap\npartitions on this disk.\n```\n\n### 2.1 : ``` p ``` \n**** ```/dev/sda2```  ``` 147456 ```\n``` bash\nCommand (m for help): p\n\nDisk /dev/sda: 14.84 GiB, 15931539456 bytes, 31116288 sectors\nDisk model: Storage Device  \nUnits: sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisklabel type: dos\nDisk identifier: 0x4005cfed\n\nDevice     Boot  Start      End  Sectors  Size Id Type\n/dev/sda1  *      8192   139263   131072   64M  c W95 FAT32 (LBA)\n/dev/sda2       147456 21121023 20973568  10G 83 Linux\n```\n\n### 2.2 : ``` d ``` \n``` bash\nCommand (m for help): d\nPartition number (1,2, default 2): 2\nPartition 2 has been deleted.\n```\n\n### 2.3 : ``` n ```\n``` bash\nCommand (m for help): n\nPartition type\n   p   primary (1 primary, 0 extended, 3 free)\n   e   extended (container for logical partitions)\nSelect (default p): p\nPartition number (2-4, default 2): 2\nFirst sector (2048-31116287, default 2048): 147456   ## First sector147456\nLast sector, +/-sectors or +/-size{K,M,G,T,P} (147456-31116287, default 31116287): +5g  ## \n\nCreated a new partition 2 of type 'Linux' and of size 5 GiB.\nPartition #2 contains a ext4 signature.\n\nDo you want to remove the signature? [Y]es/[N]o: n  ## \n```\n\n### 2.4 : ```w ```\n``` bash\nCommand (m for help): w\nThe partition table has been altered.\nSyncing disks.\n```\n\n### 2.5 \n``` bash\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\nwang@ubuntu:~$ sudo resize2fs -p /dev/sda2 \nresize2fs 1.46.5 (30-Dec-2021)\nFilesystem at /dev/sda2 is mounted on /media/wang/rootfs; on-line resizing required\nold_desc_blocks = 1, new_desc_blocks = 1\nPerforming an on-line resize of /dev/sda2 to 1310720 (4k) blocks.\nresize2fs: Invalid argument While trying to add group #1\n```\n\nresize2fs \n: ``` resize2fs: Invalid argument While trying to add group #1 ```\n\n\n##   resize2fs \n\n### 3.1 \n``` losetup```\n``` bash\nwang@ubuntu:~$ losetup \nNAME        SIZELIMIT OFFSET AUTOCLEAR RO BACK-FILE                                                  DIO LOG-SEC\n/dev/loop1          0      0         1  1 /var/lib/snapd/snaps/core18_2708.snap                        0     512\n/dev/loop19         0      0         1  1 /var/lib/snapd/snaps/sublime-text_116.snap                   0     512\n/dev/loop17         0      0         1  1 /var/lib/snapd/snaps/snapd-desktop-integration_43.snap       0     512\n/dev/loop8          0      0         1  1 /var/lib/snapd/snaps/gnome-3-38-2004_119.snap                0     512\n/dev/loop15         0      0         1  1 /var/lib/snapd/snaps/snap-store_638.snap                     0     512\n/dev/loop6          0      0         1  1 /var/lib/snapd/snaps/gnome-3-38-2004_115.snap                0     512\n/dev/loop13         0      0         1  1 /var/lib/snapd/snaps/snap-store_599.snap                     0     512\n/dev/loop4          0      0         1  1 /var/lib/snapd/snaps/core18_2714.snap                        0     512\n/dev/loop21         0      0         1  1 /var/lib/snapd/snaps/snapd_18596.snap                        0     512\n/dev/loop11         0      0         1  1 /var/lib/snapd/snaps/hunspell-dictionaries-1-7-2004_2.snap   0     512\n/dev/loop2          0      0         1  1 /var/lib/snapd/snaps/firefox_2432.snap                       0     512\n/dev/loop0          0      0         1  1 /var/lib/snapd/snaps/bare_5.snap                             0     512\n/dev/loop18         0      0         1  1 /var/lib/snapd/snaps/core20_1828.snap                        0     512\n/dev/loop9          0      0         1  1 /var/lib/snapd/snaps/gtk-common-themes_1534.snap             0     512\n/dev/loop16         0      0         1  1 /var/lib/snapd/snaps/snapd-desktop-integration_49.snap       0     512\n/dev/loop7          0      0         1  1 /var/lib/snapd/snaps/core20_1852.snap                        0     512\n/dev/loop14         0      0         1  1 /var/lib/snapd/snaps/snapd_18357.snap                        0     512\n/dev/loop5          0      0         1  1 /var/lib/snapd/snaps/sublime-text_118.snap                   0     512\n/dev/loop12         0      0         1  1 /var/lib/snapd/snaps/firefox_2487.snap                       0     512\n/dev/loop3          0      0         1  1 /var/lib/snapd/snaps/core20_1822.snap (deleted)              0     512\n/dev/loop10         0      0         1  1 /var/lib/snapd/snaps/gtk-common-themes_1535.snap             0     512\nwang@ubuntu:~$ \n```\n\n\n### 3.2 /dev/sda2 \n\n``` sudo losetup /dev/loop100 /dev/sda2  ```\n``` sudo e2fsck -f /dev/loop100 ```\n\n``` bash\nwang@ubuntu:~$sudo losetup /dev/loop100 /dev/sda2 \nwang@ubuntu:~$ sudo resize2fs /dev/loop100 \nresize2fs 1.46.5 (30-Dec-2021)\nPlease run 'e2fsck -f /dev/loop100' first.\n\nwang@ubuntu:~$ sudo e2fsck -f /dev/loop100 \ne2fsck 1.46.5 (30-Dec-2021)\nPass 1: Checking inodes, blocks, and sizes\nPass 2: Checking directory structure\nPass 3: Checking directory connectivity\nPass 4: Checking reference counts\nPass 5: Checking group summary information\nPadding at end of inode bitmap is not set. Fix<y>? yes\n\nrootfs: ***** FILE SYSTEM WAS MODIFIED *****\nrootfs: 1421/6656 files (0.0% non-contiguous), 5486/32768 blocks\nwang@ubuntu:~$ \nwang@ubuntu:~$ sudo resize2fs /dev/loop100 \nresize2fs 1.46.5 (30-Dec-2021)\nResizing the filesystem on /dev/loop100 to 1310720 (4k) blocks.\nThe filesystem on /dev/loop100 is now 1310720 (4k) blocks long.\n\nwang@ubuntu:~$ \n\n```\n\n","source":"_posts/036.openwrt_disk_expansion.md","raw":"---\ntitle: OpenWrt\ndate: 2023-3-24 10:50:00\nsitemap: true\ncategories: \n- [OpenWrt]\ntags: \n- OpenWrt\n---\n\n##  \n\nopenwrt, sshopenwrt, TF, Linux\n, TFUbuntuGparted, .\n.\n``` resize2fs: Invalid argument While trying to add group #1 ```\n\n<img src=\"/images/036.openwrt_disk_expansion.md.01.png\" width=70% height=80% />\n\n<img src=\"/images/036.openwrt_disk_expansion.md.02.png\" width=70% height=80% />\n\n\n**.:**\n\n##  \n\n```bash\nsda           8:0    1  14.8G  0 disk \nsda1        8:1    1    64M  0 part /media/wang/boot\nsda2        8:2    1     5G  0 part /media/wang/rootfs\n```\n\n##  /media/wang/rootfs \n\n: **```/media/wang/rootfs``` **\n\n### 2.0 : ``` fdisk /dev/sda ``` \n``` bash\nwang@ubuntu:~$ sudo fdisk /dev/sda\nWelcome to fdisk (util-linux 2.37.2).\nChanges will remain in memory only, until you decide to write them.\nBe careful before using the write command.\n\nThis disk is currently in use - repartitioning is probably a bad idea.\nIt's recommended to umount all file systems, and swapoff all swap\npartitions on this disk.\n```\n\n### 2.1 : ``` p ``` \n**** ```/dev/sda2```  ``` 147456 ```\n``` bash\nCommand (m for help): p\n\nDisk /dev/sda: 14.84 GiB, 15931539456 bytes, 31116288 sectors\nDisk model: Storage Device  \nUnits: sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisklabel type: dos\nDisk identifier: 0x4005cfed\n\nDevice     Boot  Start      End  Sectors  Size Id Type\n/dev/sda1  *      8192   139263   131072   64M  c W95 FAT32 (LBA)\n/dev/sda2       147456 21121023 20973568  10G 83 Linux\n```\n\n### 2.2 : ``` d ``` \n``` bash\nCommand (m for help): d\nPartition number (1,2, default 2): 2\nPartition 2 has been deleted.\n```\n\n### 2.3 : ``` n ```\n``` bash\nCommand (m for help): n\nPartition type\n   p   primary (1 primary, 0 extended, 3 free)\n   e   extended (container for logical partitions)\nSelect (default p): p\nPartition number (2-4, default 2): 2\nFirst sector (2048-31116287, default 2048): 147456   ## First sector147456\nLast sector, +/-sectors or +/-size{K,M,G,T,P} (147456-31116287, default 31116287): +5g  ## \n\nCreated a new partition 2 of type 'Linux' and of size 5 GiB.\nPartition #2 contains a ext4 signature.\n\nDo you want to remove the signature? [Y]es/[N]o: n  ## \n```\n\n### 2.4 : ```w ```\n``` bash\nCommand (m for help): w\nThe partition table has been altered.\nSyncing disks.\n```\n\n### 2.5 \n``` bash\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\nwang@ubuntu:~$ sudo resize2fs -p /dev/sda2 \nresize2fs 1.46.5 (30-Dec-2021)\nFilesystem at /dev/sda2 is mounted on /media/wang/rootfs; on-line resizing required\nold_desc_blocks = 1, new_desc_blocks = 1\nPerforming an on-line resize of /dev/sda2 to 1310720 (4k) blocks.\nresize2fs: Invalid argument While trying to add group #1\n```\n\nresize2fs \n: ``` resize2fs: Invalid argument While trying to add group #1 ```\n\n\n##   resize2fs \n\n### 3.1 \n``` losetup```\n``` bash\nwang@ubuntu:~$ losetup \nNAME        SIZELIMIT OFFSET AUTOCLEAR RO BACK-FILE                                                  DIO LOG-SEC\n/dev/loop1          0      0         1  1 /var/lib/snapd/snaps/core18_2708.snap                        0     512\n/dev/loop19         0      0         1  1 /var/lib/snapd/snaps/sublime-text_116.snap                   0     512\n/dev/loop17         0      0         1  1 /var/lib/snapd/snaps/snapd-desktop-integration_43.snap       0     512\n/dev/loop8          0      0         1  1 /var/lib/snapd/snaps/gnome-3-38-2004_119.snap                0     512\n/dev/loop15         0      0         1  1 /var/lib/snapd/snaps/snap-store_638.snap                     0     512\n/dev/loop6          0      0         1  1 /var/lib/snapd/snaps/gnome-3-38-2004_115.snap                0     512\n/dev/loop13         0      0         1  1 /var/lib/snapd/snaps/snap-store_599.snap                     0     512\n/dev/loop4          0      0         1  1 /var/lib/snapd/snaps/core18_2714.snap                        0     512\n/dev/loop21         0      0         1  1 /var/lib/snapd/snaps/snapd_18596.snap                        0     512\n/dev/loop11         0      0         1  1 /var/lib/snapd/snaps/hunspell-dictionaries-1-7-2004_2.snap   0     512\n/dev/loop2          0      0         1  1 /var/lib/snapd/snaps/firefox_2432.snap                       0     512\n/dev/loop0          0      0         1  1 /var/lib/snapd/snaps/bare_5.snap                             0     512\n/dev/loop18         0      0         1  1 /var/lib/snapd/snaps/core20_1828.snap                        0     512\n/dev/loop9          0      0         1  1 /var/lib/snapd/snaps/gtk-common-themes_1534.snap             0     512\n/dev/loop16         0      0         1  1 /var/lib/snapd/snaps/snapd-desktop-integration_49.snap       0     512\n/dev/loop7          0      0         1  1 /var/lib/snapd/snaps/core20_1852.snap                        0     512\n/dev/loop14         0      0         1  1 /var/lib/snapd/snaps/snapd_18357.snap                        0     512\n/dev/loop5          0      0         1  1 /var/lib/snapd/snaps/sublime-text_118.snap                   0     512\n/dev/loop12         0      0         1  1 /var/lib/snapd/snaps/firefox_2487.snap                       0     512\n/dev/loop3          0      0         1  1 /var/lib/snapd/snaps/core20_1822.snap (deleted)              0     512\n/dev/loop10         0      0         1  1 /var/lib/snapd/snaps/gtk-common-themes_1535.snap             0     512\nwang@ubuntu:~$ \n```\n\n\n### 3.2 /dev/sda2 \n\n``` sudo losetup /dev/loop100 /dev/sda2  ```\n``` sudo e2fsck -f /dev/loop100 ```\n\n``` bash\nwang@ubuntu:~$sudo losetup /dev/loop100 /dev/sda2 \nwang@ubuntu:~$ sudo resize2fs /dev/loop100 \nresize2fs 1.46.5 (30-Dec-2021)\nPlease run 'e2fsck -f /dev/loop100' first.\n\nwang@ubuntu:~$ sudo e2fsck -f /dev/loop100 \ne2fsck 1.46.5 (30-Dec-2021)\nPass 1: Checking inodes, blocks, and sizes\nPass 2: Checking directory structure\nPass 3: Checking directory connectivity\nPass 4: Checking reference counts\nPass 5: Checking group summary information\nPadding at end of inode bitmap is not set. Fix<y>? yes\n\nrootfs: ***** FILE SYSTEM WAS MODIFIED *****\nrootfs: 1421/6656 files (0.0% non-contiguous), 5486/32768 blocks\nwang@ubuntu:~$ \nwang@ubuntu:~$ sudo resize2fs /dev/loop100 \nresize2fs 1.46.5 (30-Dec-2021)\nResizing the filesystem on /dev/loop100 to 1310720 (4k) blocks.\nThe filesystem on /dev/loop100 is now 1310720 (4k) blocks long.\n\nwang@ubuntu:~$ \n\n```\n\n","slug":"036.openwrt_disk_expansion","published":1,"updated":"2023-04-14T10:07:29.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbfi003gyknrdjk209bx","content":"<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p>openwrt, sshopenwrt, TF, Linux<br>, TFUbuntuGparted, .<br>.<br><code>resize2fs: Invalid argument While trying to add group #1</code></p>\n<img src=\"/images/036.openwrt_disk_expansion.md.01.png\" width=70% height=80% />\n\n<img src=\"/images/036.openwrt_disk_expansion.md.02.png\" width=70% height=80% />\n\n\n<p><strong>.:</strong></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sda           8:0    1  14.8G  0 disk </span><br><span class=\"line\">sda1        8:1    1    64M  0 part /media/wang/boot</span><br><span class=\"line\">sda2        8:2    1     5G  0 part /media/wang/rootfs</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"--media-wang-rootfs\"><a href=\"#--media-wang-rootfs\" class=\"headerlink\" title=\" &#x2F;media&#x2F;wang&#x2F;rootfs\"></a> &#x2F;media&#x2F;wang&#x2F;rootfs</h2><p>: <strong><code>/media/wang/rootfs</code> </strong></p>\n<h3 id=\"2-0--fdisk-dev-sda\"><a href=\"#2-0--fdisk-dev-sda\" class=\"headerlink\" title=\"2.0 : fdisk /dev/sda\"></a>2.0 : <code>fdisk /dev/sda</code></h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">wang@ubuntu:~$ sudo fdisk /dev/sda</span><br><span class=\"line\">Welcome to fdisk (util-linux 2.37.2).</span><br><span class=\"line\">Changes will remain <span class=\"keyword\">in</span> memory only, <span class=\"keyword\">until</span> you decide to write them.</span><br><span class=\"line\">Be careful before using the write <span class=\"built_in\">command</span>.</span><br><span class=\"line\"></span><br><span class=\"line\">This disk is currently <span class=\"keyword\">in</span> use - repartitioning is probably a bad idea.</span><br><span class=\"line\">It<span class=\"string\">&#x27;s recommended to umount all file systems, and swapoff all swap</span></span><br><span class=\"line\"><span class=\"string\">partitions on this disk.</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-1--p\"><a href=\"#2-1--p\" class=\"headerlink\" title=\"2.1 : p\"></a>2.1 : <code>p</code></h3><p><strong></strong> <code>/dev/sda2</code>  <code>147456</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">Command (m <span class=\"keyword\">for</span> <span class=\"built_in\">help</span>): p</span><br><span class=\"line\"></span><br><span class=\"line\">Disk /dev/sda: 14.84 GiB, 15931539456 bytes, 31116288 sectors</span><br><span class=\"line\">Disk model: Storage Device  </span><br><span class=\"line\">Units: sectors of 1 * 512 = 512 bytes</span><br><span class=\"line\">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class=\"line\">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class=\"line\">Disklabel <span class=\"built_in\">type</span>: dos</span><br><span class=\"line\">Disk identifier: 0x4005cfed</span><br><span class=\"line\"></span><br><span class=\"line\">Device     Boot  Start      End  Sectors  Size Id Type</span><br><span class=\"line\">/dev/sda1  *      8192   139263   131072   64M  c W95 FAT32 (LBA)</span><br><span class=\"line\">/dev/sda2       147456 21121023 20973568  10G 83 Linux</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-2--d\"><a href=\"#2-2--d\" class=\"headerlink\" title=\"2.2 : d\"></a>2.2 : <code>d</code></h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">Command (m <span class=\"keyword\">for</span> <span class=\"built_in\">help</span>): d</span><br><span class=\"line\">Partition number (1,2, default 2): 2</span><br><span class=\"line\">Partition 2 has been deleted.</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-3--n\"><a href=\"#2-3--n\" class=\"headerlink\" title=\"2.3 : n\"></a>2.3 : <code>n</code></h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">Command (m <span class=\"keyword\">for</span> <span class=\"built_in\">help</span>): n</span><br><span class=\"line\">Partition <span class=\"built_in\">type</span></span><br><span class=\"line\">   p   primary (1 primary, 0 extended, 3 free)</span><br><span class=\"line\">   e   extended (container <span class=\"keyword\">for</span> logical partitions)</span><br><span class=\"line\">Select (default p): p</span><br><span class=\"line\">Partition number (2-4, default 2): 2</span><br><span class=\"line\">First sector (2048-31116287, default 2048): 147456   <span class=\"comment\">## First sector147456</span></span><br><span class=\"line\">Last sector, +/-sectors or +/-size&#123;K,M,G,T,P&#125; (147456-31116287, default 31116287): +5g  <span class=\"comment\">## </span></span><br><span class=\"line\"></span><br><span class=\"line\">Created a new partition 2 of <span class=\"built_in\">type</span> <span class=\"string\">&#x27;Linux&#x27;</span> and of size 5 GiB.</span><br><span class=\"line\">Partition <span class=\"comment\">#2 contains a ext4 signature.</span></span><br><span class=\"line\"></span><br><span class=\"line\">Do you want to remove the signature? [Y]es/[N]o: n  <span class=\"comment\">## </span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-4--w\"><a href=\"#2-4--w\" class=\"headerlink\" title=\"2.4 : w \"></a>2.4 : <code>w </code></h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">Command (m <span class=\"keyword\">for</span> <span class=\"built_in\">help</span>): w</span><br><span class=\"line\">The partition table has been altered.</span><br><span class=\"line\">Syncing disks.</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-5-\"><a href=\"#2-5-\" class=\"headerlink\" title=\"2.5 \"></a>2.5 </h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">wang@ubuntu:~$ sudo resize2fs -p /dev/sda2 </span><br><span class=\"line\">resize2fs 1.46.5 (30-Dec-2021)</span><br><span class=\"line\">Filesystem at /dev/sda2 is mounted on /media/wang/rootfs; on-line resizing required</span><br><span class=\"line\">old_desc_blocks = 1, new_desc_blocks = 1</span><br><span class=\"line\">Performing an on-line resize of /dev/sda2 to 1310720 (4k) blocks.</span><br><span class=\"line\">resize2fs: Invalid argument While trying to add group <span class=\"comment\">#1</span></span><br></pre></td></tr></table></figure>\n\n<p>resize2fs <br>: <code>resize2fs: Invalid argument While trying to add group #1</code></p>\n<h2 id=\"--resize2fs-\"><a href=\"#--resize2fs-\" class=\"headerlink\" title=\"  resize2fs \"></a>  resize2fs </h2><h3 id=\"3-1-\"><a href=\"#3-1-\" class=\"headerlink\" title=\"3.1 \"></a>3.1 </h3><p><code> losetup</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">wang@ubuntu:~$ losetup </span><br><span class=\"line\">NAME        SIZELIMIT OFFSET AUTOCLEAR RO BACK-FILE                                                  DIO LOG-SEC</span><br><span class=\"line\">/dev/loop1          0      0         1  1 /var/lib/snapd/snaps/core18_2708.snap                        0     512</span><br><span class=\"line\">/dev/loop19         0      0         1  1 /var/lib/snapd/snaps/sublime-text_116.snap                   0     512</span><br><span class=\"line\">/dev/loop17         0      0         1  1 /var/lib/snapd/snaps/snapd-desktop-integration_43.snap       0     512</span><br><span class=\"line\">/dev/loop8          0      0         1  1 /var/lib/snapd/snaps/gnome-3-38-2004_119.snap                0     512</span><br><span class=\"line\">/dev/loop15         0      0         1  1 /var/lib/snapd/snaps/snap-store_638.snap                     0     512</span><br><span class=\"line\">/dev/loop6          0      0         1  1 /var/lib/snapd/snaps/gnome-3-38-2004_115.snap                0     512</span><br><span class=\"line\">/dev/loop13         0      0         1  1 /var/lib/snapd/snaps/snap-store_599.snap                     0     512</span><br><span class=\"line\">/dev/loop4          0      0         1  1 /var/lib/snapd/snaps/core18_2714.snap                        0     512</span><br><span class=\"line\">/dev/loop21         0      0         1  1 /var/lib/snapd/snaps/snapd_18596.snap                        0     512</span><br><span class=\"line\">/dev/loop11         0      0         1  1 /var/lib/snapd/snaps/hunspell-dictionaries-1-7-2004_2.snap   0     512</span><br><span class=\"line\">/dev/loop2          0      0         1  1 /var/lib/snapd/snaps/firefox_2432.snap                       0     512</span><br><span class=\"line\">/dev/loop0          0      0         1  1 /var/lib/snapd/snaps/bare_5.snap                             0     512</span><br><span class=\"line\">/dev/loop18         0      0         1  1 /var/lib/snapd/snaps/core20_1828.snap                        0     512</span><br><span class=\"line\">/dev/loop9          0      0         1  1 /var/lib/snapd/snaps/gtk-common-themes_1534.snap             0     512</span><br><span class=\"line\">/dev/loop16         0      0         1  1 /var/lib/snapd/snaps/snapd-desktop-integration_49.snap       0     512</span><br><span class=\"line\">/dev/loop7          0      0         1  1 /var/lib/snapd/snaps/core20_1852.snap                        0     512</span><br><span class=\"line\">/dev/loop14         0      0         1  1 /var/lib/snapd/snaps/snapd_18357.snap                        0     512</span><br><span class=\"line\">/dev/loop5          0      0         1  1 /var/lib/snapd/snaps/sublime-text_118.snap                   0     512</span><br><span class=\"line\">/dev/loop12         0      0         1  1 /var/lib/snapd/snaps/firefox_2487.snap                       0     512</span><br><span class=\"line\">/dev/loop3          0      0         1  1 /var/lib/snapd/snaps/core20_1822.snap (deleted)              0     512</span><br><span class=\"line\">/dev/loop10         0      0         1  1 /var/lib/snapd/snaps/gtk-common-themes_1535.snap             0     512</span><br><span class=\"line\">wang@ubuntu:~$ </span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"3-2--dev-sda2-\"><a href=\"#3-2--dev-sda2-\" class=\"headerlink\" title=\"3.2 &#x2F;dev&#x2F;sda2 \"></a>3.2 &#x2F;dev&#x2F;sda2 </h3><p><code>sudo losetup /dev/loop100 /dev/sda2 </code><br><code>sudo e2fsck -f /dev/loop100</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">wang@ubuntu:~<span class=\"variable\">$sudo</span> losetup /dev/loop100 /dev/sda2 </span><br><span class=\"line\">wang@ubuntu:~$ sudo resize2fs /dev/loop100 </span><br><span class=\"line\">resize2fs 1.46.5 (30-Dec-2021)</span><br><span class=\"line\">Please run <span class=\"string\">&#x27;e2fsck -f /dev/loop100&#x27;</span> first.</span><br><span class=\"line\"></span><br><span class=\"line\">wang@ubuntu:~$ sudo e2fsck -f /dev/loop100 </span><br><span class=\"line\">e2fsck 1.46.5 (30-Dec-2021)</span><br><span class=\"line\">Pass 1: Checking inodes, blocks, and sizes</span><br><span class=\"line\">Pass 2: Checking directory structure</span><br><span class=\"line\">Pass 3: Checking directory connectivity</span><br><span class=\"line\">Pass 4: Checking reference counts</span><br><span class=\"line\">Pass 5: Checking group summary information</span><br><span class=\"line\">Padding at end of inode bitmap is not <span class=\"built_in\">set</span>. Fix&lt;y&gt;? <span class=\"built_in\">yes</span></span><br><span class=\"line\"></span><br><span class=\"line\">rootfs: ***** FILE SYSTEM WAS MODIFIED *****</span><br><span class=\"line\">rootfs: 1421/6656 files (0.0% non-contiguous), 5486/32768 blocks</span><br><span class=\"line\">wang@ubuntu:~$ </span><br><span class=\"line\">wang@ubuntu:~$ sudo resize2fs /dev/loop100 </span><br><span class=\"line\">resize2fs 1.46.5 (30-Dec-2021)</span><br><span class=\"line\">Resizing the filesystem on /dev/loop100 to 1310720 (4k) blocks.</span><br><span class=\"line\">The filesystem on /dev/loop100 is now 1310720 (4k) blocks long.</span><br><span class=\"line\"></span><br><span class=\"line\">wang@ubuntu:~$ </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p>openwrt, sshopenwrt, TF, Linux<br>, TFUbuntuGparted, .<br>.<br><code>resize2fs: Invalid argument While trying to add group #1</code></p>\n<img src=\"/images/036.openwrt_disk_expansion.md.01.png\" width=70% height=80% />\n\n<img src=\"/images/036.openwrt_disk_expansion.md.02.png\" width=70% height=80% />\n\n\n<p><strong>.:</strong></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sda           8:0    1  14.8G  0 disk </span><br><span class=\"line\">sda1        8:1    1    64M  0 part /media/wang/boot</span><br><span class=\"line\">sda2        8:2    1     5G  0 part /media/wang/rootfs</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"--media-wang-rootfs\"><a href=\"#--media-wang-rootfs\" class=\"headerlink\" title=\" &#x2F;media&#x2F;wang&#x2F;rootfs\"></a> &#x2F;media&#x2F;wang&#x2F;rootfs</h2><p>: <strong><code>/media/wang/rootfs</code> </strong></p>\n<h3 id=\"2-0--fdisk-dev-sda\"><a href=\"#2-0--fdisk-dev-sda\" class=\"headerlink\" title=\"2.0 : fdisk /dev/sda\"></a>2.0 : <code>fdisk /dev/sda</code></h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">wang@ubuntu:~$ sudo fdisk /dev/sda</span><br><span class=\"line\">Welcome to fdisk (util-linux 2.37.2).</span><br><span class=\"line\">Changes will remain <span class=\"keyword\">in</span> memory only, <span class=\"keyword\">until</span> you decide to write them.</span><br><span class=\"line\">Be careful before using the write <span class=\"built_in\">command</span>.</span><br><span class=\"line\"></span><br><span class=\"line\">This disk is currently <span class=\"keyword\">in</span> use - repartitioning is probably a bad idea.</span><br><span class=\"line\">It<span class=\"string\">&#x27;s recommended to umount all file systems, and swapoff all swap</span></span><br><span class=\"line\"><span class=\"string\">partitions on this disk.</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-1--p\"><a href=\"#2-1--p\" class=\"headerlink\" title=\"2.1 : p\"></a>2.1 : <code>p</code></h3><p><strong></strong> <code>/dev/sda2</code>  <code>147456</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">Command (m <span class=\"keyword\">for</span> <span class=\"built_in\">help</span>): p</span><br><span class=\"line\"></span><br><span class=\"line\">Disk /dev/sda: 14.84 GiB, 15931539456 bytes, 31116288 sectors</span><br><span class=\"line\">Disk model: Storage Device  </span><br><span class=\"line\">Units: sectors of 1 * 512 = 512 bytes</span><br><span class=\"line\">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class=\"line\">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class=\"line\">Disklabel <span class=\"built_in\">type</span>: dos</span><br><span class=\"line\">Disk identifier: 0x4005cfed</span><br><span class=\"line\"></span><br><span class=\"line\">Device     Boot  Start      End  Sectors  Size Id Type</span><br><span class=\"line\">/dev/sda1  *      8192   139263   131072   64M  c W95 FAT32 (LBA)</span><br><span class=\"line\">/dev/sda2       147456 21121023 20973568  10G 83 Linux</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-2--d\"><a href=\"#2-2--d\" class=\"headerlink\" title=\"2.2 : d\"></a>2.2 : <code>d</code></h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">Command (m <span class=\"keyword\">for</span> <span class=\"built_in\">help</span>): d</span><br><span class=\"line\">Partition number (1,2, default 2): 2</span><br><span class=\"line\">Partition 2 has been deleted.</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-3--n\"><a href=\"#2-3--n\" class=\"headerlink\" title=\"2.3 : n\"></a>2.3 : <code>n</code></h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">Command (m <span class=\"keyword\">for</span> <span class=\"built_in\">help</span>): n</span><br><span class=\"line\">Partition <span class=\"built_in\">type</span></span><br><span class=\"line\">   p   primary (1 primary, 0 extended, 3 free)</span><br><span class=\"line\">   e   extended (container <span class=\"keyword\">for</span> logical partitions)</span><br><span class=\"line\">Select (default p): p</span><br><span class=\"line\">Partition number (2-4, default 2): 2</span><br><span class=\"line\">First sector (2048-31116287, default 2048): 147456   <span class=\"comment\">## First sector147456</span></span><br><span class=\"line\">Last sector, +/-sectors or +/-size&#123;K,M,G,T,P&#125; (147456-31116287, default 31116287): +5g  <span class=\"comment\">## </span></span><br><span class=\"line\"></span><br><span class=\"line\">Created a new partition 2 of <span class=\"built_in\">type</span> <span class=\"string\">&#x27;Linux&#x27;</span> and of size 5 GiB.</span><br><span class=\"line\">Partition <span class=\"comment\">#2 contains a ext4 signature.</span></span><br><span class=\"line\"></span><br><span class=\"line\">Do you want to remove the signature? [Y]es/[N]o: n  <span class=\"comment\">## </span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-4--w\"><a href=\"#2-4--w\" class=\"headerlink\" title=\"2.4 : w \"></a>2.4 : <code>w </code></h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">Command (m <span class=\"keyword\">for</span> <span class=\"built_in\">help</span>): w</span><br><span class=\"line\">The partition table has been altered.</span><br><span class=\"line\">Syncing disks.</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-5-\"><a href=\"#2-5-\" class=\"headerlink\" title=\"2.5 \"></a>2.5 </h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">wang@ubuntu:~$ sudo resize2fs -p /dev/sda2 </span><br><span class=\"line\">resize2fs 1.46.5 (30-Dec-2021)</span><br><span class=\"line\">Filesystem at /dev/sda2 is mounted on /media/wang/rootfs; on-line resizing required</span><br><span class=\"line\">old_desc_blocks = 1, new_desc_blocks = 1</span><br><span class=\"line\">Performing an on-line resize of /dev/sda2 to 1310720 (4k) blocks.</span><br><span class=\"line\">resize2fs: Invalid argument While trying to add group <span class=\"comment\">#1</span></span><br></pre></td></tr></table></figure>\n\n<p>resize2fs <br>: <code>resize2fs: Invalid argument While trying to add group #1</code></p>\n<h2 id=\"--resize2fs-\"><a href=\"#--resize2fs-\" class=\"headerlink\" title=\"  resize2fs \"></a>  resize2fs </h2><h3 id=\"3-1-\"><a href=\"#3-1-\" class=\"headerlink\" title=\"3.1 \"></a>3.1 </h3><p><code> losetup</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">wang@ubuntu:~$ losetup </span><br><span class=\"line\">NAME        SIZELIMIT OFFSET AUTOCLEAR RO BACK-FILE                                                  DIO LOG-SEC</span><br><span class=\"line\">/dev/loop1          0      0         1  1 /var/lib/snapd/snaps/core18_2708.snap                        0     512</span><br><span class=\"line\">/dev/loop19         0      0         1  1 /var/lib/snapd/snaps/sublime-text_116.snap                   0     512</span><br><span class=\"line\">/dev/loop17         0      0         1  1 /var/lib/snapd/snaps/snapd-desktop-integration_43.snap       0     512</span><br><span class=\"line\">/dev/loop8          0      0         1  1 /var/lib/snapd/snaps/gnome-3-38-2004_119.snap                0     512</span><br><span class=\"line\">/dev/loop15         0      0         1  1 /var/lib/snapd/snaps/snap-store_638.snap                     0     512</span><br><span class=\"line\">/dev/loop6          0      0         1  1 /var/lib/snapd/snaps/gnome-3-38-2004_115.snap                0     512</span><br><span class=\"line\">/dev/loop13         0      0         1  1 /var/lib/snapd/snaps/snap-store_599.snap                     0     512</span><br><span class=\"line\">/dev/loop4          0      0         1  1 /var/lib/snapd/snaps/core18_2714.snap                        0     512</span><br><span class=\"line\">/dev/loop21         0      0         1  1 /var/lib/snapd/snaps/snapd_18596.snap                        0     512</span><br><span class=\"line\">/dev/loop11         0      0         1  1 /var/lib/snapd/snaps/hunspell-dictionaries-1-7-2004_2.snap   0     512</span><br><span class=\"line\">/dev/loop2          0      0         1  1 /var/lib/snapd/snaps/firefox_2432.snap                       0     512</span><br><span class=\"line\">/dev/loop0          0      0         1  1 /var/lib/snapd/snaps/bare_5.snap                             0     512</span><br><span class=\"line\">/dev/loop18         0      0         1  1 /var/lib/snapd/snaps/core20_1828.snap                        0     512</span><br><span class=\"line\">/dev/loop9          0      0         1  1 /var/lib/snapd/snaps/gtk-common-themes_1534.snap             0     512</span><br><span class=\"line\">/dev/loop16         0      0         1  1 /var/lib/snapd/snaps/snapd-desktop-integration_49.snap       0     512</span><br><span class=\"line\">/dev/loop7          0      0         1  1 /var/lib/snapd/snaps/core20_1852.snap                        0     512</span><br><span class=\"line\">/dev/loop14         0      0         1  1 /var/lib/snapd/snaps/snapd_18357.snap                        0     512</span><br><span class=\"line\">/dev/loop5          0      0         1  1 /var/lib/snapd/snaps/sublime-text_118.snap                   0     512</span><br><span class=\"line\">/dev/loop12         0      0         1  1 /var/lib/snapd/snaps/firefox_2487.snap                       0     512</span><br><span class=\"line\">/dev/loop3          0      0         1  1 /var/lib/snapd/snaps/core20_1822.snap (deleted)              0     512</span><br><span class=\"line\">/dev/loop10         0      0         1  1 /var/lib/snapd/snaps/gtk-common-themes_1535.snap             0     512</span><br><span class=\"line\">wang@ubuntu:~$ </span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"3-2--dev-sda2-\"><a href=\"#3-2--dev-sda2-\" class=\"headerlink\" title=\"3.2 &#x2F;dev&#x2F;sda2 \"></a>3.2 &#x2F;dev&#x2F;sda2 </h3><p><code>sudo losetup /dev/loop100 /dev/sda2 </code><br><code>sudo e2fsck -f /dev/loop100</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">wang@ubuntu:~<span class=\"variable\">$sudo</span> losetup /dev/loop100 /dev/sda2 </span><br><span class=\"line\">wang@ubuntu:~$ sudo resize2fs /dev/loop100 </span><br><span class=\"line\">resize2fs 1.46.5 (30-Dec-2021)</span><br><span class=\"line\">Please run <span class=\"string\">&#x27;e2fsck -f /dev/loop100&#x27;</span> first.</span><br><span class=\"line\"></span><br><span class=\"line\">wang@ubuntu:~$ sudo e2fsck -f /dev/loop100 </span><br><span class=\"line\">e2fsck 1.46.5 (30-Dec-2021)</span><br><span class=\"line\">Pass 1: Checking inodes, blocks, and sizes</span><br><span class=\"line\">Pass 2: Checking directory structure</span><br><span class=\"line\">Pass 3: Checking directory connectivity</span><br><span class=\"line\">Pass 4: Checking reference counts</span><br><span class=\"line\">Pass 5: Checking group summary information</span><br><span class=\"line\">Padding at end of inode bitmap is not <span class=\"built_in\">set</span>. Fix&lt;y&gt;? <span class=\"built_in\">yes</span></span><br><span class=\"line\"></span><br><span class=\"line\">rootfs: ***** FILE SYSTEM WAS MODIFIED *****</span><br><span class=\"line\">rootfs: 1421/6656 files (0.0% non-contiguous), 5486/32768 blocks</span><br><span class=\"line\">wang@ubuntu:~$ </span><br><span class=\"line\">wang@ubuntu:~$ sudo resize2fs /dev/loop100 </span><br><span class=\"line\">resize2fs 1.46.5 (30-Dec-2021)</span><br><span class=\"line\">Resizing the filesystem on /dev/loop100 to 1310720 (4k) blocks.</span><br><span class=\"line\">The filesystem on /dev/loop100 is now 1310720 (4k) blocks long.</span><br><span class=\"line\"></span><br><span class=\"line\">wang@ubuntu:~$ </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n"},{"title":"KVM","date":"2023-03-30T02:50:00.000Z","sitemap":true,"_content":"\n\n##  \n``` bash\nwang@ubuntu:~/Desktop$ sudo screenfetch\n                          ./+o+-       root@ubuntu\n                  yyyyy- -yyyyyy+      OS: Ubuntu 22.04 jammy\n               ://+//////-yyyyyyo      Kernel: x86_64 Linux 5.19.0-38-generic\n           .++ .:/++++++/-.+sss/`      Uptime: 2d 2h 14m\n         .:++o:  /++++++++/:--:/-      Packages: 2193\n        o:+o+:++.`..```.-/oo+++++/     Shell: sudo\n       .:+o:+o/.          `+sssoo+/    Resolution: 1920x1080\n  .++/+:+oo+o:`             /sssooo.   WM: Mutter\n /+++//+:`oo+o               /::--:.   WM Theme: Adwaita\n \\+/+o+++`o++o               ++////.   GTK Theme: Yaru [GTK3]\n  .++.o+++oo+:`             /dddhhh.   Disk: 31G / 234G (14%)\n       .+.o+oo:.          `oddhhhh+    CPU: Intel Core i7-6500U @ 4x 3.1GHz [54.0C]\n        \\+.++o+o``-````.:ohdhhhhh+     GPU: Intel Corporation Skylake GT2 [HD Graphics 520] (rev 07)\n         `:o+++ `ohhhhhhhhyo++os:      RAM: 2305MiB / 7831MiB\n           .o:`.syhhhhhhh/.oo++o`     \n               /osyyyyyyo++ooo+++/    \n                   ````` +oo+++o\\:    \n                          `oo++.      \n```\n\n##  \n``` bash\nsudo apt install -y \\\n  qemu-kvm \\\n\tvirt-manager \\\n\tlibvirt-daemon-system \\\n\tvirtinst \\\n\tlibvirt-clients \\\n\tbridge-utils \n```\n\n|                 | |\n| ------               |  ------                         | \n|qemu-kvm              |  |\n|virt-manager          |  libvirt  QT  |\n|libvirt-daemon-system |  libvirt |\n|virtinst              | |\n|libvirt-clients       | API|\n|bridge-utils          | |\n\n##  libvirtd\n\n``` bash\nsudo systemctl enable libvirtd --now\nsudo systemctl status libvirtd\n```\n\n##  kvmlibvirt\n\n``` bash\nsudo usermod -aG kvm wang\nsudo usermod -aG libvirt wang\n``` \n\n##  \n\n### 4.1  virt-manager \n, .\n![png](/images/037.kvm.md.02.png)\n\n### 4.2  virt-install \n\nvirt-install , [](https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/virtualization_deployment_and_administration_guide/sect-guest_virtual_machine_installation_overview-creating_guests_with_virt_install).\n:\n1. **iso/image**\n2. ****\n3. ****\n4. **PXE** \n5. **Kickstart** \n\niso\n``` bash\nsudo virt-install \\ \n  --name vhost1 \\ \n  --memory 2048 \\ \n  --vcpus 2 \\ \n  --disk size=8 \\ \n  --cdrom /path/to/centos.iso \\ \n  --os-variant centos7 \n```\n![png](/images/037.kvm.md.04.png)\n\n\n##  \n### 5.1 \n**may not be accessible by the hypervisor. You will need to grant the 'libvirt-qemu' user**\n![png](/images/037.kvm.md.03.png)\n\n: \n1. kvmlibvirt\n2. .\n\n##  (vhost)\n{% label success@%}, .\n\n![png](/images/037.kvm.md.01.png)\n\n\n``` br0 ```  ```wlp9s0```\n\n``` yaml\n#sudo vim /etc/netplan/br.yaml\n\nnetwork:\n  version: 2\n  renderer: networkd\n  ethernets:\n    wlp9s0:\n      dhcp4: false\n      dhcp6: false\n  bridges:\n    br0:\n      macaddress: aa:bb:cc:11:22:33\n      dhcp4: false\n      dhcp6: false\n      addresses:\n        - 192.168.110.157/24\n      routes:\n        - to: default\n          via: 192.168.110.1\n          metric: 100\n          on-link: true\n      nameservers:\n        addresses:\n          - 223.6.6.6\n      interfaces:\n          - wlp9s0\n      parameters:\n        stp: true\n        forward-delay: 4\n```\n\n\n","source":"_posts/037.kvm.md","raw":"---\ntitle: KVM\ndate: 2023-3-30 10:50:00\nsitemap: true\ncategories: \n- [KVM]\ntags: \n- kvm\n- qemu\n---\n\n\n##  \n``` bash\nwang@ubuntu:~/Desktop$ sudo screenfetch\n                          ./+o+-       root@ubuntu\n                  yyyyy- -yyyyyy+      OS: Ubuntu 22.04 jammy\n               ://+//////-yyyyyyo      Kernel: x86_64 Linux 5.19.0-38-generic\n           .++ .:/++++++/-.+sss/`      Uptime: 2d 2h 14m\n         .:++o:  /++++++++/:--:/-      Packages: 2193\n        o:+o+:++.`..```.-/oo+++++/     Shell: sudo\n       .:+o:+o/.          `+sssoo+/    Resolution: 1920x1080\n  .++/+:+oo+o:`             /sssooo.   WM: Mutter\n /+++//+:`oo+o               /::--:.   WM Theme: Adwaita\n \\+/+o+++`o++o               ++////.   GTK Theme: Yaru [GTK3]\n  .++.o+++oo+:`             /dddhhh.   Disk: 31G / 234G (14%)\n       .+.o+oo:.          `oddhhhh+    CPU: Intel Core i7-6500U @ 4x 3.1GHz [54.0C]\n        \\+.++o+o``-````.:ohdhhhhh+     GPU: Intel Corporation Skylake GT2 [HD Graphics 520] (rev 07)\n         `:o+++ `ohhhhhhhhyo++os:      RAM: 2305MiB / 7831MiB\n           .o:`.syhhhhhhh/.oo++o`     \n               /osyyyyyyo++ooo+++/    \n                   ````` +oo+++o\\:    \n                          `oo++.      \n```\n\n##  \n``` bash\nsudo apt install -y \\\n  qemu-kvm \\\n\tvirt-manager \\\n\tlibvirt-daemon-system \\\n\tvirtinst \\\n\tlibvirt-clients \\\n\tbridge-utils \n```\n\n|                 | |\n| ------               |  ------                         | \n|qemu-kvm              |  |\n|virt-manager          |  libvirt  QT  |\n|libvirt-daemon-system |  libvirt |\n|virtinst              | |\n|libvirt-clients       | API|\n|bridge-utils          | |\n\n##  libvirtd\n\n``` bash\nsudo systemctl enable libvirtd --now\nsudo systemctl status libvirtd\n```\n\n##  kvmlibvirt\n\n``` bash\nsudo usermod -aG kvm wang\nsudo usermod -aG libvirt wang\n``` \n\n##  \n\n### 4.1  virt-manager \n, .\n![png](/images/037.kvm.md.02.png)\n\n### 4.2  virt-install \n\nvirt-install , [](https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/virtualization_deployment_and_administration_guide/sect-guest_virtual_machine_installation_overview-creating_guests_with_virt_install).\n:\n1. **iso/image**\n2. ****\n3. ****\n4. **PXE** \n5. **Kickstart** \n\niso\n``` bash\nsudo virt-install \\ \n  --name vhost1 \\ \n  --memory 2048 \\ \n  --vcpus 2 \\ \n  --disk size=8 \\ \n  --cdrom /path/to/centos.iso \\ \n  --os-variant centos7 \n```\n![png](/images/037.kvm.md.04.png)\n\n\n##  \n### 5.1 \n**may not be accessible by the hypervisor. You will need to grant the 'libvirt-qemu' user**\n![png](/images/037.kvm.md.03.png)\n\n: \n1. kvmlibvirt\n2. .\n\n##  (vhost)\n{% label success@%}, .\n\n![png](/images/037.kvm.md.01.png)\n\n\n``` br0 ```  ```wlp9s0```\n\n``` yaml\n#sudo vim /etc/netplan/br.yaml\n\nnetwork:\n  version: 2\n  renderer: networkd\n  ethernets:\n    wlp9s0:\n      dhcp4: false\n      dhcp6: false\n  bridges:\n    br0:\n      macaddress: aa:bb:cc:11:22:33\n      dhcp4: false\n      dhcp6: false\n      addresses:\n        - 192.168.110.157/24\n      routes:\n        - to: default\n          via: 192.168.110.1\n          metric: 100\n          on-link: true\n      nameservers:\n        addresses:\n          - 223.6.6.6\n      interfaces:\n          - wlp9s0\n      parameters:\n        stp: true\n        forward-delay: 4\n```\n\n\n","slug":"037.kvm","published":1,"updated":"2023-04-21T04:41:42.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbfl003lyknrgkx220aj","content":"<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">wang@ubuntu:~/Desktop$ sudo screenfetch</span><br><span class=\"line\">                          ./+o+-       root@ubuntu</span><br><span class=\"line\">                  yyyyy- -yyyyyy+      OS: Ubuntu 22.04 jammy</span><br><span class=\"line\">               ://+//////-yyyyyyo      Kernel: x86_64 Linux 5.19.0-38-generic</span><br><span class=\"line\">           .++ .:/++++++/-.+sss/`      Uptime: 2d 2h 14m</span><br><span class=\"line\">         .:++o:  /++++++++/:--:/-      Packages: 2193</span><br><span class=\"line\">        o:+o+:++.`..```.-/oo+++++/     Shell: sudo</span><br><span class=\"line\">       .:+o:+o/.          `+sssoo+/    Resolution: 1920x1080</span><br><span class=\"line\">  .++/+:+oo+o:`             /sssooo.   WM: Mutter</span><br><span class=\"line\"> /+++//+:`oo+o               /::--:.   WM Theme: Adwaita</span><br><span class=\"line\"> \\+/+o+++`o++o               ++////.   GTK Theme: Yaru [GTK3]</span><br><span class=\"line\">  .++.o+++oo+:`             /dddhhh.   Disk: 31G / 234G (14%)</span><br><span class=\"line\">       .+.o+oo:.          `oddhhhh+    CPU: Intel Core i7-6500U @ 4x 3.1GHz [54.0C]</span><br><span class=\"line\">        \\+.++o+o``-````.:ohdhhhhh+     GPU: Intel Corporation Skylake GT2 [HD Graphics 520] (rev 07)</span><br><span class=\"line\">         `:o+++ `ohhhhhhhhyo++os:      RAM: 2305MiB / 7831MiB</span><br><span class=\"line\">           .o:`.syhhhhhhh/.oo++o`     </span><br><span class=\"line\">               /osyyyyyyo++ooo+++/    </span><br><span class=\"line\">                   ````` +oo+++o\\:    </span><br><span class=\"line\">                          `oo++.      </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt install -y \\</span><br><span class=\"line\">  qemu-kvm \\</span><br><span class=\"line\">\tvirt-manager \\</span><br><span class=\"line\">\tlibvirt-daemon-system \\</span><br><span class=\"line\">\tvirtinst \\</span><br><span class=\"line\">\tlibvirt-clients \\</span><br><span class=\"line\">\tbridge-utils </span><br></pre></td></tr></table></figure>\n\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>qemu-kvm</td>\n<td></td>\n</tr>\n<tr>\n<td>virt-manager</td>\n<td> libvirt  QT </td>\n</tr>\n<tr>\n<td>libvirt-daemon-system</td>\n<td> libvirt </td>\n</tr>\n<tr>\n<td>virtinst</td>\n<td></td>\n</tr>\n<tr>\n<td>libvirt-clients</td>\n<td>API</td>\n</tr>\n<tr>\n<td>bridge-utils</td>\n<td></td>\n</tr>\n</tbody></table>\n<h2 id=\"-libvirtd\"><a href=\"#-libvirtd\" class=\"headerlink\" title=\" libvirtd\"></a> libvirtd</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo systemctl <span class=\"built_in\">enable</span> libvirtd --now</span><br><span class=\"line\">sudo systemctl status libvirtd</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"-kvmlibvirt\"><a href=\"#-kvmlibvirt\" class=\"headerlink\" title=\" kvmlibvirt\"></a> kvmlibvirt</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo usermod -aG kvm wang</span><br><span class=\"line\">sudo usermod -aG libvirt wang</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"4-1--virt-manager-\"><a href=\"#4-1--virt-manager-\" class=\"headerlink\" title=\"4.1  virt-manager \"></a>4.1  virt-manager </h3><p>, .<br><img src=\"/images/037.kvm.md.02.png\" alt=\"png\"></p>\n<h3 id=\"4-2--virt-install-\"><a href=\"#4-2--virt-install-\" class=\"headerlink\" title=\"4.2  virt-install \"></a>4.2  virt-install </h3><p>virt-install , <a href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/virtualization_deployment_and_administration_guide/sect-guest_virtual_machine_installation_overview-creating_guests_with_virt_install\"></a>.<br>:</p>\n<ol>\n<li><strong>iso&#x2F;image</strong></li>\n<li><strong></strong></li>\n<li><strong></strong></li>\n<li><strong>PXE</strong> </li>\n<li><strong>Kickstart</strong></li>\n</ol>\n<p>iso</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo virt-install \\ </span><br><span class=\"line\">  --name vhost1 \\ </span><br><span class=\"line\">  --memory 2048 \\ </span><br><span class=\"line\">  --vcpus 2 \\ </span><br><span class=\"line\">  --disk size=8 \\ </span><br><span class=\"line\">  --cdrom /path/to/centos.iso \\ </span><br><span class=\"line\">  --os-variant centos7 </span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/037.kvm.md.04.png\" alt=\"png\"></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"5-1-\"><a href=\"#5-1-\" class=\"headerlink\" title=\"5.1 \"></a>5.1 </h3><p><strong>may not be accessible by the hypervisor. You will need to grant the libvirt-qemu user</strong><br><img src=\"/images/037.kvm.md.03.png\" alt=\"png\"></p>\n<p>: </p>\n<ol>\n<li>kvmlibvirt</li>\n<li>.</li>\n</ol>\n<h2 id=\"--vhost\"><a href=\"#--vhost\" class=\"headerlink\" title=\" (vhost)\"></a> (vhost)</h2><p><mark class=\"label success\"></mark>, .<br><br><img src=\"/images/037.kvm.md.01.png\" alt=\"png\"></p>\n<p><code>br0</code>  <code>wlp9s0</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#sudo vim /etc/netplan/br.yaml</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">network:</span></span><br><span class=\"line\">  <span class=\"attr\">version:</span> <span class=\"number\">2</span></span><br><span class=\"line\">  <span class=\"attr\">renderer:</span> <span class=\"string\">networkd</span></span><br><span class=\"line\">  <span class=\"attr\">ethernets:</span></span><br><span class=\"line\">    <span class=\"attr\">wlp9s0:</span></span><br><span class=\"line\">      <span class=\"attr\">dhcp4:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">dhcp6:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"attr\">bridges:</span></span><br><span class=\"line\">    <span class=\"attr\">br0:</span></span><br><span class=\"line\">      <span class=\"attr\">macaddress:</span> <span class=\"string\">aa:bb:cc:11:22:33</span></span><br><span class=\"line\">      <span class=\"attr\">dhcp4:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">dhcp6:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">addresses:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"number\">192.168</span><span class=\"number\">.110</span><span class=\"number\">.157</span><span class=\"string\">/24</span></span><br><span class=\"line\">      <span class=\"attr\">routes:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">to:</span> <span class=\"string\">default</span></span><br><span class=\"line\">          <span class=\"attr\">via:</span> <span class=\"number\">192.168</span><span class=\"number\">.110</span><span class=\"number\">.1</span></span><br><span class=\"line\">          <span class=\"attr\">metric:</span> <span class=\"number\">100</span></span><br><span class=\"line\">          <span class=\"attr\">on-link:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"attr\">nameservers:</span></span><br><span class=\"line\">        <span class=\"attr\">addresses:</span></span><br><span class=\"line\">          <span class=\"bullet\">-</span> <span class=\"number\">223.6</span><span class=\"number\">.6</span><span class=\"number\">.6</span></span><br><span class=\"line\">      <span class=\"attr\">interfaces:</span></span><br><span class=\"line\">          <span class=\"bullet\">-</span> <span class=\"string\">wlp9s0</span></span><br><span class=\"line\">      <span class=\"attr\">parameters:</span></span><br><span class=\"line\">        <span class=\"attr\">stp:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">        <span class=\"attr\">forward-delay:</span> <span class=\"number\">4</span></span><br></pre></td></tr></table></figure>\n\n\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">wang@ubuntu:~/Desktop$ sudo screenfetch</span><br><span class=\"line\">                          ./+o+-       root@ubuntu</span><br><span class=\"line\">                  yyyyy- -yyyyyy+      OS: Ubuntu 22.04 jammy</span><br><span class=\"line\">               ://+//////-yyyyyyo      Kernel: x86_64 Linux 5.19.0-38-generic</span><br><span class=\"line\">           .++ .:/++++++/-.+sss/`      Uptime: 2d 2h 14m</span><br><span class=\"line\">         .:++o:  /++++++++/:--:/-      Packages: 2193</span><br><span class=\"line\">        o:+o+:++.`..```.-/oo+++++/     Shell: sudo</span><br><span class=\"line\">       .:+o:+o/.          `+sssoo+/    Resolution: 1920x1080</span><br><span class=\"line\">  .++/+:+oo+o:`             /sssooo.   WM: Mutter</span><br><span class=\"line\"> /+++//+:`oo+o               /::--:.   WM Theme: Adwaita</span><br><span class=\"line\"> \\+/+o+++`o++o               ++////.   GTK Theme: Yaru [GTK3]</span><br><span class=\"line\">  .++.o+++oo+:`             /dddhhh.   Disk: 31G / 234G (14%)</span><br><span class=\"line\">       .+.o+oo:.          `oddhhhh+    CPU: Intel Core i7-6500U @ 4x 3.1GHz [54.0C]</span><br><span class=\"line\">        \\+.++o+o``-````.:ohdhhhhh+     GPU: Intel Corporation Skylake GT2 [HD Graphics 520] (rev 07)</span><br><span class=\"line\">         `:o+++ `ohhhhhhhhyo++os:      RAM: 2305MiB / 7831MiB</span><br><span class=\"line\">           .o:`.syhhhhhhh/.oo++o`     </span><br><span class=\"line\">               /osyyyyyyo++ooo+++/    </span><br><span class=\"line\">                   ````` +oo+++o\\:    </span><br><span class=\"line\">                          `oo++.      </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt install -y \\</span><br><span class=\"line\">  qemu-kvm \\</span><br><span class=\"line\">\tvirt-manager \\</span><br><span class=\"line\">\tlibvirt-daemon-system \\</span><br><span class=\"line\">\tvirtinst \\</span><br><span class=\"line\">\tlibvirt-clients \\</span><br><span class=\"line\">\tbridge-utils </span><br></pre></td></tr></table></figure>\n\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>qemu-kvm</td>\n<td></td>\n</tr>\n<tr>\n<td>virt-manager</td>\n<td> libvirt  QT </td>\n</tr>\n<tr>\n<td>libvirt-daemon-system</td>\n<td> libvirt </td>\n</tr>\n<tr>\n<td>virtinst</td>\n<td></td>\n</tr>\n<tr>\n<td>libvirt-clients</td>\n<td>API</td>\n</tr>\n<tr>\n<td>bridge-utils</td>\n<td></td>\n</tr>\n</tbody></table>\n<h2 id=\"-libvirtd\"><a href=\"#-libvirtd\" class=\"headerlink\" title=\" libvirtd\"></a> libvirtd</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo systemctl <span class=\"built_in\">enable</span> libvirtd --now</span><br><span class=\"line\">sudo systemctl status libvirtd</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"-kvmlibvirt\"><a href=\"#-kvmlibvirt\" class=\"headerlink\" title=\" kvmlibvirt\"></a> kvmlibvirt</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo usermod -aG kvm wang</span><br><span class=\"line\">sudo usermod -aG libvirt wang</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"4-1--virt-manager-\"><a href=\"#4-1--virt-manager-\" class=\"headerlink\" title=\"4.1  virt-manager \"></a>4.1  virt-manager </h3><p>, .<br><img src=\"/images/037.kvm.md.02.png\" alt=\"png\"></p>\n<h3 id=\"4-2--virt-install-\"><a href=\"#4-2--virt-install-\" class=\"headerlink\" title=\"4.2  virt-install \"></a>4.2  virt-install </h3><p>virt-install , <a href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/virtualization_deployment_and_administration_guide/sect-guest_virtual_machine_installation_overview-creating_guests_with_virt_install\"></a>.<br>:</p>\n<ol>\n<li><strong>iso&#x2F;image</strong></li>\n<li><strong></strong></li>\n<li><strong></strong></li>\n<li><strong>PXE</strong> </li>\n<li><strong>Kickstart</strong></li>\n</ol>\n<p>iso</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo virt-install \\ </span><br><span class=\"line\">  --name vhost1 \\ </span><br><span class=\"line\">  --memory 2048 \\ </span><br><span class=\"line\">  --vcpus 2 \\ </span><br><span class=\"line\">  --disk size=8 \\ </span><br><span class=\"line\">  --cdrom /path/to/centos.iso \\ </span><br><span class=\"line\">  --os-variant centos7 </span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/037.kvm.md.04.png\" alt=\"png\"></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"5-1-\"><a href=\"#5-1-\" class=\"headerlink\" title=\"5.1 \"></a>5.1 </h3><p><strong>may not be accessible by the hypervisor. You will need to grant the libvirt-qemu user</strong><br><img src=\"/images/037.kvm.md.03.png\" alt=\"png\"></p>\n<p>: </p>\n<ol>\n<li>kvmlibvirt</li>\n<li>.</li>\n</ol>\n<h2 id=\"--vhost\"><a href=\"#--vhost\" class=\"headerlink\" title=\" (vhost)\"></a> (vhost)</h2><p><mark class=\"label success\"></mark>, .<br><br><img src=\"/images/037.kvm.md.01.png\" alt=\"png\"></p>\n<p><code>br0</code>  <code>wlp9s0</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#sudo vim /etc/netplan/br.yaml</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">network:</span></span><br><span class=\"line\">  <span class=\"attr\">version:</span> <span class=\"number\">2</span></span><br><span class=\"line\">  <span class=\"attr\">renderer:</span> <span class=\"string\">networkd</span></span><br><span class=\"line\">  <span class=\"attr\">ethernets:</span></span><br><span class=\"line\">    <span class=\"attr\">wlp9s0:</span></span><br><span class=\"line\">      <span class=\"attr\">dhcp4:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">dhcp6:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"attr\">bridges:</span></span><br><span class=\"line\">    <span class=\"attr\">br0:</span></span><br><span class=\"line\">      <span class=\"attr\">macaddress:</span> <span class=\"string\">aa:bb:cc:11:22:33</span></span><br><span class=\"line\">      <span class=\"attr\">dhcp4:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">dhcp6:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">addresses:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"number\">192.168</span><span class=\"number\">.110</span><span class=\"number\">.157</span><span class=\"string\">/24</span></span><br><span class=\"line\">      <span class=\"attr\">routes:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">to:</span> <span class=\"string\">default</span></span><br><span class=\"line\">          <span class=\"attr\">via:</span> <span class=\"number\">192.168</span><span class=\"number\">.110</span><span class=\"number\">.1</span></span><br><span class=\"line\">          <span class=\"attr\">metric:</span> <span class=\"number\">100</span></span><br><span class=\"line\">          <span class=\"attr\">on-link:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"attr\">nameservers:</span></span><br><span class=\"line\">        <span class=\"attr\">addresses:</span></span><br><span class=\"line\">          <span class=\"bullet\">-</span> <span class=\"number\">223.6</span><span class=\"number\">.6</span><span class=\"number\">.6</span></span><br><span class=\"line\">      <span class=\"attr\">interfaces:</span></span><br><span class=\"line\">          <span class=\"bullet\">-</span> <span class=\"string\">wlp9s0</span></span><br><span class=\"line\">      <span class=\"attr\">parameters:</span></span><br><span class=\"line\">        <span class=\"attr\">stp:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">        <span class=\"attr\">forward-delay:</span> <span class=\"number\">4</span></span><br></pre></td></tr></table></figure>\n\n\n"},{"title":"Ubuntu","date":"2023-03-30T02:50:00.000Z","sitemap":true,"_content":"\n ```Ubuntu 20.04```  ```netplan``` \n\n**static**:\n\n``` yaml\nnetwork:\n  renderer: networkd\n  ethernets:\n    enp1s0:\n      addresses:\n        - 192.168.1.10/24\n      nameservers:\n        addresses: [192.168.1.1]\n      routes:\n        - to: default\n          via: 192.168.1.1\n  version: 2\n```\n\n**DHCP**: \n\n``` yaml\nnetwork:\n  ethernets:\n    enp1s0:\n      dhcp4: true\n      nameservers:\n        addresses: [223.6.6.6,223.5.5.5]\n  version: 2\n```\n\n**bridge**: \n\n``` yaml\nnetwork:\n  version: 2\n  renderer: networkd\n  ethernets:\n    enp1s0:\n      dhcp4: false\n      dhcp6: false\n  bridges:\n    br0:\n      macaddress: aa:bb:cc:11:22:33\n      dhcp4: false\n      dhcp6: false\n      addresses:\n        - 192.168.110.161/24\n      routes:\n        - to: default\n          via: 192.168.110.1\n          metric: 100\n          on-link: true\n      nameservers:\n        addresses:\n          - 223.6.6.6\n      interfaces:\n          - enp1s0\n      parameters:\n        stp: true\n        forward-delay: 4\n```\n\n\n\n","source":"_posts/038.ubuntu_network_config.md","raw":"---\ntitle: Ubuntu\ndate: 2023-3-30 10:50:00\nsitemap: true\ncategories: \n- [Linux]\n- [Network]\ntags: \n- Ubuntu\n- network\n---\n\n ```Ubuntu 20.04```  ```netplan``` \n\n**static**:\n\n``` yaml\nnetwork:\n  renderer: networkd\n  ethernets:\n    enp1s0:\n      addresses:\n        - 192.168.1.10/24\n      nameservers:\n        addresses: [192.168.1.1]\n      routes:\n        - to: default\n          via: 192.168.1.1\n  version: 2\n```\n\n**DHCP**: \n\n``` yaml\nnetwork:\n  ethernets:\n    enp1s0:\n      dhcp4: true\n      nameservers:\n        addresses: [223.6.6.6,223.5.5.5]\n  version: 2\n```\n\n**bridge**: \n\n``` yaml\nnetwork:\n  version: 2\n  renderer: networkd\n  ethernets:\n    enp1s0:\n      dhcp4: false\n      dhcp6: false\n  bridges:\n    br0:\n      macaddress: aa:bb:cc:11:22:33\n      dhcp4: false\n      dhcp6: false\n      addresses:\n        - 192.168.110.161/24\n      routes:\n        - to: default\n          via: 192.168.110.1\n          metric: 100\n          on-link: true\n      nameservers:\n        addresses:\n          - 223.6.6.6\n      interfaces:\n          - enp1s0\n      parameters:\n        stp: true\n        forward-delay: 4\n```\n\n\n\n","slug":"038.ubuntu_network_config","published":1,"updated":"2023-04-14T09:42:53.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbfm003oyknra9u56yo8","content":"<p> <code>Ubuntu 20.04</code>  <code>netplan</code> </p>\n<p><strong>static</strong>:</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">network:</span></span><br><span class=\"line\">  <span class=\"attr\">renderer:</span> <span class=\"string\">networkd</span></span><br><span class=\"line\">  <span class=\"attr\">ethernets:</span></span><br><span class=\"line\">    <span class=\"attr\">enp1s0:</span></span><br><span class=\"line\">      <span class=\"attr\">addresses:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.10</span><span class=\"string\">/24</span></span><br><span class=\"line\">      <span class=\"attr\">nameservers:</span></span><br><span class=\"line\">        <span class=\"attr\">addresses:</span> [<span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.1</span>]</span><br><span class=\"line\">      <span class=\"attr\">routes:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">to:</span> <span class=\"string\">default</span></span><br><span class=\"line\">          <span class=\"attr\">via:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.1</span></span><br><span class=\"line\">  <span class=\"attr\">version:</span> <span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>DHCP</strong>: </p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">network:</span></span><br><span class=\"line\">  <span class=\"attr\">ethernets:</span></span><br><span class=\"line\">    <span class=\"attr\">enp1s0:</span></span><br><span class=\"line\">      <span class=\"attr\">dhcp4:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"attr\">nameservers:</span></span><br><span class=\"line\">        <span class=\"attr\">addresses:</span> [<span class=\"number\">223.6</span><span class=\"number\">.6</span><span class=\"number\">.6</span>,<span class=\"number\">223.5</span><span class=\"number\">.5</span><span class=\"number\">.5</span>]</span><br><span class=\"line\">  <span class=\"attr\">version:</span> <span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>bridge</strong>: </p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">network:</span></span><br><span class=\"line\">  <span class=\"attr\">version:</span> <span class=\"number\">2</span></span><br><span class=\"line\">  <span class=\"attr\">renderer:</span> <span class=\"string\">networkd</span></span><br><span class=\"line\">  <span class=\"attr\">ethernets:</span></span><br><span class=\"line\">    <span class=\"attr\">enp1s0:</span></span><br><span class=\"line\">      <span class=\"attr\">dhcp4:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">dhcp6:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"attr\">bridges:</span></span><br><span class=\"line\">    <span class=\"attr\">br0:</span></span><br><span class=\"line\">      <span class=\"attr\">macaddress:</span> <span class=\"string\">aa:bb:cc:11:22:33</span></span><br><span class=\"line\">      <span class=\"attr\">dhcp4:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">dhcp6:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">addresses:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"number\">192.168</span><span class=\"number\">.110</span><span class=\"number\">.161</span><span class=\"string\">/24</span></span><br><span class=\"line\">      <span class=\"attr\">routes:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">to:</span> <span class=\"string\">default</span></span><br><span class=\"line\">          <span class=\"attr\">via:</span> <span class=\"number\">192.168</span><span class=\"number\">.110</span><span class=\"number\">.1</span></span><br><span class=\"line\">          <span class=\"attr\">metric:</span> <span class=\"number\">100</span></span><br><span class=\"line\">          <span class=\"attr\">on-link:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"attr\">nameservers:</span></span><br><span class=\"line\">        <span class=\"attr\">addresses:</span></span><br><span class=\"line\">          <span class=\"bullet\">-</span> <span class=\"number\">223.6</span><span class=\"number\">.6</span><span class=\"number\">.6</span></span><br><span class=\"line\">      <span class=\"attr\">interfaces:</span></span><br><span class=\"line\">          <span class=\"bullet\">-</span> <span class=\"string\">enp1s0</span></span><br><span class=\"line\">      <span class=\"attr\">parameters:</span></span><br><span class=\"line\">        <span class=\"attr\">stp:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">        <span class=\"attr\">forward-delay:</span> <span class=\"number\">4</span></span><br></pre></td></tr></table></figure>\n\n\n\n","site":{"data":{}},"excerpt":"","more":"<p> <code>Ubuntu 20.04</code>  <code>netplan</code> </p>\n<p><strong>static</strong>:</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">network:</span></span><br><span class=\"line\">  <span class=\"attr\">renderer:</span> <span class=\"string\">networkd</span></span><br><span class=\"line\">  <span class=\"attr\">ethernets:</span></span><br><span class=\"line\">    <span class=\"attr\">enp1s0:</span></span><br><span class=\"line\">      <span class=\"attr\">addresses:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.10</span><span class=\"string\">/24</span></span><br><span class=\"line\">      <span class=\"attr\">nameservers:</span></span><br><span class=\"line\">        <span class=\"attr\">addresses:</span> [<span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.1</span>]</span><br><span class=\"line\">      <span class=\"attr\">routes:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">to:</span> <span class=\"string\">default</span></span><br><span class=\"line\">          <span class=\"attr\">via:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.1</span></span><br><span class=\"line\">  <span class=\"attr\">version:</span> <span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>DHCP</strong>: </p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">network:</span></span><br><span class=\"line\">  <span class=\"attr\">ethernets:</span></span><br><span class=\"line\">    <span class=\"attr\">enp1s0:</span></span><br><span class=\"line\">      <span class=\"attr\">dhcp4:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"attr\">nameservers:</span></span><br><span class=\"line\">        <span class=\"attr\">addresses:</span> [<span class=\"number\">223.6</span><span class=\"number\">.6</span><span class=\"number\">.6</span>,<span class=\"number\">223.5</span><span class=\"number\">.5</span><span class=\"number\">.5</span>]</span><br><span class=\"line\">  <span class=\"attr\">version:</span> <span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>bridge</strong>: </p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">network:</span></span><br><span class=\"line\">  <span class=\"attr\">version:</span> <span class=\"number\">2</span></span><br><span class=\"line\">  <span class=\"attr\">renderer:</span> <span class=\"string\">networkd</span></span><br><span class=\"line\">  <span class=\"attr\">ethernets:</span></span><br><span class=\"line\">    <span class=\"attr\">enp1s0:</span></span><br><span class=\"line\">      <span class=\"attr\">dhcp4:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">dhcp6:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"attr\">bridges:</span></span><br><span class=\"line\">    <span class=\"attr\">br0:</span></span><br><span class=\"line\">      <span class=\"attr\">macaddress:</span> <span class=\"string\">aa:bb:cc:11:22:33</span></span><br><span class=\"line\">      <span class=\"attr\">dhcp4:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">dhcp6:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">addresses:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"number\">192.168</span><span class=\"number\">.110</span><span class=\"number\">.161</span><span class=\"string\">/24</span></span><br><span class=\"line\">      <span class=\"attr\">routes:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">to:</span> <span class=\"string\">default</span></span><br><span class=\"line\">          <span class=\"attr\">via:</span> <span class=\"number\">192.168</span><span class=\"number\">.110</span><span class=\"number\">.1</span></span><br><span class=\"line\">          <span class=\"attr\">metric:</span> <span class=\"number\">100</span></span><br><span class=\"line\">          <span class=\"attr\">on-link:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"attr\">nameservers:</span></span><br><span class=\"line\">        <span class=\"attr\">addresses:</span></span><br><span class=\"line\">          <span class=\"bullet\">-</span> <span class=\"number\">223.6</span><span class=\"number\">.6</span><span class=\"number\">.6</span></span><br><span class=\"line\">      <span class=\"attr\">interfaces:</span></span><br><span class=\"line\">          <span class=\"bullet\">-</span> <span class=\"string\">enp1s0</span></span><br><span class=\"line\">      <span class=\"attr\">parameters:</span></span><br><span class=\"line\">        <span class=\"attr\">stp:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">        <span class=\"attr\">forward-delay:</span> <span class=\"number\">4</span></span><br></pre></td></tr></table></figure>\n\n\n\n"},{"title":"OpenWrtpasswall","date":"2023-04-23T06:50:13.000Z","_content":"\n##  \n|\t|OpenWrt|\n|---|---|\n|\t|Raspberry Pi 3 Model B Rev 1.2|\n|\t|ARMv8 Processor rev 4|\n|\t|bcm27xx/bcm2710|\n\n##  \n``` opkg install openssh-sftp-server ```\n\n##  \n\n 3B  ```aarch64_cortex-a53.zip```\nhttps://github.com/xiaorouji/openwrt-passwall/releases\n\n##  \n\n<img src=\"/images/040.openwrt_install_passwall.md.01.png\" width=90% height=90% />\n\n##  \n\n### 5.1 \n``` opkg install *.ipk```\n<img src=\"/images/040.openwrt_install_passwall.md.02.png\" width=90% height=90% />\n\n### 5.2 passwall-luci\n``` opkg install luci-app-passwall_4.66-4_all.ipk```\n``` opkg install luci-i18n-passwall-zh-cn_4.66-4_all.ipk```\n\n##  OpenWrt\n<img src=\"/images/040.openwrt_install_passwall.md.03.png\" width=90% height=90% />\n<img src=\"/images/040.openwrt_install_passwall.md.04.png\" width=90% height=90% />","source":"_posts/040.openwrt_install_passwall.md","raw":"---\ntitle: OpenWrtpasswall\ndate: 2023-4-23 14:50:13\ncategories: \n- [OpenWrt]\ntags: \n- OpenWrt\n- passwall\n---\n\n##  \n|\t|OpenWrt|\n|---|---|\n|\t|Raspberry Pi 3 Model B Rev 1.2|\n|\t|ARMv8 Processor rev 4|\n|\t|bcm27xx/bcm2710|\n\n##  \n``` opkg install openssh-sftp-server ```\n\n##  \n\n 3B  ```aarch64_cortex-a53.zip```\nhttps://github.com/xiaorouji/openwrt-passwall/releases\n\n##  \n\n<img src=\"/images/040.openwrt_install_passwall.md.01.png\" width=90% height=90% />\n\n##  \n\n### 5.1 \n``` opkg install *.ipk```\n<img src=\"/images/040.openwrt_install_passwall.md.02.png\" width=90% height=90% />\n\n### 5.2 passwall-luci\n``` opkg install luci-app-passwall_4.66-4_all.ipk```\n``` opkg install luci-i18n-passwall-zh-cn_4.66-4_all.ipk```\n\n##  OpenWrt\n<img src=\"/images/040.openwrt_install_passwall.md.03.png\" width=90% height=90% />\n<img src=\"/images/040.openwrt_install_passwall.md.04.png\" width=90% height=90% />","slug":"040.openwrt_install_passwall","published":1,"updated":"2023-06-05T07:53:40.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbfp003syknrayts8oe7","content":"<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><table>\n<thead>\n<tr>\n<th></th>\n<th>OpenWrt</th>\n</tr>\n</thead>\n<tbody><tr>\n<td></td>\n<td>Raspberry Pi 3 Model B Rev 1.2</td>\n</tr>\n<tr>\n<td></td>\n<td>ARMv8 Processor rev 4</td>\n</tr>\n<tr>\n<td></td>\n<td>bcm27xx&#x2F;bcm2710</td>\n</tr>\n</tbody></table>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><code>opkg install openssh-sftp-server</code></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br> 3B  <code>aarch64_cortex-a53.zip</code><br><a href=\"https://github.com/xiaorouji/openwrt-passwall/releases\">https://github.com/xiaorouji/openwrt-passwall/releases</a></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><img src=\"/images/040.openwrt_install_passwall.md.01.png\" width=90% height=90% />\n\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"5-1-\"><a href=\"#5-1-\" class=\"headerlink\" title=\"5.1 \"></a>5.1 </h3><p><code> opkg install *.ipk</code><br><img src=\"/images/040.openwrt_install_passwall.md.02.png\" width=90% height=90% /></p>\n<h3 id=\"5-2-passwall-luci\"><a href=\"#5-2-passwall-luci\" class=\"headerlink\" title=\"5.2 passwall-luci\"></a>5.2 passwall-luci</h3><p><code> opkg install luci-app-passwall_4.66-4_all.ipk</code><br><code> opkg install luci-i18n-passwall-zh-cn_4.66-4_all.ipk</code></p>\n<h2 id=\"-OpenWrt\"><a href=\"#-OpenWrt\" class=\"headerlink\" title=\" OpenWrt\"></a> OpenWrt</h2><img src=\"/images/040.openwrt_install_passwall.md.03.png\" width=90% height=90% />\n<img src=\"/images/040.openwrt_install_passwall.md.04.png\" width=90% height=90% />","site":{"data":{}},"excerpt":"","more":"<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><table>\n<thead>\n<tr>\n<th></th>\n<th>OpenWrt</th>\n</tr>\n</thead>\n<tbody><tr>\n<td></td>\n<td>Raspberry Pi 3 Model B Rev 1.2</td>\n</tr>\n<tr>\n<td></td>\n<td>ARMv8 Processor rev 4</td>\n</tr>\n<tr>\n<td></td>\n<td>bcm27xx&#x2F;bcm2710</td>\n</tr>\n</tbody></table>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><code>opkg install openssh-sftp-server</code></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><br> 3B  <code>aarch64_cortex-a53.zip</code><br><a href=\"https://github.com/xiaorouji/openwrt-passwall/releases\">https://github.com/xiaorouji/openwrt-passwall/releases</a></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><img src=\"/images/040.openwrt_install_passwall.md.01.png\" width=90% height=90% />\n\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"5-1-\"><a href=\"#5-1-\" class=\"headerlink\" title=\"5.1 \"></a>5.1 </h3><p><code> opkg install *.ipk</code><br><img src=\"/images/040.openwrt_install_passwall.md.02.png\" width=90% height=90% /></p>\n<h3 id=\"5-2-passwall-luci\"><a href=\"#5-2-passwall-luci\" class=\"headerlink\" title=\"5.2 passwall-luci\"></a>5.2 passwall-luci</h3><p><code> opkg install luci-app-passwall_4.66-4_all.ipk</code><br><code> opkg install luci-i18n-passwall-zh-cn_4.66-4_all.ipk</code></p>\n<h2 id=\"-OpenWrt\"><a href=\"#-OpenWrt\" class=\"headerlink\" title=\" OpenWrt\"></a> OpenWrt</h2><img src=\"/images/040.openwrt_install_passwall.md.03.png\" width=90% height=90% />\n<img src=\"/images/040.openwrt_install_passwall.md.04.png\" width=90% height=90% />"},{"title":"OpenWrt","date":"2023-04-23T06:50:13.000Z","_content":"\n\nRaspberry Pi 3 model B V1.2 \nOpenWrt 22.03.5\n\nopkg install openssh-sftp-server","source":"_posts/040.openwrt_sftp.md","raw":"---\ntitle: OpenWrt\ndate: 2023-4-23 14:50:13\ncategories: \n- [OpenWrt]\ntags: \n- OpenWrt\n---\n\n\nRaspberry Pi 3 model B V1.2 \nOpenWrt 22.03.5\n\nopkg install openssh-sftp-server","slug":"040.openwrt_sftp","published":1,"updated":"2023-05-10T02:19:25.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbfp003uyknraubl87gm","content":"<p>Raspberry Pi 3 model B V1.2<br>OpenWrt 22.03.5</p>\n<p>opkg install openssh-sftp-server</p>\n","site":{"data":{}},"excerpt":"","more":"<p>Raspberry Pi 3 model B V1.2<br>OpenWrt 22.03.5</p>\n<p>opkg install openssh-sftp-server</p>\n"},{"title":"OpenWrtfrpc","date":"2023-06-02T06:50:13.000Z","_content":"\n##  \n\n -->  --> \n\n frpc \n\n##  luci\n``` \n/usr/lib/lua/luci/model/cbi/frp/basic.lua:2: module 'luci.model.ipkg' not found:\n\tno field package.preload['luci.model.ipkg']\n\tno file './luci/model/ipkg.lua'\n\tno file '/usr/share/lua/luci/model/ipkg.lua'\n\tno file '/usr/share/lua/luci/model/ipkg/init.lua'\n\tno file '/usr/lib/lua/luci/model/ipkg.lua'\n\tno file '/usr/lib/lua/luci/model/ipkg/init.lua'\n\tno file './luci/model/ipkg.so'\n\tno file '/usr/lib/lua/luci/model/ipkg.so'\n\tno file '/usr/lib/lua/loadall.so'\n\tno file './luci.so'\n\tno file '/usr/lib/lua/luci.so'\n\tno file '/usr/lib/lua/loadall.so'\nstack traceback:\n\t[C]: in function 'require'\n\t/usr/lib/lua/luci/model/cbi/frp/basic.lua:2: in function 'func'\n\t/usr/lib/lua/luci/cbi.lua:66: in function 'load'\n\t/usr/lib/lua/luci/dispatcher.lua:1385: in function '_cbi'\n\t/usr/lib/lua/luci/dispatcher.lua:1056: in function 'dispatch'\n\t/usr/lib/lua/luci/dispatcher.lua:483: in function </usr/lib/lua/luci/dispatcher.lua:482>\n```\n\n\n##  \n\n ``` /usr/lib/lua/luci/model/cbi/frp/basic.lua ```\n\n  ``` require(\"luci.model.ipkg\") ```\n\n<img src=\"/images/041.openwrt_install_frpc.md.01.png\" width=100% height=100% />\n<img src=\"/images/041.openwrt_install_frpc.md.02.png\" width=100% height=100% />\n\n\n","source":"_posts/041.openwrt_install_frpc.md","raw":"---\ntitle: OpenWrtfrpc\ndate: 2023-6-2 14:50:13\ncategories: \n- [OpenWrt]\ntags: \n- OpenWrt\n- frpc\n---\n\n##  \n\n -->  --> \n\n frpc \n\n##  luci\n``` \n/usr/lib/lua/luci/model/cbi/frp/basic.lua:2: module 'luci.model.ipkg' not found:\n\tno field package.preload['luci.model.ipkg']\n\tno file './luci/model/ipkg.lua'\n\tno file '/usr/share/lua/luci/model/ipkg.lua'\n\tno file '/usr/share/lua/luci/model/ipkg/init.lua'\n\tno file '/usr/lib/lua/luci/model/ipkg.lua'\n\tno file '/usr/lib/lua/luci/model/ipkg/init.lua'\n\tno file './luci/model/ipkg.so'\n\tno file '/usr/lib/lua/luci/model/ipkg.so'\n\tno file '/usr/lib/lua/loadall.so'\n\tno file './luci.so'\n\tno file '/usr/lib/lua/luci.so'\n\tno file '/usr/lib/lua/loadall.so'\nstack traceback:\n\t[C]: in function 'require'\n\t/usr/lib/lua/luci/model/cbi/frp/basic.lua:2: in function 'func'\n\t/usr/lib/lua/luci/cbi.lua:66: in function 'load'\n\t/usr/lib/lua/luci/dispatcher.lua:1385: in function '_cbi'\n\t/usr/lib/lua/luci/dispatcher.lua:1056: in function 'dispatch'\n\t/usr/lib/lua/luci/dispatcher.lua:483: in function </usr/lib/lua/luci/dispatcher.lua:482>\n```\n\n\n##  \n\n ``` /usr/lib/lua/luci/model/cbi/frp/basic.lua ```\n\n  ``` require(\"luci.model.ipkg\") ```\n\n<img src=\"/images/041.openwrt_install_frpc.md.01.png\" width=100% height=100% />\n<img src=\"/images/041.openwrt_install_frpc.md.02.png\" width=100% height=100% />\n\n\n","slug":"041.openwrt_install_frpc","published":1,"updated":"2023-06-02T08:39:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbfr003xyknr91avfmys","content":"<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p> &gt;  &gt; </p>\n<p> frpc </p>\n<h2 id=\"-luci\"><a href=\"#-luci\" class=\"headerlink\" title=\" luci\"></a> luci</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">/usr/lib/lua/luci/model/cbi/frp/basic.lua:2: module &#x27;luci.model.ipkg&#x27; not found:</span><br><span class=\"line\">\tno field package.preload[&#x27;luci.model.ipkg&#x27;]</span><br><span class=\"line\">\tno file &#x27;./luci/model/ipkg.lua&#x27;</span><br><span class=\"line\">\tno file &#x27;/usr/share/lua/luci/model/ipkg.lua&#x27;</span><br><span class=\"line\">\tno file &#x27;/usr/share/lua/luci/model/ipkg/init.lua&#x27;</span><br><span class=\"line\">\tno file &#x27;/usr/lib/lua/luci/model/ipkg.lua&#x27;</span><br><span class=\"line\">\tno file &#x27;/usr/lib/lua/luci/model/ipkg/init.lua&#x27;</span><br><span class=\"line\">\tno file &#x27;./luci/model/ipkg.so&#x27;</span><br><span class=\"line\">\tno file &#x27;/usr/lib/lua/luci/model/ipkg.so&#x27;</span><br><span class=\"line\">\tno file &#x27;/usr/lib/lua/loadall.so&#x27;</span><br><span class=\"line\">\tno file &#x27;./luci.so&#x27;</span><br><span class=\"line\">\tno file &#x27;/usr/lib/lua/luci.so&#x27;</span><br><span class=\"line\">\tno file &#x27;/usr/lib/lua/loadall.so&#x27;</span><br><span class=\"line\">stack traceback:</span><br><span class=\"line\">\t[C]: in function &#x27;require&#x27;</span><br><span class=\"line\">\t/usr/lib/lua/luci/model/cbi/frp/basic.lua:2: in function &#x27;func&#x27;</span><br><span class=\"line\">\t/usr/lib/lua/luci/cbi.lua:66: in function &#x27;load&#x27;</span><br><span class=\"line\">\t/usr/lib/lua/luci/dispatcher.lua:1385: in function &#x27;_cbi&#x27;</span><br><span class=\"line\">\t/usr/lib/lua/luci/dispatcher.lua:1056: in function &#x27;dispatch&#x27;</span><br><span class=\"line\">\t/usr/lib/lua/luci/dispatcher.lua:483: in function &lt;/usr/lib/lua/luci/dispatcher.lua:482&gt;</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p> <code>/usr/lib/lua/luci/model/cbi/frp/basic.lua</code></p>\n<p>  <code>require(&quot;luci.model.ipkg&quot;)</code></p>\n<img src=\"/images/041.openwrt_install_frpc.md.01.png\" width=100% height=100% />\n<img src=\"/images/041.openwrt_install_frpc.md.02.png\" width=100% height=100% />\n\n\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p> &gt;  &gt; </p>\n<p> frpc </p>\n<h2 id=\"-luci\"><a href=\"#-luci\" class=\"headerlink\" title=\" luci\"></a> luci</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">/usr/lib/lua/luci/model/cbi/frp/basic.lua:2: module &#x27;luci.model.ipkg&#x27; not found:</span><br><span class=\"line\">\tno field package.preload[&#x27;luci.model.ipkg&#x27;]</span><br><span class=\"line\">\tno file &#x27;./luci/model/ipkg.lua&#x27;</span><br><span class=\"line\">\tno file &#x27;/usr/share/lua/luci/model/ipkg.lua&#x27;</span><br><span class=\"line\">\tno file &#x27;/usr/share/lua/luci/model/ipkg/init.lua&#x27;</span><br><span class=\"line\">\tno file &#x27;/usr/lib/lua/luci/model/ipkg.lua&#x27;</span><br><span class=\"line\">\tno file &#x27;/usr/lib/lua/luci/model/ipkg/init.lua&#x27;</span><br><span class=\"line\">\tno file &#x27;./luci/model/ipkg.so&#x27;</span><br><span class=\"line\">\tno file &#x27;/usr/lib/lua/luci/model/ipkg.so&#x27;</span><br><span class=\"line\">\tno file &#x27;/usr/lib/lua/loadall.so&#x27;</span><br><span class=\"line\">\tno file &#x27;./luci.so&#x27;</span><br><span class=\"line\">\tno file &#x27;/usr/lib/lua/luci.so&#x27;</span><br><span class=\"line\">\tno file &#x27;/usr/lib/lua/loadall.so&#x27;</span><br><span class=\"line\">stack traceback:</span><br><span class=\"line\">\t[C]: in function &#x27;require&#x27;</span><br><span class=\"line\">\t/usr/lib/lua/luci/model/cbi/frp/basic.lua:2: in function &#x27;func&#x27;</span><br><span class=\"line\">\t/usr/lib/lua/luci/cbi.lua:66: in function &#x27;load&#x27;</span><br><span class=\"line\">\t/usr/lib/lua/luci/dispatcher.lua:1385: in function &#x27;_cbi&#x27;</span><br><span class=\"line\">\t/usr/lib/lua/luci/dispatcher.lua:1056: in function &#x27;dispatch&#x27;</span><br><span class=\"line\">\t/usr/lib/lua/luci/dispatcher.lua:483: in function &lt;/usr/lib/lua/luci/dispatcher.lua:482&gt;</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p> <code>/usr/lib/lua/luci/model/cbi/frp/basic.lua</code></p>\n<p>  <code>require(&quot;luci.model.ipkg&quot;)</code></p>\n<img src=\"/images/041.openwrt_install_frpc.md.01.png\" width=100% height=100% />\n<img src=\"/images/041.openwrt_install_frpc.md.02.png\" width=100% height=100% />\n\n\n"},{"title":"Greenbone Community ","date":"2023-06-06T06:50:13.000Z","_content":"\n## Hardware Requirements\nMinimal:\n- CPU Cores: 2\n- andom-Access Memory: 4GB\n- Hard Disk: 20GB free\n\nRecommended:\n\n- CPU Cores: 4\n- Random-Access Memory: 8GB\n- Hard Disk: 60GB free\n\n##  Prerequisites\n\n### install curl\n\n{% tabs tab,1 %} \n<!-- tab CentOS-->\n``` yum install curl -y ```\n<!-- endtab -->\n\n<!-- tab Ubuntu/Debian-->\n``` sudo apt install curl -y ```\n<!-- endtab -->\n{% endtabs %}\n\n\n### install docker\n\n{% tabs tt %} \n<!-- tab CentOS-->\n``` yum install -y yum-utils ``` \n``` yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo ```\n``` yum install docker-ce docker-ce-cli containerd.io ```\n<!-- endtab -->\n\n<!-- tab Ubuntu/Debian-->\n\n``` sudo apt-get install ca-certificates curl gnupg ```\n``` sudo install -m 0755 -d /etc/apt/keyrings ```\n``` curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg ```\n``` sudo chmod a+r /etc/apt/keyrings/docker.gpg ```\n``` bash \necho \\\n  \"deb [arch=\"$(dpkg --print-architecture)\" signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\\n  \"$(. /etc/os-release && echo \"$VERSION_CODENAME\")\" stable\" | \\\n  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\n```\n``` sudo apt install docker.io```\n<!-- endtab -->\n{% endtabs %}\n\n### install docker-compose\n\n{% tabs ttt %} \n<!-- tab CentOS-->\n``` yum install python3-pip -y ```\n``` python3 -m pip install --user docker-compose ```\n<!-- endtab -->\n\n<!-- tab Ubuntu/Debian-->\n``` sudo apt install python3 python3-pip -y ```\n``` python3 -m pip install --user docker-compose ```\n<!-- endtab -->\n{% endtabs %}\n\n\n##  SET UP\n\n### Docker Compose File\n\n``` yaml\n\nservices:\n  vulnerability-tests:\n    image: greenbone/vulnerability-tests\n    environment:\n      STORAGE_PATH: /var/lib/openvas/22.04/vt-data/nasl\n    volumes:\n      - vt_data_vol:/mnt\n\n  notus-data:\n    image: greenbone/notus-data\n    volumes:\n      - notus_data_vol:/mnt\n\n  scap-data:\n    image: greenbone/scap-data\n    volumes:\n      - scap_data_vol:/mnt\n\n  cert-bund-data:\n    image: greenbone/cert-bund-data\n    volumes:\n      - cert_data_vol:/mnt\n\n  dfn-cert-data:\n    image: greenbone/dfn-cert-data\n    volumes:\n      - cert_data_vol:/mnt\n    depends_on:\n      - cert-bund-data\n\n  data-objects:\n    image: greenbone/data-objects\n    volumes:\n      - data_objects_vol:/mnt\n\n  report-formats:\n    image: greenbone/report-formats\n    volumes:\n      - data_objects_vol:/mnt\n    depends_on:\n      - data-objects\n\n  gpg-data:\n    image: greenbone/gpg-data\n    volumes:\n      - gpg_data_vol:/mnt\n\n  redis-server:\n    image: greenbone/redis-server\n    restart: on-failure\n    volumes:\n      - redis_socket_vol:/run/redis/\n\n  pg-gvm:\n    image: greenbone/pg-gvm:stable\n    restart: on-failure\n    volumes:\n      - psql_data_vol:/var/lib/postgresql\n      - psql_socket_vol:/var/run/postgresql\n\n  gvmd:\n    image: greenbone/gvmd:stable\n    restart: on-failure\n    volumes:\n      - gvmd_data_vol:/var/lib/gvm\n      - scap_data_vol:/var/lib/gvm/scap-data/\n      - cert_data_vol:/var/lib/gvm/cert-data\n      - data_objects_vol:/var/lib/gvm/data-objects/gvmd\n      - vt_data_vol:/var/lib/openvas/plugins\n      - psql_data_vol:/var/lib/postgresql\n      - gvmd_socket_vol:/run/gvmd\n      - ospd_openvas_socket_vol:/run/ospd\n      - psql_socket_vol:/var/run/postgresql\n    depends_on:\n      pg-gvm:\n        condition: service_started\n      scap-data:\n        condition: service_completed_successfully\n      cert-bund-data:\n        condition: service_completed_successfully\n      dfn-cert-data:\n        condition: service_completed_successfully\n      data-objects:\n        condition: service_completed_successfully\n      report-formats:\n        condition: service_completed_successfully\n\n  gsa:\n    image: greenbone/gsa:stable\n    restart: on-failure\n    ports:\n      - 9392:80\n    volumes:\n      - gvmd_socket_vol:/run/gvmd\n    depends_on:\n      - gvmd\n\n  ospd-openvas:\n    image: greenbone/ospd-openvas:stable\n    restart: on-failure\n    init: true\n    hostname: ospd-openvas.local\n    cap_add:\n      - NET_ADMIN # for capturing packages in promiscuous mode\n      - NET_RAW # for raw sockets e.g. used for the boreas alive detection\n    security_opt:\n      - seccomp=unconfined\n      - apparmor=unconfined\n    command:\n      [\n        \"ospd-openvas\",\n        \"-f\",\n        \"--config\",\n        \"/etc/gvm/ospd-openvas.conf\",\n        \"--mqtt-broker-address\",\n        \"mqtt-broker\",\n        \"--notus-feed-dir\",\n        \"/var/lib/notus/advisories\",\n        \"-m\",\n        \"666\"\n      ]\n    volumes:\n      - gpg_data_vol:/etc/openvas/gnupg\n      - vt_data_vol:/var/lib/openvas/plugins\n      - notus_data_vol:/var/lib/notus\n      - ospd_openvas_socket_vol:/run/ospd\n      - redis_socket_vol:/run/redis/\n    depends_on:\n      redis-server:\n        condition: service_started\n      gpg-data:\n        condition: service_completed_successfully\n      vulnerability-tests:\n        condition: service_completed_successfully\n\n  mqtt-broker:\n    restart: on-failure\n    image: greenbone/mqtt-broker\n    ports:\n      - 1883:1883\n    networks:\n      default:\n        aliases:\n          - mqtt-broker\n          - broker\n\n  notus-scanner:\n    restart: on-failure\n    image: greenbone/notus-scanner:stable\n    volumes:\n      - notus_data_vol:/var/lib/notus\n      - gpg_data_vol:/etc/openvas/gnupg\n    environment:\n      NOTUS_SCANNER_MQTT_BROKER_ADDRESS: mqtt-broker\n      NOTUS_SCANNER_PRODUCTS_DIRECTORY: /var/lib/notus/products\n    depends_on:\n      - mqtt-broker\n      - gpg-data\n      - vulnerability-tests\n\n  gvm-tools:\n    image: greenbone/gvm-tools\n    volumes:\n      - gvmd_socket_vol:/run/gvmd\n      - ospd_openvas_socket_vol:/run/ospd\n    depends_on:\n      - gvmd\n      - ospd-openvas\n\nvolumes:\n  gpg_data_vol:\n  scap_data_vol:\n  cert_data_vol:\n  data_objects_vol:\n  gvmd_data_vol:\n  psql_data_vol:\n  vt_data_vol:\n  notus_data_vol:\n  psql_socket_vol:\n  gvmd_socket_vol:\n  ospd_openvas_socket_vol:\n  redis_socket_vol:\n```\n\n### Downloading the Greenbone Community Containers\n\n``` docker-compose -f $DOWNLOAD_DIR/docker-compose.yml -p greenbone-community-edition pull ```\n\n### Starting the Greenbone Community Containers\n\n``` docker-compose -f $DOWNLOAD_DIR/docker-compose.yml -p greenbone-community-edition up -d ```\n\n### Show log messages of all services from the running containers\n\n``` docker-compose -f $DOWNLOAD_DIR/docker-compose.yml -p greenbone-community-edition logs -f ```\n","source":"_posts/042.Greenbone_Community_installation.md","raw":"---\ntitle: Greenbone Community \ndate: 2023-6-6 14:50:13\ncategories: \n- [DevOps]\ntags: \n- DevOps\n---\n\n## Hardware Requirements\nMinimal:\n- CPU Cores: 2\n- andom-Access Memory: 4GB\n- Hard Disk: 20GB free\n\nRecommended:\n\n- CPU Cores: 4\n- Random-Access Memory: 8GB\n- Hard Disk: 60GB free\n\n##  Prerequisites\n\n### install curl\n\n{% tabs tab,1 %} \n<!-- tab CentOS-->\n``` yum install curl -y ```\n<!-- endtab -->\n\n<!-- tab Ubuntu/Debian-->\n``` sudo apt install curl -y ```\n<!-- endtab -->\n{% endtabs %}\n\n\n### install docker\n\n{% tabs tt %} \n<!-- tab CentOS-->\n``` yum install -y yum-utils ``` \n``` yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo ```\n``` yum install docker-ce docker-ce-cli containerd.io ```\n<!-- endtab -->\n\n<!-- tab Ubuntu/Debian-->\n\n``` sudo apt-get install ca-certificates curl gnupg ```\n``` sudo install -m 0755 -d /etc/apt/keyrings ```\n``` curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg ```\n``` sudo chmod a+r /etc/apt/keyrings/docker.gpg ```\n``` bash \necho \\\n  \"deb [arch=\"$(dpkg --print-architecture)\" signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\\n  \"$(. /etc/os-release && echo \"$VERSION_CODENAME\")\" stable\" | \\\n  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\n```\n``` sudo apt install docker.io```\n<!-- endtab -->\n{% endtabs %}\n\n### install docker-compose\n\n{% tabs ttt %} \n<!-- tab CentOS-->\n``` yum install python3-pip -y ```\n``` python3 -m pip install --user docker-compose ```\n<!-- endtab -->\n\n<!-- tab Ubuntu/Debian-->\n``` sudo apt install python3 python3-pip -y ```\n``` python3 -m pip install --user docker-compose ```\n<!-- endtab -->\n{% endtabs %}\n\n\n##  SET UP\n\n### Docker Compose File\n\n``` yaml\n\nservices:\n  vulnerability-tests:\n    image: greenbone/vulnerability-tests\n    environment:\n      STORAGE_PATH: /var/lib/openvas/22.04/vt-data/nasl\n    volumes:\n      - vt_data_vol:/mnt\n\n  notus-data:\n    image: greenbone/notus-data\n    volumes:\n      - notus_data_vol:/mnt\n\n  scap-data:\n    image: greenbone/scap-data\n    volumes:\n      - scap_data_vol:/mnt\n\n  cert-bund-data:\n    image: greenbone/cert-bund-data\n    volumes:\n      - cert_data_vol:/mnt\n\n  dfn-cert-data:\n    image: greenbone/dfn-cert-data\n    volumes:\n      - cert_data_vol:/mnt\n    depends_on:\n      - cert-bund-data\n\n  data-objects:\n    image: greenbone/data-objects\n    volumes:\n      - data_objects_vol:/mnt\n\n  report-formats:\n    image: greenbone/report-formats\n    volumes:\n      - data_objects_vol:/mnt\n    depends_on:\n      - data-objects\n\n  gpg-data:\n    image: greenbone/gpg-data\n    volumes:\n      - gpg_data_vol:/mnt\n\n  redis-server:\n    image: greenbone/redis-server\n    restart: on-failure\n    volumes:\n      - redis_socket_vol:/run/redis/\n\n  pg-gvm:\n    image: greenbone/pg-gvm:stable\n    restart: on-failure\n    volumes:\n      - psql_data_vol:/var/lib/postgresql\n      - psql_socket_vol:/var/run/postgresql\n\n  gvmd:\n    image: greenbone/gvmd:stable\n    restart: on-failure\n    volumes:\n      - gvmd_data_vol:/var/lib/gvm\n      - scap_data_vol:/var/lib/gvm/scap-data/\n      - cert_data_vol:/var/lib/gvm/cert-data\n      - data_objects_vol:/var/lib/gvm/data-objects/gvmd\n      - vt_data_vol:/var/lib/openvas/plugins\n      - psql_data_vol:/var/lib/postgresql\n      - gvmd_socket_vol:/run/gvmd\n      - ospd_openvas_socket_vol:/run/ospd\n      - psql_socket_vol:/var/run/postgresql\n    depends_on:\n      pg-gvm:\n        condition: service_started\n      scap-data:\n        condition: service_completed_successfully\n      cert-bund-data:\n        condition: service_completed_successfully\n      dfn-cert-data:\n        condition: service_completed_successfully\n      data-objects:\n        condition: service_completed_successfully\n      report-formats:\n        condition: service_completed_successfully\n\n  gsa:\n    image: greenbone/gsa:stable\n    restart: on-failure\n    ports:\n      - 9392:80\n    volumes:\n      - gvmd_socket_vol:/run/gvmd\n    depends_on:\n      - gvmd\n\n  ospd-openvas:\n    image: greenbone/ospd-openvas:stable\n    restart: on-failure\n    init: true\n    hostname: ospd-openvas.local\n    cap_add:\n      - NET_ADMIN # for capturing packages in promiscuous mode\n      - NET_RAW # for raw sockets e.g. used for the boreas alive detection\n    security_opt:\n      - seccomp=unconfined\n      - apparmor=unconfined\n    command:\n      [\n        \"ospd-openvas\",\n        \"-f\",\n        \"--config\",\n        \"/etc/gvm/ospd-openvas.conf\",\n        \"--mqtt-broker-address\",\n        \"mqtt-broker\",\n        \"--notus-feed-dir\",\n        \"/var/lib/notus/advisories\",\n        \"-m\",\n        \"666\"\n      ]\n    volumes:\n      - gpg_data_vol:/etc/openvas/gnupg\n      - vt_data_vol:/var/lib/openvas/plugins\n      - notus_data_vol:/var/lib/notus\n      - ospd_openvas_socket_vol:/run/ospd\n      - redis_socket_vol:/run/redis/\n    depends_on:\n      redis-server:\n        condition: service_started\n      gpg-data:\n        condition: service_completed_successfully\n      vulnerability-tests:\n        condition: service_completed_successfully\n\n  mqtt-broker:\n    restart: on-failure\n    image: greenbone/mqtt-broker\n    ports:\n      - 1883:1883\n    networks:\n      default:\n        aliases:\n          - mqtt-broker\n          - broker\n\n  notus-scanner:\n    restart: on-failure\n    image: greenbone/notus-scanner:stable\n    volumes:\n      - notus_data_vol:/var/lib/notus\n      - gpg_data_vol:/etc/openvas/gnupg\n    environment:\n      NOTUS_SCANNER_MQTT_BROKER_ADDRESS: mqtt-broker\n      NOTUS_SCANNER_PRODUCTS_DIRECTORY: /var/lib/notus/products\n    depends_on:\n      - mqtt-broker\n      - gpg-data\n      - vulnerability-tests\n\n  gvm-tools:\n    image: greenbone/gvm-tools\n    volumes:\n      - gvmd_socket_vol:/run/gvmd\n      - ospd_openvas_socket_vol:/run/ospd\n    depends_on:\n      - gvmd\n      - ospd-openvas\n\nvolumes:\n  gpg_data_vol:\n  scap_data_vol:\n  cert_data_vol:\n  data_objects_vol:\n  gvmd_data_vol:\n  psql_data_vol:\n  vt_data_vol:\n  notus_data_vol:\n  psql_socket_vol:\n  gvmd_socket_vol:\n  ospd_openvas_socket_vol:\n  redis_socket_vol:\n```\n\n### Downloading the Greenbone Community Containers\n\n``` docker-compose -f $DOWNLOAD_DIR/docker-compose.yml -p greenbone-community-edition pull ```\n\n### Starting the Greenbone Community Containers\n\n``` docker-compose -f $DOWNLOAD_DIR/docker-compose.yml -p greenbone-community-edition up -d ```\n\n### Show log messages of all services from the running containers\n\n``` docker-compose -f $DOWNLOAD_DIR/docker-compose.yml -p greenbone-community-edition logs -f ```\n","slug":"042.Greenbone_Community_installation","published":1,"updated":"2023-06-09T07:38:09.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbfs0040yknrabaf9nnm","content":"<h2 id=\"Hardware-Requirements\"><a href=\"#Hardware-Requirements\" class=\"headerlink\" title=\"Hardware Requirements\"></a>Hardware Requirements</h2><p>Minimal:</p>\n<ul>\n<li>CPU Cores: 2</li>\n<li>andom-Access Memory: 4GB</li>\n<li>Hard Disk: 20GB free</li>\n</ul>\n<p>Recommended:</p>\n<ul>\n<li>CPU Cores: 4</li>\n<li>Random-Access Memory: 8GB</li>\n<li>Hard Disk: 60GB free</li>\n</ul>\n<h2 id=\"-Prerequisites\"><a href=\"#-Prerequisites\" class=\"headerlink\" title=\" Prerequisites\"></a> Prerequisites</h2><h3 id=\"install-curl\"><a href=\"#install-curl\" class=\"headerlink\" title=\"install curl\"></a>install curl</h3><div class=\"tabs\" id=\"tab\"><ul class=\"nav-tabs\"><li class=\"tab active\"><a href=\"#tab-1\">CentOS</a></li><li class=\"tab\"><a href=\"#tab-2\">Ubuntu/Debian</a></li></ul><div class=\"tab-content\"><div class=\"tab-pane active\" id=\"tab-1\"><p><code>yum install curl -y</code></p></div><div class=\"tab-pane\" id=\"tab-2\"><p><code>sudo apt install curl -y</code></p></div></div></div>\n\n\n<h3 id=\"install-docker\"><a href=\"#install-docker\" class=\"headerlink\" title=\"install docker\"></a>install docker</h3><div class=\"tabs\" id=\"tt\"><ul class=\"nav-tabs\"><li class=\"tab active\"><a href=\"#tt-1\">CentOS</a></li><li class=\"tab\"><a href=\"#tt-2\">Ubuntu/Debian</a></li></ul><div class=\"tab-content\"><div class=\"tab-pane active\" id=\"tt-1\"><p><code>yum install -y yum-utils</code><br><code>yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</code><br><code>yum install docker-ce docker-ce-cli containerd.io</code></p></div><div class=\"tab-pane\" id=\"tt-2\"><p><code>sudo apt-get install ca-certificates curl gnupg</code><br><code>sudo install -m 0755 -d /etc/apt/keyrings</code><br><code>curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg</code><br><code>sudo chmod a+r /etc/apt/keyrings/docker.gpg</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> \\</span><br><span class=\"line\">  <span class=\"string\">&quot;deb [arch=&quot;</span>$(dpkg --print-architecture)<span class=\"string\">&quot; signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\</span></span><br><span class=\"line\"><span class=\"string\">  &quot;</span>$(. /etc/os-release &amp;&amp; <span class=\"built_in\">echo</span> <span class=\"string\">&quot;<span class=\"variable\">$VERSION_CODENAME</span>&quot;</span>)<span class=\"string\">&quot; stable&quot;</span> | \\</span><br><span class=\"line\">  sudo <span class=\"built_in\">tee</span> /etc/apt/sources.list.d/docker.list &gt; /dev/null</span><br></pre></td></tr></table></figure>\n<p><code> sudo apt install docker.io</code></p></div></div></div>\n\n<h3 id=\"install-docker-compose\"><a href=\"#install-docker-compose\" class=\"headerlink\" title=\"install docker-compose\"></a>install docker-compose</h3><div class=\"tabs\" id=\"ttt\"><ul class=\"nav-tabs\"><li class=\"tab active\"><a href=\"#ttt-1\">CentOS</a></li><li class=\"tab\"><a href=\"#ttt-2\">Ubuntu/Debian</a></li></ul><div class=\"tab-content\"><div class=\"tab-pane active\" id=\"ttt-1\"><p><code>yum install python3-pip -y</code><br><code>python3 -m pip install --user docker-compose</code></p></div><div class=\"tab-pane\" id=\"ttt-2\"><p><code>sudo apt install python3 python3-pip -y</code><br><code>python3 -m pip install --user docker-compose</code></p></div></div></div>\n\n\n<h2 id=\"-SET-UP\"><a href=\"#-SET-UP\" class=\"headerlink\" title=\" SET UP\"></a> SET UP</h2><h3 id=\"Docker-Compose-File\"><a href=\"#Docker-Compose-File\" class=\"headerlink\" title=\"Docker Compose File\"></a>Docker Compose File</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">vulnerability-tests:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/vulnerability-tests</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"attr\">STORAGE_PATH:</span> <span class=\"string\">/var/lib/openvas/22.04/vt-data/nasl</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">vt_data_vol:/mnt</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">notus-data:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/notus-data</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">notus_data_vol:/mnt</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">scap-data:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/scap-data</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">scap_data_vol:/mnt</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">cert-bund-data:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/cert-bund-data</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">cert_data_vol:/mnt</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">dfn-cert-data:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/dfn-cert-data</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">cert_data_vol:/mnt</span></span><br><span class=\"line\">    <span class=\"attr\">depends_on:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">cert-bund-data</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">data-objects:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/data-objects</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">data_objects_vol:/mnt</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">report-formats:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/report-formats</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">data_objects_vol:/mnt</span></span><br><span class=\"line\">    <span class=\"attr\">depends_on:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">data-objects</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">gpg-data:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/gpg-data</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">gpg_data_vol:/mnt</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">redis-server:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/redis-server</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">on-failure</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">redis_socket_vol:/run/redis/</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">pg-gvm:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/pg-gvm:stable</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">on-failure</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">psql_data_vol:/var/lib/postgresql</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">psql_socket_vol:/var/run/postgresql</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">gvmd:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/gvmd:stable</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">on-failure</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">gvmd_data_vol:/var/lib/gvm</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">scap_data_vol:/var/lib/gvm/scap-data/</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">cert_data_vol:/var/lib/gvm/cert-data</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">data_objects_vol:/var/lib/gvm/data-objects/gvmd</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">vt_data_vol:/var/lib/openvas/plugins</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">psql_data_vol:/var/lib/postgresql</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">gvmd_socket_vol:/run/gvmd</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">ospd_openvas_socket_vol:/run/ospd</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">psql_socket_vol:/var/run/postgresql</span></span><br><span class=\"line\">    <span class=\"attr\">depends_on:</span></span><br><span class=\"line\">      <span class=\"attr\">pg-gvm:</span></span><br><span class=\"line\">        <span class=\"attr\">condition:</span> <span class=\"string\">service_started</span></span><br><span class=\"line\">      <span class=\"attr\">scap-data:</span></span><br><span class=\"line\">        <span class=\"attr\">condition:</span> <span class=\"string\">service_completed_successfully</span></span><br><span class=\"line\">      <span class=\"attr\">cert-bund-data:</span></span><br><span class=\"line\">        <span class=\"attr\">condition:</span> <span class=\"string\">service_completed_successfully</span></span><br><span class=\"line\">      <span class=\"attr\">dfn-cert-data:</span></span><br><span class=\"line\">        <span class=\"attr\">condition:</span> <span class=\"string\">service_completed_successfully</span></span><br><span class=\"line\">      <span class=\"attr\">data-objects:</span></span><br><span class=\"line\">        <span class=\"attr\">condition:</span> <span class=\"string\">service_completed_successfully</span></span><br><span class=\"line\">      <span class=\"attr\">report-formats:</span></span><br><span class=\"line\">        <span class=\"attr\">condition:</span> <span class=\"string\">service_completed_successfully</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">gsa:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/gsa:stable</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">on-failure</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">9392</span><span class=\"string\">:80</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">gvmd_socket_vol:/run/gvmd</span></span><br><span class=\"line\">    <span class=\"attr\">depends_on:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">gvmd</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">ospd-openvas:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/ospd-openvas:stable</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">on-failure</span></span><br><span class=\"line\">    <span class=\"attr\">init:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">hostname:</span> <span class=\"string\">ospd-openvas.local</span></span><br><span class=\"line\">    <span class=\"attr\">cap_add:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">NET_ADMIN</span> <span class=\"comment\"># for capturing packages in promiscuous mode</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">NET_RAW</span> <span class=\"comment\"># for raw sockets e.g. used for the boreas alive detection</span></span><br><span class=\"line\">    <span class=\"attr\">security_opt:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">seccomp=unconfined</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">apparmor=unconfined</span></span><br><span class=\"line\">    <span class=\"attr\">command:</span></span><br><span class=\"line\">      [</span><br><span class=\"line\">        <span class=\"string\">&quot;ospd-openvas&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;-f&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;--config&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;/etc/gvm/ospd-openvas.conf&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;--mqtt-broker-address&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;mqtt-broker&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;--notus-feed-dir&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;/var/lib/notus/advisories&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;-m&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;666&quot;</span></span><br><span class=\"line\">      ]</span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">gpg_data_vol:/etc/openvas/gnupg</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">vt_data_vol:/var/lib/openvas/plugins</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">notus_data_vol:/var/lib/notus</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">ospd_openvas_socket_vol:/run/ospd</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">redis_socket_vol:/run/redis/</span></span><br><span class=\"line\">    <span class=\"attr\">depends_on:</span></span><br><span class=\"line\">      <span class=\"attr\">redis-server:</span></span><br><span class=\"line\">        <span class=\"attr\">condition:</span> <span class=\"string\">service_started</span></span><br><span class=\"line\">      <span class=\"attr\">gpg-data:</span></span><br><span class=\"line\">        <span class=\"attr\">condition:</span> <span class=\"string\">service_completed_successfully</span></span><br><span class=\"line\">      <span class=\"attr\">vulnerability-tests:</span></span><br><span class=\"line\">        <span class=\"attr\">condition:</span> <span class=\"string\">service_completed_successfully</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">mqtt-broker:</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">on-failure</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/mqtt-broker</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">1883</span><span class=\"string\">:1883</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"attr\">default:</span></span><br><span class=\"line\">        <span class=\"attr\">aliases:</span></span><br><span class=\"line\">          <span class=\"bullet\">-</span> <span class=\"string\">mqtt-broker</span></span><br><span class=\"line\">          <span class=\"bullet\">-</span> <span class=\"string\">broker</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">notus-scanner:</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">on-failure</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/notus-scanner:stable</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">notus_data_vol:/var/lib/notus</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">gpg_data_vol:/etc/openvas/gnupg</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"attr\">NOTUS_SCANNER_MQTT_BROKER_ADDRESS:</span> <span class=\"string\">mqtt-broker</span></span><br><span class=\"line\">      <span class=\"attr\">NOTUS_SCANNER_PRODUCTS_DIRECTORY:</span> <span class=\"string\">/var/lib/notus/products</span></span><br><span class=\"line\">    <span class=\"attr\">depends_on:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">mqtt-broker</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">gpg-data</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">vulnerability-tests</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">gvm-tools:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/gvm-tools</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">gvmd_socket_vol:/run/gvmd</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">ospd_openvas_socket_vol:/run/ospd</span></span><br><span class=\"line\">    <span class=\"attr\">depends_on:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">gvmd</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">ospd-openvas</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">volumes:</span></span><br><span class=\"line\">  <span class=\"attr\">gpg_data_vol:</span></span><br><span class=\"line\">  <span class=\"attr\">scap_data_vol:</span></span><br><span class=\"line\">  <span class=\"attr\">cert_data_vol:</span></span><br><span class=\"line\">  <span class=\"attr\">data_objects_vol:</span></span><br><span class=\"line\">  <span class=\"attr\">gvmd_data_vol:</span></span><br><span class=\"line\">  <span class=\"attr\">psql_data_vol:</span></span><br><span class=\"line\">  <span class=\"attr\">vt_data_vol:</span></span><br><span class=\"line\">  <span class=\"attr\">notus_data_vol:</span></span><br><span class=\"line\">  <span class=\"attr\">psql_socket_vol:</span></span><br><span class=\"line\">  <span class=\"attr\">gvmd_socket_vol:</span></span><br><span class=\"line\">  <span class=\"attr\">ospd_openvas_socket_vol:</span></span><br><span class=\"line\">  <span class=\"attr\">redis_socket_vol:</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Downloading-the-Greenbone-Community-Containers\"><a href=\"#Downloading-the-Greenbone-Community-Containers\" class=\"headerlink\" title=\"Downloading the Greenbone Community Containers\"></a>Downloading the Greenbone Community Containers</h3><p><code>docker-compose -f $DOWNLOAD_DIR/docker-compose.yml -p greenbone-community-edition pull</code></p>\n<h3 id=\"Starting-the-Greenbone-Community-Containers\"><a href=\"#Starting-the-Greenbone-Community-Containers\" class=\"headerlink\" title=\"Starting the Greenbone Community Containers\"></a>Starting the Greenbone Community Containers</h3><p><code>docker-compose -f $DOWNLOAD_DIR/docker-compose.yml -p greenbone-community-edition up -d</code></p>\n<h3 id=\"Show-log-messages-of-all-services-from-the-running-containers\"><a href=\"#Show-log-messages-of-all-services-from-the-running-containers\" class=\"headerlink\" title=\"Show log messages of all services from the running containers\"></a>Show log messages of all services from the running containers</h3><p><code>docker-compose -f $DOWNLOAD_DIR/docker-compose.yml -p greenbone-community-edition logs -f</code></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Hardware-Requirements\"><a href=\"#Hardware-Requirements\" class=\"headerlink\" title=\"Hardware Requirements\"></a>Hardware Requirements</h2><p>Minimal:</p>\n<ul>\n<li>CPU Cores: 2</li>\n<li>andom-Access Memory: 4GB</li>\n<li>Hard Disk: 20GB free</li>\n</ul>\n<p>Recommended:</p>\n<ul>\n<li>CPU Cores: 4</li>\n<li>Random-Access Memory: 8GB</li>\n<li>Hard Disk: 60GB free</li>\n</ul>\n<h2 id=\"-Prerequisites\"><a href=\"#-Prerequisites\" class=\"headerlink\" title=\" Prerequisites\"></a> Prerequisites</h2><h3 id=\"install-curl\"><a href=\"#install-curl\" class=\"headerlink\" title=\"install curl\"></a>install curl</h3><div class=\"tabs\" id=\"tab\"><ul class=\"nav-tabs\"><li class=\"tab active\"><a href=\"#tab-1\">CentOS</a></li><li class=\"tab\"><a href=\"#tab-2\">Ubuntu/Debian</a></li></ul><div class=\"tab-content\"><div class=\"tab-pane active\" id=\"tab-1\"><p><code>yum install curl -y</code></p></div><div class=\"tab-pane\" id=\"tab-2\"><p><code>sudo apt install curl -y</code></p></div></div></div>\n\n\n<h3 id=\"install-docker\"><a href=\"#install-docker\" class=\"headerlink\" title=\"install docker\"></a>install docker</h3><div class=\"tabs\" id=\"tt\"><ul class=\"nav-tabs\"><li class=\"tab active\"><a href=\"#tt-1\">CentOS</a></li><li class=\"tab\"><a href=\"#tt-2\">Ubuntu/Debian</a></li></ul><div class=\"tab-content\"><div class=\"tab-pane active\" id=\"tt-1\"><p><code>yum install -y yum-utils</code><br><code>yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</code><br><code>yum install docker-ce docker-ce-cli containerd.io</code></p></div><div class=\"tab-pane\" id=\"tt-2\"><p><code>sudo apt-get install ca-certificates curl gnupg</code><br><code>sudo install -m 0755 -d /etc/apt/keyrings</code><br><code>curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg</code><br><code>sudo chmod a+r /etc/apt/keyrings/docker.gpg</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> \\</span><br><span class=\"line\">  <span class=\"string\">&quot;deb [arch=&quot;</span>$(dpkg --print-architecture)<span class=\"string\">&quot; signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\</span></span><br><span class=\"line\"><span class=\"string\">  &quot;</span>$(. /etc/os-release &amp;&amp; <span class=\"built_in\">echo</span> <span class=\"string\">&quot;<span class=\"variable\">$VERSION_CODENAME</span>&quot;</span>)<span class=\"string\">&quot; stable&quot;</span> | \\</span><br><span class=\"line\">  sudo <span class=\"built_in\">tee</span> /etc/apt/sources.list.d/docker.list &gt; /dev/null</span><br></pre></td></tr></table></figure>\n<p><code> sudo apt install docker.io</code></p></div></div></div>\n\n<h3 id=\"install-docker-compose\"><a href=\"#install-docker-compose\" class=\"headerlink\" title=\"install docker-compose\"></a>install docker-compose</h3><div class=\"tabs\" id=\"ttt\"><ul class=\"nav-tabs\"><li class=\"tab active\"><a href=\"#ttt-1\">CentOS</a></li><li class=\"tab\"><a href=\"#ttt-2\">Ubuntu/Debian</a></li></ul><div class=\"tab-content\"><div class=\"tab-pane active\" id=\"ttt-1\"><p><code>yum install python3-pip -y</code><br><code>python3 -m pip install --user docker-compose</code></p></div><div class=\"tab-pane\" id=\"ttt-2\"><p><code>sudo apt install python3 python3-pip -y</code><br><code>python3 -m pip install --user docker-compose</code></p></div></div></div>\n\n\n<h2 id=\"-SET-UP\"><a href=\"#-SET-UP\" class=\"headerlink\" title=\" SET UP\"></a> SET UP</h2><h3 id=\"Docker-Compose-File\"><a href=\"#Docker-Compose-File\" class=\"headerlink\" title=\"Docker Compose File\"></a>Docker Compose File</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">vulnerability-tests:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/vulnerability-tests</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"attr\">STORAGE_PATH:</span> <span class=\"string\">/var/lib/openvas/22.04/vt-data/nasl</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">vt_data_vol:/mnt</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">notus-data:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/notus-data</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">notus_data_vol:/mnt</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">scap-data:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/scap-data</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">scap_data_vol:/mnt</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">cert-bund-data:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/cert-bund-data</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">cert_data_vol:/mnt</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">dfn-cert-data:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/dfn-cert-data</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">cert_data_vol:/mnt</span></span><br><span class=\"line\">    <span class=\"attr\">depends_on:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">cert-bund-data</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">data-objects:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/data-objects</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">data_objects_vol:/mnt</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">report-formats:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/report-formats</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">data_objects_vol:/mnt</span></span><br><span class=\"line\">    <span class=\"attr\">depends_on:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">data-objects</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">gpg-data:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/gpg-data</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">gpg_data_vol:/mnt</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">redis-server:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/redis-server</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">on-failure</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">redis_socket_vol:/run/redis/</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">pg-gvm:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/pg-gvm:stable</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">on-failure</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">psql_data_vol:/var/lib/postgresql</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">psql_socket_vol:/var/run/postgresql</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">gvmd:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/gvmd:stable</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">on-failure</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">gvmd_data_vol:/var/lib/gvm</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">scap_data_vol:/var/lib/gvm/scap-data/</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">cert_data_vol:/var/lib/gvm/cert-data</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">data_objects_vol:/var/lib/gvm/data-objects/gvmd</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">vt_data_vol:/var/lib/openvas/plugins</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">psql_data_vol:/var/lib/postgresql</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">gvmd_socket_vol:/run/gvmd</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">ospd_openvas_socket_vol:/run/ospd</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">psql_socket_vol:/var/run/postgresql</span></span><br><span class=\"line\">    <span class=\"attr\">depends_on:</span></span><br><span class=\"line\">      <span class=\"attr\">pg-gvm:</span></span><br><span class=\"line\">        <span class=\"attr\">condition:</span> <span class=\"string\">service_started</span></span><br><span class=\"line\">      <span class=\"attr\">scap-data:</span></span><br><span class=\"line\">        <span class=\"attr\">condition:</span> <span class=\"string\">service_completed_successfully</span></span><br><span class=\"line\">      <span class=\"attr\">cert-bund-data:</span></span><br><span class=\"line\">        <span class=\"attr\">condition:</span> <span class=\"string\">service_completed_successfully</span></span><br><span class=\"line\">      <span class=\"attr\">dfn-cert-data:</span></span><br><span class=\"line\">        <span class=\"attr\">condition:</span> <span class=\"string\">service_completed_successfully</span></span><br><span class=\"line\">      <span class=\"attr\">data-objects:</span></span><br><span class=\"line\">        <span class=\"attr\">condition:</span> <span class=\"string\">service_completed_successfully</span></span><br><span class=\"line\">      <span class=\"attr\">report-formats:</span></span><br><span class=\"line\">        <span class=\"attr\">condition:</span> <span class=\"string\">service_completed_successfully</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">gsa:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/gsa:stable</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">on-failure</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">9392</span><span class=\"string\">:80</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">gvmd_socket_vol:/run/gvmd</span></span><br><span class=\"line\">    <span class=\"attr\">depends_on:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">gvmd</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">ospd-openvas:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/ospd-openvas:stable</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">on-failure</span></span><br><span class=\"line\">    <span class=\"attr\">init:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">hostname:</span> <span class=\"string\">ospd-openvas.local</span></span><br><span class=\"line\">    <span class=\"attr\">cap_add:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">NET_ADMIN</span> <span class=\"comment\"># for capturing packages in promiscuous mode</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">NET_RAW</span> <span class=\"comment\"># for raw sockets e.g. used for the boreas alive detection</span></span><br><span class=\"line\">    <span class=\"attr\">security_opt:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">seccomp=unconfined</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">apparmor=unconfined</span></span><br><span class=\"line\">    <span class=\"attr\">command:</span></span><br><span class=\"line\">      [</span><br><span class=\"line\">        <span class=\"string\">&quot;ospd-openvas&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;-f&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;--config&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;/etc/gvm/ospd-openvas.conf&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;--mqtt-broker-address&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;mqtt-broker&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;--notus-feed-dir&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;/var/lib/notus/advisories&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;-m&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;666&quot;</span></span><br><span class=\"line\">      ]</span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">gpg_data_vol:/etc/openvas/gnupg</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">vt_data_vol:/var/lib/openvas/plugins</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">notus_data_vol:/var/lib/notus</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">ospd_openvas_socket_vol:/run/ospd</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">redis_socket_vol:/run/redis/</span></span><br><span class=\"line\">    <span class=\"attr\">depends_on:</span></span><br><span class=\"line\">      <span class=\"attr\">redis-server:</span></span><br><span class=\"line\">        <span class=\"attr\">condition:</span> <span class=\"string\">service_started</span></span><br><span class=\"line\">      <span class=\"attr\">gpg-data:</span></span><br><span class=\"line\">        <span class=\"attr\">condition:</span> <span class=\"string\">service_completed_successfully</span></span><br><span class=\"line\">      <span class=\"attr\">vulnerability-tests:</span></span><br><span class=\"line\">        <span class=\"attr\">condition:</span> <span class=\"string\">service_completed_successfully</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">mqtt-broker:</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">on-failure</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/mqtt-broker</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">1883</span><span class=\"string\">:1883</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"attr\">default:</span></span><br><span class=\"line\">        <span class=\"attr\">aliases:</span></span><br><span class=\"line\">          <span class=\"bullet\">-</span> <span class=\"string\">mqtt-broker</span></span><br><span class=\"line\">          <span class=\"bullet\">-</span> <span class=\"string\">broker</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">notus-scanner:</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">on-failure</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/notus-scanner:stable</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">notus_data_vol:/var/lib/notus</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">gpg_data_vol:/etc/openvas/gnupg</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"attr\">NOTUS_SCANNER_MQTT_BROKER_ADDRESS:</span> <span class=\"string\">mqtt-broker</span></span><br><span class=\"line\">      <span class=\"attr\">NOTUS_SCANNER_PRODUCTS_DIRECTORY:</span> <span class=\"string\">/var/lib/notus/products</span></span><br><span class=\"line\">    <span class=\"attr\">depends_on:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">mqtt-broker</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">gpg-data</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">vulnerability-tests</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">gvm-tools:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">greenbone/gvm-tools</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">gvmd_socket_vol:/run/gvmd</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">ospd_openvas_socket_vol:/run/ospd</span></span><br><span class=\"line\">    <span class=\"attr\">depends_on:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">gvmd</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">ospd-openvas</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">volumes:</span></span><br><span class=\"line\">  <span class=\"attr\">gpg_data_vol:</span></span><br><span class=\"line\">  <span class=\"attr\">scap_data_vol:</span></span><br><span class=\"line\">  <span class=\"attr\">cert_data_vol:</span></span><br><span class=\"line\">  <span class=\"attr\">data_objects_vol:</span></span><br><span class=\"line\">  <span class=\"attr\">gvmd_data_vol:</span></span><br><span class=\"line\">  <span class=\"attr\">psql_data_vol:</span></span><br><span class=\"line\">  <span class=\"attr\">vt_data_vol:</span></span><br><span class=\"line\">  <span class=\"attr\">notus_data_vol:</span></span><br><span class=\"line\">  <span class=\"attr\">psql_socket_vol:</span></span><br><span class=\"line\">  <span class=\"attr\">gvmd_socket_vol:</span></span><br><span class=\"line\">  <span class=\"attr\">ospd_openvas_socket_vol:</span></span><br><span class=\"line\">  <span class=\"attr\">redis_socket_vol:</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Downloading-the-Greenbone-Community-Containers\"><a href=\"#Downloading-the-Greenbone-Community-Containers\" class=\"headerlink\" title=\"Downloading the Greenbone Community Containers\"></a>Downloading the Greenbone Community Containers</h3><p><code>docker-compose -f $DOWNLOAD_DIR/docker-compose.yml -p greenbone-community-edition pull</code></p>\n<h3 id=\"Starting-the-Greenbone-Community-Containers\"><a href=\"#Starting-the-Greenbone-Community-Containers\" class=\"headerlink\" title=\"Starting the Greenbone Community Containers\"></a>Starting the Greenbone Community Containers</h3><p><code>docker-compose -f $DOWNLOAD_DIR/docker-compose.yml -p greenbone-community-edition up -d</code></p>\n<h3 id=\"Show-log-messages-of-all-services-from-the-running-containers\"><a href=\"#Show-log-messages-of-all-services-from-the-running-containers\" class=\"headerlink\" title=\"Show log messages of all services from the running containers\"></a>Show log messages of all services from the running containers</h3><p><code>docker-compose -f $DOWNLOAD_DIR/docker-compose.yml -p greenbone-community-edition logs -f</code></p>\n"},{"title":"","date":"2023-06-12T06:50:13.000Z","_content":"\n**htop lsofkill**\n** **\n\n\n## \n\nCentOS 7.5 on PVE  8C 12G\n\n\n##  htop\n\nUSER ```oracle```\nCOMMAND: ```/bin/bash/systemd```\n<img src=\"/images/043.Cryptocurrency_Mining_Malware.md.01.png\" width=100% height=100% />\n\n\n##  lsof \n\n``` lsof -p $PID ```\n\nPATH: ```/var/tmp/x86_64```deleted\n ``` 45.10.20.137 ``` \n<img src=\"/images/043.Cryptocurrency_Mining_Malware.md.02.png\" width=100% height=100% />\n\n##  netstat \n\n``` netstat -antlp ```\n<img src=\"/images/043.Cryptocurrency_Mining_Malware.md.03.png\" width=100% height=100% />\n\n##  /proc \n\n``` ls -ahl /proc/$PID ```\n- cwd \n- exe              ```/var/tmp/x86_64```(deleted)\n- cmdline   ```/bin/bash/systemd```\n- environ \n- fd  \n\n<img src=\"/images/043.Cryptocurrency_Mining_Malware.md.07.png\" width=100% height=100% />\n\n** PPID1 **\n<img src=\"/images/043.Cryptocurrency_Mining_Malware.md.08.png\" width=100% height=100% />\n\n##   xmrig\n\n```/var/tmp/x86_64```   \n\nOracleOracle\n\nOracle ```/home/oracle```    ```xmrig``` \n>> XMrig  CPU/GPU  MoneroXMR Cryptonight  WindowsLinux  macOS balabalbal......\n\n\n<img src=\"/images/043.Cryptocurrency_Mining_Malware.md.04.png\" width=100% height=100% />\n<img src=\"/images/043.Cryptocurrency_Mining_Malware.md.05.png\" width=100% height=100% />\n<img src=\"/images/043.Cryptocurrency_Mining_Malware.md.06.png\" width=100% height=100% />","source":"_posts/043.Cryptocurrency_Mining_Malware.md","raw":"---\ntitle: \ndate: 2023-6-12 14:50:13\ncategories: \n- [DevOps]\ntags: \n- \n- xmrig\n- Cryptocurrency-Mining-Malware\n---\n\n**htop lsofkill**\n** **\n\n\n## \n\nCentOS 7.5 on PVE  8C 12G\n\n\n##  htop\n\nUSER ```oracle```\nCOMMAND: ```/bin/bash/systemd```\n<img src=\"/images/043.Cryptocurrency_Mining_Malware.md.01.png\" width=100% height=100% />\n\n\n##  lsof \n\n``` lsof -p $PID ```\n\nPATH: ```/var/tmp/x86_64```deleted\n ``` 45.10.20.137 ``` \n<img src=\"/images/043.Cryptocurrency_Mining_Malware.md.02.png\" width=100% height=100% />\n\n##  netstat \n\n``` netstat -antlp ```\n<img src=\"/images/043.Cryptocurrency_Mining_Malware.md.03.png\" width=100% height=100% />\n\n##  /proc \n\n``` ls -ahl /proc/$PID ```\n- cwd \n- exe              ```/var/tmp/x86_64```(deleted)\n- cmdline   ```/bin/bash/systemd```\n- environ \n- fd  \n\n<img src=\"/images/043.Cryptocurrency_Mining_Malware.md.07.png\" width=100% height=100% />\n\n** PPID1 **\n<img src=\"/images/043.Cryptocurrency_Mining_Malware.md.08.png\" width=100% height=100% />\n\n##   xmrig\n\n```/var/tmp/x86_64```   \n\nOracleOracle\n\nOracle ```/home/oracle```    ```xmrig``` \n>> XMrig  CPU/GPU  MoneroXMR Cryptonight  WindowsLinux  macOS balabalbal......\n\n\n<img src=\"/images/043.Cryptocurrency_Mining_Malware.md.04.png\" width=100% height=100% />\n<img src=\"/images/043.Cryptocurrency_Mining_Malware.md.05.png\" width=100% height=100% />\n<img src=\"/images/043.Cryptocurrency_Mining_Malware.md.06.png\" width=100% height=100% />","slug":"043.Cryptocurrency_Mining_Malware","published":1,"updated":"2023-06-13T08:10:32.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbft0042yknr8assf0m7","content":"<p><strong>htop lsofkill</strong><br><strong> </strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>CentOS 7.5 on PVE  8C 12G</p>\n<h2 id=\"-htop\"><a href=\"#-htop\" class=\"headerlink\" title=\" htop\"></a> htop</h2><p>USER <code>oracle</code><br>COMMAND: <code>/bin/bash/systemd</code><br><img src=\"/images/043.Cryptocurrency_Mining_Malware.md.01.png\" width=100% height=100% /></p>\n<h2 id=\"-lsof-\"><a href=\"#-lsof-\" class=\"headerlink\" title=\" lsof \"></a> lsof </h2><p><code>lsof -p $PID</code></p>\n<p>PATH: <code>/var/tmp/x86_64</code>deleted<br> <code>45.10.20.137</code> <br><img src=\"/images/043.Cryptocurrency_Mining_Malware.md.02.png\" width=100% height=100% /></p>\n<h2 id=\"-netstat-\"><a href=\"#-netstat-\" class=\"headerlink\" title=\" netstat \"></a> netstat </h2><p><code>netstat -antlp</code><br><img src=\"/images/043.Cryptocurrency_Mining_Malware.md.03.png\" width=100% height=100% /></p>\n<h2 id=\"-proc-\"><a href=\"#-proc-\" class=\"headerlink\" title=\" &#x2F;proc \"></a> &#x2F;proc </h2><p><code>ls -ahl /proc/$PID</code></p>\n<ul>\n<li>cwd </li>\n<li>exe              <code>/var/tmp/x86_64</code>(deleted)</li>\n<li>cmdline   <code>/bin/bash/systemd</code></li>\n<li>environ </li>\n<li>fd </li>\n</ul>\n<img src=\"/images/043.Cryptocurrency_Mining_Malware.md.07.png\" width=100% height=100% />\n\n<p><strong> PPID1 </strong><br><img src=\"/images/043.Cryptocurrency_Mining_Malware.md.08.png\" width=100% height=100% /></p>\n<h2 id=\"--xmrig\"><a href=\"#--xmrig\" class=\"headerlink\" title=\"  xmrig\"></a>  xmrig</h2><p><code>/var/tmp/x86_64</code>   </p>\n<p>OracleOracle</p>\n<p>Oracle <code>/home/oracle</code>    <code>xmrig</code> </p>\n<blockquote>\n<blockquote>\n<p>XMrig  CPU&#x2F;GPU  MoneroXMR Cryptonight  WindowsLinux  macOS balabalbal</p>\n</blockquote>\n</blockquote>\n<img src=\"/images/043.Cryptocurrency_Mining_Malware.md.04.png\" width=100% height=100% />\n<img src=\"/images/043.Cryptocurrency_Mining_Malware.md.05.png\" width=100% height=100% />\n<img src=\"/images/043.Cryptocurrency_Mining_Malware.md.06.png\" width=100% height=100% />","site":{"data":{}},"excerpt":"","more":"<p><strong>htop lsofkill</strong><br><strong> </strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>CentOS 7.5 on PVE  8C 12G</p>\n<h2 id=\"-htop\"><a href=\"#-htop\" class=\"headerlink\" title=\" htop\"></a> htop</h2><p>USER <code>oracle</code><br>COMMAND: <code>/bin/bash/systemd</code><br><img src=\"/images/043.Cryptocurrency_Mining_Malware.md.01.png\" width=100% height=100% /></p>\n<h2 id=\"-lsof-\"><a href=\"#-lsof-\" class=\"headerlink\" title=\" lsof \"></a> lsof </h2><p><code>lsof -p $PID</code></p>\n<p>PATH: <code>/var/tmp/x86_64</code>deleted<br> <code>45.10.20.137</code> <br><img src=\"/images/043.Cryptocurrency_Mining_Malware.md.02.png\" width=100% height=100% /></p>\n<h2 id=\"-netstat-\"><a href=\"#-netstat-\" class=\"headerlink\" title=\" netstat \"></a> netstat </h2><p><code>netstat -antlp</code><br><img src=\"/images/043.Cryptocurrency_Mining_Malware.md.03.png\" width=100% height=100% /></p>\n<h2 id=\"-proc-\"><a href=\"#-proc-\" class=\"headerlink\" title=\" &#x2F;proc \"></a> &#x2F;proc </h2><p><code>ls -ahl /proc/$PID</code></p>\n<ul>\n<li>cwd </li>\n<li>exe              <code>/var/tmp/x86_64</code>(deleted)</li>\n<li>cmdline   <code>/bin/bash/systemd</code></li>\n<li>environ </li>\n<li>fd </li>\n</ul>\n<img src=\"/images/043.Cryptocurrency_Mining_Malware.md.07.png\" width=100% height=100% />\n\n<p><strong> PPID1 </strong><br><img src=\"/images/043.Cryptocurrency_Mining_Malware.md.08.png\" width=100% height=100% /></p>\n<h2 id=\"--xmrig\"><a href=\"#--xmrig\" class=\"headerlink\" title=\"  xmrig\"></a>  xmrig</h2><p><code>/var/tmp/x86_64</code>   </p>\n<p>OracleOracle</p>\n<p>Oracle <code>/home/oracle</code>    <code>xmrig</code> </p>\n<blockquote>\n<blockquote>\n<p>XMrig  CPU&#x2F;GPU  MoneroXMR Cryptonight  WindowsLinux  macOS balabalbal</p>\n</blockquote>\n</blockquote>\n<img src=\"/images/043.Cryptocurrency_Mining_Malware.md.04.png\" width=100% height=100% />\n<img src=\"/images/043.Cryptocurrency_Mining_Malware.md.05.png\" width=100% height=100% />\n<img src=\"/images/043.Cryptocurrency_Mining_Malware.md.06.png\" width=100% height=100% />"},{"title":"","date":"2023-06-20T01:49:23.000Z","_content":"\n\n> linux lsof -p $PIDlsof  /proc/$PID\n\n\n## /proc \n\n> Linux  /proc proc\n\n|PATH                 |                      |\n| ------              | ------                   |\n|/proc/cpuinfo        | cpu                 |\n|/proc/stat           | CPU          |\n|/proc/devices        |         |\n|/proc/filesystems    |    |\n|/proc/modules        |      |\n|/proc/uptime         |           |\n|/proc/net            |                |","source":"_posts/044.about_process.md","raw":"---\ntitle: \ndate: 2023-6-20 09:49:23\ncategories: \n- [Linux]\n- [DevOps]\ntags: \n- pid\n- progress\n---\n\n\n> linux lsof -p $PIDlsof  /proc/$PID\n\n\n## /proc \n\n> Linux  /proc proc\n\n|PATH                 |                      |\n| ------              | ------                   |\n|/proc/cpuinfo        | cpu                 |\n|/proc/stat           | CPU          |\n|/proc/devices        |         |\n|/proc/filesystems    |    |\n|/proc/modules        |      |\n|/proc/uptime         |           |\n|/proc/net            |                |","slug":"044.about_process","published":1,"updated":"2023-06-20T09:35:29.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbfv0047yknr36ie4rui","content":"<blockquote>\n<p>linux lsof -p $PIDlsof  &#x2F;proc&#x2F;$PID</p>\n</blockquote>\n<h2 id=\"proc-\"><a href=\"#proc-\" class=\"headerlink\" title=\"&#x2F;proc \"></a>&#x2F;proc </h2><blockquote>\n<p>Linux  &#x2F;proc proc</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>PATH</th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>&#x2F;proc&#x2F;cpuinfo</td>\n<td>cpu</td>\n</tr>\n<tr>\n<td>&#x2F;proc&#x2F;stat</td>\n<td>CPU</td>\n</tr>\n<tr>\n<td>&#x2F;proc&#x2F;devices</td>\n<td></td>\n</tr>\n<tr>\n<td>&#x2F;proc&#x2F;filesystems</td>\n<td></td>\n</tr>\n<tr>\n<td>&#x2F;proc&#x2F;modules</td>\n<td></td>\n</tr>\n<tr>\n<td>&#x2F;proc&#x2F;uptime</td>\n<td></td>\n</tr>\n<tr>\n<td>&#x2F;proc&#x2F;net</td>\n<td></td>\n</tr>\n</tbody></table>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>linux lsof -p $PIDlsof  &#x2F;proc&#x2F;$PID</p>\n</blockquote>\n<h2 id=\"proc-\"><a href=\"#proc-\" class=\"headerlink\" title=\"&#x2F;proc \"></a>&#x2F;proc </h2><blockquote>\n<p>Linux  &#x2F;proc proc</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>PATH</th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>&#x2F;proc&#x2F;cpuinfo</td>\n<td>cpu</td>\n</tr>\n<tr>\n<td>&#x2F;proc&#x2F;stat</td>\n<td>CPU</td>\n</tr>\n<tr>\n<td>&#x2F;proc&#x2F;devices</td>\n<td></td>\n</tr>\n<tr>\n<td>&#x2F;proc&#x2F;filesystems</td>\n<td></td>\n</tr>\n<tr>\n<td>&#x2F;proc&#x2F;modules</td>\n<td></td>\n</tr>\n<tr>\n<td>&#x2F;proc&#x2F;uptime</td>\n<td></td>\n</tr>\n<tr>\n<td>&#x2F;proc&#x2F;net</td>\n<td></td>\n</tr>\n</tbody></table>\n"},{"title":"Xray + v2rayA","date":"2023-07-07T06:11:11.000Z","_content":"\n\n> ENV\nOS: Debian GNU/Linux 12 (bookworm) x86_64\n\n\n\n\n##  xray-core \n\n### 1.1 \n\nhttps://github.com/XTLS/Xray-core/releases\n\n\n### 1.2 \n\n **xray`````` [FHS](https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard) **\n\n``` sudo mkdir /xray ```\n``` sudo unzip Xray-linux-64.zip -d /usr/local/xray```\n\n### 1.3 systemd\n\n``` bash\n# /etc/systemd/system/xray.service\n[Unit]\nDescription=Xray Service\nDocumentation=https://github.com/xtls\nAfter=network.target nss-lookup.target\n\n[Service]\nUser=root\nCapabilityBoundingSet=CAP_NET_ADMIN CAP_NET_BIND_SERVICE\nAmbientCapabilities=CAP_NET_ADMIN CAP_NET_BIND_SERVICE\nNoNewPrivileges=true\nExecStart=/usr/local/xray/xray run -config /usr/local/xray/config.json\nRestart=on-failure\nRestartPreventExitStatus=23\nLimitNPROC=10000\nLimitNOFILE=1000000\n\n[Install]\nWantedBy=multi-user.target\n\n```\n\n``` ln -s /usr/local/xray/xray.service /etc/systemd/system/ ```\n``` sudo systemctl daemon-reload ```\n\n### 1.4 FHS \n\n```  bash -c \"$(curl -L https://github.com/XTLS/Xray-install/raw/main/install-release.sh)\" @ install ```\n\n**TMDwinrar.rar**\n<img src=\"/images/045.v2raya.md.00.png\" width=100% height=100% />\n\n\n### FHS\n\n\n<img src=\"/images/045.v2raya.md.000.png\" width=100% height=100% />\n\n##  V2RayA \n\n### 2.1 \n\n####  V2RayA \n\n``` wget -qO - https://apt.v2raya.org/key/public-key.asc | sudo tee /etc/apt/trusted.gpg.d/v2raya.asc ```\n\n####  V2RayA \n\n``` echo \"deb https://apt.v2raya.org/ v2raya main\" | sudo tee /etc/apt/sources.list.d/v2raya.list ```\n\n####  V2RayA \n\n``` sudo apt update && sudo apt install v2raya ```\n\n### 2.2 deb \n\n#### \nhttps://github.com/v2rayA/v2rayA/releases\n\n#### \n\n``` sudo apt install ./$PATH/istaller_debian_amd64_2.0.5.deb ```\n\n****\n\n\n##  V2RayA \n\n\nV2RayAxray\n<img src=\"/images/045.v2raya.md.01.png\" width=100% height=100% />\n<img src=\"/images/045.v2raya.md.02.png\" width=100% height=100% />\n\n\n\n\n\n geosite.dat, geoip.datv2ray-core \n<img src=\"/images/045.v2raya.md.03.png\" width=100% height=100% />\n\n\n ** v2rayxray FHS v2raya **\n","source":"_posts/045.v2raya.md","raw":"---\ntitle: Xray + v2rayA\ndate: 2023-7-7 14:11:11\ncategories: \n- [Linux]\n- [DevOps]\ntags: \n- v2ray\n- xray\n- v2rayA\n---\n\n\n> ENV\nOS: Debian GNU/Linux 12 (bookworm) x86_64\n\n\n\n\n##  xray-core \n\n### 1.1 \n\nhttps://github.com/XTLS/Xray-core/releases\n\n\n### 1.2 \n\n **xray`````` [FHS](https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard) **\n\n``` sudo mkdir /xray ```\n``` sudo unzip Xray-linux-64.zip -d /usr/local/xray```\n\n### 1.3 systemd\n\n``` bash\n# /etc/systemd/system/xray.service\n[Unit]\nDescription=Xray Service\nDocumentation=https://github.com/xtls\nAfter=network.target nss-lookup.target\n\n[Service]\nUser=root\nCapabilityBoundingSet=CAP_NET_ADMIN CAP_NET_BIND_SERVICE\nAmbientCapabilities=CAP_NET_ADMIN CAP_NET_BIND_SERVICE\nNoNewPrivileges=true\nExecStart=/usr/local/xray/xray run -config /usr/local/xray/config.json\nRestart=on-failure\nRestartPreventExitStatus=23\nLimitNPROC=10000\nLimitNOFILE=1000000\n\n[Install]\nWantedBy=multi-user.target\n\n```\n\n``` ln -s /usr/local/xray/xray.service /etc/systemd/system/ ```\n``` sudo systemctl daemon-reload ```\n\n### 1.4 FHS \n\n```  bash -c \"$(curl -L https://github.com/XTLS/Xray-install/raw/main/install-release.sh)\" @ install ```\n\n**TMDwinrar.rar**\n<img src=\"/images/045.v2raya.md.00.png\" width=100% height=100% />\n\n\n### FHS\n\n\n<img src=\"/images/045.v2raya.md.000.png\" width=100% height=100% />\n\n##  V2RayA \n\n### 2.1 \n\n####  V2RayA \n\n``` wget -qO - https://apt.v2raya.org/key/public-key.asc | sudo tee /etc/apt/trusted.gpg.d/v2raya.asc ```\n\n####  V2RayA \n\n``` echo \"deb https://apt.v2raya.org/ v2raya main\" | sudo tee /etc/apt/sources.list.d/v2raya.list ```\n\n####  V2RayA \n\n``` sudo apt update && sudo apt install v2raya ```\n\n### 2.2 deb \n\n#### \nhttps://github.com/v2rayA/v2rayA/releases\n\n#### \n\n``` sudo apt install ./$PATH/istaller_debian_amd64_2.0.5.deb ```\n\n****\n\n\n##  V2RayA \n\n\nV2RayAxray\n<img src=\"/images/045.v2raya.md.01.png\" width=100% height=100% />\n<img src=\"/images/045.v2raya.md.02.png\" width=100% height=100% />\n\n\n\n\n\n geosite.dat, geoip.datv2ray-core \n<img src=\"/images/045.v2raya.md.03.png\" width=100% height=100% />\n\n\n ** v2rayxray FHS v2raya **\n","slug":"045.v2raya","published":1,"updated":"2023-07-28T06:05:55.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbfx004ayknr3f5m2ygx","content":"<blockquote>\n<p>ENV<br>OS: Debian GNU&#x2F;Linux 12 (bookworm) x86_64</p>\n</blockquote>\n<h2 id=\"-xray-core-\"><a href=\"#-xray-core-\" class=\"headerlink\" title=\" xray-core \"></a> xray-core </h2><h3 id=\"1-1-\"><a href=\"#1-1-\" class=\"headerlink\" title=\"1.1 \"></a>1.1 </h3><p><a href=\"https://github.com/XTLS/Xray-core/releases\">https://github.com/XTLS/Xray-core/releases</a><br></p>\n<h3 id=\"1-2-\"><a href=\"#1-2-\" class=\"headerlink\" title=\"1.2 \"></a>1.2 </h3><p> <strong>xray<code></code> <a href=\"https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard\">FHS</a> </strong></p>\n<p><code>sudo mkdir /xray</code><br><code> sudo unzip Xray-linux-64.zip -d /usr/local/xray</code></p>\n<h3 id=\"1-3-systemd\"><a href=\"#1-3-systemd\" class=\"headerlink\" title=\"1.3 systemd\"></a>1.3 systemd</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># /etc/systemd/system/xray.service</span></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Xray Service</span><br><span class=\"line\">Documentation=https://github.com/xtls</span><br><span class=\"line\">After=network.target nss-lookup.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">User=root</span><br><span class=\"line\">CapabilityBoundingSet=CAP_NET_ADMIN CAP_NET_BIND_SERVICE</span><br><span class=\"line\">AmbientCapabilities=CAP_NET_ADMIN CAP_NET_BIND_SERVICE</span><br><span class=\"line\">NoNewPrivileges=<span class=\"literal\">true</span></span><br><span class=\"line\">ExecStart=/usr/local/xray/xray run -config /usr/local/xray/config.json</span><br><span class=\"line\">Restart=on-failure</span><br><span class=\"line\">RestartPreventExitStatus=23</span><br><span class=\"line\">LimitNPROC=10000</span><br><span class=\"line\">LimitNOFILE=1000000</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><code>ln -s /usr/local/xray/xray.service /etc/systemd/system/</code><br><code>sudo systemctl daemon-reload</code></p>\n<h3 id=\"1-4-FHS\"><a href=\"#1-4-FHS\" class=\"headerlink\" title=\"1.4 FHS\"></a>1.4 FHS</h3><p><code> bash -c &quot;$(curl -L https://github.com/XTLS/Xray-install/raw/main/install-release.sh)&quot; @ install</code></p>\n<p><strong>TMDwinrar.rar</strong><br><img src=\"/images/045.v2raya.md.00.png\" width=100% height=100% /></p>\n<h3 id=\"FHS\"><a href=\"#FHS\" class=\"headerlink\" title=\"FHS\"></a>FHS</h3><p><br><img src=\"/images/045.v2raya.md.000.png\" width=100% height=100% /></p>\n<h2 id=\"-V2RayA-\"><a href=\"#-V2RayA-\" class=\"headerlink\" title=\" V2RayA \"></a> V2RayA </h2><h3 id=\"2-1-\"><a href=\"#2-1-\" class=\"headerlink\" title=\"2.1 \"></a>2.1 </h3><h4 id=\"-V2RayA-\"><a href=\"#-V2RayA-\" class=\"headerlink\" title=\" V2RayA \"></a> V2RayA </h4><p><code>wget -qO - https://apt.v2raya.org/key/public-key.asc | sudo tee /etc/apt/trusted.gpg.d/v2raya.asc</code></p>\n<h4 id=\"-V2RayA-\"><a href=\"#-V2RayA-\" class=\"headerlink\" title=\" V2RayA \"></a> V2RayA </h4><p><code>echo &quot;deb https://apt.v2raya.org/ v2raya main&quot; | sudo tee /etc/apt/sources.list.d/v2raya.list</code></p>\n<h4 id=\"-V2RayA\"><a href=\"#-V2RayA\" class=\"headerlink\" title=\" V2RayA\"></a> V2RayA</h4><p><code>sudo apt update &amp;&amp; sudo apt install v2raya</code></p>\n<h3 id=\"2-2-deb-\"><a href=\"#2-2-deb-\" class=\"headerlink\" title=\"2.2 deb \"></a>2.2 deb </h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><a href=\"https://github.com/v2rayA/v2rayA/releases\">https://github.com/v2rayA/v2rayA/releases</a></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><code>sudo apt install ./$PATH/istaller_debian_amd64_2.0.5.deb</code></p>\n<p><strong></strong></p>\n<h2 id=\"-V2RayA-\"><a href=\"#-V2RayA-\" class=\"headerlink\" title=\" V2RayA \"></a> V2RayA </h2><p>V2RayAxray<br><img src=\"/images/045.v2raya.md.01.png\" width=100% height=100% /><br><img src=\"/images/045.v2raya.md.02.png\" width=100% height=100% /></p>\n<p> geosite.dat, geoip.datv2ray-core <br><img src=\"/images/045.v2raya.md.03.png\" width=100% height=100% /></p>\n<p> <strong> v2rayxray FHS v2raya </strong></p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>ENV<br>OS: Debian GNU&#x2F;Linux 12 (bookworm) x86_64</p>\n</blockquote>\n<h2 id=\"-xray-core-\"><a href=\"#-xray-core-\" class=\"headerlink\" title=\" xray-core \"></a> xray-core </h2><h3 id=\"1-1-\"><a href=\"#1-1-\" class=\"headerlink\" title=\"1.1 \"></a>1.1 </h3><p><a href=\"https://github.com/XTLS/Xray-core/releases\">https://github.com/XTLS/Xray-core/releases</a><br></p>\n<h3 id=\"1-2-\"><a href=\"#1-2-\" class=\"headerlink\" title=\"1.2 \"></a>1.2 </h3><p> <strong>xray<code></code> <a href=\"https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard\">FHS</a> </strong></p>\n<p><code>sudo mkdir /xray</code><br><code> sudo unzip Xray-linux-64.zip -d /usr/local/xray</code></p>\n<h3 id=\"1-3-systemd\"><a href=\"#1-3-systemd\" class=\"headerlink\" title=\"1.3 systemd\"></a>1.3 systemd</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># /etc/systemd/system/xray.service</span></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Xray Service</span><br><span class=\"line\">Documentation=https://github.com/xtls</span><br><span class=\"line\">After=network.target nss-lookup.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">User=root</span><br><span class=\"line\">CapabilityBoundingSet=CAP_NET_ADMIN CAP_NET_BIND_SERVICE</span><br><span class=\"line\">AmbientCapabilities=CAP_NET_ADMIN CAP_NET_BIND_SERVICE</span><br><span class=\"line\">NoNewPrivileges=<span class=\"literal\">true</span></span><br><span class=\"line\">ExecStart=/usr/local/xray/xray run -config /usr/local/xray/config.json</span><br><span class=\"line\">Restart=on-failure</span><br><span class=\"line\">RestartPreventExitStatus=23</span><br><span class=\"line\">LimitNPROC=10000</span><br><span class=\"line\">LimitNOFILE=1000000</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><code>ln -s /usr/local/xray/xray.service /etc/systemd/system/</code><br><code>sudo systemctl daemon-reload</code></p>\n<h3 id=\"1-4-FHS\"><a href=\"#1-4-FHS\" class=\"headerlink\" title=\"1.4 FHS\"></a>1.4 FHS</h3><p><code> bash -c &quot;$(curl -L https://github.com/XTLS/Xray-install/raw/main/install-release.sh)&quot; @ install</code></p>\n<p><strong>TMDwinrar.rar</strong><br><img src=\"/images/045.v2raya.md.00.png\" width=100% height=100% /></p>\n<h3 id=\"FHS\"><a href=\"#FHS\" class=\"headerlink\" title=\"FHS\"></a>FHS</h3><p><br><img src=\"/images/045.v2raya.md.000.png\" width=100% height=100% /></p>\n<h2 id=\"-V2RayA-\"><a href=\"#-V2RayA-\" class=\"headerlink\" title=\" V2RayA \"></a> V2RayA </h2><h3 id=\"2-1-\"><a href=\"#2-1-\" class=\"headerlink\" title=\"2.1 \"></a>2.1 </h3><h4 id=\"-V2RayA-\"><a href=\"#-V2RayA-\" class=\"headerlink\" title=\" V2RayA \"></a> V2RayA </h4><p><code>wget -qO - https://apt.v2raya.org/key/public-key.asc | sudo tee /etc/apt/trusted.gpg.d/v2raya.asc</code></p>\n<h4 id=\"-V2RayA-\"><a href=\"#-V2RayA-\" class=\"headerlink\" title=\" V2RayA \"></a> V2RayA </h4><p><code>echo &quot;deb https://apt.v2raya.org/ v2raya main&quot; | sudo tee /etc/apt/sources.list.d/v2raya.list</code></p>\n<h4 id=\"-V2RayA\"><a href=\"#-V2RayA\" class=\"headerlink\" title=\" V2RayA\"></a> V2RayA</h4><p><code>sudo apt update &amp;&amp; sudo apt install v2raya</code></p>\n<h3 id=\"2-2-deb-\"><a href=\"#2-2-deb-\" class=\"headerlink\" title=\"2.2 deb \"></a>2.2 deb </h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><a href=\"https://github.com/v2rayA/v2rayA/releases\">https://github.com/v2rayA/v2rayA/releases</a></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><code>sudo apt install ./$PATH/istaller_debian_amd64_2.0.5.deb</code></p>\n<p><strong></strong></p>\n<h2 id=\"-V2RayA-\"><a href=\"#-V2RayA-\" class=\"headerlink\" title=\" V2RayA \"></a> V2RayA </h2><p>V2RayAxray<br><img src=\"/images/045.v2raya.md.01.png\" width=100% height=100% /><br><img src=\"/images/045.v2raya.md.02.png\" width=100% height=100% /></p>\n<p> geosite.dat, geoip.datv2ray-core <br><img src=\"/images/045.v2raya.md.03.png\" width=100% height=100% /></p>\n<p> <strong> v2rayxray FHS v2raya </strong></p>\n"},{"title":" docker  sytemctl ","date":"2023-09-11T14:09:11.000Z","_content":"\n\n##   docker \n\n\nhttps://download.docker.com/linux/static/stable/x86_64/\n\n##   /usr/local/docker\n\ndocker\n\n``` groupadd docker```\n``` useradd -g docker docker```\n\n``` tar -xzvf docker-19.03.1.tgz ```\n``` mv docker /usr/local/ ```\n\n<img src=\"/images/046.docker_install_manual.md.01.png\" width=100% height=100% />\n\n##   systemctl  docker \n\n\nhttps://github.com/moby/moby/blob/master/contrib/init/systemd/docker.service\n\n**docker.service**\n```bash\n# vim /usr/local/docker/docker.service\n[Unit]\nDescription=Docker Application Container Engine\nDocumentation=https://docs.docker.com\nAfter=network-online.target docker.socket firewalld.service\nWants=network-online.target \nRequires=docker.socket\n\n[Service]\nType=notify\n# the default is not to use systemd for cgroups because the delegate issues still\n# exists and systemd currently does not support the cgroup feature set required\n# for containers run by docker\nExecStart=/usr/local/docker/dockerd\n# ExecStart=/usr/local/docker/dockerd -H fd:// --containerd=/run/containerd/containerd.sock  ## \nExecReload=/bin/kill -s HUP $MAINPID\nTimeoutStartSec=0\nRestartSec=2\nRestart=always\n\n# Note that StartLimit* options were moved from \"Service\" to \"Unit\" in systemd 229.\n# Both the old, and new location are accepted by systemd 229 and up, so using the old location\n# to make them work for either version of systemd.\nStartLimitBurst=3\n\n# Note that StartLimitInterval was renamed to StartLimitIntervalSec in systemd 230.\n# Both the old, and new name are accepted by systemd 230 and up, so using the old name to make\n# this option work for either version of systemd.\nStartLimitInterval=60s\n\n# Having non-zero Limit*s causes performance problems due to accounting overhead\n# in the kernel. We recommend using cgroups to do container-local accounting.\nLimitNPROC=infinity\nLimitCORE=infinity\n\n# Comment TasksMax if your systemd version does not support it.\n# Only systemd 226 and above support this option.\nTasksMax=infinity\n\n# set delegate yes so that systemd does not reset the cgroups of docker containers\nDelegate=yes\n\n# kill only the docker process, not all processes in the cgroup\nKillMode=process\nOOMScoreAdjust=-500\n\n[Install]\nWantedBy=multi-user.target\n\n```\n\n**docker.socket**\n\n``` bash\n# vim /usr/local/docker/docker.socket\n[Unit]\nDescription=Docker Socket for the API\n\n[Socket]\n# If /var/run is not implemented as a symlink to /run, you may need to\n# specify ListenStream=/var/run/docker.sock instead.\nListenStream=/var/run/docker.sock\nSocketMode=0660\nSocketUser=root\nSocketGroup=docker\n\n[Install]\nWantedBy=sockets.target\n\n```\n\n### 3.1  containerd \n\n``` ln -s /usr/local/docker/containerd /usr/bin/ ```\n``` ln -s /usr/local/docker/dockerd /usr/bin/ ```\n``` ln -s /usr/local/docker/docker-init /usr/bin/ ```\n``` ln -s /usr/local/docker/docker-proxy /usr/bin/ ```\n``` ln -s /usr/local/docker/runc /usr/bin/ ```\n\n\n### 3.2  systemd\n\n``` systemctl daemon-reload ```\n\n### 3.3  network-online.target  firewalld.service \n\n``` systemctl status network-online.target```\n``` systemctl status firewalld.service```\n\n\n### 3.4 systemctl  docker \n\n``` systemctl enable docker.socket --now```\n``` systemctl enable docker.service --now```\n\n### 3.5  docker  PATH\n\n``` ln -s /usr/local/docker/docker /usr/bin/ ```\n``` ln -s /usr/local/docker/dockerd /usr/bin/ ```\n\n##  \n\n### 4.1  /usr/local/docker \n\n**** FHS/usr/bin/usr/local/docker\n\n### 4.2 containerd/usr/bin\n****\n<img src=\"/images/046.docker_install_manual.md.02.png\" width=100% height=100% />\n\n### 4.3  ExecStart \n\n ``` ExecStart=/usr/local/docker/dockerd -H fd:// --containerd=/run/containerd/containerd.sock ```\n1. ```-H fd```\n\t Docker  (fd)  Docker \n\t Docker  Docker \n2. ```--containerd=/run/containerd/containerd.sock```\n\t Docker  containerd  Unix \n\tContainerd Docker \n\n\n ``` ExecStart=/usr/local/docker/dockerd ```  \n\t\t Docker  Unix  /var/run/docker.sock  Docker \n\t\t``` docker.socket``` ```ListenStream=/var/run/docker.sock```\n\n\n**** ```ExecStart=/usr/local/docker/dockerd -H fd:// --containerd=/run/containerd/containerd.sock``` \n```containerd```\n ```After```  ```Wants```  ```containerd.service``` \n\n\n### 4.4 systemctl  docker \n ```containerd``` \n\n**docker.service**\n``` bash\n[Unit]\nDescription=Docker Application Container Engine\nDocumentation=https://docs.docker.com\nAfter=network-online.target docker.socket firewalld.service containerd.service time-set.target\nWants=network-online.target containerd.service\nRequires=docker.socket\n\n[Service]\nType=notify\nWorkingDirectory=/usr/local/docker/\nExecStart=/usr/local/docker/dockerd -H fd:// --containerd=/run/containerd/containerd.sock\nExecReload=/bin/kill -s HUP $MAINPID\nTimeoutStartSec=0\nRestartSec=2\nRestart=always\nStartLimitBurst=3\nStartLimitInterval=60s\nLimitNPROC=infinity\nLimitCORE=infinity\nTasksMax=infinity\nDelegate=yes\nKillMode=process\nOOMScoreAdjust=-500\n\n[Install]\nWantedBy=multi-user.target\n```\n\n**docker.socket**\n``` bash\n[Unit]\nDescription=Docker Socket for the API\n\n[Socket]\n# If /var/run is not implemented as a symlink to /run, you may need to\n# specify ListenStream=/var/run/docker.sock instead.\nListenStream=/var/run/docker.sock\nSocketMode=0660\nSocketUser=root\nSocketGroup=docker\n\n[Install]\nWantedBy=sockets.target\n\n\n```\n\n","source":"_posts/046.docker_install_manual.md","raw":"---\ntitle:  docker  sytemctl \ndate: 2023-9-11 22:09:11\ncategories: \n- [Linux]\n- [Docker]\ntags: \n- docker\n- systemd\n---\n\n\n##   docker \n\n\nhttps://download.docker.com/linux/static/stable/x86_64/\n\n##   /usr/local/docker\n\ndocker\n\n``` groupadd docker```\n``` useradd -g docker docker```\n\n``` tar -xzvf docker-19.03.1.tgz ```\n``` mv docker /usr/local/ ```\n\n<img src=\"/images/046.docker_install_manual.md.01.png\" width=100% height=100% />\n\n##   systemctl  docker \n\n\nhttps://github.com/moby/moby/blob/master/contrib/init/systemd/docker.service\n\n**docker.service**\n```bash\n# vim /usr/local/docker/docker.service\n[Unit]\nDescription=Docker Application Container Engine\nDocumentation=https://docs.docker.com\nAfter=network-online.target docker.socket firewalld.service\nWants=network-online.target \nRequires=docker.socket\n\n[Service]\nType=notify\n# the default is not to use systemd for cgroups because the delegate issues still\n# exists and systemd currently does not support the cgroup feature set required\n# for containers run by docker\nExecStart=/usr/local/docker/dockerd\n# ExecStart=/usr/local/docker/dockerd -H fd:// --containerd=/run/containerd/containerd.sock  ## \nExecReload=/bin/kill -s HUP $MAINPID\nTimeoutStartSec=0\nRestartSec=2\nRestart=always\n\n# Note that StartLimit* options were moved from \"Service\" to \"Unit\" in systemd 229.\n# Both the old, and new location are accepted by systemd 229 and up, so using the old location\n# to make them work for either version of systemd.\nStartLimitBurst=3\n\n# Note that StartLimitInterval was renamed to StartLimitIntervalSec in systemd 230.\n# Both the old, and new name are accepted by systemd 230 and up, so using the old name to make\n# this option work for either version of systemd.\nStartLimitInterval=60s\n\n# Having non-zero Limit*s causes performance problems due to accounting overhead\n# in the kernel. We recommend using cgroups to do container-local accounting.\nLimitNPROC=infinity\nLimitCORE=infinity\n\n# Comment TasksMax if your systemd version does not support it.\n# Only systemd 226 and above support this option.\nTasksMax=infinity\n\n# set delegate yes so that systemd does not reset the cgroups of docker containers\nDelegate=yes\n\n# kill only the docker process, not all processes in the cgroup\nKillMode=process\nOOMScoreAdjust=-500\n\n[Install]\nWantedBy=multi-user.target\n\n```\n\n**docker.socket**\n\n``` bash\n# vim /usr/local/docker/docker.socket\n[Unit]\nDescription=Docker Socket for the API\n\n[Socket]\n# If /var/run is not implemented as a symlink to /run, you may need to\n# specify ListenStream=/var/run/docker.sock instead.\nListenStream=/var/run/docker.sock\nSocketMode=0660\nSocketUser=root\nSocketGroup=docker\n\n[Install]\nWantedBy=sockets.target\n\n```\n\n### 3.1  containerd \n\n``` ln -s /usr/local/docker/containerd /usr/bin/ ```\n``` ln -s /usr/local/docker/dockerd /usr/bin/ ```\n``` ln -s /usr/local/docker/docker-init /usr/bin/ ```\n``` ln -s /usr/local/docker/docker-proxy /usr/bin/ ```\n``` ln -s /usr/local/docker/runc /usr/bin/ ```\n\n\n### 3.2  systemd\n\n``` systemctl daemon-reload ```\n\n### 3.3  network-online.target  firewalld.service \n\n``` systemctl status network-online.target```\n``` systemctl status firewalld.service```\n\n\n### 3.4 systemctl  docker \n\n``` systemctl enable docker.socket --now```\n``` systemctl enable docker.service --now```\n\n### 3.5  docker  PATH\n\n``` ln -s /usr/local/docker/docker /usr/bin/ ```\n``` ln -s /usr/local/docker/dockerd /usr/bin/ ```\n\n##  \n\n### 4.1  /usr/local/docker \n\n**** FHS/usr/bin/usr/local/docker\n\n### 4.2 containerd/usr/bin\n****\n<img src=\"/images/046.docker_install_manual.md.02.png\" width=100% height=100% />\n\n### 4.3  ExecStart \n\n ``` ExecStart=/usr/local/docker/dockerd -H fd:// --containerd=/run/containerd/containerd.sock ```\n1. ```-H fd```\n\t Docker  (fd)  Docker \n\t Docker  Docker \n2. ```--containerd=/run/containerd/containerd.sock```\n\t Docker  containerd  Unix \n\tContainerd Docker \n\n\n ``` ExecStart=/usr/local/docker/dockerd ```  \n\t\t Docker  Unix  /var/run/docker.sock  Docker \n\t\t``` docker.socket``` ```ListenStream=/var/run/docker.sock```\n\n\n**** ```ExecStart=/usr/local/docker/dockerd -H fd:// --containerd=/run/containerd/containerd.sock``` \n```containerd```\n ```After```  ```Wants```  ```containerd.service``` \n\n\n### 4.4 systemctl  docker \n ```containerd``` \n\n**docker.service**\n``` bash\n[Unit]\nDescription=Docker Application Container Engine\nDocumentation=https://docs.docker.com\nAfter=network-online.target docker.socket firewalld.service containerd.service time-set.target\nWants=network-online.target containerd.service\nRequires=docker.socket\n\n[Service]\nType=notify\nWorkingDirectory=/usr/local/docker/\nExecStart=/usr/local/docker/dockerd -H fd:// --containerd=/run/containerd/containerd.sock\nExecReload=/bin/kill -s HUP $MAINPID\nTimeoutStartSec=0\nRestartSec=2\nRestart=always\nStartLimitBurst=3\nStartLimitInterval=60s\nLimitNPROC=infinity\nLimitCORE=infinity\nTasksMax=infinity\nDelegate=yes\nKillMode=process\nOOMScoreAdjust=-500\n\n[Install]\nWantedBy=multi-user.target\n```\n\n**docker.socket**\n``` bash\n[Unit]\nDescription=Docker Socket for the API\n\n[Socket]\n# If /var/run is not implemented as a symlink to /run, you may need to\n# specify ListenStream=/var/run/docker.sock instead.\nListenStream=/var/run/docker.sock\nSocketMode=0660\nSocketUser=root\nSocketGroup=docker\n\n[Install]\nWantedBy=sockets.target\n\n\n```\n\n","slug":"046.docker_install_manual","published":1,"updated":"2023-09-12T07:27:20.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbfz004eyknr5v0nfvtt","content":"<h2 id=\"--docker-\"><a href=\"#--docker-\" class=\"headerlink\" title=\"  docker \"></a>  docker </h2><p><br><a href=\"https://download.docker.com/linux/static/stable/x86_64/\">https://download.docker.com/linux/static/stable/x86_64/</a></p>\n<h2 id=\"--usr-local-docker\"><a href=\"#--usr-local-docker\" class=\"headerlink\" title=\"  &#x2F;usr&#x2F;local&#x2F;docker\"></a>  &#x2F;usr&#x2F;local&#x2F;docker</h2><p>docker</p>\n<p><code> groupadd docker</code><br><code> useradd -g docker docker</code></p>\n<p><code>tar -xzvf docker-19.03.1.tgz</code><br><code>mv docker /usr/local/</code></p>\n<img src=\"/images/046.docker_install_manual.md.01.png\" width=100% height=100% />\n\n<h2 id=\"--systemctl--docker-\"><a href=\"#--systemctl--docker-\" class=\"headerlink\" title=\"  systemctl  docker \"></a>  systemctl  docker </h2><p><br><a href=\"https://github.com/moby/moby/blob/master/contrib/init/systemd/docker.service\">https://github.com/moby/moby/blob/master/contrib/init/systemd/docker.service</a></p>\n<p><strong>docker.service</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># vim /usr/local/docker/docker.service</span></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Docker Application Container Engine</span><br><span class=\"line\">Documentation=https://docs.docker.com</span><br><span class=\"line\">After=network-online.target docker.socket firewalld.service</span><br><span class=\"line\">Wants=network-online.target </span><br><span class=\"line\">Requires=docker.socket</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=notify</span><br><span class=\"line\"><span class=\"comment\"># the default is not to use systemd for cgroups because the delegate issues still</span></span><br><span class=\"line\"><span class=\"comment\"># exists and systemd currently does not support the cgroup feature set required</span></span><br><span class=\"line\"><span class=\"comment\"># for containers run by docker</span></span><br><span class=\"line\">ExecStart=/usr/local/docker/dockerd</span><br><span class=\"line\"><span class=\"comment\"># ExecStart=/usr/local/docker/dockerd -H fd:// --containerd=/run/containerd/containerd.sock  ## </span></span><br><span class=\"line\">ExecReload=/bin/kill -s HUP <span class=\"variable\">$MAINPID</span></span><br><span class=\"line\">TimeoutStartSec=0</span><br><span class=\"line\">RestartSec=2</span><br><span class=\"line\">Restart=always</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Note that StartLimit* options were moved from &quot;Service&quot; to &quot;Unit&quot; in systemd 229.</span></span><br><span class=\"line\"><span class=\"comment\"># Both the old, and new location are accepted by systemd 229 and up, so using the old location</span></span><br><span class=\"line\"><span class=\"comment\"># to make them work for either version of systemd.</span></span><br><span class=\"line\">StartLimitBurst=3</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Note that StartLimitInterval was renamed to StartLimitIntervalSec in systemd 230.</span></span><br><span class=\"line\"><span class=\"comment\"># Both the old, and new name are accepted by systemd 230 and up, so using the old name to make</span></span><br><span class=\"line\"><span class=\"comment\"># this option work for either version of systemd.</span></span><br><span class=\"line\">StartLimitInterval=60s</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Having non-zero Limit*s causes performance problems due to accounting overhead</span></span><br><span class=\"line\"><span class=\"comment\"># in the kernel. We recommend using cgroups to do container-local accounting.</span></span><br><span class=\"line\">LimitNPROC=infinity</span><br><span class=\"line\">LimitCORE=infinity</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Comment TasksMax if your systemd version does not support it.</span></span><br><span class=\"line\"><span class=\"comment\"># Only systemd 226 and above support this option.</span></span><br><span class=\"line\">TasksMax=infinity</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># set delegate yes so that systemd does not reset the cgroups of docker containers</span></span><br><span class=\"line\">Delegate=<span class=\"built_in\">yes</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># kill only the docker process, not all processes in the cgroup</span></span><br><span class=\"line\">KillMode=process</span><br><span class=\"line\">OOMScoreAdjust=-500</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>docker.socket</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># vim /usr/local/docker/docker.socket</span></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Docker Socket <span class=\"keyword\">for</span> the API</span><br><span class=\"line\"></span><br><span class=\"line\">[Socket]</span><br><span class=\"line\"><span class=\"comment\"># If /var/run is not implemented as a symlink to /run, you may need to</span></span><br><span class=\"line\"><span class=\"comment\"># specify ListenStream=/var/run/docker.sock instead.</span></span><br><span class=\"line\">ListenStream=/var/run/docker.sock</span><br><span class=\"line\">SocketMode=0660</span><br><span class=\"line\">SocketUser=root</span><br><span class=\"line\">SocketGroup=docker</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=sockets.target</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-1--containerd-\"><a href=\"#3-1--containerd-\" class=\"headerlink\" title=\"3.1  containerd \"></a>3.1  containerd </h3><p><code>ln -s /usr/local/docker/containerd /usr/bin/</code><br><code>ln -s /usr/local/docker/dockerd /usr/bin/</code><br><code>ln -s /usr/local/docker/docker-init /usr/bin/</code><br><code>ln -s /usr/local/docker/docker-proxy /usr/bin/</code><br><code>ln -s /usr/local/docker/runc /usr/bin/</code></p>\n<h3 id=\"3-2--systemd\"><a href=\"#3-2--systemd\" class=\"headerlink\" title=\"3.2  systemd\"></a>3.2  systemd</h3><p><code>systemctl daemon-reload</code></p>\n<h3 id=\"3-3--network-online-target--firewalld-service-\"><a href=\"#3-3--network-online-target--firewalld-service-\" class=\"headerlink\" title=\"3.3  network-online.target  firewalld.service \"></a>3.3  network-online.target  firewalld.service </h3><p><code> systemctl status network-online.target</code><br><code> systemctl status firewalld.service</code></p>\n<h3 id=\"3-4-systemctl--docker-\"><a href=\"#3-4-systemctl--docker-\" class=\"headerlink\" title=\"3.4 systemctl  docker \"></a>3.4 systemctl  docker </h3><p><code> systemctl enable docker.socket --now</code><br><code> systemctl enable docker.service --now</code></p>\n<h3 id=\"3-5--docker--PATH\"><a href=\"#3-5--docker--PATH\" class=\"headerlink\" title=\"3.5  docker  PATH\"></a>3.5  docker  PATH</h3><p><code>ln -s /usr/local/docker/docker /usr/bin/</code><br><code>ln -s /usr/local/docker/dockerd /usr/bin/</code></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"4-1--usr-local-docker\"><a href=\"#4-1--usr-local-docker\" class=\"headerlink\" title=\"4.1  &#x2F;usr&#x2F;local&#x2F;docker\"></a>4.1  &#x2F;usr&#x2F;local&#x2F;docker</h3><p><strong></strong> FHS&#x2F;usr&#x2F;bin&#x2F;usr&#x2F;local&#x2F;docker</p>\n<h3 id=\"4-2-containerd-usr-bin\"><a href=\"#4-2-containerd-usr-bin\" class=\"headerlink\" title=\"4.2 containerd&#x2F;usr&#x2F;bin\"></a>4.2 containerd&#x2F;usr&#x2F;bin</h3><p><strong></strong><br><img src=\"/images/046.docker_install_manual.md.02.png\" width=100% height=100% /></p>\n<h3 id=\"4-3--ExecStart-\"><a href=\"#4-3--ExecStart-\" class=\"headerlink\" title=\"4.3  ExecStart \"></a>4.3  ExecStart </h3><p> <code>ExecStart=/usr/local/docker/dockerd -H fd:// --containerd=/run/containerd/containerd.sock</code></p>\n<ol>\n<li><code>-H fd</code><br>  Docker  (fd)  Docker <br>  Docker  Docker </li>\n<li><code>--containerd=/run/containerd/containerd.sock</code><br>  Docker  containerd  Unix <br> Containerd Docker </li>\n</ol>\n<p> <code>ExecStart=/usr/local/docker/dockerd</code><br>         Docker  Unix  &#x2F;var&#x2F;run&#x2F;docker.sock  Docker <br>        <code> docker.socket</code> <code>ListenStream=/var/run/docker.sock</code></p>\n<p><strong></strong> <code>ExecStart=/usr/local/docker/dockerd -H fd:// --containerd=/run/containerd/containerd.sock</code><br><code>containerd</code><br> <code>After</code>  <code>Wants</code>  <code>containerd.service</code> </p>\n<h3 id=\"4-4-systemctl--docker-\"><a href=\"#4-4-systemctl--docker-\" class=\"headerlink\" title=\"4.4 systemctl  docker \"></a>4.4 systemctl  docker </h3><p> <code>containerd</code> </p>\n<p><strong>docker.service</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Docker Application Container Engine</span><br><span class=\"line\">Documentation=https://docs.docker.com</span><br><span class=\"line\">After=network-online.target docker.socket firewalld.service containerd.service time-set.target</span><br><span class=\"line\">Wants=network-online.target containerd.service</span><br><span class=\"line\">Requires=docker.socket</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=notify</span><br><span class=\"line\">WorkingDirectory=/usr/local/docker/</span><br><span class=\"line\">ExecStart=/usr/local/docker/dockerd -H fd:// --containerd=/run/containerd/containerd.sock</span><br><span class=\"line\">ExecReload=/bin/kill -s HUP <span class=\"variable\">$MAINPID</span></span><br><span class=\"line\">TimeoutStartSec=0</span><br><span class=\"line\">RestartSec=2</span><br><span class=\"line\">Restart=always</span><br><span class=\"line\">StartLimitBurst=3</span><br><span class=\"line\">StartLimitInterval=60s</span><br><span class=\"line\">LimitNPROC=infinity</span><br><span class=\"line\">LimitCORE=infinity</span><br><span class=\"line\">TasksMax=infinity</span><br><span class=\"line\">Delegate=<span class=\"built_in\">yes</span></span><br><span class=\"line\">KillMode=process</span><br><span class=\"line\">OOMScoreAdjust=-500</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>\n\n<p><strong>docker.socket</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Docker Socket <span class=\"keyword\">for</span> the API</span><br><span class=\"line\"></span><br><span class=\"line\">[Socket]</span><br><span class=\"line\"><span class=\"comment\"># If /var/run is not implemented as a symlink to /run, you may need to</span></span><br><span class=\"line\"><span class=\"comment\"># specify ListenStream=/var/run/docker.sock instead.</span></span><br><span class=\"line\">ListenStream=/var/run/docker.sock</span><br><span class=\"line\">SocketMode=0660</span><br><span class=\"line\">SocketUser=root</span><br><span class=\"line\">SocketGroup=docker</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=sockets.target</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"--docker-\"><a href=\"#--docker-\" class=\"headerlink\" title=\"  docker \"></a>  docker </h2><p><br><a href=\"https://download.docker.com/linux/static/stable/x86_64/\">https://download.docker.com/linux/static/stable/x86_64/</a></p>\n<h2 id=\"--usr-local-docker\"><a href=\"#--usr-local-docker\" class=\"headerlink\" title=\"  &#x2F;usr&#x2F;local&#x2F;docker\"></a>  &#x2F;usr&#x2F;local&#x2F;docker</h2><p>docker</p>\n<p><code> groupadd docker</code><br><code> useradd -g docker docker</code></p>\n<p><code>tar -xzvf docker-19.03.1.tgz</code><br><code>mv docker /usr/local/</code></p>\n<img src=\"/images/046.docker_install_manual.md.01.png\" width=100% height=100% />\n\n<h2 id=\"--systemctl--docker-\"><a href=\"#--systemctl--docker-\" class=\"headerlink\" title=\"  systemctl  docker \"></a>  systemctl  docker </h2><p><br><a href=\"https://github.com/moby/moby/blob/master/contrib/init/systemd/docker.service\">https://github.com/moby/moby/blob/master/contrib/init/systemd/docker.service</a></p>\n<p><strong>docker.service</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># vim /usr/local/docker/docker.service</span></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Docker Application Container Engine</span><br><span class=\"line\">Documentation=https://docs.docker.com</span><br><span class=\"line\">After=network-online.target docker.socket firewalld.service</span><br><span class=\"line\">Wants=network-online.target </span><br><span class=\"line\">Requires=docker.socket</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=notify</span><br><span class=\"line\"><span class=\"comment\"># the default is not to use systemd for cgroups because the delegate issues still</span></span><br><span class=\"line\"><span class=\"comment\"># exists and systemd currently does not support the cgroup feature set required</span></span><br><span class=\"line\"><span class=\"comment\"># for containers run by docker</span></span><br><span class=\"line\">ExecStart=/usr/local/docker/dockerd</span><br><span class=\"line\"><span class=\"comment\"># ExecStart=/usr/local/docker/dockerd -H fd:// --containerd=/run/containerd/containerd.sock  ## </span></span><br><span class=\"line\">ExecReload=/bin/kill -s HUP <span class=\"variable\">$MAINPID</span></span><br><span class=\"line\">TimeoutStartSec=0</span><br><span class=\"line\">RestartSec=2</span><br><span class=\"line\">Restart=always</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Note that StartLimit* options were moved from &quot;Service&quot; to &quot;Unit&quot; in systemd 229.</span></span><br><span class=\"line\"><span class=\"comment\"># Both the old, and new location are accepted by systemd 229 and up, so using the old location</span></span><br><span class=\"line\"><span class=\"comment\"># to make them work for either version of systemd.</span></span><br><span class=\"line\">StartLimitBurst=3</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Note that StartLimitInterval was renamed to StartLimitIntervalSec in systemd 230.</span></span><br><span class=\"line\"><span class=\"comment\"># Both the old, and new name are accepted by systemd 230 and up, so using the old name to make</span></span><br><span class=\"line\"><span class=\"comment\"># this option work for either version of systemd.</span></span><br><span class=\"line\">StartLimitInterval=60s</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Having non-zero Limit*s causes performance problems due to accounting overhead</span></span><br><span class=\"line\"><span class=\"comment\"># in the kernel. We recommend using cgroups to do container-local accounting.</span></span><br><span class=\"line\">LimitNPROC=infinity</span><br><span class=\"line\">LimitCORE=infinity</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Comment TasksMax if your systemd version does not support it.</span></span><br><span class=\"line\"><span class=\"comment\"># Only systemd 226 and above support this option.</span></span><br><span class=\"line\">TasksMax=infinity</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># set delegate yes so that systemd does not reset the cgroups of docker containers</span></span><br><span class=\"line\">Delegate=<span class=\"built_in\">yes</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># kill only the docker process, not all processes in the cgroup</span></span><br><span class=\"line\">KillMode=process</span><br><span class=\"line\">OOMScoreAdjust=-500</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>docker.socket</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># vim /usr/local/docker/docker.socket</span></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Docker Socket <span class=\"keyword\">for</span> the API</span><br><span class=\"line\"></span><br><span class=\"line\">[Socket]</span><br><span class=\"line\"><span class=\"comment\"># If /var/run is not implemented as a symlink to /run, you may need to</span></span><br><span class=\"line\"><span class=\"comment\"># specify ListenStream=/var/run/docker.sock instead.</span></span><br><span class=\"line\">ListenStream=/var/run/docker.sock</span><br><span class=\"line\">SocketMode=0660</span><br><span class=\"line\">SocketUser=root</span><br><span class=\"line\">SocketGroup=docker</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=sockets.target</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-1--containerd-\"><a href=\"#3-1--containerd-\" class=\"headerlink\" title=\"3.1  containerd \"></a>3.1  containerd </h3><p><code>ln -s /usr/local/docker/containerd /usr/bin/</code><br><code>ln -s /usr/local/docker/dockerd /usr/bin/</code><br><code>ln -s /usr/local/docker/docker-init /usr/bin/</code><br><code>ln -s /usr/local/docker/docker-proxy /usr/bin/</code><br><code>ln -s /usr/local/docker/runc /usr/bin/</code></p>\n<h3 id=\"3-2--systemd\"><a href=\"#3-2--systemd\" class=\"headerlink\" title=\"3.2  systemd\"></a>3.2  systemd</h3><p><code>systemctl daemon-reload</code></p>\n<h3 id=\"3-3--network-online-target--firewalld-service-\"><a href=\"#3-3--network-online-target--firewalld-service-\" class=\"headerlink\" title=\"3.3  network-online.target  firewalld.service \"></a>3.3  network-online.target  firewalld.service </h3><p><code> systemctl status network-online.target</code><br><code> systemctl status firewalld.service</code></p>\n<h3 id=\"3-4-systemctl--docker-\"><a href=\"#3-4-systemctl--docker-\" class=\"headerlink\" title=\"3.4 systemctl  docker \"></a>3.4 systemctl  docker </h3><p><code> systemctl enable docker.socket --now</code><br><code> systemctl enable docker.service --now</code></p>\n<h3 id=\"3-5--docker--PATH\"><a href=\"#3-5--docker--PATH\" class=\"headerlink\" title=\"3.5  docker  PATH\"></a>3.5  docker  PATH</h3><p><code>ln -s /usr/local/docker/docker /usr/bin/</code><br><code>ln -s /usr/local/docker/dockerd /usr/bin/</code></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"4-1--usr-local-docker\"><a href=\"#4-1--usr-local-docker\" class=\"headerlink\" title=\"4.1  &#x2F;usr&#x2F;local&#x2F;docker\"></a>4.1  &#x2F;usr&#x2F;local&#x2F;docker</h3><p><strong></strong> FHS&#x2F;usr&#x2F;bin&#x2F;usr&#x2F;local&#x2F;docker</p>\n<h3 id=\"4-2-containerd-usr-bin\"><a href=\"#4-2-containerd-usr-bin\" class=\"headerlink\" title=\"4.2 containerd&#x2F;usr&#x2F;bin\"></a>4.2 containerd&#x2F;usr&#x2F;bin</h3><p><strong></strong><br><img src=\"/images/046.docker_install_manual.md.02.png\" width=100% height=100% /></p>\n<h3 id=\"4-3--ExecStart-\"><a href=\"#4-3--ExecStart-\" class=\"headerlink\" title=\"4.3  ExecStart \"></a>4.3  ExecStart </h3><p> <code>ExecStart=/usr/local/docker/dockerd -H fd:// --containerd=/run/containerd/containerd.sock</code></p>\n<ol>\n<li><code>-H fd</code><br>  Docker  (fd)  Docker <br>  Docker  Docker </li>\n<li><code>--containerd=/run/containerd/containerd.sock</code><br>  Docker  containerd  Unix <br> Containerd Docker </li>\n</ol>\n<p> <code>ExecStart=/usr/local/docker/dockerd</code><br>         Docker  Unix  &#x2F;var&#x2F;run&#x2F;docker.sock  Docker <br>        <code> docker.socket</code> <code>ListenStream=/var/run/docker.sock</code></p>\n<p><strong></strong> <code>ExecStart=/usr/local/docker/dockerd -H fd:// --containerd=/run/containerd/containerd.sock</code><br><code>containerd</code><br> <code>After</code>  <code>Wants</code>  <code>containerd.service</code> </p>\n<h3 id=\"4-4-systemctl--docker-\"><a href=\"#4-4-systemctl--docker-\" class=\"headerlink\" title=\"4.4 systemctl  docker \"></a>4.4 systemctl  docker </h3><p> <code>containerd</code> </p>\n<p><strong>docker.service</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Docker Application Container Engine</span><br><span class=\"line\">Documentation=https://docs.docker.com</span><br><span class=\"line\">After=network-online.target docker.socket firewalld.service containerd.service time-set.target</span><br><span class=\"line\">Wants=network-online.target containerd.service</span><br><span class=\"line\">Requires=docker.socket</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=notify</span><br><span class=\"line\">WorkingDirectory=/usr/local/docker/</span><br><span class=\"line\">ExecStart=/usr/local/docker/dockerd -H fd:// --containerd=/run/containerd/containerd.sock</span><br><span class=\"line\">ExecReload=/bin/kill -s HUP <span class=\"variable\">$MAINPID</span></span><br><span class=\"line\">TimeoutStartSec=0</span><br><span class=\"line\">RestartSec=2</span><br><span class=\"line\">Restart=always</span><br><span class=\"line\">StartLimitBurst=3</span><br><span class=\"line\">StartLimitInterval=60s</span><br><span class=\"line\">LimitNPROC=infinity</span><br><span class=\"line\">LimitCORE=infinity</span><br><span class=\"line\">TasksMax=infinity</span><br><span class=\"line\">Delegate=<span class=\"built_in\">yes</span></span><br><span class=\"line\">KillMode=process</span><br><span class=\"line\">OOMScoreAdjust=-500</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>\n\n<p><strong>docker.socket</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Docker Socket <span class=\"keyword\">for</span> the API</span><br><span class=\"line\"></span><br><span class=\"line\">[Socket]</span><br><span class=\"line\"><span class=\"comment\"># If /var/run is not implemented as a symlink to /run, you may need to</span></span><br><span class=\"line\"><span class=\"comment\"># specify ListenStream=/var/run/docker.sock instead.</span></span><br><span class=\"line\">ListenStream=/var/run/docker.sock</span><br><span class=\"line\">SocketMode=0660</span><br><span class=\"line\">SocketUser=root</span><br><span class=\"line\">SocketGroup=docker</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=sockets.target</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n"},{"title":"centos7.9  nginxtomcatredis","date":"2023-09-12T11:09:11.000Z","_content":"\n\n##   docker \n\n### 1  bash-completion\n\n``` yum install bash-completion bash-completion-extras.noarch```\n\n### 2 \n\n``` curl https://raw.githubusercontent.com/docker/docker-ce/master/components/cli/contrib/completion/bash/docker -o /etc/bash_completion.d/docker.sh ```\n\n### 3 source \n``` source /etc/bash_completion.d/docker.sh ```\n\n##  CentOS7.9 \n\n``` docker pull centos:centos7.9.2009 ```\n\n##   docker  nginx\n\n### 2.1 Dockerfile \n\n``` yaml\nFROM centos:centos7.9.2009\n\nMAINTAINER zhuang\n\n# centos7\nRUN sed -e 's|^mirrorlist=|#mirrorlist=|g' \\\n        -e 's|^#baseurl=http://mirror.centos.org/centos|baseurl=https://mirror.nju.edu.cn/centos|g' \\\n        -i.bak \\\n        /etc/yum.repos.d/CentOS-*.repo\n\n# nginx \nRUN yum install -y gcc gcc-c++ make automake autoconf libtool pcre pcre-devel zlib openssl openssl-devel\n\nWORKDIR /usr/local\n\nRUN curl -O https://nginx.org/download/nginx-1.24.0.tar.gz && \\\n    tar -xzvf nginx-1.24.0.tar.gz -C /usr/local && \\\n    mv /usr/local/nginx-1.24.0 /usr/local/nginx-1.24.0-src && \\\n    cd nginx-1.24.0-src && \\\n    ./configure --prefix=/usr/local/nginx-1.24.0 && \\\n    make && make install\n\n# Nginx\nEXPOSE 80\n\n# Nginx\nCMD [\"/usr/local/nginx-1.24.0/sbin/nginx\", \"-g\", \"daemon off;\"]\n```\n\n### 2.2 build\n\n``` docker build -t nginx1.24 . ```\n\n### 2.3 run \n\n``` docker run -d -p 80:80 nginx1.24 ```\n\n<img src=\"/images/047.docker_build_instances.md.01.png\" width=100% height=100% />\n\n##   docker  redis\n\n### 3.1 Dockerfile\n\n``` yaml\nFROM centos:centos7.9.2009\n\nMAINTAINER zhuang\n\n# centos7\nRUN sed -e 's|^mirrorlist=|#mirrorlist=|g' \\\n        -e 's|^#baseurl=http://mirror.centos.org/centos|baseurl=https://mirror.nju.edu.cn/centos|g' \\\n        -i.bak \\\n        /etc/yum.repos.d/CentOS-*.repo\n\n# redis  \nRUN yum -y install cpp binutils glibc glibc-kernheaders glibc-common glibc-devel gcc make gcc-c++ libstdc++-devel tcl\n\nWORKDIR /usr/local\n\nCOPY ./redis-7.2.1.tar.gz /usr/local\n\nRUN tar -xzvf redis-7.2.1.tar.gz && \\\n    cd redis-7.2.1 && \\\n    make PREFIX=/usr/local/redis7.2.1 install && \\\n    cp ./redis.conf /usr/local/redis7.2.1/redis.conf\n\n#  Redis\nEXPOSE 6379\n\n#  Redis\nENTRYPOINT /usr/local/redis7.2.1/bin/redis-server /usr/local/redis7.2.1/redis.conf\n```\n\n### 3.2 build\n\n``` docker build -t redis7.2.1 . ```\n\n### 3.3 run & verification\n\n``` docker run -d -p 6379:6379 ```\n``` docker exec -it peaceful_fermi /bin/sh ```\n\n<img src=\"/images/047.docker_build_instances.md.02.png\" width=100% height=100% />\n\n\n##   docker tomcat\n\n### 4.1 Dockerfile\n\n``` yaml\nFROM centos:centos7.9.2009\n\nMAINTAINER zhuang\n\n# # centos7\n# RUN sed -e 's|^mirrorlist=|#mirrorlist=|g' \\\n#         -e 's|^#baseurl=http://mirror.centos.org/centos|baseurl=https://mirror.nju.edu.cn/centos|g' \\\n#         -i.bak \\\n#         /etc/yum.repos.d/CentOS-*.repo\n\nADD ./apache-tomcat-8.5.93.tar.gz /usr/local/\nADD ./jdk-8u202-linux-x64.tar.gz /usr/local/\n#ADD ./setenv.sh /usr/lcoal/\n\nENV MYPATH /usr/local/\nWORKDIR $MYPATH\n\n#RUN cp setenv.sh /usr/local/apache-tomcat-8.5.93/bin/\n\n# javatomcat\nENV JAVA_HOME /usr/local/jdk1.8.0_202\nENV CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\nENV CATALINE_HOME /usr/local/apache-tomcat-8.5.93\nENV CATALINE_BASE /usr/local/apache-tomcat-8.5.93\nENV PATH $PATH:$JAVA_HOME/bin:$CATALINE_HOME/lib:$CATALINE_HOME/bin\n\n#  tomcat\nEXPOSE 8080\n\n#  tomcat\nCMD /usr/local/apache-tomcat-8.5.93/bin/startup.sh && tail -F /usr/local/apache-tomcat-8.5.93/logs/catalina.out\n```\n\n### 4.2 build\n\n``` docker build -t tomcat8.5.93 . ```\n\n### 4.3 run & verification\n\n``` docker run -d -p 8080:8080 tomcat8.5.93 ```\n\n<img src=\"/images/047.docker_build_instances.md.03.png\" width=100% height=100% />\n\n\n##  \n\n### 5.1 docker build  yum install \n\n  FROM   Dockerfile  yum \n","source":"_posts/047.docker_build_instances.md","raw":"---\ntitle: centos7.9  nginxtomcatredis\ndate: 2023-9-12 19:09:11\ncategories: \n- [Linux]\n- [Docker]\ntags: \n- docker\n- Dockerfile\n- \n---\n\n\n##   docker \n\n### 1  bash-completion\n\n``` yum install bash-completion bash-completion-extras.noarch```\n\n### 2 \n\n``` curl https://raw.githubusercontent.com/docker/docker-ce/master/components/cli/contrib/completion/bash/docker -o /etc/bash_completion.d/docker.sh ```\n\n### 3 source \n``` source /etc/bash_completion.d/docker.sh ```\n\n##  CentOS7.9 \n\n``` docker pull centos:centos7.9.2009 ```\n\n##   docker  nginx\n\n### 2.1 Dockerfile \n\n``` yaml\nFROM centos:centos7.9.2009\n\nMAINTAINER zhuang\n\n# centos7\nRUN sed -e 's|^mirrorlist=|#mirrorlist=|g' \\\n        -e 's|^#baseurl=http://mirror.centos.org/centos|baseurl=https://mirror.nju.edu.cn/centos|g' \\\n        -i.bak \\\n        /etc/yum.repos.d/CentOS-*.repo\n\n# nginx \nRUN yum install -y gcc gcc-c++ make automake autoconf libtool pcre pcre-devel zlib openssl openssl-devel\n\nWORKDIR /usr/local\n\nRUN curl -O https://nginx.org/download/nginx-1.24.0.tar.gz && \\\n    tar -xzvf nginx-1.24.0.tar.gz -C /usr/local && \\\n    mv /usr/local/nginx-1.24.0 /usr/local/nginx-1.24.0-src && \\\n    cd nginx-1.24.0-src && \\\n    ./configure --prefix=/usr/local/nginx-1.24.0 && \\\n    make && make install\n\n# Nginx\nEXPOSE 80\n\n# Nginx\nCMD [\"/usr/local/nginx-1.24.0/sbin/nginx\", \"-g\", \"daemon off;\"]\n```\n\n### 2.2 build\n\n``` docker build -t nginx1.24 . ```\n\n### 2.3 run \n\n``` docker run -d -p 80:80 nginx1.24 ```\n\n<img src=\"/images/047.docker_build_instances.md.01.png\" width=100% height=100% />\n\n##   docker  redis\n\n### 3.1 Dockerfile\n\n``` yaml\nFROM centos:centos7.9.2009\n\nMAINTAINER zhuang\n\n# centos7\nRUN sed -e 's|^mirrorlist=|#mirrorlist=|g' \\\n        -e 's|^#baseurl=http://mirror.centos.org/centos|baseurl=https://mirror.nju.edu.cn/centos|g' \\\n        -i.bak \\\n        /etc/yum.repos.d/CentOS-*.repo\n\n# redis  \nRUN yum -y install cpp binutils glibc glibc-kernheaders glibc-common glibc-devel gcc make gcc-c++ libstdc++-devel tcl\n\nWORKDIR /usr/local\n\nCOPY ./redis-7.2.1.tar.gz /usr/local\n\nRUN tar -xzvf redis-7.2.1.tar.gz && \\\n    cd redis-7.2.1 && \\\n    make PREFIX=/usr/local/redis7.2.1 install && \\\n    cp ./redis.conf /usr/local/redis7.2.1/redis.conf\n\n#  Redis\nEXPOSE 6379\n\n#  Redis\nENTRYPOINT /usr/local/redis7.2.1/bin/redis-server /usr/local/redis7.2.1/redis.conf\n```\n\n### 3.2 build\n\n``` docker build -t redis7.2.1 . ```\n\n### 3.3 run & verification\n\n``` docker run -d -p 6379:6379 ```\n``` docker exec -it peaceful_fermi /bin/sh ```\n\n<img src=\"/images/047.docker_build_instances.md.02.png\" width=100% height=100% />\n\n\n##   docker tomcat\n\n### 4.1 Dockerfile\n\n``` yaml\nFROM centos:centos7.9.2009\n\nMAINTAINER zhuang\n\n# # centos7\n# RUN sed -e 's|^mirrorlist=|#mirrorlist=|g' \\\n#         -e 's|^#baseurl=http://mirror.centos.org/centos|baseurl=https://mirror.nju.edu.cn/centos|g' \\\n#         -i.bak \\\n#         /etc/yum.repos.d/CentOS-*.repo\n\nADD ./apache-tomcat-8.5.93.tar.gz /usr/local/\nADD ./jdk-8u202-linux-x64.tar.gz /usr/local/\n#ADD ./setenv.sh /usr/lcoal/\n\nENV MYPATH /usr/local/\nWORKDIR $MYPATH\n\n#RUN cp setenv.sh /usr/local/apache-tomcat-8.5.93/bin/\n\n# javatomcat\nENV JAVA_HOME /usr/local/jdk1.8.0_202\nENV CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\nENV CATALINE_HOME /usr/local/apache-tomcat-8.5.93\nENV CATALINE_BASE /usr/local/apache-tomcat-8.5.93\nENV PATH $PATH:$JAVA_HOME/bin:$CATALINE_HOME/lib:$CATALINE_HOME/bin\n\n#  tomcat\nEXPOSE 8080\n\n#  tomcat\nCMD /usr/local/apache-tomcat-8.5.93/bin/startup.sh && tail -F /usr/local/apache-tomcat-8.5.93/logs/catalina.out\n```\n\n### 4.2 build\n\n``` docker build -t tomcat8.5.93 . ```\n\n### 4.3 run & verification\n\n``` docker run -d -p 8080:8080 tomcat8.5.93 ```\n\n<img src=\"/images/047.docker_build_instances.md.03.png\" width=100% height=100% />\n\n\n##  \n\n### 5.1 docker build  yum install \n\n  FROM   Dockerfile  yum \n","slug":"047.docker_build_instances","published":1,"updated":"2023-11-21T06:05:17.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbg1004gyknrhrwm6b8o","content":"<h2 id=\"--docker-\"><a href=\"#--docker-\" class=\"headerlink\" title=\"  docker \"></a>  docker </h2><h3 id=\"1--bash-completion\"><a href=\"#1--bash-completion\" class=\"headerlink\" title=\"1  bash-completion\"></a>1  bash-completion</h3><p><code> yum install bash-completion bash-completion-extras.noarch</code></p>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2 \"></a>2 </h3><p><code>curl https://raw.githubusercontent.com/docker/docker-ce/master/components/cli/contrib/completion/bash/docker -o /etc/bash_completion.d/docker.sh</code></p>\n<h3 id=\"3-source-\"><a href=\"#3-source-\" class=\"headerlink\" title=\"3 source \"></a>3 source </h3><p><code>source /etc/bash_completion.d/docker.sh</code></p>\n<h2 id=\"-CentOS7-9-\"><a href=\"#-CentOS7-9-\" class=\"headerlink\" title=\" CentOS7.9 \"></a> CentOS7.9 </h2><p><code>docker pull centos:centos7.9.2009</code></p>\n<h2 id=\"--docker--nginx\"><a href=\"#--docker--nginx\" class=\"headerlink\" title=\"  docker  nginx\"></a>  docker  nginx</h2><h3 id=\"2-1-Dockerfile\"><a href=\"#2-1-Dockerfile\" class=\"headerlink\" title=\"2.1 Dockerfile\"></a>2.1 Dockerfile</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">FROM</span> <span class=\"string\">centos:centos7.9.2009</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">MAINTAINER</span> <span class=\"string\">zhuang</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># centos7</span></span><br><span class=\"line\"><span class=\"string\">RUN</span> <span class=\"string\">sed</span> <span class=\"string\">-e</span> <span class=\"string\">&#x27;s|^mirrorlist=|#mirrorlist=|g&#x27;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">        <span class=\"string\">-e</span> <span class=\"string\">&#x27;s|^#baseurl=http://mirror.centos.org/centos|baseurl=https://mirror.nju.edu.cn/centos|g&#x27;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">        <span class=\"string\">-i.bak</span> <span class=\"string\">\\</span></span><br><span class=\"line\">        <span class=\"string\">/etc/yum.repos.d/CentOS-*.repo</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># nginx </span></span><br><span class=\"line\"><span class=\"string\">RUN</span> <span class=\"string\">yum</span> <span class=\"string\">install</span> <span class=\"string\">-y</span> <span class=\"string\">gcc</span> <span class=\"string\">gcc-c++</span> <span class=\"string\">make</span> <span class=\"string\">automake</span> <span class=\"string\">autoconf</span> <span class=\"string\">libtool</span> <span class=\"string\">pcre</span> <span class=\"string\">pcre-devel</span> <span class=\"string\">zlib</span> <span class=\"string\">openssl</span> <span class=\"string\">openssl-devel</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">WORKDIR</span> <span class=\"string\">/usr/local</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">RUN</span> <span class=\"string\">curl</span> <span class=\"string\">-O</span> <span class=\"string\">https://nginx.org/download/nginx-1.24.0.tar.gz</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">    <span class=\"string\">tar</span> <span class=\"string\">-xzvf</span> <span class=\"string\">nginx-1.24.0.tar.gz</span> <span class=\"string\">-C</span> <span class=\"string\">/usr/local</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">    <span class=\"string\">mv</span> <span class=\"string\">/usr/local/nginx-1.24.0</span> <span class=\"string\">/usr/local/nginx-1.24.0-src</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">    <span class=\"string\">cd</span> <span class=\"string\">nginx-1.24.0-src</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">    <span class=\"string\">./configure</span> <span class=\"string\">--prefix=/usr/local/nginx-1.24.0</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">    <span class=\"string\">make</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">make</span> <span class=\"string\">install</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Nginx</span></span><br><span class=\"line\"><span class=\"string\">EXPOSE</span> <span class=\"number\">80</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Nginx</span></span><br><span class=\"line\"><span class=\"string\">CMD</span> [<span class=\"string\">&quot;/usr/local/nginx-1.24.0/sbin/nginx&quot;</span>, <span class=\"string\">&quot;-g&quot;</span>, <span class=\"string\">&quot;daemon off;&quot;</span>]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-2-build\"><a href=\"#2-2-build\" class=\"headerlink\" title=\"2.2 build\"></a>2.2 build</h3><p><code>docker build -t nginx1.24 .</code></p>\n<h3 id=\"2-3-run\"><a href=\"#2-3-run\" class=\"headerlink\" title=\"2.3 run\"></a>2.3 run</h3><p><code>docker run -d -p 80:80 nginx1.24</code></p>\n<img src=\"/images/047.docker_build_instances.md.01.png\" width=100% height=100% />\n\n<h2 id=\"--docker--redis\"><a href=\"#--docker--redis\" class=\"headerlink\" title=\"  docker  redis\"></a>  docker  redis</h2><h3 id=\"3-1-Dockerfile\"><a href=\"#3-1-Dockerfile\" class=\"headerlink\" title=\"3.1 Dockerfile\"></a>3.1 Dockerfile</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">FROM</span> <span class=\"string\">centos:centos7.9.2009</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">MAINTAINER</span> <span class=\"string\">zhuang</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># centos7</span></span><br><span class=\"line\"><span class=\"string\">RUN</span> <span class=\"string\">sed</span> <span class=\"string\">-e</span> <span class=\"string\">&#x27;s|^mirrorlist=|#mirrorlist=|g&#x27;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">        <span class=\"string\">-e</span> <span class=\"string\">&#x27;s|^#baseurl=http://mirror.centos.org/centos|baseurl=https://mirror.nju.edu.cn/centos|g&#x27;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">        <span class=\"string\">-i.bak</span> <span class=\"string\">\\</span></span><br><span class=\"line\">        <span class=\"string\">/etc/yum.repos.d/CentOS-*.repo</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># redis  </span></span><br><span class=\"line\"><span class=\"string\">RUN</span> <span class=\"string\">yum</span> <span class=\"string\">-y</span> <span class=\"string\">install</span> <span class=\"string\">cpp</span> <span class=\"string\">binutils</span> <span class=\"string\">glibc</span> <span class=\"string\">glibc-kernheaders</span> <span class=\"string\">glibc-common</span> <span class=\"string\">glibc-devel</span> <span class=\"string\">gcc</span> <span class=\"string\">make</span> <span class=\"string\">gcc-c++</span> <span class=\"string\">libstdc++-devel</span> <span class=\"string\">tcl</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">WORKDIR</span> <span class=\"string\">/usr/local</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">COPY</span> <span class=\"string\">./redis-7.2.1.tar.gz</span> <span class=\"string\">/usr/local</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">RUN</span> <span class=\"string\">tar</span> <span class=\"string\">-xzvf</span> <span class=\"string\">redis-7.2.1.tar.gz</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">    <span class=\"string\">cd</span> <span class=\"string\">redis-7.2.1</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">    <span class=\"string\">make</span> <span class=\"string\">PREFIX=/usr/local/redis7.2.1</span> <span class=\"string\">install</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">    <span class=\"string\">cp</span> <span class=\"string\">./redis.conf</span> <span class=\"string\">/usr/local/redis7.2.1/redis.conf</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  Redis</span></span><br><span class=\"line\"><span class=\"string\">EXPOSE</span> <span class=\"number\">6379</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  Redis</span></span><br><span class=\"line\"><span class=\"string\">ENTRYPOINT</span> <span class=\"string\">/usr/local/redis7.2.1/bin/redis-server</span> <span class=\"string\">/usr/local/redis7.2.1/redis.conf</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-2-build\"><a href=\"#3-2-build\" class=\"headerlink\" title=\"3.2 build\"></a>3.2 build</h3><p><code>docker build -t redis7.2.1 .</code></p>\n<h3 id=\"3-3-run-verification\"><a href=\"#3-3-run-verification\" class=\"headerlink\" title=\"3.3 run &amp; verification\"></a>3.3 run &amp; verification</h3><p><code>docker run -d -p 6379:6379</code><br><code>docker exec -it peaceful_fermi /bin/sh</code></p>\n<img src=\"/images/047.docker_build_instances.md.02.png\" width=100% height=100% />\n\n\n<h2 id=\"--docker-tomcat\"><a href=\"#--docker-tomcat\" class=\"headerlink\" title=\"  docker tomcat\"></a>  docker tomcat</h2><h3 id=\"4-1-Dockerfile\"><a href=\"#4-1-Dockerfile\" class=\"headerlink\" title=\"4.1 Dockerfile\"></a>4.1 Dockerfile</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">FROM</span> <span class=\"string\">centos:centos7.9.2009</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">MAINTAINER</span> <span class=\"string\">zhuang</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># # centos7</span></span><br><span class=\"line\"><span class=\"comment\"># RUN sed -e &#x27;s|^mirrorlist=|#mirrorlist=|g&#x27; \\</span></span><br><span class=\"line\"><span class=\"comment\">#         -e &#x27;s|^#baseurl=http://mirror.centos.org/centos|baseurl=https://mirror.nju.edu.cn/centos|g&#x27; \\</span></span><br><span class=\"line\"><span class=\"comment\">#         -i.bak \\</span></span><br><span class=\"line\"><span class=\"comment\">#         /etc/yum.repos.d/CentOS-*.repo</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">ADD</span> <span class=\"string\">./apache-tomcat-8.5.93.tar.gz</span> <span class=\"string\">/usr/local/</span></span><br><span class=\"line\"><span class=\"string\">ADD</span> <span class=\"string\">./jdk-8u202-linux-x64.tar.gz</span> <span class=\"string\">/usr/local/</span></span><br><span class=\"line\"><span class=\"comment\">#ADD ./setenv.sh /usr/lcoal/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">ENV</span> <span class=\"string\">MYPATH</span> <span class=\"string\">/usr/local/</span></span><br><span class=\"line\"><span class=\"string\">WORKDIR</span> <span class=\"string\">$MYPATH</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#RUN cp setenv.sh /usr/local/apache-tomcat-8.5.93/bin/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># javatomcat</span></span><br><span class=\"line\"><span class=\"string\">ENV</span> <span class=\"string\">JAVA_HOME</span> <span class=\"string\">/usr/local/jdk1.8.0_202</span></span><br><span class=\"line\"><span class=\"string\">ENV</span> <span class=\"string\">CLASSPATH</span> <span class=\"string\">$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</span></span><br><span class=\"line\"><span class=\"string\">ENV</span> <span class=\"string\">CATALINE_HOME</span> <span class=\"string\">/usr/local/apache-tomcat-8.5.93</span></span><br><span class=\"line\"><span class=\"string\">ENV</span> <span class=\"string\">CATALINE_BASE</span> <span class=\"string\">/usr/local/apache-tomcat-8.5.93</span></span><br><span class=\"line\"><span class=\"string\">ENV</span> <span class=\"string\">PATH</span> <span class=\"string\">$PATH:$JAVA_HOME/bin:$CATALINE_HOME/lib:$CATALINE_HOME/bin</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  tomcat</span></span><br><span class=\"line\"><span class=\"string\">EXPOSE</span> <span class=\"number\">8080</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  tomcat</span></span><br><span class=\"line\"><span class=\"string\">CMD</span> <span class=\"string\">/usr/local/apache-tomcat-8.5.93/bin/startup.sh</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">tail</span> <span class=\"string\">-F</span> <span class=\"string\">/usr/local/apache-tomcat-8.5.93/logs/catalina.out</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-2-build\"><a href=\"#4-2-build\" class=\"headerlink\" title=\"4.2 build\"></a>4.2 build</h3><p><code>docker build -t tomcat8.5.93 .</code></p>\n<h3 id=\"4-3-run-verification\"><a href=\"#4-3-run-verification\" class=\"headerlink\" title=\"4.3 run &amp; verification\"></a>4.3 run &amp; verification</h3><p><code>docker run -d -p 8080:8080 tomcat8.5.93</code></p>\n<img src=\"/images/047.docker_build_instances.md.03.png\" width=100% height=100% />\n\n\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"5-1-docker-build--yum-install-\"><a href=\"#5-1-docker-build--yum-install-\" class=\"headerlink\" title=\"5.1 docker build  yum install \"></a>5.1 docker build  yum install </h3><p>  FROM   Dockerfile  yum </p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"--docker-\"><a href=\"#--docker-\" class=\"headerlink\" title=\"  docker \"></a>  docker </h2><h3 id=\"1--bash-completion\"><a href=\"#1--bash-completion\" class=\"headerlink\" title=\"1  bash-completion\"></a>1  bash-completion</h3><p><code> yum install bash-completion bash-completion-extras.noarch</code></p>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2 \"></a>2 </h3><p><code>curl https://raw.githubusercontent.com/docker/docker-ce/master/components/cli/contrib/completion/bash/docker -o /etc/bash_completion.d/docker.sh</code></p>\n<h3 id=\"3-source-\"><a href=\"#3-source-\" class=\"headerlink\" title=\"3 source \"></a>3 source </h3><p><code>source /etc/bash_completion.d/docker.sh</code></p>\n<h2 id=\"-CentOS7-9-\"><a href=\"#-CentOS7-9-\" class=\"headerlink\" title=\" CentOS7.9 \"></a> CentOS7.9 </h2><p><code>docker pull centos:centos7.9.2009</code></p>\n<h2 id=\"--docker--nginx\"><a href=\"#--docker--nginx\" class=\"headerlink\" title=\"  docker  nginx\"></a>  docker  nginx</h2><h3 id=\"2-1-Dockerfile\"><a href=\"#2-1-Dockerfile\" class=\"headerlink\" title=\"2.1 Dockerfile\"></a>2.1 Dockerfile</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">FROM</span> <span class=\"string\">centos:centos7.9.2009</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">MAINTAINER</span> <span class=\"string\">zhuang</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># centos7</span></span><br><span class=\"line\"><span class=\"string\">RUN</span> <span class=\"string\">sed</span> <span class=\"string\">-e</span> <span class=\"string\">&#x27;s|^mirrorlist=|#mirrorlist=|g&#x27;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">        <span class=\"string\">-e</span> <span class=\"string\">&#x27;s|^#baseurl=http://mirror.centos.org/centos|baseurl=https://mirror.nju.edu.cn/centos|g&#x27;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">        <span class=\"string\">-i.bak</span> <span class=\"string\">\\</span></span><br><span class=\"line\">        <span class=\"string\">/etc/yum.repos.d/CentOS-*.repo</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># nginx </span></span><br><span class=\"line\"><span class=\"string\">RUN</span> <span class=\"string\">yum</span> <span class=\"string\">install</span> <span class=\"string\">-y</span> <span class=\"string\">gcc</span> <span class=\"string\">gcc-c++</span> <span class=\"string\">make</span> <span class=\"string\">automake</span> <span class=\"string\">autoconf</span> <span class=\"string\">libtool</span> <span class=\"string\">pcre</span> <span class=\"string\">pcre-devel</span> <span class=\"string\">zlib</span> <span class=\"string\">openssl</span> <span class=\"string\">openssl-devel</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">WORKDIR</span> <span class=\"string\">/usr/local</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">RUN</span> <span class=\"string\">curl</span> <span class=\"string\">-O</span> <span class=\"string\">https://nginx.org/download/nginx-1.24.0.tar.gz</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">    <span class=\"string\">tar</span> <span class=\"string\">-xzvf</span> <span class=\"string\">nginx-1.24.0.tar.gz</span> <span class=\"string\">-C</span> <span class=\"string\">/usr/local</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">    <span class=\"string\">mv</span> <span class=\"string\">/usr/local/nginx-1.24.0</span> <span class=\"string\">/usr/local/nginx-1.24.0-src</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">    <span class=\"string\">cd</span> <span class=\"string\">nginx-1.24.0-src</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">    <span class=\"string\">./configure</span> <span class=\"string\">--prefix=/usr/local/nginx-1.24.0</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">    <span class=\"string\">make</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">make</span> <span class=\"string\">install</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Nginx</span></span><br><span class=\"line\"><span class=\"string\">EXPOSE</span> <span class=\"number\">80</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Nginx</span></span><br><span class=\"line\"><span class=\"string\">CMD</span> [<span class=\"string\">&quot;/usr/local/nginx-1.24.0/sbin/nginx&quot;</span>, <span class=\"string\">&quot;-g&quot;</span>, <span class=\"string\">&quot;daemon off;&quot;</span>]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-2-build\"><a href=\"#2-2-build\" class=\"headerlink\" title=\"2.2 build\"></a>2.2 build</h3><p><code>docker build -t nginx1.24 .</code></p>\n<h3 id=\"2-3-run\"><a href=\"#2-3-run\" class=\"headerlink\" title=\"2.3 run\"></a>2.3 run</h3><p><code>docker run -d -p 80:80 nginx1.24</code></p>\n<img src=\"/images/047.docker_build_instances.md.01.png\" width=100% height=100% />\n\n<h2 id=\"--docker--redis\"><a href=\"#--docker--redis\" class=\"headerlink\" title=\"  docker  redis\"></a>  docker  redis</h2><h3 id=\"3-1-Dockerfile\"><a href=\"#3-1-Dockerfile\" class=\"headerlink\" title=\"3.1 Dockerfile\"></a>3.1 Dockerfile</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">FROM</span> <span class=\"string\">centos:centos7.9.2009</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">MAINTAINER</span> <span class=\"string\">zhuang</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># centos7</span></span><br><span class=\"line\"><span class=\"string\">RUN</span> <span class=\"string\">sed</span> <span class=\"string\">-e</span> <span class=\"string\">&#x27;s|^mirrorlist=|#mirrorlist=|g&#x27;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">        <span class=\"string\">-e</span> <span class=\"string\">&#x27;s|^#baseurl=http://mirror.centos.org/centos|baseurl=https://mirror.nju.edu.cn/centos|g&#x27;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">        <span class=\"string\">-i.bak</span> <span class=\"string\">\\</span></span><br><span class=\"line\">        <span class=\"string\">/etc/yum.repos.d/CentOS-*.repo</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># redis  </span></span><br><span class=\"line\"><span class=\"string\">RUN</span> <span class=\"string\">yum</span> <span class=\"string\">-y</span> <span class=\"string\">install</span> <span class=\"string\">cpp</span> <span class=\"string\">binutils</span> <span class=\"string\">glibc</span> <span class=\"string\">glibc-kernheaders</span> <span class=\"string\">glibc-common</span> <span class=\"string\">glibc-devel</span> <span class=\"string\">gcc</span> <span class=\"string\">make</span> <span class=\"string\">gcc-c++</span> <span class=\"string\">libstdc++-devel</span> <span class=\"string\">tcl</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">WORKDIR</span> <span class=\"string\">/usr/local</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">COPY</span> <span class=\"string\">./redis-7.2.1.tar.gz</span> <span class=\"string\">/usr/local</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">RUN</span> <span class=\"string\">tar</span> <span class=\"string\">-xzvf</span> <span class=\"string\">redis-7.2.1.tar.gz</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">    <span class=\"string\">cd</span> <span class=\"string\">redis-7.2.1</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">    <span class=\"string\">make</span> <span class=\"string\">PREFIX=/usr/local/redis7.2.1</span> <span class=\"string\">install</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">    <span class=\"string\">cp</span> <span class=\"string\">./redis.conf</span> <span class=\"string\">/usr/local/redis7.2.1/redis.conf</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  Redis</span></span><br><span class=\"line\"><span class=\"string\">EXPOSE</span> <span class=\"number\">6379</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  Redis</span></span><br><span class=\"line\"><span class=\"string\">ENTRYPOINT</span> <span class=\"string\">/usr/local/redis7.2.1/bin/redis-server</span> <span class=\"string\">/usr/local/redis7.2.1/redis.conf</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-2-build\"><a href=\"#3-2-build\" class=\"headerlink\" title=\"3.2 build\"></a>3.2 build</h3><p><code>docker build -t redis7.2.1 .</code></p>\n<h3 id=\"3-3-run-verification\"><a href=\"#3-3-run-verification\" class=\"headerlink\" title=\"3.3 run &amp; verification\"></a>3.3 run &amp; verification</h3><p><code>docker run -d -p 6379:6379</code><br><code>docker exec -it peaceful_fermi /bin/sh</code></p>\n<img src=\"/images/047.docker_build_instances.md.02.png\" width=100% height=100% />\n\n\n<h2 id=\"--docker-tomcat\"><a href=\"#--docker-tomcat\" class=\"headerlink\" title=\"  docker tomcat\"></a>  docker tomcat</h2><h3 id=\"4-1-Dockerfile\"><a href=\"#4-1-Dockerfile\" class=\"headerlink\" title=\"4.1 Dockerfile\"></a>4.1 Dockerfile</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">FROM</span> <span class=\"string\">centos:centos7.9.2009</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">MAINTAINER</span> <span class=\"string\">zhuang</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># # centos7</span></span><br><span class=\"line\"><span class=\"comment\"># RUN sed -e &#x27;s|^mirrorlist=|#mirrorlist=|g&#x27; \\</span></span><br><span class=\"line\"><span class=\"comment\">#         -e &#x27;s|^#baseurl=http://mirror.centos.org/centos|baseurl=https://mirror.nju.edu.cn/centos|g&#x27; \\</span></span><br><span class=\"line\"><span class=\"comment\">#         -i.bak \\</span></span><br><span class=\"line\"><span class=\"comment\">#         /etc/yum.repos.d/CentOS-*.repo</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">ADD</span> <span class=\"string\">./apache-tomcat-8.5.93.tar.gz</span> <span class=\"string\">/usr/local/</span></span><br><span class=\"line\"><span class=\"string\">ADD</span> <span class=\"string\">./jdk-8u202-linux-x64.tar.gz</span> <span class=\"string\">/usr/local/</span></span><br><span class=\"line\"><span class=\"comment\">#ADD ./setenv.sh /usr/lcoal/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">ENV</span> <span class=\"string\">MYPATH</span> <span class=\"string\">/usr/local/</span></span><br><span class=\"line\"><span class=\"string\">WORKDIR</span> <span class=\"string\">$MYPATH</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#RUN cp setenv.sh /usr/local/apache-tomcat-8.5.93/bin/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># javatomcat</span></span><br><span class=\"line\"><span class=\"string\">ENV</span> <span class=\"string\">JAVA_HOME</span> <span class=\"string\">/usr/local/jdk1.8.0_202</span></span><br><span class=\"line\"><span class=\"string\">ENV</span> <span class=\"string\">CLASSPATH</span> <span class=\"string\">$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</span></span><br><span class=\"line\"><span class=\"string\">ENV</span> <span class=\"string\">CATALINE_HOME</span> <span class=\"string\">/usr/local/apache-tomcat-8.5.93</span></span><br><span class=\"line\"><span class=\"string\">ENV</span> <span class=\"string\">CATALINE_BASE</span> <span class=\"string\">/usr/local/apache-tomcat-8.5.93</span></span><br><span class=\"line\"><span class=\"string\">ENV</span> <span class=\"string\">PATH</span> <span class=\"string\">$PATH:$JAVA_HOME/bin:$CATALINE_HOME/lib:$CATALINE_HOME/bin</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  tomcat</span></span><br><span class=\"line\"><span class=\"string\">EXPOSE</span> <span class=\"number\">8080</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  tomcat</span></span><br><span class=\"line\"><span class=\"string\">CMD</span> <span class=\"string\">/usr/local/apache-tomcat-8.5.93/bin/startup.sh</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">tail</span> <span class=\"string\">-F</span> <span class=\"string\">/usr/local/apache-tomcat-8.5.93/logs/catalina.out</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-2-build\"><a href=\"#4-2-build\" class=\"headerlink\" title=\"4.2 build\"></a>4.2 build</h3><p><code>docker build -t tomcat8.5.93 .</code></p>\n<h3 id=\"4-3-run-verification\"><a href=\"#4-3-run-verification\" class=\"headerlink\" title=\"4.3 run &amp; verification\"></a>4.3 run &amp; verification</h3><p><code>docker run -d -p 8080:8080 tomcat8.5.93</code></p>\n<img src=\"/images/047.docker_build_instances.md.03.png\" width=100% height=100% />\n\n\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"5-1-docker-build--yum-install-\"><a href=\"#5-1-docker-build--yum-install-\" class=\"headerlink\" title=\"5.1 docker build  yum install \"></a>5.1 docker build  yum install </h3><p>  FROM   Dockerfile  yum </p>\n"},{"title":"docker-compose ","date":"2023-09-14T14:09:11.000Z","_content":"\n\n\n### nginx\n\n```yaml\nversion: \"3\"\nservices: # \n    nginx:\n        image: ngin124:latest\n        ports: #  8080 80\n            - \"8080:80\"            \n        container_name: nginx-yaml\n        restart: always\n        volumes: #  F:/nginx.conf   /etc/nginx/nginx.conf:ro \n            - /usr/local/nginx1.24/html:/usr/local/nginx-1.24/html\n            - /usr/local/nginx1.24/conf/nginx.conf:/usr/local/nginx-1.24/conf/nginx.conf\n        networks: \n            - \"my-network\"\nnetworks: # \n    my-network: # \n        driver: bridge\n```\n\n### redis\n\n```yaml\nversion: \"3\"\nservices: # \n    redis:\n        image: redis7.2.1:latest\n        ports: \n            - \"6379:6379\"            \n        container_name: redis-yaml\n        restart: always\n        volumes: \n            - /etc/redis.conf:/usr/local/redis7.2.1/conf\n        networks: \n            - \"my-network\"\nnetworks:\n    my-network: \n        driver: bridge\n```\n\n### tomcat\n\n```yaml\nversion: \"3\"\nservices: # \n    tomcat:\n        image: tomcat8.5.93:latest\n        ports: \n            - \"9090:8080\"            \n        container_name: tomcat-yaml\n        restart: always\n        volumes: \n            - /usr/local/tomcat-8.5.93/conf/server.xml:/usr/local/apache-tomcat-8.5.93/conf/server.xml\n        networks: \n            - \"my-network\"\nnetworks:\n    my-network: \n        driver: bridge\n```","source":"_posts/048.docker-compose_instance.md","raw":"---\ntitle: docker-compose \ndate: 2023-9-14 22:09:11\ncategories: \n- [Linux]\n- [Docker]\ntags: \n- docker\n- docker-compose\n---\n\n\n\n### nginx\n\n```yaml\nversion: \"3\"\nservices: # \n    nginx:\n        image: ngin124:latest\n        ports: #  8080 80\n            - \"8080:80\"            \n        container_name: nginx-yaml\n        restart: always\n        volumes: #  F:/nginx.conf   /etc/nginx/nginx.conf:ro \n            - /usr/local/nginx1.24/html:/usr/local/nginx-1.24/html\n            - /usr/local/nginx1.24/conf/nginx.conf:/usr/local/nginx-1.24/conf/nginx.conf\n        networks: \n            - \"my-network\"\nnetworks: # \n    my-network: # \n        driver: bridge\n```\n\n### redis\n\n```yaml\nversion: \"3\"\nservices: # \n    redis:\n        image: redis7.2.1:latest\n        ports: \n            - \"6379:6379\"            \n        container_name: redis-yaml\n        restart: always\n        volumes: \n            - /etc/redis.conf:/usr/local/redis7.2.1/conf\n        networks: \n            - \"my-network\"\nnetworks:\n    my-network: \n        driver: bridge\n```\n\n### tomcat\n\n```yaml\nversion: \"3\"\nservices: # \n    tomcat:\n        image: tomcat8.5.93:latest\n        ports: \n            - \"9090:8080\"            \n        container_name: tomcat-yaml\n        restart: always\n        volumes: \n            - /usr/local/tomcat-8.5.93/conf/server.xml:/usr/local/apache-tomcat-8.5.93/conf/server.xml\n        networks: \n            - \"my-network\"\nnetworks:\n    my-network: \n        driver: bridge\n```","slug":"048.docker-compose_instance","published":1,"updated":"2023-09-14T07:32:46.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbg3004jyknr1v9eb8uc","content":"<h3 id=\"nginx\"><a href=\"#nginx\" class=\"headerlink\" title=\"nginx\"></a>nginx</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span> <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"attr\">nginx:</span></span><br><span class=\"line\">        <span class=\"attr\">image:</span> <span class=\"string\">ngin124:latest</span></span><br><span class=\"line\">        <span class=\"attr\">ports:</span> <span class=\"comment\">#  8080 80</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&quot;8080:80&quot;</span>            </span><br><span class=\"line\">        <span class=\"attr\">container_name:</span> <span class=\"string\">nginx-yaml</span></span><br><span class=\"line\">        <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">        <span class=\"attr\">volumes:</span> <span class=\"comment\">#  F:/nginx.conf   /etc/nginx/nginx.conf:ro </span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">/usr/local/nginx1.24/html:/usr/local/nginx-1.24/html</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">/usr/local/nginx1.24/conf/nginx.conf:/usr/local/nginx-1.24/conf/nginx.conf</span></span><br><span class=\"line\">        <span class=\"attr\">networks:</span> </span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&quot;my-network&quot;</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span> <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"attr\">my-network:</span> <span class=\"comment\"># </span></span><br><span class=\"line\">        <span class=\"attr\">driver:</span> <span class=\"string\">bridge</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"redis\"><a href=\"#redis\" class=\"headerlink\" title=\"redis\"></a>redis</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span> <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"attr\">redis:</span></span><br><span class=\"line\">        <span class=\"attr\">image:</span> <span class=\"string\">redis7.2.1:latest</span></span><br><span class=\"line\">        <span class=\"attr\">ports:</span> </span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&quot;6379:6379&quot;</span>            </span><br><span class=\"line\">        <span class=\"attr\">container_name:</span> <span class=\"string\">redis-yaml</span></span><br><span class=\"line\">        <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">        <span class=\"attr\">volumes:</span> </span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">/etc/redis.conf:/usr/local/redis7.2.1/conf</span></span><br><span class=\"line\">        <span class=\"attr\">networks:</span> </span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&quot;my-network&quot;</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">    <span class=\"attr\">my-network:</span> </span><br><span class=\"line\">        <span class=\"attr\">driver:</span> <span class=\"string\">bridge</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"tomcat\"><a href=\"#tomcat\" class=\"headerlink\" title=\"tomcat\"></a>tomcat</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span> <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"attr\">tomcat:</span></span><br><span class=\"line\">        <span class=\"attr\">image:</span> <span class=\"string\">tomcat8.5.93:latest</span></span><br><span class=\"line\">        <span class=\"attr\">ports:</span> </span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&quot;9090:8080&quot;</span>            </span><br><span class=\"line\">        <span class=\"attr\">container_name:</span> <span class=\"string\">tomcat-yaml</span></span><br><span class=\"line\">        <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">        <span class=\"attr\">volumes:</span> </span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">/usr/local/tomcat-8.5.93/conf/server.xml:/usr/local/apache-tomcat-8.5.93/conf/server.xml</span></span><br><span class=\"line\">        <span class=\"attr\">networks:</span> </span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&quot;my-network&quot;</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">    <span class=\"attr\">my-network:</span> </span><br><span class=\"line\">        <span class=\"attr\">driver:</span> <span class=\"string\">bridge</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"nginx\"><a href=\"#nginx\" class=\"headerlink\" title=\"nginx\"></a>nginx</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span> <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"attr\">nginx:</span></span><br><span class=\"line\">        <span class=\"attr\">image:</span> <span class=\"string\">ngin124:latest</span></span><br><span class=\"line\">        <span class=\"attr\">ports:</span> <span class=\"comment\">#  8080 80</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&quot;8080:80&quot;</span>            </span><br><span class=\"line\">        <span class=\"attr\">container_name:</span> <span class=\"string\">nginx-yaml</span></span><br><span class=\"line\">        <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">        <span class=\"attr\">volumes:</span> <span class=\"comment\">#  F:/nginx.conf   /etc/nginx/nginx.conf:ro </span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">/usr/local/nginx1.24/html:/usr/local/nginx-1.24/html</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">/usr/local/nginx1.24/conf/nginx.conf:/usr/local/nginx-1.24/conf/nginx.conf</span></span><br><span class=\"line\">        <span class=\"attr\">networks:</span> </span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&quot;my-network&quot;</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span> <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"attr\">my-network:</span> <span class=\"comment\"># </span></span><br><span class=\"line\">        <span class=\"attr\">driver:</span> <span class=\"string\">bridge</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"redis\"><a href=\"#redis\" class=\"headerlink\" title=\"redis\"></a>redis</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span> <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"attr\">redis:</span></span><br><span class=\"line\">        <span class=\"attr\">image:</span> <span class=\"string\">redis7.2.1:latest</span></span><br><span class=\"line\">        <span class=\"attr\">ports:</span> </span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&quot;6379:6379&quot;</span>            </span><br><span class=\"line\">        <span class=\"attr\">container_name:</span> <span class=\"string\">redis-yaml</span></span><br><span class=\"line\">        <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">        <span class=\"attr\">volumes:</span> </span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">/etc/redis.conf:/usr/local/redis7.2.1/conf</span></span><br><span class=\"line\">        <span class=\"attr\">networks:</span> </span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&quot;my-network&quot;</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">    <span class=\"attr\">my-network:</span> </span><br><span class=\"line\">        <span class=\"attr\">driver:</span> <span class=\"string\">bridge</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"tomcat\"><a href=\"#tomcat\" class=\"headerlink\" title=\"tomcat\"></a>tomcat</h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span> <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"attr\">tomcat:</span></span><br><span class=\"line\">        <span class=\"attr\">image:</span> <span class=\"string\">tomcat8.5.93:latest</span></span><br><span class=\"line\">        <span class=\"attr\">ports:</span> </span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&quot;9090:8080&quot;</span>            </span><br><span class=\"line\">        <span class=\"attr\">container_name:</span> <span class=\"string\">tomcat-yaml</span></span><br><span class=\"line\">        <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">        <span class=\"attr\">volumes:</span> </span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">/usr/local/tomcat-8.5.93/conf/server.xml:/usr/local/apache-tomcat-8.5.93/conf/server.xml</span></span><br><span class=\"line\">        <span class=\"attr\">networks:</span> </span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&quot;my-network&quot;</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">    <span class=\"attr\">my-network:</span> </span><br><span class=\"line\">        <span class=\"attr\">driver:</span> <span class=\"string\">bridge</span></span><br></pre></td></tr></table></figure>"},{"title":"CentOS7.9  7.2","date":"2023-09-15T09:06:55.000Z","_content":"\nDVDyum \n\n``` yum downgrade initscripts-9.49.30-1.el7.x86_64 centos-release-7-2.1511.el7.centos.2.10.x86_64 ```\n\n\n\n\n## \n\n### 1. \n\n<img src=\"/images/049.centos_downgrade.md.01.png\" width=100% height=100% />\n\n### 2. centos \n\n``` ls /dev/cdrom ```\n``` mount -t iso9660 -o loop /dev/cdrom /mnt/cdrom/ ```\n\n\n```vim /etc/fstab```\n``` /dev/cdrom /mnt/cdrom iso9660 defaults 0 0```\n\n\n### 3. yum \n\n``` vim /etc/yum.repos.d/centos7.2-old.repo```\n\n``` shell\n# vim centos7.2-old.repo\n[centos7.2-old]\nname=centos7.2-old\nbaseurl=file:///mnt/cdrom\nenable=1\ngpgcheck=0\n```\n\n```yum makecache ```\n\n### 4. \n\n```yum repo-pkgs centos7.2-old list | grep \"centos-release\"```\n\n```yum --disablerepo \"*\" --enablerepo centos7.2-old list | grep \"centos-release\"```","source":"_posts/049.centos_downgrade.md","raw":"---\ntitle: CentOS7.9  7.2\ndate: 2023-9-15 17:06:55\ncategories: \n- [Linux]\ntags: \n- centos\n- downgrade\n---\n\nDVDyum \n\n``` yum downgrade initscripts-9.49.30-1.el7.x86_64 centos-release-7-2.1511.el7.centos.2.10.x86_64 ```\n\n\n\n\n## \n\n### 1. \n\n<img src=\"/images/049.centos_downgrade.md.01.png\" width=100% height=100% />\n\n### 2. centos \n\n``` ls /dev/cdrom ```\n``` mount -t iso9660 -o loop /dev/cdrom /mnt/cdrom/ ```\n\n\n```vim /etc/fstab```\n``` /dev/cdrom /mnt/cdrom iso9660 defaults 0 0```\n\n\n### 3. yum \n\n``` vim /etc/yum.repos.d/centos7.2-old.repo```\n\n``` shell\n# vim centos7.2-old.repo\n[centos7.2-old]\nname=centos7.2-old\nbaseurl=file:///mnt/cdrom\nenable=1\ngpgcheck=0\n```\n\n```yum makecache ```\n\n### 4. \n\n```yum repo-pkgs centos7.2-old list | grep \"centos-release\"```\n\n```yum --disablerepo \"*\" --enablerepo centos7.2-old list | grep \"centos-release\"```","slug":"049.centos_downgrade","published":1,"updated":"2023-09-15T09:29:21.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbg4004myknrcvdu7uhc","content":"<p>DVDyum </p>\n<p><code>yum downgrade initscripts-9.49.30-1.el7.x86_64 centos-release-7-2.1511.el7.centos.2.10.x86_64</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><img src=\"/images/049.centos_downgrade.md.01.png\" width=100% height=100% />\n\n<h3 id=\"2-centos-\"><a href=\"#2-centos-\" class=\"headerlink\" title=\"2. centos \"></a>2. centos </h3><p><code>ls /dev/cdrom</code><br><code>mount -t iso9660 -o loop /dev/cdrom /mnt/cdrom/</code></p>\n<p><br><code>vim /etc/fstab</code><br><code> /dev/cdrom /mnt/cdrom iso9660 defaults 0 0</code></p>\n<h3 id=\"3-yum-\"><a href=\"#3-yum-\" class=\"headerlink\" title=\"3. yum \"></a>3. yum </h3><p><code> vim /etc/yum.repos.d/centos7.2-old.repo</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">vim centos7.2-old.repo</span></span><br><span class=\"line\">[centos7.2-old]</span><br><span class=\"line\">name=centos7.2-old</span><br><span class=\"line\">baseurl=file:///mnt/cdrom</span><br><span class=\"line\">enable=1</span><br><span class=\"line\">gpgcheck=0</span><br></pre></td></tr></table></figure>\n\n<p><code>yum makecache </code></p>\n<h3 id=\"4-\"><a href=\"#4-\" class=\"headerlink\" title=\"4. \"></a>4. </h3><p><code>yum repo-pkgs centos7.2-old list | grep &quot;centos-release&quot;</code></p>\n<p><code>yum --disablerepo &quot;*&quot; --enablerepo centos7.2-old list | grep &quot;centos-release&quot;</code></p>\n","site":{"data":{}},"excerpt":"","more":"<p>DVDyum </p>\n<p><code>yum downgrade initscripts-9.49.30-1.el7.x86_64 centos-release-7-2.1511.el7.centos.2.10.x86_64</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><img src=\"/images/049.centos_downgrade.md.01.png\" width=100% height=100% />\n\n<h3 id=\"2-centos-\"><a href=\"#2-centos-\" class=\"headerlink\" title=\"2. centos \"></a>2. centos </h3><p><code>ls /dev/cdrom</code><br><code>mount -t iso9660 -o loop /dev/cdrom /mnt/cdrom/</code></p>\n<p><br><code>vim /etc/fstab</code><br><code> /dev/cdrom /mnt/cdrom iso9660 defaults 0 0</code></p>\n<h3 id=\"3-yum-\"><a href=\"#3-yum-\" class=\"headerlink\" title=\"3. yum \"></a>3. yum </h3><p><code> vim /etc/yum.repos.d/centos7.2-old.repo</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">vim centos7.2-old.repo</span></span><br><span class=\"line\">[centos7.2-old]</span><br><span class=\"line\">name=centos7.2-old</span><br><span class=\"line\">baseurl=file:///mnt/cdrom</span><br><span class=\"line\">enable=1</span><br><span class=\"line\">gpgcheck=0</span><br></pre></td></tr></table></figure>\n\n<p><code>yum makecache </code></p>\n<h3 id=\"4-\"><a href=\"#4-\" class=\"headerlink\" title=\"4. \"></a>4. </h3><p><code>yum repo-pkgs centos7.2-old list | grep &quot;centos-release&quot;</code></p>\n<p><code>yum --disablerepo &quot;*&quot; --enablerepo centos7.2-old list | grep &quot;centos-release&quot;</code></p>\n"},{"title":"Docker registry(https)","date":"2023-09-20T08:04:56.000Z","_content":"\n\n##  registry \n\nPATH: ```/etc/docker/registry/config.yml```\n``` yaml\nversion: 0.1\nlog:\n  accesslog:\n    disabled: true\n  level: debug\n  formatter: text\n  fields:\n    service: registry\n    environment: staging\nstorage:\n  delete:\n    enabled: true\n  cache:\n    blobdescriptor: inmemory\n  filesystem:\n    rootdirectory: /var/lib/registry\nauth:\n  htpasswd:\n    realm: basic-realm\n    path: /etc/docker/registry/auth/nginx.htpasswd   ## \nhttp:\n  addr: :5000                                        ## \n  host: https://docker.domain.com                    ##   \n  headers:\n    X-Content-Type-Options: [nosniff]\n  http2:\n    disabled: false\n  tls:\n    certificate: /etc/docker/registry/ssl/docker.domain.com.crt  ## \n    key: /etc/docker/registry/ssl/docker.domain.com.key          ## \nhealth:\n  storagedriver:\n    enabled: true\n    interval: 10s\nthreshold: 3\n```\n\n\n##  registry docker-compose\n\nPATH: ```/usr/local/docker/docker-compose/registry.yaml ```\n``` yaml\nversion: \"3\"\nservices: \n    registry:\n        image: registry:latest\n        ports:\n            - \"443:5000\"\n        container_name: registry\n        restart: always\n        volumes:\n            - /etc/docker/registry:/etc/docker/registry\n            - /var/lib/registry:/var/lib/registry    \n        networks:\n            - \"my-network\"\nnetworks:\n    my-network:\n        driver: bridge\n```\n\n\n##  http \n\n``` bash\ndocker run --rm \\\n    --entrypoint htpasswd \\\n    httpd:alpine \\\n    -Bbn $USERNAME $PASSWORD > /etc/docker/registry/auth/nginx.htpasswd\n```\n\n\n##  https\n\n**https ZeroSSL**\n\n<img src=\"/images/050.registry_setup.md.01.png\" width=100% height=100% />\n\n ```/etc/docker/registry/ssl/docker.domain.com.crt```\n ```/etc/docker/registry/ssl/docker.domain.com.key```   \n ```/etc/docker/registry/ssl/docker.domain.com.csr```\n\n\n##  \n\n### 5.1  registry\n\n``` docker-compose -f /usr/local/docker/docker-compose/registry.yaml up -d ```\n\n### 5.2  hosts \n\n``` vim /etc/hosts ```\n``` 127.0.0.1 docker.domain.com```\n\n\n### 5.3  register\n\ncurl  https://docker.domain.com\n\n\n### 5.4 \n<img src=\"/images/050.registry_setup.md.02.png\" width=100% height=100% />\n","source":"_posts/050.registry_setup.md","raw":"---\ntitle: Docker registry(https)\ndate: 2023-9-20 16:04:56\ncategories: \n- [Docker]\ntags: \n- docker\n- registry\n---\n\n\n##  registry \n\nPATH: ```/etc/docker/registry/config.yml```\n``` yaml\nversion: 0.1\nlog:\n  accesslog:\n    disabled: true\n  level: debug\n  formatter: text\n  fields:\n    service: registry\n    environment: staging\nstorage:\n  delete:\n    enabled: true\n  cache:\n    blobdescriptor: inmemory\n  filesystem:\n    rootdirectory: /var/lib/registry\nauth:\n  htpasswd:\n    realm: basic-realm\n    path: /etc/docker/registry/auth/nginx.htpasswd   ## \nhttp:\n  addr: :5000                                        ## \n  host: https://docker.domain.com                    ##   \n  headers:\n    X-Content-Type-Options: [nosniff]\n  http2:\n    disabled: false\n  tls:\n    certificate: /etc/docker/registry/ssl/docker.domain.com.crt  ## \n    key: /etc/docker/registry/ssl/docker.domain.com.key          ## \nhealth:\n  storagedriver:\n    enabled: true\n    interval: 10s\nthreshold: 3\n```\n\n\n##  registry docker-compose\n\nPATH: ```/usr/local/docker/docker-compose/registry.yaml ```\n``` yaml\nversion: \"3\"\nservices: \n    registry:\n        image: registry:latest\n        ports:\n            - \"443:5000\"\n        container_name: registry\n        restart: always\n        volumes:\n            - /etc/docker/registry:/etc/docker/registry\n            - /var/lib/registry:/var/lib/registry    \n        networks:\n            - \"my-network\"\nnetworks:\n    my-network:\n        driver: bridge\n```\n\n\n##  http \n\n``` bash\ndocker run --rm \\\n    --entrypoint htpasswd \\\n    httpd:alpine \\\n    -Bbn $USERNAME $PASSWORD > /etc/docker/registry/auth/nginx.htpasswd\n```\n\n\n##  https\n\n**https ZeroSSL**\n\n<img src=\"/images/050.registry_setup.md.01.png\" width=100% height=100% />\n\n ```/etc/docker/registry/ssl/docker.domain.com.crt```\n ```/etc/docker/registry/ssl/docker.domain.com.key```   \n ```/etc/docker/registry/ssl/docker.domain.com.csr```\n\n\n##  \n\n### 5.1  registry\n\n``` docker-compose -f /usr/local/docker/docker-compose/registry.yaml up -d ```\n\n### 5.2  hosts \n\n``` vim /etc/hosts ```\n``` 127.0.0.1 docker.domain.com```\n\n\n### 5.3  register\n\ncurl  https://docker.domain.com\n\n\n### 5.4 \n<img src=\"/images/050.registry_setup.md.02.png\" width=100% height=100% />\n","slug":"050.registry_setup","published":1,"updated":"2023-09-20T08:29:30.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbg6004qyknr3zepa8q7","content":"<h2 id=\"-registry-\"><a href=\"#-registry-\" class=\"headerlink\" title=\" registry \"></a> registry </h2><p>PATH: <code>/etc/docker/registry/config.yml</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"number\">0.1</span></span><br><span class=\"line\"><span class=\"attr\">log:</span></span><br><span class=\"line\">  <span class=\"attr\">accesslog:</span></span><br><span class=\"line\">    <span class=\"attr\">disabled:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"attr\">level:</span> <span class=\"string\">debug</span></span><br><span class=\"line\">  <span class=\"attr\">formatter:</span> <span class=\"string\">text</span></span><br><span class=\"line\">  <span class=\"attr\">fields:</span></span><br><span class=\"line\">    <span class=\"attr\">service:</span> <span class=\"string\">registry</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span> <span class=\"string\">staging</span></span><br><span class=\"line\"><span class=\"attr\">storage:</span></span><br><span class=\"line\">  <span class=\"attr\">delete:</span></span><br><span class=\"line\">    <span class=\"attr\">enabled:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"attr\">cache:</span></span><br><span class=\"line\">    <span class=\"attr\">blobdescriptor:</span> <span class=\"string\">inmemory</span></span><br><span class=\"line\">  <span class=\"attr\">filesystem:</span></span><br><span class=\"line\">    <span class=\"attr\">rootdirectory:</span> <span class=\"string\">/var/lib/registry</span></span><br><span class=\"line\"><span class=\"attr\">auth:</span></span><br><span class=\"line\">  <span class=\"attr\">htpasswd:</span></span><br><span class=\"line\">    <span class=\"attr\">realm:</span> <span class=\"string\">basic-realm</span></span><br><span class=\"line\">    <span class=\"attr\">path:</span> <span class=\"string\">/etc/docker/registry/auth/nginx.htpasswd</span>   <span class=\"comment\">## </span></span><br><span class=\"line\"><span class=\"attr\">http:</span></span><br><span class=\"line\">  <span class=\"attr\">addr:</span> <span class=\"string\">:5000</span>                                        <span class=\"comment\">## </span></span><br><span class=\"line\">  <span class=\"attr\">host:</span> <span class=\"string\">https://docker.domain.com</span>                    <span class=\"comment\">##   </span></span><br><span class=\"line\">  <span class=\"attr\">headers:</span></span><br><span class=\"line\">    <span class=\"attr\">X-Content-Type-Options:</span> [<span class=\"string\">nosniff</span>]</span><br><span class=\"line\">  <span class=\"attr\">http2:</span></span><br><span class=\"line\">    <span class=\"attr\">disabled:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"attr\">tls:</span></span><br><span class=\"line\">    <span class=\"attr\">certificate:</span> <span class=\"string\">/etc/docker/registry/ssl/docker.domain.com.crt</span>  <span class=\"comment\">## </span></span><br><span class=\"line\">    <span class=\"attr\">key:</span> <span class=\"string\">/etc/docker/registry/ssl/docker.domain.com.key</span>          <span class=\"comment\">## </span></span><br><span class=\"line\"><span class=\"attr\">health:</span></span><br><span class=\"line\">  <span class=\"attr\">storagedriver:</span></span><br><span class=\"line\">    <span class=\"attr\">enabled:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">interval:</span> <span class=\"string\">10s</span></span><br><span class=\"line\"><span class=\"attr\">threshold:</span> <span class=\"number\">3</span></span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"-registry-docker-compose\"><a href=\"#-registry-docker-compose\" class=\"headerlink\" title=\" registry docker-compose\"></a> registry docker-compose</h2><p>PATH: <code>/usr/local/docker/docker-compose/registry.yaml </code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span> </span><br><span class=\"line\">    <span class=\"attr\">registry:</span></span><br><span class=\"line\">        <span class=\"attr\">image:</span> <span class=\"string\">registry:latest</span></span><br><span class=\"line\">        <span class=\"attr\">ports:</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&quot;443:5000&quot;</span></span><br><span class=\"line\">        <span class=\"attr\">container_name:</span> <span class=\"string\">registry</span></span><br><span class=\"line\">        <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">        <span class=\"attr\">volumes:</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">/etc/docker/registry:/etc/docker/registry</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">/var/lib/registry:/var/lib/registry</span>    </span><br><span class=\"line\">        <span class=\"attr\">networks:</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&quot;my-network&quot;</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">    <span class=\"attr\">my-network:</span></span><br><span class=\"line\">        <span class=\"attr\">driver:</span> <span class=\"string\">bridge</span></span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"-http-\"><a href=\"#-http-\" class=\"headerlink\" title=\" http \"></a> http </h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run --<span class=\"built_in\">rm</span> \\</span><br><span class=\"line\">    --entrypoint htpasswd \\</span><br><span class=\"line\">    httpd:alpine \\</span><br><span class=\"line\">    -Bbn <span class=\"variable\">$USERNAME</span> <span class=\"variable\">$PASSWORD</span> &gt; /etc/docker/registry/auth/nginx.htpasswd</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"-https\"><a href=\"#-https\" class=\"headerlink\" title=\" https\"></a> https</h2><p><strong>https ZeroSSL</strong></p>\n<img src=\"/images/050.registry_setup.md.01.png\" width=100% height=100% />\n\n<p> <code>/etc/docker/registry/ssl/docker.domain.com.crt</code><br> <code>/etc/docker/registry/ssl/docker.domain.com.key</code><br> <code>/etc/docker/registry/ssl/docker.domain.com.csr</code></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"5-1--registry\"><a href=\"#5-1--registry\" class=\"headerlink\" title=\"5.1  registry\"></a>5.1  registry</h3><p><code>docker-compose -f /usr/local/docker/docker-compose/registry.yaml up -d</code></p>\n<h3 id=\"5-2--hosts\"><a href=\"#5-2--hosts\" class=\"headerlink\" title=\"5.2  hosts\"></a>5.2  hosts</h3><p><code>vim /etc/hosts</code><br><code> 127.0.0.1 docker.domain.com</code></p>\n<h3 id=\"5-3--register\"><a href=\"#5-3--register\" class=\"headerlink\" title=\"5.3  register\"></a>5.3  register</h3><p>curl  <a href=\"https://docker.domain.com/\">https://docker.domain.com</a></p>\n<h3 id=\"5-4-\"><a href=\"#5-4-\" class=\"headerlink\" title=\"5.4 \"></a>5.4 </h3><img src=\"/images/050.registry_setup.md.02.png\" width=100% height=100% />\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"-registry-\"><a href=\"#-registry-\" class=\"headerlink\" title=\" registry \"></a> registry </h2><p>PATH: <code>/etc/docker/registry/config.yml</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"number\">0.1</span></span><br><span class=\"line\"><span class=\"attr\">log:</span></span><br><span class=\"line\">  <span class=\"attr\">accesslog:</span></span><br><span class=\"line\">    <span class=\"attr\">disabled:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"attr\">level:</span> <span class=\"string\">debug</span></span><br><span class=\"line\">  <span class=\"attr\">formatter:</span> <span class=\"string\">text</span></span><br><span class=\"line\">  <span class=\"attr\">fields:</span></span><br><span class=\"line\">    <span class=\"attr\">service:</span> <span class=\"string\">registry</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span> <span class=\"string\">staging</span></span><br><span class=\"line\"><span class=\"attr\">storage:</span></span><br><span class=\"line\">  <span class=\"attr\">delete:</span></span><br><span class=\"line\">    <span class=\"attr\">enabled:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"attr\">cache:</span></span><br><span class=\"line\">    <span class=\"attr\">blobdescriptor:</span> <span class=\"string\">inmemory</span></span><br><span class=\"line\">  <span class=\"attr\">filesystem:</span></span><br><span class=\"line\">    <span class=\"attr\">rootdirectory:</span> <span class=\"string\">/var/lib/registry</span></span><br><span class=\"line\"><span class=\"attr\">auth:</span></span><br><span class=\"line\">  <span class=\"attr\">htpasswd:</span></span><br><span class=\"line\">    <span class=\"attr\">realm:</span> <span class=\"string\">basic-realm</span></span><br><span class=\"line\">    <span class=\"attr\">path:</span> <span class=\"string\">/etc/docker/registry/auth/nginx.htpasswd</span>   <span class=\"comment\">## </span></span><br><span class=\"line\"><span class=\"attr\">http:</span></span><br><span class=\"line\">  <span class=\"attr\">addr:</span> <span class=\"string\">:5000</span>                                        <span class=\"comment\">## </span></span><br><span class=\"line\">  <span class=\"attr\">host:</span> <span class=\"string\">https://docker.domain.com</span>                    <span class=\"comment\">##   </span></span><br><span class=\"line\">  <span class=\"attr\">headers:</span></span><br><span class=\"line\">    <span class=\"attr\">X-Content-Type-Options:</span> [<span class=\"string\">nosniff</span>]</span><br><span class=\"line\">  <span class=\"attr\">http2:</span></span><br><span class=\"line\">    <span class=\"attr\">disabled:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"attr\">tls:</span></span><br><span class=\"line\">    <span class=\"attr\">certificate:</span> <span class=\"string\">/etc/docker/registry/ssl/docker.domain.com.crt</span>  <span class=\"comment\">## </span></span><br><span class=\"line\">    <span class=\"attr\">key:</span> <span class=\"string\">/etc/docker/registry/ssl/docker.domain.com.key</span>          <span class=\"comment\">## </span></span><br><span class=\"line\"><span class=\"attr\">health:</span></span><br><span class=\"line\">  <span class=\"attr\">storagedriver:</span></span><br><span class=\"line\">    <span class=\"attr\">enabled:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">interval:</span> <span class=\"string\">10s</span></span><br><span class=\"line\"><span class=\"attr\">threshold:</span> <span class=\"number\">3</span></span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"-registry-docker-compose\"><a href=\"#-registry-docker-compose\" class=\"headerlink\" title=\" registry docker-compose\"></a> registry docker-compose</h2><p>PATH: <code>/usr/local/docker/docker-compose/registry.yaml </code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span> </span><br><span class=\"line\">    <span class=\"attr\">registry:</span></span><br><span class=\"line\">        <span class=\"attr\">image:</span> <span class=\"string\">registry:latest</span></span><br><span class=\"line\">        <span class=\"attr\">ports:</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&quot;443:5000&quot;</span></span><br><span class=\"line\">        <span class=\"attr\">container_name:</span> <span class=\"string\">registry</span></span><br><span class=\"line\">        <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">        <span class=\"attr\">volumes:</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">/etc/docker/registry:/etc/docker/registry</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">/var/lib/registry:/var/lib/registry</span>    </span><br><span class=\"line\">        <span class=\"attr\">networks:</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&quot;my-network&quot;</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">    <span class=\"attr\">my-network:</span></span><br><span class=\"line\">        <span class=\"attr\">driver:</span> <span class=\"string\">bridge</span></span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"-http-\"><a href=\"#-http-\" class=\"headerlink\" title=\" http \"></a> http </h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">docker run --<span class=\"built_in\">rm</span> \\</span><br><span class=\"line\">    --entrypoint htpasswd \\</span><br><span class=\"line\">    httpd:alpine \\</span><br><span class=\"line\">    -Bbn <span class=\"variable\">$USERNAME</span> <span class=\"variable\">$PASSWORD</span> &gt; /etc/docker/registry/auth/nginx.htpasswd</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"-https\"><a href=\"#-https\" class=\"headerlink\" title=\" https\"></a> https</h2><p><strong>https ZeroSSL</strong></p>\n<img src=\"/images/050.registry_setup.md.01.png\" width=100% height=100% />\n\n<p> <code>/etc/docker/registry/ssl/docker.domain.com.crt</code><br> <code>/etc/docker/registry/ssl/docker.domain.com.key</code><br> <code>/etc/docker/registry/ssl/docker.domain.com.csr</code></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"5-1--registry\"><a href=\"#5-1--registry\" class=\"headerlink\" title=\"5.1  registry\"></a>5.1  registry</h3><p><code>docker-compose -f /usr/local/docker/docker-compose/registry.yaml up -d</code></p>\n<h3 id=\"5-2--hosts\"><a href=\"#5-2--hosts\" class=\"headerlink\" title=\"5.2  hosts\"></a>5.2  hosts</h3><p><code>vim /etc/hosts</code><br><code> 127.0.0.1 docker.domain.com</code></p>\n<h3 id=\"5-3--register\"><a href=\"#5-3--register\" class=\"headerlink\" title=\"5.3  register\"></a>5.3  register</h3><p>curl  <a href=\"https://docker.domain.com/\">https://docker.domain.com</a></p>\n<h3 id=\"5-4-\"><a href=\"#5-4-\" class=\"headerlink\" title=\"5.4 \"></a>5.4 </h3><img src=\"/images/050.registry_setup.md.02.png\" width=100% height=100% />\n"},{"title":"MySQL","date":"2023-09-25T08:45:00.000Z","_content":"\n\n##  \n\n\n- vmware centos7.2 4c8g\n- mysql release: 5.7.34\n- mysql installation path: /usr/local/mysql\n- mysql datadir: /data/mysql\n- mysql cnf: /etc/my.cnf\n\n\n## \n\n### 1.1 \n\n[](https://dev.mysql.com/downloads/mysql/5.7.html)\n\n<img src=\"/images/051.MySQL_Install_Using_Generic_Binaries.md.01.png\" width=100% height=100% />\n\n### 1.2 \n\n```tar -xzvf mysql-5.7.43-linux-glibc2.12-x86_64.tar.gz```\n\n```cp -Rf ./mysql-5.7.43-linux-glibc2.12-x86_64 /usr/local/mysql```\n\n### 1.3 \n\n``` groupadd mysql```\n``` useradd -g mysql mysql```\n``` mkdir -p /data/mysql```\n``` chown -R mysql:mysql /data/mysql```\n``` chmod -R 750 /data/mysql```\n\n### 1.4 MySQL\n\n``` vim /etc/my.cnf ```\n\n``` yaml\n[mysqld]\n\n# \ndatadir=/data/mysql/\n# socket \nsocket=/data/mysql/mysql.sock\n# \nlog-error=/data/mysql/mysql-err.log\n#\nport=3306\n# ID\nserver-id=1\ninnodb_buffer_pool_size = 50G\nlower_case_table_names=0\n# \ntmpdir=/data/mysql/tmp/\n# MySQLlc_messages_dir=/usr/local/mysql/share.MySQL \nlc_messages_dir=/usr/local/mysql/share\n```\n\n##  \n\n### 2.1 \n\n``` yaml\n/usr/local/mysql/bin/mysqld --no-defaults --initialize-insecure --user=mysql --datadir=/data/mysql/ --lower_case_table_names=0 \n```\n\n >To initialize the data directory, invoke mysqld with the ```--initialize ``` or ``` --initialize-insecure ``` option, depending on whether you want the server to generate a random initial password for the ```'root'@'localhost'``` account, or to create that account with no password:\n>>Use ``` --initialize ``` for secure by default installation (that is, including generation of a random initial root password). In this case, the password is marked as expired and you must choose a new one.\n\n>>With ``` --initialize-insecure ``` , no root password is generated. This is insecure; it is assumed that you intend to assign a password to the account in a timely fashion before putting the server into production use. \n\n ``` grep \"password\" /path to you mysql-err.log ``` ``` --initialize ```\n\n****:\n-  ``` mkdir -p /data/mysql/tmp ``` \n-  /data/mysql.\n\n<img src=\"/images/051.MySQL_Install_Using_Generic_Binaries.md.02.png\" width=100% height=100% />\n\n\n\n##   systemd \n\n``` yaml\n# /usr/lib/systemd/system/mysql.service\n# Copyright (c) 2016, 2021, Oracle and/or its affiliates.\n#\n# This program is free software; you can redistribute it and/or modify\n# it under the terms of the GNU General Public License, version 2.0,\n# as published by the Free Software Foundation.\n#\n# This program is also distributed with certain software (including\n# but not limited to OpenSSL) that is licensed under separate terms,\n# as designated in a particular file or component or in included license\n# documentation.  The authors of MySQL hereby grant you an additional\n# permission to link the program and your derivative works with the\n# separately licensed software that they have included with MySQL.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License, version 2.0, for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with this program; if not, write to the Free Software\n# Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA\n#\n# systemd service file for MySQL forking server\n#\n \n[Unit]\nDescription=MySQL Server\nDocumentation=man:mysqld(8)\nDocumentation=http://dev.mysql.com/doc/refman/en/using-systemd.html\nAfter=network.target\nAfter=syslog.target\n \n[Install]\nWantedBy=multi-user.target\n[Service]\nUser=mysql\nGroup=mysql\nType=forking\nPIDFile=/data/mysql/mysqld.pid\n# Disable service start and stop timeout logic of systemd for mysqld service.\nTimeoutSec=0\n# Execute pre and post scripts as root\nPermissionsStartOnly=true\n# Needed to create system tables\n# ExecStartPre=/usr/bin/mysqld_pre_systemd %I\n# Start main service\nExecStart=/usr/local/mysql/bin/mysqld --defaults-file=/etc/my.cnf  --daemonize --pid-file=/data/mysql/mysqld.pid $MYSQLD_OPTS\n \n# Use this to switch malloc implementation\nEnvironmentFile=-/etc/sysconfig/mysql\n# Sets open_files_limit\nLimitNOFILE = 65536\nRestart=on-failure\nRestartPreventExitStatus=1\nEnvironment=MYSQLD_PARENT_PID=1\nPrivateTmp=false\n\n```\n\n### 3.1 MySQL\n\n``` systemctl daemon-reload ```\n``` systemctl enable mysql --now ```\n``` systemctl status mysql ```\n\n\n##  MySQL \n\n:\n\n``` yaml\n[client]                                        #\nport= 3306                                        #\nsocket= /tmp/mysql.sock                            #socket\ndefault-character-set = utf8                    #\n\n[mysql]                                            #\nprompt=\"MySQL [\\d]> \"                            #prompt=\"\\\\u@\\\\h:\\\\d>\"   \nno-auto-rehash                                    #auto-rehash   \n\n[mysqld]                                        #\nport = 3306                                        #\nsocket = /tmp/mysql.sock                        #\ndatadir = /data/mysql               #\nbasedir = /usr/local/mysql                        #\npid-file = /usr/local/mysql/mysql.pid            #pid\nuser = mysql                                    #\nserver-id=1                                        #\ninit-connect = 'SET NAMES utf8'                    #\ncharacter_set_server=utf8                        #\n#skip-networking                                #mysqlTCP/IP\nback_log = 300                                    #\nopen_files_limit = 65535                        #\nbinlog_cache_size = 1M                            #cache32k,\nmax_heap_table_size = 8M                        #\ntmp_table_size = 128M                            #32M\nft_min_word_len = 4                                #\nlog_bin = mysql-bin                                #\nbinlog_format = mixed                            #statementmixed                    \nexpire_logs_days = 7                            #\nlog_error = /usr/local/mysql/mysql-error.log    #\nslow_query_log = 1                                #,on|off\nlong_query_time = 1                                #\nslow_query_log_file = /usr/local/mysql/mysql-slow.log    #mysqldumpslow  -hmysqldumpslow -s c -t 20 host-slow.log\nperformance_schema = 0                            #\nexplicit_defaults_for_timestamp                    #timestamp\nlower_case_table_names = 1                        #012\nskip-external-locking                            #external-locking\n\n##network setting\nskip-name-resolve                                #mysqlDNSIP\nbind-address = 0.0.0.0                            #\nmax_connections = 1024                            #Mysql,'conn%'\nmax_connect_errors = 102400                        #FLUSH HOST\nmax_allowed_packet = 32M                        #\ninteractive_timeout = 28800                        #28800,8\nwait_timeout = 28800                            #28800\n\n##innodb setting\ndefault_storage_engine = InnoDB                    #\ninnodb_file_per_table = 1                        #\ninnodb_open_files = 500                            #300Innodb\ninnodb_buffer_pool_size = 1024M                    #5-6G8G20-25GB(32GB)100-120GB(128GB)\ninnodb_write_io_threads = 4                        #IO\ninnodb_read_io_threads = 4                        #IO\ninnodb_thread_concurrency = 0                    #CPU,8\ninnodb_purge_threads = 1                        #32purge()\ninnodb_flush_log_at_trx_commit = 2                #2    \ninnodb_log_buffer_size = 2M                        #1-8\ninnodb_log_file_size = 32M                        #\ninnodb_log_files_in_group = 3                    #23.mysql\ninnodb_max_dirty_pages_pct = 90                    #75\ninnodb_lock_wait_timeout = 120                    #50\n\n##cache setting\nkey_buffer_size = 32M                            #4G256MB384MB\ntable_open_cache = 512                            #5.1.3table_open_cachetable\nsort_buffer_size = 2M                            #connection500500*8=4G\njoin_buffer_size = 2M                            #2M\nread_buffer_size = 2M                            #myisam\nread_rnd_buffer_size = 8M                        #\nthread_cache_size = 64                            #1GB8,2G18,3G32,4G                    \nquery_cache_type = 1                            #012selectSQL_CACHE\nquery_cache_size = 64M                            #    ,selectdbSQLDBclient    \nquery_cache_limit = 2M                            #\nbulk_insert_buffer_size = 8M                    #8M\n\nmyisam_sort_buffer_size = 64M                    #myisam8M\nmyisam_max_sort_file_size = 10G                    #mysql\n\n#event_scheduler =ON\n#skip-external-locking\n#sql_mode ='STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION'\n\n[mysqldump]\nquick                                            #\nmax_allowed_packet = 500M                        #\n\n[myisamchk]\nkey_buffer_size = 256M                            #key\nsort_buffer_size = 8M                            #\nread_buffer = 4M                                #\nwrite_buffer = 4M                                #\n```","source":"_posts/051.MySQL_Install_Using_Generic_Binaries.md","raw":"---\ntitle: MySQL\ndate: 2023-9-25 16:45:00\ncategories: \n- [Database]\ntags: \n- MySQL\n---\n\n\n##  \n\n\n- vmware centos7.2 4c8g\n- mysql release: 5.7.34\n- mysql installation path: /usr/local/mysql\n- mysql datadir: /data/mysql\n- mysql cnf: /etc/my.cnf\n\n\n## \n\n### 1.1 \n\n[](https://dev.mysql.com/downloads/mysql/5.7.html)\n\n<img src=\"/images/051.MySQL_Install_Using_Generic_Binaries.md.01.png\" width=100% height=100% />\n\n### 1.2 \n\n```tar -xzvf mysql-5.7.43-linux-glibc2.12-x86_64.tar.gz```\n\n```cp -Rf ./mysql-5.7.43-linux-glibc2.12-x86_64 /usr/local/mysql```\n\n### 1.3 \n\n``` groupadd mysql```\n``` useradd -g mysql mysql```\n``` mkdir -p /data/mysql```\n``` chown -R mysql:mysql /data/mysql```\n``` chmod -R 750 /data/mysql```\n\n### 1.4 MySQL\n\n``` vim /etc/my.cnf ```\n\n``` yaml\n[mysqld]\n\n# \ndatadir=/data/mysql/\n# socket \nsocket=/data/mysql/mysql.sock\n# \nlog-error=/data/mysql/mysql-err.log\n#\nport=3306\n# ID\nserver-id=1\ninnodb_buffer_pool_size = 50G\nlower_case_table_names=0\n# \ntmpdir=/data/mysql/tmp/\n# MySQLlc_messages_dir=/usr/local/mysql/share.MySQL \nlc_messages_dir=/usr/local/mysql/share\n```\n\n##  \n\n### 2.1 \n\n``` yaml\n/usr/local/mysql/bin/mysqld --no-defaults --initialize-insecure --user=mysql --datadir=/data/mysql/ --lower_case_table_names=0 \n```\n\n >To initialize the data directory, invoke mysqld with the ```--initialize ``` or ``` --initialize-insecure ``` option, depending on whether you want the server to generate a random initial password for the ```'root'@'localhost'``` account, or to create that account with no password:\n>>Use ``` --initialize ``` for secure by default installation (that is, including generation of a random initial root password). In this case, the password is marked as expired and you must choose a new one.\n\n>>With ``` --initialize-insecure ``` , no root password is generated. This is insecure; it is assumed that you intend to assign a password to the account in a timely fashion before putting the server into production use. \n\n ``` grep \"password\" /path to you mysql-err.log ``` ``` --initialize ```\n\n****:\n-  ``` mkdir -p /data/mysql/tmp ``` \n-  /data/mysql.\n\n<img src=\"/images/051.MySQL_Install_Using_Generic_Binaries.md.02.png\" width=100% height=100% />\n\n\n\n##   systemd \n\n``` yaml\n# /usr/lib/systemd/system/mysql.service\n# Copyright (c) 2016, 2021, Oracle and/or its affiliates.\n#\n# This program is free software; you can redistribute it and/or modify\n# it under the terms of the GNU General Public License, version 2.0,\n# as published by the Free Software Foundation.\n#\n# This program is also distributed with certain software (including\n# but not limited to OpenSSL) that is licensed under separate terms,\n# as designated in a particular file or component or in included license\n# documentation.  The authors of MySQL hereby grant you an additional\n# permission to link the program and your derivative works with the\n# separately licensed software that they have included with MySQL.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License, version 2.0, for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with this program; if not, write to the Free Software\n# Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA\n#\n# systemd service file for MySQL forking server\n#\n \n[Unit]\nDescription=MySQL Server\nDocumentation=man:mysqld(8)\nDocumentation=http://dev.mysql.com/doc/refman/en/using-systemd.html\nAfter=network.target\nAfter=syslog.target\n \n[Install]\nWantedBy=multi-user.target\n[Service]\nUser=mysql\nGroup=mysql\nType=forking\nPIDFile=/data/mysql/mysqld.pid\n# Disable service start and stop timeout logic of systemd for mysqld service.\nTimeoutSec=0\n# Execute pre and post scripts as root\nPermissionsStartOnly=true\n# Needed to create system tables\n# ExecStartPre=/usr/bin/mysqld_pre_systemd %I\n# Start main service\nExecStart=/usr/local/mysql/bin/mysqld --defaults-file=/etc/my.cnf  --daemonize --pid-file=/data/mysql/mysqld.pid $MYSQLD_OPTS\n \n# Use this to switch malloc implementation\nEnvironmentFile=-/etc/sysconfig/mysql\n# Sets open_files_limit\nLimitNOFILE = 65536\nRestart=on-failure\nRestartPreventExitStatus=1\nEnvironment=MYSQLD_PARENT_PID=1\nPrivateTmp=false\n\n```\n\n### 3.1 MySQL\n\n``` systemctl daemon-reload ```\n``` systemctl enable mysql --now ```\n``` systemctl status mysql ```\n\n\n##  MySQL \n\n:\n\n``` yaml\n[client]                                        #\nport= 3306                                        #\nsocket= /tmp/mysql.sock                            #socket\ndefault-character-set = utf8                    #\n\n[mysql]                                            #\nprompt=\"MySQL [\\d]> \"                            #prompt=\"\\\\u@\\\\h:\\\\d>\"   \nno-auto-rehash                                    #auto-rehash   \n\n[mysqld]                                        #\nport = 3306                                        #\nsocket = /tmp/mysql.sock                        #\ndatadir = /data/mysql               #\nbasedir = /usr/local/mysql                        #\npid-file = /usr/local/mysql/mysql.pid            #pid\nuser = mysql                                    #\nserver-id=1                                        #\ninit-connect = 'SET NAMES utf8'                    #\ncharacter_set_server=utf8                        #\n#skip-networking                                #mysqlTCP/IP\nback_log = 300                                    #\nopen_files_limit = 65535                        #\nbinlog_cache_size = 1M                            #cache32k,\nmax_heap_table_size = 8M                        #\ntmp_table_size = 128M                            #32M\nft_min_word_len = 4                                #\nlog_bin = mysql-bin                                #\nbinlog_format = mixed                            #statementmixed                    \nexpire_logs_days = 7                            #\nlog_error = /usr/local/mysql/mysql-error.log    #\nslow_query_log = 1                                #,on|off\nlong_query_time = 1                                #\nslow_query_log_file = /usr/local/mysql/mysql-slow.log    #mysqldumpslow  -hmysqldumpslow -s c -t 20 host-slow.log\nperformance_schema = 0                            #\nexplicit_defaults_for_timestamp                    #timestamp\nlower_case_table_names = 1                        #012\nskip-external-locking                            #external-locking\n\n##network setting\nskip-name-resolve                                #mysqlDNSIP\nbind-address = 0.0.0.0                            #\nmax_connections = 1024                            #Mysql,'conn%'\nmax_connect_errors = 102400                        #FLUSH HOST\nmax_allowed_packet = 32M                        #\ninteractive_timeout = 28800                        #28800,8\nwait_timeout = 28800                            #28800\n\n##innodb setting\ndefault_storage_engine = InnoDB                    #\ninnodb_file_per_table = 1                        #\ninnodb_open_files = 500                            #300Innodb\ninnodb_buffer_pool_size = 1024M                    #5-6G8G20-25GB(32GB)100-120GB(128GB)\ninnodb_write_io_threads = 4                        #IO\ninnodb_read_io_threads = 4                        #IO\ninnodb_thread_concurrency = 0                    #CPU,8\ninnodb_purge_threads = 1                        #32purge()\ninnodb_flush_log_at_trx_commit = 2                #2    \ninnodb_log_buffer_size = 2M                        #1-8\ninnodb_log_file_size = 32M                        #\ninnodb_log_files_in_group = 3                    #23.mysql\ninnodb_max_dirty_pages_pct = 90                    #75\ninnodb_lock_wait_timeout = 120                    #50\n\n##cache setting\nkey_buffer_size = 32M                            #4G256MB384MB\ntable_open_cache = 512                            #5.1.3table_open_cachetable\nsort_buffer_size = 2M                            #connection500500*8=4G\njoin_buffer_size = 2M                            #2M\nread_buffer_size = 2M                            #myisam\nread_rnd_buffer_size = 8M                        #\nthread_cache_size = 64                            #1GB8,2G18,3G32,4G                    \nquery_cache_type = 1                            #012selectSQL_CACHE\nquery_cache_size = 64M                            #    ,selectdbSQLDBclient    \nquery_cache_limit = 2M                            #\nbulk_insert_buffer_size = 8M                    #8M\n\nmyisam_sort_buffer_size = 64M                    #myisam8M\nmyisam_max_sort_file_size = 10G                    #mysql\n\n#event_scheduler =ON\n#skip-external-locking\n#sql_mode ='STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION'\n\n[mysqldump]\nquick                                            #\nmax_allowed_packet = 500M                        #\n\n[myisamchk]\nkey_buffer_size = 256M                            #key\nsort_buffer_size = 8M                            #\nread_buffer = 4M                                #\nwrite_buffer = 4M                                #\n```","slug":"051.MySQL_Install_Using_Generic_Binaries","published":1,"updated":"2023-09-26T02:42:31.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbg8004syknr2g4899g5","content":"<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><ul>\n<li>vmware centos7.2 4c8g</li>\n<li>mysql release: 5.7.34</li>\n<li>mysql installation path: &#x2F;usr&#x2F;local&#x2F;mysql</li>\n<li>mysql datadir: &#x2F;data&#x2F;mysql</li>\n<li>mysql cnf: &#x2F;etc&#x2F;my.cnf</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"1-1-\"><a href=\"#1-1-\" class=\"headerlink\" title=\"1.1 \"></a>1.1 </h3><p><a href=\"https://dev.mysql.com/downloads/mysql/5.7.html\"></a></p>\n<img src=\"/images/051.MySQL_Install_Using_Generic_Binaries.md.01.png\" width=100% height=100% />\n\n<h3 id=\"1-2-\"><a href=\"#1-2-\" class=\"headerlink\" title=\"1.2 \"></a>1.2 </h3><p><code>tar -xzvf mysql-5.7.43-linux-glibc2.12-x86_64.tar.gz</code></p>\n<p><code>cp -Rf ./mysql-5.7.43-linux-glibc2.12-x86_64 /usr/local/mysql</code></p>\n<h3 id=\"1-3-\"><a href=\"#1-3-\" class=\"headerlink\" title=\"1.3 \"></a>1.3 </h3><p><code> groupadd mysql</code><br><code> useradd -g mysql mysql</code><br><code> mkdir -p /data/mysql</code><br><code> chown -R mysql:mysql /data/mysql</code><br><code> chmod -R 750 /data/mysql</code></p>\n<h3 id=\"1-4-MySQL\"><a href=\"#1-4-MySQL\" class=\"headerlink\" title=\"1.4 MySQL\"></a>1.4 MySQL</h3><p><code>vim /etc/my.cnf</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\">[<span class=\"string\">mysqld</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"string\">datadir=/data/mysql/</span></span><br><span class=\"line\"><span class=\"comment\"># socket </span></span><br><span class=\"line\"><span class=\"string\">socket=/data/mysql/mysql.sock</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"string\">log-error=/data/mysql/mysql-err.log</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">port=3306</span></span><br><span class=\"line\"><span class=\"comment\"># ID</span></span><br><span class=\"line\"><span class=\"string\">server-id=1</span></span><br><span class=\"line\"><span class=\"string\">innodb_buffer_pool_size</span> <span class=\"string\">=</span> <span class=\"string\">50G</span></span><br><span class=\"line\"><span class=\"string\">lower_case_table_names=0</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"string\">tmpdir=/data/mysql/tmp/</span></span><br><span class=\"line\"><span class=\"comment\"># MySQLlc_messages_dir=/usr/local/mysql/share.MySQL </span></span><br><span class=\"line\"><span class=\"string\">lc_messages_dir=/usr/local/mysql/share</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"2-1-\"><a href=\"#2-1-\" class=\"headerlink\" title=\"2.1 \"></a>2.1 </h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">/usr/local/mysql/bin/mysqld</span> <span class=\"string\">--no-defaults</span> <span class=\"string\">--initialize-insecure</span> <span class=\"string\">--user=mysql</span> <span class=\"string\">--datadir=/data/mysql/</span> <span class=\"string\">--lower_case_table_names=0</span> </span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>To initialize the data directory, invoke mysqld with the <code>--initialize </code> or <code>--initialize-insecure</code> option, depending on whether you want the server to generate a random initial password for the <code>&#39;root&#39;@&#39;localhost&#39;</code> account, or to create that account with no password:</p>\n<blockquote>\n<p>Use <code>--initialize</code> for secure by default installation (that is, including generation of a random initial root password). In this case, the password is marked as expired and you must choose a new one.</p>\n</blockquote>\n</blockquote>\n<blockquote>\n<blockquote>\n<p>With <code>--initialize-insecure</code> , no root password is generated. This is insecure; it is assumed that you intend to assign a password to the account in a timely fashion before putting the server into production use. </p>\n</blockquote>\n</blockquote>\n<p> <code>grep &quot;password&quot; /path to you mysql-err.log</code> <code>--initialize</code></p>\n<p><strong></strong>:</p>\n<ul>\n<li> <code>mkdir -p /data/mysql/tmp</code> </li>\n<li> &#x2F;data&#x2F;mysql.</li>\n</ul>\n<img src=\"/images/051.MySQL_Install_Using_Generic_Binaries.md.02.png\" width=100% height=100% />\n\n\n\n<h2 id=\"--systemd-\"><a href=\"#--systemd-\" class=\"headerlink\" title=\"  systemd \"></a>  systemd </h2><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># /usr/lib/systemd/system/mysql.service</span></span><br><span class=\"line\"><span class=\"comment\"># Copyright (c) 2016, 2021, Oracle and/or its affiliates.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># This program is free software; you can redistribute it and/or modify</span></span><br><span class=\"line\"><span class=\"comment\"># it under the terms of the GNU General Public License, version 2.0,</span></span><br><span class=\"line\"><span class=\"comment\"># as published by the Free Software Foundation.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># This program is also distributed with certain software (including</span></span><br><span class=\"line\"><span class=\"comment\"># but not limited to OpenSSL) that is licensed under separate terms,</span></span><br><span class=\"line\"><span class=\"comment\"># as designated in a particular file or component or in included license</span></span><br><span class=\"line\"><span class=\"comment\"># documentation.  The authors of MySQL hereby grant you an additional</span></span><br><span class=\"line\"><span class=\"comment\"># permission to link the program and your derivative works with the</span></span><br><span class=\"line\"><span class=\"comment\"># separately licensed software that they have included with MySQL.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># This program is distributed in the hope that it will be useful,</span></span><br><span class=\"line\"><span class=\"comment\"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span></span><br><span class=\"line\"><span class=\"comment\"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></span><br><span class=\"line\"><span class=\"comment\"># GNU General Public License, version 2.0, for more details.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># You should have received a copy of the GNU General Public License</span></span><br><span class=\"line\"><span class=\"comment\"># along with this program; if not, write to the Free Software</span></span><br><span class=\"line\"><span class=\"comment\"># Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># systemd service file for MySQL forking server</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"> </span><br><span class=\"line\">[<span class=\"string\">Unit</span>]</span><br><span class=\"line\"><span class=\"string\">Description=MySQL</span> <span class=\"string\">Server</span></span><br><span class=\"line\"><span class=\"string\">Documentation=man:mysqld(8)</span></span><br><span class=\"line\"><span class=\"string\">Documentation=http://dev.mysql.com/doc/refman/en/using-systemd.html</span></span><br><span class=\"line\"><span class=\"string\">After=network.target</span></span><br><span class=\"line\"><span class=\"string\">After=syslog.target</span></span><br><span class=\"line\"> </span><br><span class=\"line\">[<span class=\"string\">Install</span>]</span><br><span class=\"line\"><span class=\"string\">WantedBy=multi-user.target</span></span><br><span class=\"line\">[<span class=\"string\">Service</span>]</span><br><span class=\"line\"><span class=\"string\">User=mysql</span></span><br><span class=\"line\"><span class=\"string\">Group=mysql</span></span><br><span class=\"line\"><span class=\"string\">Type=forking</span></span><br><span class=\"line\"><span class=\"string\">PIDFile=/data/mysql/mysqld.pid</span></span><br><span class=\"line\"><span class=\"comment\"># Disable service start and stop timeout logic of systemd for mysqld service.</span></span><br><span class=\"line\"><span class=\"string\">TimeoutSec=0</span></span><br><span class=\"line\"><span class=\"comment\"># Execute pre and post scripts as root</span></span><br><span class=\"line\"><span class=\"string\">PermissionsStartOnly=true</span></span><br><span class=\"line\"><span class=\"comment\"># Needed to create system tables</span></span><br><span class=\"line\"><span class=\"comment\"># ExecStartPre=/usr/bin/mysqld_pre_systemd %I</span></span><br><span class=\"line\"><span class=\"comment\"># Start main service</span></span><br><span class=\"line\"><span class=\"string\">ExecStart=/usr/local/mysql/bin/mysqld</span> <span class=\"string\">--defaults-file=/etc/my.cnf</span>  <span class=\"string\">--daemonize</span> <span class=\"string\">--pid-file=/data/mysql/mysqld.pid</span> <span class=\"string\">$MYSQLD_OPTS</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># Use this to switch malloc implementation</span></span><br><span class=\"line\"><span class=\"string\">EnvironmentFile=-/etc/sysconfig/mysql</span></span><br><span class=\"line\"><span class=\"comment\"># Sets open_files_limit</span></span><br><span class=\"line\"><span class=\"string\">LimitNOFILE</span> <span class=\"string\">=</span> <span class=\"number\">65536</span></span><br><span class=\"line\"><span class=\"string\">Restart=on-failure</span></span><br><span class=\"line\"><span class=\"string\">RestartPreventExitStatus=1</span></span><br><span class=\"line\"><span class=\"string\">Environment=MYSQLD_PARENT_PID=1</span></span><br><span class=\"line\"><span class=\"string\">PrivateTmp=false</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-1-MySQL\"><a href=\"#3-1-MySQL\" class=\"headerlink\" title=\"3.1 MySQL\"></a>3.1 MySQL</h3><p><code>systemctl daemon-reload</code><br><code>systemctl enable mysql --now</code><br><code>systemctl status mysql</code></p>\n<h2 id=\"-MySQL-\"><a href=\"#-MySQL-\" class=\"headerlink\" title=\" MySQL \"></a> MySQL </h2><p>:</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\">[<span class=\"string\">client</span>]                                        <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">port=</span> <span class=\"number\">3306</span>                                        <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">socket=</span> <span class=\"string\">/tmp/mysql.sock</span>                            <span class=\"comment\">#socket</span></span><br><span class=\"line\"><span class=\"string\">default-character-set</span> <span class=\"string\">=</span> <span class=\"string\">utf8</span>                    <span class=\"comment\">#</span></span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"string\">mysql</span>]                                            <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">prompt=&quot;MySQL</span> [<span class=\"string\">\\d</span>]<span class=\"string\">&gt;</span> <span class=\"string\">&quot;                            #prompt=&quot;</span><span class=\"string\">\\\\u@\\\\h:\\\\d&gt;&quot;</span>   <span class=\"string\"></span></span><br><span class=\"line\"><span class=\"literal\">no</span><span class=\"string\">-auto-rehash</span>                                    <span class=\"comment\">#auto-rehash   </span></span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"string\">mysqld</span>]                                        <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">port</span> <span class=\"string\">=</span> <span class=\"number\">3306</span>                                        <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">socket</span> <span class=\"string\">=</span> <span class=\"string\">/tmp/mysql.sock</span>                        <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">datadir</span> <span class=\"string\">=</span> <span class=\"string\">/data/mysql</span>               <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">basedir</span> <span class=\"string\">=</span> <span class=\"string\">/usr/local/mysql</span>                        <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">pid-file</span> <span class=\"string\">=</span> <span class=\"string\">/usr/local/mysql/mysql.pid</span>            <span class=\"comment\">#pid</span></span><br><span class=\"line\"><span class=\"string\">user</span> <span class=\"string\">=</span> <span class=\"string\">mysql</span>                                    <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">server-id=1</span>                                        <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">init-connect</span> <span class=\"string\">=</span> <span class=\"string\">&#x27;SET NAMES utf8&#x27;</span>                    <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">character_set_server=utf8</span>                        <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#skip-networking                                #mysqlTCP/IP</span></span><br><span class=\"line\"><span class=\"string\">back_log</span> <span class=\"string\">=</span> <span class=\"number\">300</span>                                    <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">open_files_limit</span> <span class=\"string\">=</span> <span class=\"number\">65535</span>                        <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">binlog_cache_size</span> <span class=\"string\">=</span> <span class=\"string\">1M</span>                            <span class=\"comment\">#cache32k,</span></span><br><span class=\"line\"><span class=\"string\">max_heap_table_size</span> <span class=\"string\">=</span> <span class=\"string\">8M</span>                        <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">tmp_table_size</span> <span class=\"string\">=</span> <span class=\"string\">128M</span>                            <span class=\"comment\">#32M</span></span><br><span class=\"line\"><span class=\"string\">ft_min_word_len</span> <span class=\"string\">=</span> <span class=\"number\">4</span>                                <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">log_bin</span> <span class=\"string\">=</span> <span class=\"string\">mysql-bin</span>                                <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">binlog_format</span> <span class=\"string\">=</span> <span class=\"string\">mixed</span>                            <span class=\"comment\">#statementmixed                    </span></span><br><span class=\"line\"><span class=\"string\">expire_logs_days</span> <span class=\"string\">=</span> <span class=\"number\">7</span>                            <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">log_error</span> <span class=\"string\">=</span> <span class=\"string\">/usr/local/mysql/mysql-error.log</span>    <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">slow_query_log</span> <span class=\"string\">=</span> <span class=\"number\">1</span>                                <span class=\"comment\">#,on|off</span></span><br><span class=\"line\"><span class=\"string\">long_query_time</span> <span class=\"string\">=</span> <span class=\"number\">1</span>                                <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">slow_query_log_file</span> <span class=\"string\">=</span> <span class=\"string\">/usr/local/mysql/mysql-slow.log</span>    <span class=\"comment\">#mysqldumpslow  -hmysqldumpslow -s c -t 20 host-slow.log</span></span><br><span class=\"line\"><span class=\"string\">performance_schema</span> <span class=\"string\">=</span> <span class=\"number\">0</span>                            <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">explicit_defaults_for_timestamp</span>                    <span class=\"comment\">#timestamp</span></span><br><span class=\"line\"><span class=\"string\">lower_case_table_names</span> <span class=\"string\">=</span> <span class=\"number\">1</span>                        <span class=\"comment\">#012</span></span><br><span class=\"line\"><span class=\"string\">skip-external-locking</span>                            <span class=\"comment\">#external-locking</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">##network setting</span></span><br><span class=\"line\"><span class=\"string\">skip-name-resolve</span>                                <span class=\"comment\">#mysqlDNSIP</span></span><br><span class=\"line\"><span class=\"string\">bind-address</span> <span class=\"string\">=</span> <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>                            <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">max_connections</span> <span class=\"string\">=</span> <span class=\"number\">1024</span>                            <span class=\"comment\">#Mysql,&#x27;conn%&#x27;</span></span><br><span class=\"line\"><span class=\"string\">max_connect_errors</span> <span class=\"string\">=</span> <span class=\"number\">102400</span>                        <span class=\"comment\">#FLUSH HOST</span></span><br><span class=\"line\"><span class=\"string\">max_allowed_packet</span> <span class=\"string\">=</span> <span class=\"string\">32M</span>                        <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">interactive_timeout</span> <span class=\"string\">=</span> <span class=\"number\">28800</span>                        <span class=\"comment\">#28800,8</span></span><br><span class=\"line\"><span class=\"string\">wait_timeout</span> <span class=\"string\">=</span> <span class=\"number\">28800</span>                            <span class=\"comment\">#28800</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">##innodb setting</span></span><br><span class=\"line\"><span class=\"string\">default_storage_engine</span> <span class=\"string\">=</span> <span class=\"string\">InnoDB</span>                    <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">innodb_file_per_table</span> <span class=\"string\">=</span> <span class=\"number\">1</span>                        <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">innodb_open_files</span> <span class=\"string\">=</span> <span class=\"number\">500</span>                            <span class=\"comment\">#300Innodb</span></span><br><span class=\"line\"><span class=\"string\">innodb_buffer_pool_size</span> <span class=\"string\">=</span> <span class=\"string\">1024M</span>                    <span class=\"comment\">#5-6G8G20-25GB(32GB)100-120GB(128GB)</span></span><br><span class=\"line\"><span class=\"string\">innodb_write_io_threads</span> <span class=\"string\">=</span> <span class=\"number\">4</span>                        <span class=\"comment\">#IO</span></span><br><span class=\"line\"><span class=\"string\">innodb_read_io_threads</span> <span class=\"string\">=</span> <span class=\"number\">4</span>                        <span class=\"comment\">#IO</span></span><br><span class=\"line\"><span class=\"string\">innodb_thread_concurrency</span> <span class=\"string\">=</span> <span class=\"number\">0</span>                    <span class=\"comment\">#CPU,8</span></span><br><span class=\"line\"><span class=\"string\">innodb_purge_threads</span> <span class=\"string\">=</span> <span class=\"number\">1</span>                        <span class=\"comment\">#32purge()</span></span><br><span class=\"line\"><span class=\"string\">innodb_flush_log_at_trx_commit</span> <span class=\"string\">=</span> <span class=\"number\">2</span>                <span class=\"comment\">#2    </span></span><br><span class=\"line\"><span class=\"string\">innodb_log_buffer_size</span> <span class=\"string\">=</span> <span class=\"string\">2M</span>                        <span class=\"comment\">#1-8</span></span><br><span class=\"line\"><span class=\"string\">innodb_log_file_size</span> <span class=\"string\">=</span> <span class=\"string\">32M</span>                        <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">innodb_log_files_in_group</span> <span class=\"string\">=</span> <span class=\"number\">3</span>                    <span class=\"comment\">#23.mysql</span></span><br><span class=\"line\"><span class=\"string\">innodb_max_dirty_pages_pct</span> <span class=\"string\">=</span> <span class=\"number\">90</span>                    <span class=\"comment\">#75</span></span><br><span class=\"line\"><span class=\"string\">innodb_lock_wait_timeout</span> <span class=\"string\">=</span> <span class=\"number\">120</span>                    <span class=\"comment\">#50</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">##cache setting</span></span><br><span class=\"line\"><span class=\"string\">key_buffer_size</span> <span class=\"string\">=</span> <span class=\"string\">32M</span>                            <span class=\"comment\">#4G256MB384MB</span></span><br><span class=\"line\"><span class=\"string\">table_open_cache</span> <span class=\"string\">=</span> <span class=\"number\">512</span>                            <span class=\"comment\">#5.1.3table_open_cachetable</span></span><br><span class=\"line\"><span class=\"string\">sort_buffer_size</span> <span class=\"string\">=</span> <span class=\"string\">2M</span>                            <span class=\"comment\">#connection500500*8=4G</span></span><br><span class=\"line\"><span class=\"string\">join_buffer_size</span> <span class=\"string\">=</span> <span class=\"string\">2M</span>                            <span class=\"comment\">#2M</span></span><br><span class=\"line\"><span class=\"string\">read_buffer_size</span> <span class=\"string\">=</span> <span class=\"string\">2M</span>                            <span class=\"comment\">#myisam</span></span><br><span class=\"line\"><span class=\"string\">read_rnd_buffer_size</span> <span class=\"string\">=</span> <span class=\"string\">8M</span>                        <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">thread_cache_size</span> <span class=\"string\">=</span> <span class=\"number\">64</span>                            <span class=\"comment\">#1GB8,2G18,3G32,4G                    </span></span><br><span class=\"line\"><span class=\"string\">query_cache_type</span> <span class=\"string\">=</span> <span class=\"number\">1</span>                            <span class=\"comment\">#012selectSQL_CACHE</span></span><br><span class=\"line\"><span class=\"string\">query_cache_size</span> <span class=\"string\">=</span> <span class=\"string\">64M</span>                            <span class=\"comment\">#    ,selectdbSQLDBclient    </span></span><br><span class=\"line\"><span class=\"string\">query_cache_limit</span> <span class=\"string\">=</span> <span class=\"string\">2M</span>                            <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">bulk_insert_buffer_size</span> <span class=\"string\">=</span> <span class=\"string\">8M</span>                    <span class=\"comment\">#8M</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">myisam_sort_buffer_size</span> <span class=\"string\">=</span> <span class=\"string\">64M</span>                    <span class=\"comment\">#myisam8M</span></span><br><span class=\"line\"><span class=\"string\">myisam_max_sort_file_size</span> <span class=\"string\">=</span> <span class=\"string\">10G</span>                    <span class=\"comment\">#mysql</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#event_scheduler =ON</span></span><br><span class=\"line\"><span class=\"comment\">#skip-external-locking</span></span><br><span class=\"line\"><span class=\"comment\">#sql_mode =&#x27;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"string\">mysqldump</span>]</span><br><span class=\"line\"><span class=\"string\">quick</span>                                            <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">max_allowed_packet</span> <span class=\"string\">=</span> <span class=\"string\">500M</span>                        <span class=\"comment\">#</span></span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"string\">myisamchk</span>]</span><br><span class=\"line\"><span class=\"string\">key_buffer_size</span> <span class=\"string\">=</span> <span class=\"string\">256M</span>                            <span class=\"comment\">#key</span></span><br><span class=\"line\"><span class=\"string\">sort_buffer_size</span> <span class=\"string\">=</span> <span class=\"string\">8M</span>                            <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">read_buffer</span> <span class=\"string\">=</span> <span class=\"string\">4M</span>                                <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">write_buffer</span> <span class=\"string\">=</span> <span class=\"string\">4M</span>                                <span class=\"comment\">#</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><ul>\n<li>vmware centos7.2 4c8g</li>\n<li>mysql release: 5.7.34</li>\n<li>mysql installation path: &#x2F;usr&#x2F;local&#x2F;mysql</li>\n<li>mysql datadir: &#x2F;data&#x2F;mysql</li>\n<li>mysql cnf: &#x2F;etc&#x2F;my.cnf</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"1-1-\"><a href=\"#1-1-\" class=\"headerlink\" title=\"1.1 \"></a>1.1 </h3><p><a href=\"https://dev.mysql.com/downloads/mysql/5.7.html\"></a></p>\n<img src=\"/images/051.MySQL_Install_Using_Generic_Binaries.md.01.png\" width=100% height=100% />\n\n<h3 id=\"1-2-\"><a href=\"#1-2-\" class=\"headerlink\" title=\"1.2 \"></a>1.2 </h3><p><code>tar -xzvf mysql-5.7.43-linux-glibc2.12-x86_64.tar.gz</code></p>\n<p><code>cp -Rf ./mysql-5.7.43-linux-glibc2.12-x86_64 /usr/local/mysql</code></p>\n<h3 id=\"1-3-\"><a href=\"#1-3-\" class=\"headerlink\" title=\"1.3 \"></a>1.3 </h3><p><code> groupadd mysql</code><br><code> useradd -g mysql mysql</code><br><code> mkdir -p /data/mysql</code><br><code> chown -R mysql:mysql /data/mysql</code><br><code> chmod -R 750 /data/mysql</code></p>\n<h3 id=\"1-4-MySQL\"><a href=\"#1-4-MySQL\" class=\"headerlink\" title=\"1.4 MySQL\"></a>1.4 MySQL</h3><p><code>vim /etc/my.cnf</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\">[<span class=\"string\">mysqld</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"string\">datadir=/data/mysql/</span></span><br><span class=\"line\"><span class=\"comment\"># socket </span></span><br><span class=\"line\"><span class=\"string\">socket=/data/mysql/mysql.sock</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"string\">log-error=/data/mysql/mysql-err.log</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">port=3306</span></span><br><span class=\"line\"><span class=\"comment\"># ID</span></span><br><span class=\"line\"><span class=\"string\">server-id=1</span></span><br><span class=\"line\"><span class=\"string\">innodb_buffer_pool_size</span> <span class=\"string\">=</span> <span class=\"string\">50G</span></span><br><span class=\"line\"><span class=\"string\">lower_case_table_names=0</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"string\">tmpdir=/data/mysql/tmp/</span></span><br><span class=\"line\"><span class=\"comment\"># MySQLlc_messages_dir=/usr/local/mysql/share.MySQL </span></span><br><span class=\"line\"><span class=\"string\">lc_messages_dir=/usr/local/mysql/share</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"2-1-\"><a href=\"#2-1-\" class=\"headerlink\" title=\"2.1 \"></a>2.1 </h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">/usr/local/mysql/bin/mysqld</span> <span class=\"string\">--no-defaults</span> <span class=\"string\">--initialize-insecure</span> <span class=\"string\">--user=mysql</span> <span class=\"string\">--datadir=/data/mysql/</span> <span class=\"string\">--lower_case_table_names=0</span> </span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>To initialize the data directory, invoke mysqld with the <code>--initialize </code> or <code>--initialize-insecure</code> option, depending on whether you want the server to generate a random initial password for the <code>&#39;root&#39;@&#39;localhost&#39;</code> account, or to create that account with no password:</p>\n<blockquote>\n<p>Use <code>--initialize</code> for secure by default installation (that is, including generation of a random initial root password). In this case, the password is marked as expired and you must choose a new one.</p>\n</blockquote>\n</blockquote>\n<blockquote>\n<blockquote>\n<p>With <code>--initialize-insecure</code> , no root password is generated. This is insecure; it is assumed that you intend to assign a password to the account in a timely fashion before putting the server into production use. </p>\n</blockquote>\n</blockquote>\n<p> <code>grep &quot;password&quot; /path to you mysql-err.log</code> <code>--initialize</code></p>\n<p><strong></strong>:</p>\n<ul>\n<li> <code>mkdir -p /data/mysql/tmp</code> </li>\n<li> &#x2F;data&#x2F;mysql.</li>\n</ul>\n<img src=\"/images/051.MySQL_Install_Using_Generic_Binaries.md.02.png\" width=100% height=100% />\n\n\n\n<h2 id=\"--systemd-\"><a href=\"#--systemd-\" class=\"headerlink\" title=\"  systemd \"></a>  systemd </h2><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># /usr/lib/systemd/system/mysql.service</span></span><br><span class=\"line\"><span class=\"comment\"># Copyright (c) 2016, 2021, Oracle and/or its affiliates.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># This program is free software; you can redistribute it and/or modify</span></span><br><span class=\"line\"><span class=\"comment\"># it under the terms of the GNU General Public License, version 2.0,</span></span><br><span class=\"line\"><span class=\"comment\"># as published by the Free Software Foundation.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># This program is also distributed with certain software (including</span></span><br><span class=\"line\"><span class=\"comment\"># but not limited to OpenSSL) that is licensed under separate terms,</span></span><br><span class=\"line\"><span class=\"comment\"># as designated in a particular file or component or in included license</span></span><br><span class=\"line\"><span class=\"comment\"># documentation.  The authors of MySQL hereby grant you an additional</span></span><br><span class=\"line\"><span class=\"comment\"># permission to link the program and your derivative works with the</span></span><br><span class=\"line\"><span class=\"comment\"># separately licensed software that they have included with MySQL.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># This program is distributed in the hope that it will be useful,</span></span><br><span class=\"line\"><span class=\"comment\"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span></span><br><span class=\"line\"><span class=\"comment\"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></span><br><span class=\"line\"><span class=\"comment\"># GNU General Public License, version 2.0, for more details.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># You should have received a copy of the GNU General Public License</span></span><br><span class=\"line\"><span class=\"comment\"># along with this program; if not, write to the Free Software</span></span><br><span class=\"line\"><span class=\"comment\"># Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># systemd service file for MySQL forking server</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"> </span><br><span class=\"line\">[<span class=\"string\">Unit</span>]</span><br><span class=\"line\"><span class=\"string\">Description=MySQL</span> <span class=\"string\">Server</span></span><br><span class=\"line\"><span class=\"string\">Documentation=man:mysqld(8)</span></span><br><span class=\"line\"><span class=\"string\">Documentation=http://dev.mysql.com/doc/refman/en/using-systemd.html</span></span><br><span class=\"line\"><span class=\"string\">After=network.target</span></span><br><span class=\"line\"><span class=\"string\">After=syslog.target</span></span><br><span class=\"line\"> </span><br><span class=\"line\">[<span class=\"string\">Install</span>]</span><br><span class=\"line\"><span class=\"string\">WantedBy=multi-user.target</span></span><br><span class=\"line\">[<span class=\"string\">Service</span>]</span><br><span class=\"line\"><span class=\"string\">User=mysql</span></span><br><span class=\"line\"><span class=\"string\">Group=mysql</span></span><br><span class=\"line\"><span class=\"string\">Type=forking</span></span><br><span class=\"line\"><span class=\"string\">PIDFile=/data/mysql/mysqld.pid</span></span><br><span class=\"line\"><span class=\"comment\"># Disable service start and stop timeout logic of systemd for mysqld service.</span></span><br><span class=\"line\"><span class=\"string\">TimeoutSec=0</span></span><br><span class=\"line\"><span class=\"comment\"># Execute pre and post scripts as root</span></span><br><span class=\"line\"><span class=\"string\">PermissionsStartOnly=true</span></span><br><span class=\"line\"><span class=\"comment\"># Needed to create system tables</span></span><br><span class=\"line\"><span class=\"comment\"># ExecStartPre=/usr/bin/mysqld_pre_systemd %I</span></span><br><span class=\"line\"><span class=\"comment\"># Start main service</span></span><br><span class=\"line\"><span class=\"string\">ExecStart=/usr/local/mysql/bin/mysqld</span> <span class=\"string\">--defaults-file=/etc/my.cnf</span>  <span class=\"string\">--daemonize</span> <span class=\"string\">--pid-file=/data/mysql/mysqld.pid</span> <span class=\"string\">$MYSQLD_OPTS</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># Use this to switch malloc implementation</span></span><br><span class=\"line\"><span class=\"string\">EnvironmentFile=-/etc/sysconfig/mysql</span></span><br><span class=\"line\"><span class=\"comment\"># Sets open_files_limit</span></span><br><span class=\"line\"><span class=\"string\">LimitNOFILE</span> <span class=\"string\">=</span> <span class=\"number\">65536</span></span><br><span class=\"line\"><span class=\"string\">Restart=on-failure</span></span><br><span class=\"line\"><span class=\"string\">RestartPreventExitStatus=1</span></span><br><span class=\"line\"><span class=\"string\">Environment=MYSQLD_PARENT_PID=1</span></span><br><span class=\"line\"><span class=\"string\">PrivateTmp=false</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-1-MySQL\"><a href=\"#3-1-MySQL\" class=\"headerlink\" title=\"3.1 MySQL\"></a>3.1 MySQL</h3><p><code>systemctl daemon-reload</code><br><code>systemctl enable mysql --now</code><br><code>systemctl status mysql</code></p>\n<h2 id=\"-MySQL-\"><a href=\"#-MySQL-\" class=\"headerlink\" title=\" MySQL \"></a> MySQL </h2><p>:</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\">[<span class=\"string\">client</span>]                                        <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">port=</span> <span class=\"number\">3306</span>                                        <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">socket=</span> <span class=\"string\">/tmp/mysql.sock</span>                            <span class=\"comment\">#socket</span></span><br><span class=\"line\"><span class=\"string\">default-character-set</span> <span class=\"string\">=</span> <span class=\"string\">utf8</span>                    <span class=\"comment\">#</span></span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"string\">mysql</span>]                                            <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">prompt=&quot;MySQL</span> [<span class=\"string\">\\d</span>]<span class=\"string\">&gt;</span> <span class=\"string\">&quot;                            #prompt=&quot;</span><span class=\"string\">\\\\u@\\\\h:\\\\d&gt;&quot;</span>   <span class=\"string\"></span></span><br><span class=\"line\"><span class=\"literal\">no</span><span class=\"string\">-auto-rehash</span>                                    <span class=\"comment\">#auto-rehash   </span></span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"string\">mysqld</span>]                                        <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">port</span> <span class=\"string\">=</span> <span class=\"number\">3306</span>                                        <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">socket</span> <span class=\"string\">=</span> <span class=\"string\">/tmp/mysql.sock</span>                        <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">datadir</span> <span class=\"string\">=</span> <span class=\"string\">/data/mysql</span>               <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">basedir</span> <span class=\"string\">=</span> <span class=\"string\">/usr/local/mysql</span>                        <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">pid-file</span> <span class=\"string\">=</span> <span class=\"string\">/usr/local/mysql/mysql.pid</span>            <span class=\"comment\">#pid</span></span><br><span class=\"line\"><span class=\"string\">user</span> <span class=\"string\">=</span> <span class=\"string\">mysql</span>                                    <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">server-id=1</span>                                        <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">init-connect</span> <span class=\"string\">=</span> <span class=\"string\">&#x27;SET NAMES utf8&#x27;</span>                    <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">character_set_server=utf8</span>                        <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#skip-networking                                #mysqlTCP/IP</span></span><br><span class=\"line\"><span class=\"string\">back_log</span> <span class=\"string\">=</span> <span class=\"number\">300</span>                                    <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">open_files_limit</span> <span class=\"string\">=</span> <span class=\"number\">65535</span>                        <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">binlog_cache_size</span> <span class=\"string\">=</span> <span class=\"string\">1M</span>                            <span class=\"comment\">#cache32k,</span></span><br><span class=\"line\"><span class=\"string\">max_heap_table_size</span> <span class=\"string\">=</span> <span class=\"string\">8M</span>                        <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">tmp_table_size</span> <span class=\"string\">=</span> <span class=\"string\">128M</span>                            <span class=\"comment\">#32M</span></span><br><span class=\"line\"><span class=\"string\">ft_min_word_len</span> <span class=\"string\">=</span> <span class=\"number\">4</span>                                <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">log_bin</span> <span class=\"string\">=</span> <span class=\"string\">mysql-bin</span>                                <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">binlog_format</span> <span class=\"string\">=</span> <span class=\"string\">mixed</span>                            <span class=\"comment\">#statementmixed                    </span></span><br><span class=\"line\"><span class=\"string\">expire_logs_days</span> <span class=\"string\">=</span> <span class=\"number\">7</span>                            <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">log_error</span> <span class=\"string\">=</span> <span class=\"string\">/usr/local/mysql/mysql-error.log</span>    <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">slow_query_log</span> <span class=\"string\">=</span> <span class=\"number\">1</span>                                <span class=\"comment\">#,on|off</span></span><br><span class=\"line\"><span class=\"string\">long_query_time</span> <span class=\"string\">=</span> <span class=\"number\">1</span>                                <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">slow_query_log_file</span> <span class=\"string\">=</span> <span class=\"string\">/usr/local/mysql/mysql-slow.log</span>    <span class=\"comment\">#mysqldumpslow  -hmysqldumpslow -s c -t 20 host-slow.log</span></span><br><span class=\"line\"><span class=\"string\">performance_schema</span> <span class=\"string\">=</span> <span class=\"number\">0</span>                            <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">explicit_defaults_for_timestamp</span>                    <span class=\"comment\">#timestamp</span></span><br><span class=\"line\"><span class=\"string\">lower_case_table_names</span> <span class=\"string\">=</span> <span class=\"number\">1</span>                        <span class=\"comment\">#012</span></span><br><span class=\"line\"><span class=\"string\">skip-external-locking</span>                            <span class=\"comment\">#external-locking</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">##network setting</span></span><br><span class=\"line\"><span class=\"string\">skip-name-resolve</span>                                <span class=\"comment\">#mysqlDNSIP</span></span><br><span class=\"line\"><span class=\"string\">bind-address</span> <span class=\"string\">=</span> <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>                            <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">max_connections</span> <span class=\"string\">=</span> <span class=\"number\">1024</span>                            <span class=\"comment\">#Mysql,&#x27;conn%&#x27;</span></span><br><span class=\"line\"><span class=\"string\">max_connect_errors</span> <span class=\"string\">=</span> <span class=\"number\">102400</span>                        <span class=\"comment\">#FLUSH HOST</span></span><br><span class=\"line\"><span class=\"string\">max_allowed_packet</span> <span class=\"string\">=</span> <span class=\"string\">32M</span>                        <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">interactive_timeout</span> <span class=\"string\">=</span> <span class=\"number\">28800</span>                        <span class=\"comment\">#28800,8</span></span><br><span class=\"line\"><span class=\"string\">wait_timeout</span> <span class=\"string\">=</span> <span class=\"number\">28800</span>                            <span class=\"comment\">#28800</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">##innodb setting</span></span><br><span class=\"line\"><span class=\"string\">default_storage_engine</span> <span class=\"string\">=</span> <span class=\"string\">InnoDB</span>                    <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">innodb_file_per_table</span> <span class=\"string\">=</span> <span class=\"number\">1</span>                        <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">innodb_open_files</span> <span class=\"string\">=</span> <span class=\"number\">500</span>                            <span class=\"comment\">#300Innodb</span></span><br><span class=\"line\"><span class=\"string\">innodb_buffer_pool_size</span> <span class=\"string\">=</span> <span class=\"string\">1024M</span>                    <span class=\"comment\">#5-6G8G20-25GB(32GB)100-120GB(128GB)</span></span><br><span class=\"line\"><span class=\"string\">innodb_write_io_threads</span> <span class=\"string\">=</span> <span class=\"number\">4</span>                        <span class=\"comment\">#IO</span></span><br><span class=\"line\"><span class=\"string\">innodb_read_io_threads</span> <span class=\"string\">=</span> <span class=\"number\">4</span>                        <span class=\"comment\">#IO</span></span><br><span class=\"line\"><span class=\"string\">innodb_thread_concurrency</span> <span class=\"string\">=</span> <span class=\"number\">0</span>                    <span class=\"comment\">#CPU,8</span></span><br><span class=\"line\"><span class=\"string\">innodb_purge_threads</span> <span class=\"string\">=</span> <span class=\"number\">1</span>                        <span class=\"comment\">#32purge()</span></span><br><span class=\"line\"><span class=\"string\">innodb_flush_log_at_trx_commit</span> <span class=\"string\">=</span> <span class=\"number\">2</span>                <span class=\"comment\">#2    </span></span><br><span class=\"line\"><span class=\"string\">innodb_log_buffer_size</span> <span class=\"string\">=</span> <span class=\"string\">2M</span>                        <span class=\"comment\">#1-8</span></span><br><span class=\"line\"><span class=\"string\">innodb_log_file_size</span> <span class=\"string\">=</span> <span class=\"string\">32M</span>                        <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">innodb_log_files_in_group</span> <span class=\"string\">=</span> <span class=\"number\">3</span>                    <span class=\"comment\">#23.mysql</span></span><br><span class=\"line\"><span class=\"string\">innodb_max_dirty_pages_pct</span> <span class=\"string\">=</span> <span class=\"number\">90</span>                    <span class=\"comment\">#75</span></span><br><span class=\"line\"><span class=\"string\">innodb_lock_wait_timeout</span> <span class=\"string\">=</span> <span class=\"number\">120</span>                    <span class=\"comment\">#50</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">##cache setting</span></span><br><span class=\"line\"><span class=\"string\">key_buffer_size</span> <span class=\"string\">=</span> <span class=\"string\">32M</span>                            <span class=\"comment\">#4G256MB384MB</span></span><br><span class=\"line\"><span class=\"string\">table_open_cache</span> <span class=\"string\">=</span> <span class=\"number\">512</span>                            <span class=\"comment\">#5.1.3table_open_cachetable</span></span><br><span class=\"line\"><span class=\"string\">sort_buffer_size</span> <span class=\"string\">=</span> <span class=\"string\">2M</span>                            <span class=\"comment\">#connection500500*8=4G</span></span><br><span class=\"line\"><span class=\"string\">join_buffer_size</span> <span class=\"string\">=</span> <span class=\"string\">2M</span>                            <span class=\"comment\">#2M</span></span><br><span class=\"line\"><span class=\"string\">read_buffer_size</span> <span class=\"string\">=</span> <span class=\"string\">2M</span>                            <span class=\"comment\">#myisam</span></span><br><span class=\"line\"><span class=\"string\">read_rnd_buffer_size</span> <span class=\"string\">=</span> <span class=\"string\">8M</span>                        <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">thread_cache_size</span> <span class=\"string\">=</span> <span class=\"number\">64</span>                            <span class=\"comment\">#1GB8,2G18,3G32,4G                    </span></span><br><span class=\"line\"><span class=\"string\">query_cache_type</span> <span class=\"string\">=</span> <span class=\"number\">1</span>                            <span class=\"comment\">#012selectSQL_CACHE</span></span><br><span class=\"line\"><span class=\"string\">query_cache_size</span> <span class=\"string\">=</span> <span class=\"string\">64M</span>                            <span class=\"comment\">#    ,selectdbSQLDBclient    </span></span><br><span class=\"line\"><span class=\"string\">query_cache_limit</span> <span class=\"string\">=</span> <span class=\"string\">2M</span>                            <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">bulk_insert_buffer_size</span> <span class=\"string\">=</span> <span class=\"string\">8M</span>                    <span class=\"comment\">#8M</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">myisam_sort_buffer_size</span> <span class=\"string\">=</span> <span class=\"string\">64M</span>                    <span class=\"comment\">#myisam8M</span></span><br><span class=\"line\"><span class=\"string\">myisam_max_sort_file_size</span> <span class=\"string\">=</span> <span class=\"string\">10G</span>                    <span class=\"comment\">#mysql</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#event_scheduler =ON</span></span><br><span class=\"line\"><span class=\"comment\">#skip-external-locking</span></span><br><span class=\"line\"><span class=\"comment\">#sql_mode =&#x27;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"string\">mysqldump</span>]</span><br><span class=\"line\"><span class=\"string\">quick</span>                                            <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">max_allowed_packet</span> <span class=\"string\">=</span> <span class=\"string\">500M</span>                        <span class=\"comment\">#</span></span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"string\">myisamchk</span>]</span><br><span class=\"line\"><span class=\"string\">key_buffer_size</span> <span class=\"string\">=</span> <span class=\"string\">256M</span>                            <span class=\"comment\">#key</span></span><br><span class=\"line\"><span class=\"string\">sort_buffer_size</span> <span class=\"string\">=</span> <span class=\"string\">8M</span>                            <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">read_buffer</span> <span class=\"string\">=</span> <span class=\"string\">4M</span>                                <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"string\">write_buffer</span> <span class=\"string\">=</span> <span class=\"string\">4M</span>                                <span class=\"comment\">#</span></span><br></pre></td></tr></table></figure>"},{"title":" MySQL","date":"2023-09-25T08:55:00.000Z","_content":"\n##  \n\n- OS: Kylin Server V10 \n- Arch: aarch64\n- MySQL release: mysql-5.7.40-Linux-aarch64\n- HW: 4c16g\n\n\n##  \n\n### 1.1 \n\n``` yum install gcc gcc-c++ cmake ```\n\n### 1.2 \n\nboost boost\n\n[](https://dev.mysql.com/downloads/mysql/)\n\n<img src=\"/images/052.MySQL_Installation_Uasing_Source.md.01.png\" width=100% height=100% />\n\n\n\n## \n\n### 2.1 \n\n``` tar -xzvf mysql-boost-5.7.43.tar.gz ```\n\n### 2.2 \n\n``` cd mysql-5.7.43 ```\n\n``` mkdir bld  && cd bld ```\n\n```yaml\ncmake .. \\\n-DCMAKE_INSTALL_PREFIX=/usr/local/mysql \\\n-DDEFAULT_CHARSET=utf8 \\\n-DDEFAULT_COLLATION=utf8_general_ci \\\n-DENABLED_LOCAL_INFILE=ON \\\n-DWITH_INNOBASE_STORAGE_ENGINE=1 \\\n-DWITH_FEDERATED_STORAGE_ENGINE=1 \\\n-DWITH_BLACKHOLE_STORAGE_ENGINE=1 \\\n-DWITHOUT_EXAMPLE_STORAGE_ENGINE=1 \\\n-DWITH_PARTITION_STORAGE_ENGINE=1 \\\n-DWITH_PERFSCHEMA_STORAGE_ENGINE=1 \\\n-DCOMPILATION_COMMENT='Mysqlma' \\\n-DWITH_READLINE=ON \\\n-DWITH_BOOST=/root/mysql-5.7.43/boost/boost_1_59_0 \\\n-DSYSCONFDIR=/data/mysql \\\n-DMYSQL_UNIX_ADDR=/data/mysql/mysql.sock\n```\n\n\n``` make && make install ```\n\n\n##  \n\n[](https://mdzz.wang/2023/09/25/051.MySQL_Install_Using_Generic_Binaries/)\n\n##  \n\n### 4.1 RPC \n\n: rpc\n``` yaml\n--   Package 'libtirpc', required by 'virtual:world', not found\nCMake Error at cmake/rpc.cmake:76 (MESSAGE):\n  Could not find rpc/rpc.h in /usr/include or /usr/include/tirpc\nCall Stack (most recent call first):\n  rapid/plugin/group_replication/configure.cmake:60 (MYSQL_CHECK_RPC)\n  rapid/plugin/group_replication/CMakeLists.txt:25 (INCLUDE)\n```\n\n<img src=\"/images/052.MySQL_Installation_Uasing_Source.md.02.png\" width=100% height=100% />\n\n: \n```yum install libtirpc libtirpc-devel ```\n\n Kylin V10 aarch64  libtirpc-devel\n\n /usr/bin/rpc \n\n","source":"_posts/052.MySQL_Installation_Uasing_Source.md","raw":"---\ntitle:  MySQL\ndate: 2023-9-25 16:55:00\ncategories: \n- [Database]\ntags: \n- MySQL\n---\n\n##  \n\n- OS: Kylin Server V10 \n- Arch: aarch64\n- MySQL release: mysql-5.7.40-Linux-aarch64\n- HW: 4c16g\n\n\n##  \n\n### 1.1 \n\n``` yum install gcc gcc-c++ cmake ```\n\n### 1.2 \n\nboost boost\n\n[](https://dev.mysql.com/downloads/mysql/)\n\n<img src=\"/images/052.MySQL_Installation_Uasing_Source.md.01.png\" width=100% height=100% />\n\n\n\n## \n\n### 2.1 \n\n``` tar -xzvf mysql-boost-5.7.43.tar.gz ```\n\n### 2.2 \n\n``` cd mysql-5.7.43 ```\n\n``` mkdir bld  && cd bld ```\n\n```yaml\ncmake .. \\\n-DCMAKE_INSTALL_PREFIX=/usr/local/mysql \\\n-DDEFAULT_CHARSET=utf8 \\\n-DDEFAULT_COLLATION=utf8_general_ci \\\n-DENABLED_LOCAL_INFILE=ON \\\n-DWITH_INNOBASE_STORAGE_ENGINE=1 \\\n-DWITH_FEDERATED_STORAGE_ENGINE=1 \\\n-DWITH_BLACKHOLE_STORAGE_ENGINE=1 \\\n-DWITHOUT_EXAMPLE_STORAGE_ENGINE=1 \\\n-DWITH_PARTITION_STORAGE_ENGINE=1 \\\n-DWITH_PERFSCHEMA_STORAGE_ENGINE=1 \\\n-DCOMPILATION_COMMENT='Mysqlma' \\\n-DWITH_READLINE=ON \\\n-DWITH_BOOST=/root/mysql-5.7.43/boost/boost_1_59_0 \\\n-DSYSCONFDIR=/data/mysql \\\n-DMYSQL_UNIX_ADDR=/data/mysql/mysql.sock\n```\n\n\n``` make && make install ```\n\n\n##  \n\n[](https://mdzz.wang/2023/09/25/051.MySQL_Install_Using_Generic_Binaries/)\n\n##  \n\n### 4.1 RPC \n\n: rpc\n``` yaml\n--   Package 'libtirpc', required by 'virtual:world', not found\nCMake Error at cmake/rpc.cmake:76 (MESSAGE):\n  Could not find rpc/rpc.h in /usr/include or /usr/include/tirpc\nCall Stack (most recent call first):\n  rapid/plugin/group_replication/configure.cmake:60 (MYSQL_CHECK_RPC)\n  rapid/plugin/group_replication/CMakeLists.txt:25 (INCLUDE)\n```\n\n<img src=\"/images/052.MySQL_Installation_Uasing_Source.md.02.png\" width=100% height=100% />\n\n: \n```yum install libtirpc libtirpc-devel ```\n\n Kylin V10 aarch64  libtirpc-devel\n\n /usr/bin/rpc \n\n","slug":"052.MySQL_Installation_Uasing_Source","published":1,"updated":"2023-09-26T02:18:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbg9004uyknr653se7su","content":"<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><ul>\n<li>OS: Kylin Server V10 </li>\n<li>Arch: aarch64</li>\n<li>MySQL release: mysql-5.7.40-Linux-aarch64</li>\n<li>HW: 4c16g</li>\n</ul>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"1-1-\"><a href=\"#1-1-\" class=\"headerlink\" title=\"1.1 \"></a>1.1 </h3><p><code>yum install gcc gcc-c++ cmake</code></p>\n<h3 id=\"1-2-\"><a href=\"#1-2-\" class=\"headerlink\" title=\"1.2 \"></a>1.2 </h3><p>boost boost</p>\n<p><a href=\"https://dev.mysql.com/downloads/mysql/\"></a></p>\n<img src=\"/images/052.MySQL_Installation_Uasing_Source.md.01.png\" width=100% height=100% />\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"2-1-\"><a href=\"#2-1-\" class=\"headerlink\" title=\"2.1 \"></a>2.1 </h3><p><code>tar -xzvf mysql-boost-5.7.43.tar.gz</code></p>\n<h3 id=\"2-2-\"><a href=\"#2-2-\" class=\"headerlink\" title=\"2.2 \"></a>2.2 </h3><p><code>cd mysql-5.7.43</code></p>\n<p><code>mkdir bld  &amp;&amp; cd bld</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">cmake</span> <span class=\"string\">..</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DCMAKE_INSTALL_PREFIX=/usr/local/mysql</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DDEFAULT_CHARSET=utf8</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DDEFAULT_COLLATION=utf8_general_ci</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DENABLED_LOCAL_INFILE=ON</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DWITH_INNOBASE_STORAGE_ENGINE=1</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DWITH_FEDERATED_STORAGE_ENGINE=1</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DWITH_BLACKHOLE_STORAGE_ENGINE=1</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DWITHOUT_EXAMPLE_STORAGE_ENGINE=1</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DWITH_PARTITION_STORAGE_ENGINE=1</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DWITH_PERFSCHEMA_STORAGE_ENGINE=1</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DCOMPILATION_COMMENT=&#x27;Mysqlma&#x27;</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DWITH_READLINE=ON</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DWITH_BOOST=/root/mysql-5.7.43/boost/boost_1_59_0</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DSYSCONFDIR=/data/mysql</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DMYSQL_UNIX_ADDR=/data/mysql/mysql.sock</span></span><br></pre></td></tr></table></figure>\n\n\n<p><code>make &amp;&amp; make install</code></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><a href=\"https://mdzz.wang/2023/09/25/051.MySQL_Install_Using_Generic_Binaries/\"></a></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"4-1-RPC-\"><a href=\"#4-1-RPC-\" class=\"headerlink\" title=\"4.1 RPC \"></a>4.1 RPC </h3><p>: rpc</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">--</span>   <span class=\"string\">Package</span> <span class=\"string\">&#x27;libtirpc&#x27;</span><span class=\"string\">,</span> <span class=\"string\">required</span> <span class=\"string\">by</span> <span class=\"string\">&#x27;virtual:world&#x27;</span><span class=\"string\">,</span> <span class=\"string\">not</span> <span class=\"string\">found</span></span><br><span class=\"line\"><span class=\"string\">CMake</span> <span class=\"string\">Error</span> <span class=\"string\">at</span> <span class=\"string\">cmake/rpc.cmake:76</span> <span class=\"string\">(MESSAGE):</span></span><br><span class=\"line\">  <span class=\"string\">Could</span> <span class=\"string\">not</span> <span class=\"string\">find</span> <span class=\"string\">rpc/rpc.h</span> <span class=\"string\">in</span> <span class=\"string\">/usr/include</span> <span class=\"string\">or</span> <span class=\"string\">/usr/include/tirpc</span></span><br><span class=\"line\"><span class=\"string\">Call</span> <span class=\"string\">Stack</span> <span class=\"string\">(most</span> <span class=\"string\">recent</span> <span class=\"string\">call</span> <span class=\"string\">first):</span></span><br><span class=\"line\">  <span class=\"string\">rapid/plugin/group_replication/configure.cmake:60</span> <span class=\"string\">(MYSQL_CHECK_RPC)</span></span><br><span class=\"line\">  <span class=\"string\">rapid/plugin/group_replication/CMakeLists.txt:25</span> <span class=\"string\">(INCLUDE)</span></span><br></pre></td></tr></table></figure>\n\n<img src=\"/images/052.MySQL_Installation_Uasing_Source.md.02.png\" width=100% height=100% />\n\n<p>:<br><code>yum install libtirpc libtirpc-devel </code></p>\n<p> Kylin V10 aarch64  libtirpc-devel</p>\n<p> &#x2F;usr&#x2F;bin&#x2F;rpc </p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><ul>\n<li>OS: Kylin Server V10 </li>\n<li>Arch: aarch64</li>\n<li>MySQL release: mysql-5.7.40-Linux-aarch64</li>\n<li>HW: 4c16g</li>\n</ul>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"1-1-\"><a href=\"#1-1-\" class=\"headerlink\" title=\"1.1 \"></a>1.1 </h3><p><code>yum install gcc gcc-c++ cmake</code></p>\n<h3 id=\"1-2-\"><a href=\"#1-2-\" class=\"headerlink\" title=\"1.2 \"></a>1.2 </h3><p>boost boost</p>\n<p><a href=\"https://dev.mysql.com/downloads/mysql/\"></a></p>\n<img src=\"/images/052.MySQL_Installation_Uasing_Source.md.01.png\" width=100% height=100% />\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"2-1-\"><a href=\"#2-1-\" class=\"headerlink\" title=\"2.1 \"></a>2.1 </h3><p><code>tar -xzvf mysql-boost-5.7.43.tar.gz</code></p>\n<h3 id=\"2-2-\"><a href=\"#2-2-\" class=\"headerlink\" title=\"2.2 \"></a>2.2 </h3><p><code>cd mysql-5.7.43</code></p>\n<p><code>mkdir bld  &amp;&amp; cd bld</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">cmake</span> <span class=\"string\">..</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DCMAKE_INSTALL_PREFIX=/usr/local/mysql</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DDEFAULT_CHARSET=utf8</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DDEFAULT_COLLATION=utf8_general_ci</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DENABLED_LOCAL_INFILE=ON</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DWITH_INNOBASE_STORAGE_ENGINE=1</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DWITH_FEDERATED_STORAGE_ENGINE=1</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DWITH_BLACKHOLE_STORAGE_ENGINE=1</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DWITHOUT_EXAMPLE_STORAGE_ENGINE=1</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DWITH_PARTITION_STORAGE_ENGINE=1</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DWITH_PERFSCHEMA_STORAGE_ENGINE=1</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DCOMPILATION_COMMENT=&#x27;Mysqlma&#x27;</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DWITH_READLINE=ON</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DWITH_BOOST=/root/mysql-5.7.43/boost/boost_1_59_0</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DSYSCONFDIR=/data/mysql</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"string\">-DMYSQL_UNIX_ADDR=/data/mysql/mysql.sock</span></span><br></pre></td></tr></table></figure>\n\n\n<p><code>make &amp;&amp; make install</code></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p><a href=\"https://mdzz.wang/2023/09/25/051.MySQL_Install_Using_Generic_Binaries/\"></a></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"4-1-RPC-\"><a href=\"#4-1-RPC-\" class=\"headerlink\" title=\"4.1 RPC \"></a>4.1 RPC </h3><p>: rpc</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">--</span>   <span class=\"string\">Package</span> <span class=\"string\">&#x27;libtirpc&#x27;</span><span class=\"string\">,</span> <span class=\"string\">required</span> <span class=\"string\">by</span> <span class=\"string\">&#x27;virtual:world&#x27;</span><span class=\"string\">,</span> <span class=\"string\">not</span> <span class=\"string\">found</span></span><br><span class=\"line\"><span class=\"string\">CMake</span> <span class=\"string\">Error</span> <span class=\"string\">at</span> <span class=\"string\">cmake/rpc.cmake:76</span> <span class=\"string\">(MESSAGE):</span></span><br><span class=\"line\">  <span class=\"string\">Could</span> <span class=\"string\">not</span> <span class=\"string\">find</span> <span class=\"string\">rpc/rpc.h</span> <span class=\"string\">in</span> <span class=\"string\">/usr/include</span> <span class=\"string\">or</span> <span class=\"string\">/usr/include/tirpc</span></span><br><span class=\"line\"><span class=\"string\">Call</span> <span class=\"string\">Stack</span> <span class=\"string\">(most</span> <span class=\"string\">recent</span> <span class=\"string\">call</span> <span class=\"string\">first):</span></span><br><span class=\"line\">  <span class=\"string\">rapid/plugin/group_replication/configure.cmake:60</span> <span class=\"string\">(MYSQL_CHECK_RPC)</span></span><br><span class=\"line\">  <span class=\"string\">rapid/plugin/group_replication/CMakeLists.txt:25</span> <span class=\"string\">(INCLUDE)</span></span><br></pre></td></tr></table></figure>\n\n<img src=\"/images/052.MySQL_Installation_Uasing_Source.md.02.png\" width=100% height=100% />\n\n<p>:<br><code>yum install libtirpc libtirpc-devel </code></p>\n<p> Kylin V10 aarch64  libtirpc-devel</p>\n<p> &#x2F;usr&#x2F;bin&#x2F;rpc </p>\n"},{"title":"()Prometheus ","date":"2023-09-26T07:29:47.000Z","_content":"\n##  \n\n- \n  - +systemd\n  - docker \n\n\n##  \n\n### 1.1 \n\n[](https://prometheus.io/download/) \n\n\n### 1.2 \n\n``` tar -xzvf prometheus-2.47.0.linux-amd64.tar.gz ```\n``` cp -r prometheus-2.47.0.linux-amd64 /usr/local/prometheus ``` \n\n### 1.3 \n\n``` cd /usr/local/prometheus ```\n``` ./prometheus --config.file=./prometheus.yml ```\n\n: ``` ./data  ```\n \n### 1.4 \n\n``` curl http://192.168.128.203:9090/metrics ```\n\n.\n\n### 1.5  systemd \n\n``` yaml\n# /usr/local/prometheus-2.47/prometheus.service\n[Unit]\nDescription=Prometheus Server\nDocumentation=https://prometheus.io/docs/introduction/overview/\nAfter=network-online.target\n\n[Service]\nType=simple\nUser=root\nRestart=on-failure\nExecReload=/bin/kill -HUP $MAINPID\nExecStart=/usr/local/prometheus-2.47/prometheus \\\n  --config.file=/usr/local/prometheus-2.47/prometheus.yml \\\n  --storage.tsdb.path /usr/local/prometheus-2.47/data \\\n  --storage.tsdb.retention=15d\n\n[Install]\nWantedBy=multi-user.target\n\n```\n\n``` systemctl daemon-reload ```\n``` systemctl enable prometheus --now ```\n\n\n##   docker \n\n### 2.1 centos7.9\n\n``` docker build -network=host -t prometheus-2.47.0 .```\n- ``` -network=host ```yum install\n- ``` -t prometheus-2.47.0 ``` \n\nDockerfile: ``` vim Dockerfile```\n``` yaml\nFROM centos:centos7\n\n# Define Prometheus home and its version\nARG PROMETHEUS_HOME=/opt/prometheus\nARG PROMETHEUS_VERSION=2.47.0\n\n# Define TAR & folder names, as well as download URL for easier use\nARG PROMETHEUS_TAR_MAYOR=prometheus-${PROMETHEUS_VERSION}.linux-amd64\nARG PROMETHEUS_TAR_FULLNAME=${PROMETHEUS_TAR_MAYOR}.tar.gz\nARG PROMETHEUS_URL=https://github.com/prometheus/prometheus/releases/download/v${PROMETHEUS_VERSION}/${PROMETHEUS_TAR_FULLNAME}\n\n# Install wget; download Prometheus\nRUN yum install -y wget && \\\n    wget ${PROMETHEUS_URL}\n\n# Untar the file and rename it to \"prometheus\"\nRUN tar xvfz ${PROMETHEUS_TAR_FULLNAME} -C /opt && \\\n    mv /opt/${PROMETHEUS_TAR_MAYOR} /opt/prometheus && \\\n    rm -rf /opt/prometheus/prometheus.yml\n\nRUN groupadd -r prometheus && \\\n    useradd -g prometheus -s /bin/bash -c \"Prometheus user\" prometheus && \\\n    chown -R prometheus:prometheus /opt/prometheus\n\nCOPY config/prometheus.yml /opt/prometheus/prometheus.yml\n\nRUN chown prometheus:prometheus /opt/prometheus/prometheus.yml && \\\n    chmod 755 /opt/prometheus/prometheus.yml\n\nEXPOSE 9090\nVOLUME  [ \"/opt/prometheus\" ]\nWORKDIR ${PROMETHEUS_HOME}\n\nUSER prometheus\n\nENTRYPOINT [ \"./prometheus\" ]\nCMD        [ \"--config.file=prometheus.yml\" ]\n```\n\n:\n``` docker run -p 9090:9090 prometheus-2.47.0 ```\n\n\n### 2.2  docker-compose \n\n``` vim Prometheus.yaml ```\n\n``` yaml\nversion: \"3\"\nservices:\n    prometheus:\n        image: prometheus-2.47.0:latest\n        user: \"1000:1000\"\n        ports:\n            - \"9090:9090\"\n        container_name: prometheus\n        restart: always\n        volumes:\n            - /usr/local/prometheus-2.47/prometheus.yml:/opt/prometheus/prometheus.yml\nnetworks:\n    default:\n        driver: bridge\n```\n\n\n: \n\n``` docker-compose -f prometheus.yaml up -d ```\n\n\n\n##  \n\n### 3.1 Prometheus\n\n: **Error on ingesting samples that are too old or are too far into the future**\n: **err=\"out of bounds\"**\n``` yaml\ncaller=scrape.go:1741 level=warn component=\"scrape manager\" scrape_pool=prometheus target=http://192.168.128.203:9090/metrics msg=\"Error on ingesting samples that are too old or are too far into the future\" num_dropped=666\n\ncaller=scrape.go:1405 level=warn component=\"scrape manager\" scrape_pool=prometheus target=http://192.168.128.203:9090/metrics msg=\"Append failed\" err=\"out of bounds\"\n```\n> [](https://forum.gitlab.com/t/prometheus-out-of-bounds-error-after-reboot/75229)\n\n****: ,Prometheus.\n              ```/opt/prometheus/data```  .\n\n**:**\n``` docker exec -it prometheus /bin/bash```\n``` cd /opt/prometheus/data ```\n``` rm -rf 0* wal/0* wal/checkpoint.0* ```\n\n**:**\n``` docker-compose -f prometheus.yaml down ```\n``` docker-compose -f prometheus.yaml up -d ```\n\n<img src=\"/images/053.Prometheus_Installation.md.01.png\" width=100% height=100% />","source":"_posts/053.Prometheus_Installation.md","raw":"---\ntitle: ()Prometheus \ndate: 2023-9-26 15:29:47\ncategories: \n- [Monitor]\ntags: \n- Prometheus\n---\n\n##  \n\n- \n  - +systemd\n  - docker \n\n\n##  \n\n### 1.1 \n\n[](https://prometheus.io/download/) \n\n\n### 1.2 \n\n``` tar -xzvf prometheus-2.47.0.linux-amd64.tar.gz ```\n``` cp -r prometheus-2.47.0.linux-amd64 /usr/local/prometheus ``` \n\n### 1.3 \n\n``` cd /usr/local/prometheus ```\n``` ./prometheus --config.file=./prometheus.yml ```\n\n: ``` ./data  ```\n \n### 1.4 \n\n``` curl http://192.168.128.203:9090/metrics ```\n\n.\n\n### 1.5  systemd \n\n``` yaml\n# /usr/local/prometheus-2.47/prometheus.service\n[Unit]\nDescription=Prometheus Server\nDocumentation=https://prometheus.io/docs/introduction/overview/\nAfter=network-online.target\n\n[Service]\nType=simple\nUser=root\nRestart=on-failure\nExecReload=/bin/kill -HUP $MAINPID\nExecStart=/usr/local/prometheus-2.47/prometheus \\\n  --config.file=/usr/local/prometheus-2.47/prometheus.yml \\\n  --storage.tsdb.path /usr/local/prometheus-2.47/data \\\n  --storage.tsdb.retention=15d\n\n[Install]\nWantedBy=multi-user.target\n\n```\n\n``` systemctl daemon-reload ```\n``` systemctl enable prometheus --now ```\n\n\n##   docker \n\n### 2.1 centos7.9\n\n``` docker build -network=host -t prometheus-2.47.0 .```\n- ``` -network=host ```yum install\n- ``` -t prometheus-2.47.0 ``` \n\nDockerfile: ``` vim Dockerfile```\n``` yaml\nFROM centos:centos7\n\n# Define Prometheus home and its version\nARG PROMETHEUS_HOME=/opt/prometheus\nARG PROMETHEUS_VERSION=2.47.0\n\n# Define TAR & folder names, as well as download URL for easier use\nARG PROMETHEUS_TAR_MAYOR=prometheus-${PROMETHEUS_VERSION}.linux-amd64\nARG PROMETHEUS_TAR_FULLNAME=${PROMETHEUS_TAR_MAYOR}.tar.gz\nARG PROMETHEUS_URL=https://github.com/prometheus/prometheus/releases/download/v${PROMETHEUS_VERSION}/${PROMETHEUS_TAR_FULLNAME}\n\n# Install wget; download Prometheus\nRUN yum install -y wget && \\\n    wget ${PROMETHEUS_URL}\n\n# Untar the file and rename it to \"prometheus\"\nRUN tar xvfz ${PROMETHEUS_TAR_FULLNAME} -C /opt && \\\n    mv /opt/${PROMETHEUS_TAR_MAYOR} /opt/prometheus && \\\n    rm -rf /opt/prometheus/prometheus.yml\n\nRUN groupadd -r prometheus && \\\n    useradd -g prometheus -s /bin/bash -c \"Prometheus user\" prometheus && \\\n    chown -R prometheus:prometheus /opt/prometheus\n\nCOPY config/prometheus.yml /opt/prometheus/prometheus.yml\n\nRUN chown prometheus:prometheus /opt/prometheus/prometheus.yml && \\\n    chmod 755 /opt/prometheus/prometheus.yml\n\nEXPOSE 9090\nVOLUME  [ \"/opt/prometheus\" ]\nWORKDIR ${PROMETHEUS_HOME}\n\nUSER prometheus\n\nENTRYPOINT [ \"./prometheus\" ]\nCMD        [ \"--config.file=prometheus.yml\" ]\n```\n\n:\n``` docker run -p 9090:9090 prometheus-2.47.0 ```\n\n\n### 2.2  docker-compose \n\n``` vim Prometheus.yaml ```\n\n``` yaml\nversion: \"3\"\nservices:\n    prometheus:\n        image: prometheus-2.47.0:latest\n        user: \"1000:1000\"\n        ports:\n            - \"9090:9090\"\n        container_name: prometheus\n        restart: always\n        volumes:\n            - /usr/local/prometheus-2.47/prometheus.yml:/opt/prometheus/prometheus.yml\nnetworks:\n    default:\n        driver: bridge\n```\n\n\n: \n\n``` docker-compose -f prometheus.yaml up -d ```\n\n\n\n##  \n\n### 3.1 Prometheus\n\n: **Error on ingesting samples that are too old or are too far into the future**\n: **err=\"out of bounds\"**\n``` yaml\ncaller=scrape.go:1741 level=warn component=\"scrape manager\" scrape_pool=prometheus target=http://192.168.128.203:9090/metrics msg=\"Error on ingesting samples that are too old or are too far into the future\" num_dropped=666\n\ncaller=scrape.go:1405 level=warn component=\"scrape manager\" scrape_pool=prometheus target=http://192.168.128.203:9090/metrics msg=\"Append failed\" err=\"out of bounds\"\n```\n> [](https://forum.gitlab.com/t/prometheus-out-of-bounds-error-after-reboot/75229)\n\n****: ,Prometheus.\n              ```/opt/prometheus/data```  .\n\n**:**\n``` docker exec -it prometheus /bin/bash```\n``` cd /opt/prometheus/data ```\n``` rm -rf 0* wal/0* wal/checkpoint.0* ```\n\n**:**\n``` docker-compose -f prometheus.yaml down ```\n``` docker-compose -f prometheus.yaml up -d ```\n\n<img src=\"/images/053.Prometheus_Installation.md.01.png\" width=100% height=100% />","slug":"053.Prometheus_Installation","published":1,"updated":"2023-09-28T06:55:08.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbgb004yyknrcbpx10p7","content":"<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><ul>\n<li><ul>\n<li>+systemd</li>\n<li>docker </li>\n</ul>\n</li>\n</ul>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"1-1-\"><a href=\"#1-1-\" class=\"headerlink\" title=\"1.1 \"></a>1.1 </h3><p><a href=\"https://prometheus.io/download/\"></a> </p>\n<h3 id=\"1-2-\"><a href=\"#1-2-\" class=\"headerlink\" title=\"1.2 \"></a>1.2 </h3><p><code>tar -xzvf prometheus-2.47.0.linux-amd64.tar.gz</code><br><code>cp -r prometheus-2.47.0.linux-amd64 /usr/local/prometheus</code> </p>\n<h3 id=\"1-3-\"><a href=\"#1-3-\" class=\"headerlink\" title=\"1.3 \"></a>1.3 </h3><p><code>cd /usr/local/prometheus</code><br><code>./prometheus --config.file=./prometheus.yml</code></p>\n<p>: <code>./data </code></p>\n<h3 id=\"1-4-\"><a href=\"#1-4-\" class=\"headerlink\" title=\"1.4 \"></a>1.4 </h3><p><code>curl http://192.168.128.203:9090/metrics</code></p>\n<p>.</p>\n<h3 id=\"1-5--systemd-\"><a href=\"#1-5--systemd-\" class=\"headerlink\" title=\"1.5  systemd \"></a>1.5  systemd </h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># /usr/local/prometheus-2.47/prometheus.service</span></span><br><span class=\"line\">[<span class=\"string\">Unit</span>]</span><br><span class=\"line\"><span class=\"string\">Description=Prometheus</span> <span class=\"string\">Server</span></span><br><span class=\"line\"><span class=\"string\">Documentation=https://prometheus.io/docs/introduction/overview/</span></span><br><span class=\"line\"><span class=\"string\">After=network-online.target</span></span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"string\">Service</span>]</span><br><span class=\"line\"><span class=\"string\">Type=simple</span></span><br><span class=\"line\"><span class=\"string\">User=root</span></span><br><span class=\"line\"><span class=\"string\">Restart=on-failure</span></span><br><span class=\"line\"><span class=\"string\">ExecReload=/bin/kill</span> <span class=\"string\">-HUP</span> <span class=\"string\">$MAINPID</span></span><br><span class=\"line\"><span class=\"string\">ExecStart=/usr/local/prometheus-2.47/prometheus</span> <span class=\"string\">\\</span></span><br><span class=\"line\">  <span class=\"string\">--config.file=/usr/local/prometheus-2.47/prometheus.yml</span> <span class=\"string\">\\</span></span><br><span class=\"line\">  <span class=\"string\">--storage.tsdb.path</span> <span class=\"string\">/usr/local/prometheus-2.47/data</span> <span class=\"string\">\\</span></span><br><span class=\"line\">  <span class=\"string\">--storage.tsdb.retention=15d</span></span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"string\">Install</span>]</span><br><span class=\"line\"><span class=\"string\">WantedBy=multi-user.target</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><code>systemctl daemon-reload</code><br><code>systemctl enable prometheus --now</code></p>\n<h2 id=\"--docker-\"><a href=\"#--docker-\" class=\"headerlink\" title=\"  docker \"></a>  docker </h2><h3 id=\"2-1-centos7-9\"><a href=\"#2-1-centos7-9\" class=\"headerlink\" title=\"2.1 centos7.9\"></a>2.1 centos7.9</h3><p><code> docker build -network=host -t prometheus-2.47.0 .</code></p>\n<ul>\n<li><code>-network=host</code>yum install</li>\n<li><code>-t prometheus-2.47.0</code> </li>\n</ul>\n<p>Dockerfile: <code> vim Dockerfile</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">FROM</span> <span class=\"string\">centos:centos7</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Define Prometheus home and its version</span></span><br><span class=\"line\"><span class=\"string\">ARG</span> <span class=\"string\">PROMETHEUS_HOME=/opt/prometheus</span></span><br><span class=\"line\"><span class=\"string\">ARG</span> <span class=\"string\">PROMETHEUS_VERSION=2.47.0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Define TAR &amp; folder names, as well as download URL for easier use</span></span><br><span class=\"line\"><span class=\"string\">ARG</span> <span class=\"string\">PROMETHEUS_TAR_MAYOR=prometheus-$&#123;PROMETHEUS_VERSION&#125;.linux-amd64</span></span><br><span class=\"line\"><span class=\"string\">ARG</span> <span class=\"string\">PROMETHEUS_TAR_FULLNAME=$&#123;PROMETHEUS_TAR_MAYOR&#125;.tar.gz</span></span><br><span class=\"line\"><span class=\"string\">ARG</span> <span class=\"string\">PROMETHEUS_URL=https://github.com/prometheus/prometheus/releases/download/v$&#123;PROMETHEUS_VERSION&#125;/$&#123;PROMETHEUS_TAR_FULLNAME&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Install wget; download Prometheus</span></span><br><span class=\"line\"><span class=\"string\">RUN</span> <span class=\"string\">yum</span> <span class=\"string\">install</span> <span class=\"string\">-y</span> <span class=\"string\">wget</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">    <span class=\"string\">wget</span> <span class=\"string\">$&#123;PROMETHEUS_URL&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Untar the file and rename it to &quot;prometheus&quot;</span></span><br><span class=\"line\"><span class=\"string\">RUN</span> <span class=\"string\">tar</span> <span class=\"string\">xvfz</span> <span class=\"string\">$&#123;PROMETHEUS_TAR_FULLNAME&#125;</span> <span class=\"string\">-C</span> <span class=\"string\">/opt</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">    <span class=\"string\">mv</span> <span class=\"string\">/opt/$&#123;PROMETHEUS_TAR_MAYOR&#125;</span> <span class=\"string\">/opt/prometheus</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">    <span class=\"string\">rm</span> <span class=\"string\">-rf</span> <span class=\"string\">/opt/prometheus/prometheus.yml</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">RUN</span> <span class=\"string\">groupadd</span> <span class=\"string\">-r</span> <span class=\"string\">prometheus</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">    <span class=\"string\">useradd</span> <span class=\"string\">-g</span> <span class=\"string\">prometheus</span> <span class=\"string\">-s</span> <span class=\"string\">/bin/bash</span> <span class=\"string\">-c</span> <span class=\"string\">&quot;Prometheus user&quot;</span> <span class=\"string\">prometheus</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">    <span class=\"string\">chown</span> <span class=\"string\">-R</span> <span class=\"string\">prometheus:prometheus</span> <span class=\"string\">/opt/prometheus</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">COPY</span> <span class=\"string\">config/prometheus.yml</span> <span class=\"string\">/opt/prometheus/prometheus.yml</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">RUN</span> <span class=\"string\">chown</span> <span class=\"string\">prometheus:prometheus</span> <span class=\"string\">/opt/prometheus/prometheus.yml</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">    <span class=\"string\">chmod</span> <span class=\"number\">755</span> <span class=\"string\">/opt/prometheus/prometheus.yml</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">EXPOSE</span> <span class=\"number\">9090</span></span><br><span class=\"line\"><span class=\"string\">VOLUME</span>  [ <span class=\"string\">&quot;/opt/prometheus&quot;</span> ]</span><br><span class=\"line\"><span class=\"string\">WORKDIR</span> <span class=\"string\">$&#123;PROMETHEUS_HOME&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">USER</span> <span class=\"string\">prometheus</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">ENTRYPOINT</span> [ <span class=\"string\">&quot;./prometheus&quot;</span> ]</span><br><span class=\"line\"><span class=\"string\">CMD</span>        [ <span class=\"string\">&quot;--config.file=prometheus.yml&quot;</span> ]</span><br></pre></td></tr></table></figure>\n\n<p>:<br><code>docker run -p 9090:9090 prometheus-2.47.0</code></p>\n<h3 id=\"2-2--docker-compose-\"><a href=\"#2-2--docker-compose-\" class=\"headerlink\" title=\"2.2  docker-compose \"></a>2.2  docker-compose </h3><p><code>vim Prometheus.yaml</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">    <span class=\"attr\">prometheus:</span></span><br><span class=\"line\">        <span class=\"attr\">image:</span> <span class=\"string\">prometheus-2.47.0:latest</span></span><br><span class=\"line\">        <span class=\"attr\">user:</span> <span class=\"string\">&quot;1000:1000&quot;</span></span><br><span class=\"line\">        <span class=\"attr\">ports:</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&quot;9090:9090&quot;</span></span><br><span class=\"line\">        <span class=\"attr\">container_name:</span> <span class=\"string\">prometheus</span></span><br><span class=\"line\">        <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">        <span class=\"attr\">volumes:</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">/usr/local/prometheus-2.47/prometheus.yml:/opt/prometheus/prometheus.yml</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">    <span class=\"attr\">default:</span></span><br><span class=\"line\">        <span class=\"attr\">driver:</span> <span class=\"string\">bridge</span></span><br></pre></td></tr></table></figure>\n\n\n<p>: </p>\n<p><code>docker-compose -f prometheus.yaml up -d</code></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"3-1-Prometheus\"><a href=\"#3-1-Prometheus\" class=\"headerlink\" title=\"3.1 Prometheus\"></a>3.1 Prometheus</h3><p>: <strong>Error on ingesting samples that are too old or are too far into the future</strong><br>: <strong>err&#x3D;out of bounds</strong></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">caller=scrape.go:1741</span> <span class=\"string\">level=warn</span> <span class=\"string\">component=&quot;scrape</span> <span class=\"string\">manager&quot;</span> <span class=\"string\">scrape_pool=prometheus</span> <span class=\"string\">target=http://192.168.128.203:9090/metrics</span> <span class=\"string\">msg=&quot;Error</span> <span class=\"string\">on</span> <span class=\"string\">ingesting</span> <span class=\"string\">samples</span> <span class=\"string\">that</span> <span class=\"string\">are</span> <span class=\"string\">too</span> <span class=\"string\">old</span> <span class=\"string\">or</span> <span class=\"string\">are</span> <span class=\"string\">too</span> <span class=\"string\">far</span> <span class=\"string\">into</span> <span class=\"string\">the</span> <span class=\"string\">future&quot;</span> <span class=\"string\">num_dropped=666</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">caller=scrape.go:1405</span> <span class=\"string\">level=warn</span> <span class=\"string\">component=&quot;scrape</span> <span class=\"string\">manager&quot;</span> <span class=\"string\">scrape_pool=prometheus</span> <span class=\"string\">target=http://192.168.128.203:9090/metrics</span> <span class=\"string\">msg=&quot;Append</span> <span class=\"string\">failed&quot;</span> <span class=\"string\">err=&quot;out</span> <span class=\"string\">of</span> <span class=\"string\">bounds&quot;</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><a href=\"https://forum.gitlab.com/t/prometheus-out-of-bounds-error-after-reboot/75229\"></a></p>\n</blockquote>\n<p><strong></strong>: ,Prometheus.<br>              <code>/opt/prometheus/data</code>  .</p>\n<p><strong>:</strong><br><code> docker exec -it prometheus /bin/bash</code><br><code>cd /opt/prometheus/data</code><br><code>rm -rf 0* wal/0* wal/checkpoint.0*</code></p>\n<p><strong>:</strong><br><code>docker-compose -f prometheus.yaml down</code><br><code>docker-compose -f prometheus.yaml up -d</code></p>\n<img src=\"/images/053.Prometheus_Installation.md.01.png\" width=100% height=100% />","site":{"data":{}},"excerpt":"","more":"<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><ul>\n<li><ul>\n<li>+systemd</li>\n<li>docker </li>\n</ul>\n</li>\n</ul>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"1-1-\"><a href=\"#1-1-\" class=\"headerlink\" title=\"1.1 \"></a>1.1 </h3><p><a href=\"https://prometheus.io/download/\"></a> </p>\n<h3 id=\"1-2-\"><a href=\"#1-2-\" class=\"headerlink\" title=\"1.2 \"></a>1.2 </h3><p><code>tar -xzvf prometheus-2.47.0.linux-amd64.tar.gz</code><br><code>cp -r prometheus-2.47.0.linux-amd64 /usr/local/prometheus</code> </p>\n<h3 id=\"1-3-\"><a href=\"#1-3-\" class=\"headerlink\" title=\"1.3 \"></a>1.3 </h3><p><code>cd /usr/local/prometheus</code><br><code>./prometheus --config.file=./prometheus.yml</code></p>\n<p>: <code>./data </code></p>\n<h3 id=\"1-4-\"><a href=\"#1-4-\" class=\"headerlink\" title=\"1.4 \"></a>1.4 </h3><p><code>curl http://192.168.128.203:9090/metrics</code></p>\n<p>.</p>\n<h3 id=\"1-5--systemd-\"><a href=\"#1-5--systemd-\" class=\"headerlink\" title=\"1.5  systemd \"></a>1.5  systemd </h3><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># /usr/local/prometheus-2.47/prometheus.service</span></span><br><span class=\"line\">[<span class=\"string\">Unit</span>]</span><br><span class=\"line\"><span class=\"string\">Description=Prometheus</span> <span class=\"string\">Server</span></span><br><span class=\"line\"><span class=\"string\">Documentation=https://prometheus.io/docs/introduction/overview/</span></span><br><span class=\"line\"><span class=\"string\">After=network-online.target</span></span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"string\">Service</span>]</span><br><span class=\"line\"><span class=\"string\">Type=simple</span></span><br><span class=\"line\"><span class=\"string\">User=root</span></span><br><span class=\"line\"><span class=\"string\">Restart=on-failure</span></span><br><span class=\"line\"><span class=\"string\">ExecReload=/bin/kill</span> <span class=\"string\">-HUP</span> <span class=\"string\">$MAINPID</span></span><br><span class=\"line\"><span class=\"string\">ExecStart=/usr/local/prometheus-2.47/prometheus</span> <span class=\"string\">\\</span></span><br><span class=\"line\">  <span class=\"string\">--config.file=/usr/local/prometheus-2.47/prometheus.yml</span> <span class=\"string\">\\</span></span><br><span class=\"line\">  <span class=\"string\">--storage.tsdb.path</span> <span class=\"string\">/usr/local/prometheus-2.47/data</span> <span class=\"string\">\\</span></span><br><span class=\"line\">  <span class=\"string\">--storage.tsdb.retention=15d</span></span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"string\">Install</span>]</span><br><span class=\"line\"><span class=\"string\">WantedBy=multi-user.target</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><code>systemctl daemon-reload</code><br><code>systemctl enable prometheus --now</code></p>\n<h2 id=\"--docker-\"><a href=\"#--docker-\" class=\"headerlink\" title=\"  docker \"></a>  docker </h2><h3 id=\"2-1-centos7-9\"><a href=\"#2-1-centos7-9\" class=\"headerlink\" title=\"2.1 centos7.9\"></a>2.1 centos7.9</h3><p><code> docker build -network=host -t prometheus-2.47.0 .</code></p>\n<ul>\n<li><code>-network=host</code>yum install</li>\n<li><code>-t prometheus-2.47.0</code> </li>\n</ul>\n<p>Dockerfile: <code> vim Dockerfile</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">FROM</span> <span class=\"string\">centos:centos7</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Define Prometheus home and its version</span></span><br><span class=\"line\"><span class=\"string\">ARG</span> <span class=\"string\">PROMETHEUS_HOME=/opt/prometheus</span></span><br><span class=\"line\"><span class=\"string\">ARG</span> <span class=\"string\">PROMETHEUS_VERSION=2.47.0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Define TAR &amp; folder names, as well as download URL for easier use</span></span><br><span class=\"line\"><span class=\"string\">ARG</span> <span class=\"string\">PROMETHEUS_TAR_MAYOR=prometheus-$&#123;PROMETHEUS_VERSION&#125;.linux-amd64</span></span><br><span class=\"line\"><span class=\"string\">ARG</span> <span class=\"string\">PROMETHEUS_TAR_FULLNAME=$&#123;PROMETHEUS_TAR_MAYOR&#125;.tar.gz</span></span><br><span class=\"line\"><span class=\"string\">ARG</span> <span class=\"string\">PROMETHEUS_URL=https://github.com/prometheus/prometheus/releases/download/v$&#123;PROMETHEUS_VERSION&#125;/$&#123;PROMETHEUS_TAR_FULLNAME&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Install wget; download Prometheus</span></span><br><span class=\"line\"><span class=\"string\">RUN</span> <span class=\"string\">yum</span> <span class=\"string\">install</span> <span class=\"string\">-y</span> <span class=\"string\">wget</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">    <span class=\"string\">wget</span> <span class=\"string\">$&#123;PROMETHEUS_URL&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Untar the file and rename it to &quot;prometheus&quot;</span></span><br><span class=\"line\"><span class=\"string\">RUN</span> <span class=\"string\">tar</span> <span class=\"string\">xvfz</span> <span class=\"string\">$&#123;PROMETHEUS_TAR_FULLNAME&#125;</span> <span class=\"string\">-C</span> <span class=\"string\">/opt</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">    <span class=\"string\">mv</span> <span class=\"string\">/opt/$&#123;PROMETHEUS_TAR_MAYOR&#125;</span> <span class=\"string\">/opt/prometheus</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">    <span class=\"string\">rm</span> <span class=\"string\">-rf</span> <span class=\"string\">/opt/prometheus/prometheus.yml</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">RUN</span> <span class=\"string\">groupadd</span> <span class=\"string\">-r</span> <span class=\"string\">prometheus</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">    <span class=\"string\">useradd</span> <span class=\"string\">-g</span> <span class=\"string\">prometheus</span> <span class=\"string\">-s</span> <span class=\"string\">/bin/bash</span> <span class=\"string\">-c</span> <span class=\"string\">&quot;Prometheus user&quot;</span> <span class=\"string\">prometheus</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">    <span class=\"string\">chown</span> <span class=\"string\">-R</span> <span class=\"string\">prometheus:prometheus</span> <span class=\"string\">/opt/prometheus</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">COPY</span> <span class=\"string\">config/prometheus.yml</span> <span class=\"string\">/opt/prometheus/prometheus.yml</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">RUN</span> <span class=\"string\">chown</span> <span class=\"string\">prometheus:prometheus</span> <span class=\"string\">/opt/prometheus/prometheus.yml</span> <span class=\"string\">&amp;&amp;</span> <span class=\"string\">\\</span></span><br><span class=\"line\">    <span class=\"string\">chmod</span> <span class=\"number\">755</span> <span class=\"string\">/opt/prometheus/prometheus.yml</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">EXPOSE</span> <span class=\"number\">9090</span></span><br><span class=\"line\"><span class=\"string\">VOLUME</span>  [ <span class=\"string\">&quot;/opt/prometheus&quot;</span> ]</span><br><span class=\"line\"><span class=\"string\">WORKDIR</span> <span class=\"string\">$&#123;PROMETHEUS_HOME&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">USER</span> <span class=\"string\">prometheus</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">ENTRYPOINT</span> [ <span class=\"string\">&quot;./prometheus&quot;</span> ]</span><br><span class=\"line\"><span class=\"string\">CMD</span>        [ <span class=\"string\">&quot;--config.file=prometheus.yml&quot;</span> ]</span><br></pre></td></tr></table></figure>\n\n<p>:<br><code>docker run -p 9090:9090 prometheus-2.47.0</code></p>\n<h3 id=\"2-2--docker-compose-\"><a href=\"#2-2--docker-compose-\" class=\"headerlink\" title=\"2.2  docker-compose \"></a>2.2  docker-compose </h3><p><code>vim Prometheus.yaml</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">    <span class=\"attr\">prometheus:</span></span><br><span class=\"line\">        <span class=\"attr\">image:</span> <span class=\"string\">prometheus-2.47.0:latest</span></span><br><span class=\"line\">        <span class=\"attr\">user:</span> <span class=\"string\">&quot;1000:1000&quot;</span></span><br><span class=\"line\">        <span class=\"attr\">ports:</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&quot;9090:9090&quot;</span></span><br><span class=\"line\">        <span class=\"attr\">container_name:</span> <span class=\"string\">prometheus</span></span><br><span class=\"line\">        <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">        <span class=\"attr\">volumes:</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">/usr/local/prometheus-2.47/prometheus.yml:/opt/prometheus/prometheus.yml</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">    <span class=\"attr\">default:</span></span><br><span class=\"line\">        <span class=\"attr\">driver:</span> <span class=\"string\">bridge</span></span><br></pre></td></tr></table></figure>\n\n\n<p>: </p>\n<p><code>docker-compose -f prometheus.yaml up -d</code></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"3-1-Prometheus\"><a href=\"#3-1-Prometheus\" class=\"headerlink\" title=\"3.1 Prometheus\"></a>3.1 Prometheus</h3><p>: <strong>Error on ingesting samples that are too old or are too far into the future</strong><br>: <strong>err&#x3D;out of bounds</strong></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">caller=scrape.go:1741</span> <span class=\"string\">level=warn</span> <span class=\"string\">component=&quot;scrape</span> <span class=\"string\">manager&quot;</span> <span class=\"string\">scrape_pool=prometheus</span> <span class=\"string\">target=http://192.168.128.203:9090/metrics</span> <span class=\"string\">msg=&quot;Error</span> <span class=\"string\">on</span> <span class=\"string\">ingesting</span> <span class=\"string\">samples</span> <span class=\"string\">that</span> <span class=\"string\">are</span> <span class=\"string\">too</span> <span class=\"string\">old</span> <span class=\"string\">or</span> <span class=\"string\">are</span> <span class=\"string\">too</span> <span class=\"string\">far</span> <span class=\"string\">into</span> <span class=\"string\">the</span> <span class=\"string\">future&quot;</span> <span class=\"string\">num_dropped=666</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">caller=scrape.go:1405</span> <span class=\"string\">level=warn</span> <span class=\"string\">component=&quot;scrape</span> <span class=\"string\">manager&quot;</span> <span class=\"string\">scrape_pool=prometheus</span> <span class=\"string\">target=http://192.168.128.203:9090/metrics</span> <span class=\"string\">msg=&quot;Append</span> <span class=\"string\">failed&quot;</span> <span class=\"string\">err=&quot;out</span> <span class=\"string\">of</span> <span class=\"string\">bounds&quot;</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><a href=\"https://forum.gitlab.com/t/prometheus-out-of-bounds-error-after-reboot/75229\"></a></p>\n</blockquote>\n<p><strong></strong>: ,Prometheus.<br>              <code>/opt/prometheus/data</code>  .</p>\n<p><strong>:</strong><br><code> docker exec -it prometheus /bin/bash</code><br><code>cd /opt/prometheus/data</code><br><code>rm -rf 0* wal/0* wal/checkpoint.0*</code></p>\n<p><strong>:</strong><br><code>docker-compose -f prometheus.yaml down</code><br><code>docker-compose -f prometheus.yaml up -d</code></p>\n<img src=\"/images/053.Prometheus_Installation.md.01.png\" width=100% height=100% />"},{"title":"()   Grafana ","date":"2023-09-28T08:45:47.000Z","_content":"\n##  \n\n- \n    - rpm  (, )\n    - \n    - docker \n\n\n\n##  \n\n### 1.1 \n\n[](https://dl.grafana.com/enterprise/release/grafana-enterprise-10.1.2.linux-amd64.tar.gz)\n\n### 1.2 \n``` tar -zxvf grafana-enterprise-10.1.2.linux-amd64.tar.gz```\n``` cp -rf grafana-10.1.2/ /usr/local/grafana ```\n\n### 1.3 /\n```groupadd grafana```\n```useradd -g grafana grafana```\n\n### 1.4 \n```mkdir -p /etc/grafana```\n```mkdir -p /etc/grafana/provisioning```\n```mkdir -p /var/log/grafana```\n```mkdir -p /var/lib/grafana```\n```mkdir -p /var/lib/grafana/plugins```\n\n### 1.5 \n```chown -R grafana:grafana /usr/local/grafana/```\n```chown -R grafana:grafana /etc/grafana/```\n```chown -R grafana:grafana /var/lib/grafana/```\n```chown -R grafana:grafana /var/log/grafana/```\n\n### 1.6  grafana \n``` cp /usr/local/grafana/conf/sample.ini /etc/grafana/grafana.ini ```\n\n### 1.7 \n```vim /etc/sysconfig/grafana-server```\n\n``` yaml\nGRAFANA_USER=grafana\nGRAFANA_GROUP=grafana\nGRAFANA_HOME=/usr/local/grafana\nLOG_DIR=/var/log/grafana\nDATA_DIR=/var/lib/grafana\nMAX_OPEN_FILES=10000\nCONF_DIR=/etc/grafana\nCONF_FILE=/etc/grafana/grafana.ini\nRESTART_ON_UPGRADE=true\nPLUGINS_DIR=/var/lib/grafana/plugins\nPROVISIONING_CFG_DIR=/etc/grafana/provisioning\n# Only used on systemd systems\nPID_FILE_DIR=/var/run/grafana\n```\n\n### 1.8 systemd \n```vim /usr/lib/systemd/system/grafana-server.service```\n\n``` yaml\n# /usr/lib/systemd/system/grafana-server.service\n[Unit]\nDescription=Grafana instance\nDocumentation=http://docs.grafana.org\nWants=network-online.target\nAfter=network-online.target\nAfter=postgresql.service mariadb.service mysqld.service influxdb.service\n\n[Service]\nEnvironmentFile=/etc/sysconfig/grafana-server\nUser=grafana\nGroup=grafana\nType=notify\nRestart=on-failure\nWorkingDirectory=/usr/local/grafana\nRuntimeDirectory=grafana\nRuntimeDirectoryMode=0750\nExecStart=/usr/local/grafana/bin/grafana server                                     \\\n                            --config=${CONF_FILE}                                   \\\n                            --pidfile=${PID_FILE_DIR}/grafana-server.pid            \\\n                            --packaging=rpm                                         \\\n                            cfg:default.paths.logs=${LOG_DIR}                       \\\n                            cfg:default.paths.data=${DATA_DIR}                      \\\n                            cfg:default.paths.plugins=${PLUGINS_DIR}                \\\n                            cfg:default.paths.provisioning=${PROVISIONING_CFG_DIR}\n\nLimitNOFILE=10000\nTimeoutStopSec=20\nCapabilityBoundingSet=\nDeviceAllow=\nLockPersonality=true\nMemoryDenyWriteExecute=false\nNoNewPrivileges=true\nPrivateDevices=true\nPrivateTmp=true\nProtectClock=true\nProtectControlGroups=true\nProtectHome=true\nProtectHostname=true\nProtectKernelLogs=true\nProtectKernelModules=true\nProtectKernelTunables=true\nProtectProc=invisible\nProtectSystem=full\nRemoveIPC=true\nRestrictAddressFamilies=AF_INET AF_INET6 AF_UNIX\nRestrictNamespaces=true\nRestrictRealtime=true\nRestrictSUIDSGID=true\nSystemCallArchitectures=native\nUMask=0027\n\n[Install]\nWantedBy=multi-user.target\n```\n\n### 1.9 \n\n```systemctl daemon-reload```\n```systemctl enable grafana-server --now```\n\n\n### 1.10 \n\n**, **\n\n\n##  docker \n\n### 2.1 \n\n``` docker pull grafana/grafana-enterprise ```\n\n### 2.2 docker-compose \n\n```vim grafana.yaml ```\n\n``` yaml\nversion: \"3\"\nservices:\n  grafana:\n    image: grafana/grafana-enterprise\n    container_name: grafana\n    restart: unless-stopped\n    user: \"0\"\n    ports:\n      - \"3000:3000\"\n    volumes:\n      - /var/lib/grafana:/var/lib/grafana\n```\n\n### 2.3  \n\n``` docker-compose -f grafana.yaml up -d ```","source":"_posts/054.Grafana_Installation.md","raw":"---\ntitle: ()   Grafana \ndate: 2023-9-28 16:45:47\ncategories: \n- [Monitor]\ntags: \n- Grafana\n---\n\n##  \n\n- \n    - rpm  (, )\n    - \n    - docker \n\n\n\n##  \n\n### 1.1 \n\n[](https://dl.grafana.com/enterprise/release/grafana-enterprise-10.1.2.linux-amd64.tar.gz)\n\n### 1.2 \n``` tar -zxvf grafana-enterprise-10.1.2.linux-amd64.tar.gz```\n``` cp -rf grafana-10.1.2/ /usr/local/grafana ```\n\n### 1.3 /\n```groupadd grafana```\n```useradd -g grafana grafana```\n\n### 1.4 \n```mkdir -p /etc/grafana```\n```mkdir -p /etc/grafana/provisioning```\n```mkdir -p /var/log/grafana```\n```mkdir -p /var/lib/grafana```\n```mkdir -p /var/lib/grafana/plugins```\n\n### 1.5 \n```chown -R grafana:grafana /usr/local/grafana/```\n```chown -R grafana:grafana /etc/grafana/```\n```chown -R grafana:grafana /var/lib/grafana/```\n```chown -R grafana:grafana /var/log/grafana/```\n\n### 1.6  grafana \n``` cp /usr/local/grafana/conf/sample.ini /etc/grafana/grafana.ini ```\n\n### 1.7 \n```vim /etc/sysconfig/grafana-server```\n\n``` yaml\nGRAFANA_USER=grafana\nGRAFANA_GROUP=grafana\nGRAFANA_HOME=/usr/local/grafana\nLOG_DIR=/var/log/grafana\nDATA_DIR=/var/lib/grafana\nMAX_OPEN_FILES=10000\nCONF_DIR=/etc/grafana\nCONF_FILE=/etc/grafana/grafana.ini\nRESTART_ON_UPGRADE=true\nPLUGINS_DIR=/var/lib/grafana/plugins\nPROVISIONING_CFG_DIR=/etc/grafana/provisioning\n# Only used on systemd systems\nPID_FILE_DIR=/var/run/grafana\n```\n\n### 1.8 systemd \n```vim /usr/lib/systemd/system/grafana-server.service```\n\n``` yaml\n# /usr/lib/systemd/system/grafana-server.service\n[Unit]\nDescription=Grafana instance\nDocumentation=http://docs.grafana.org\nWants=network-online.target\nAfter=network-online.target\nAfter=postgresql.service mariadb.service mysqld.service influxdb.service\n\n[Service]\nEnvironmentFile=/etc/sysconfig/grafana-server\nUser=grafana\nGroup=grafana\nType=notify\nRestart=on-failure\nWorkingDirectory=/usr/local/grafana\nRuntimeDirectory=grafana\nRuntimeDirectoryMode=0750\nExecStart=/usr/local/grafana/bin/grafana server                                     \\\n                            --config=${CONF_FILE}                                   \\\n                            --pidfile=${PID_FILE_DIR}/grafana-server.pid            \\\n                            --packaging=rpm                                         \\\n                            cfg:default.paths.logs=${LOG_DIR}                       \\\n                            cfg:default.paths.data=${DATA_DIR}                      \\\n                            cfg:default.paths.plugins=${PLUGINS_DIR}                \\\n                            cfg:default.paths.provisioning=${PROVISIONING_CFG_DIR}\n\nLimitNOFILE=10000\nTimeoutStopSec=20\nCapabilityBoundingSet=\nDeviceAllow=\nLockPersonality=true\nMemoryDenyWriteExecute=false\nNoNewPrivileges=true\nPrivateDevices=true\nPrivateTmp=true\nProtectClock=true\nProtectControlGroups=true\nProtectHome=true\nProtectHostname=true\nProtectKernelLogs=true\nProtectKernelModules=true\nProtectKernelTunables=true\nProtectProc=invisible\nProtectSystem=full\nRemoveIPC=true\nRestrictAddressFamilies=AF_INET AF_INET6 AF_UNIX\nRestrictNamespaces=true\nRestrictRealtime=true\nRestrictSUIDSGID=true\nSystemCallArchitectures=native\nUMask=0027\n\n[Install]\nWantedBy=multi-user.target\n```\n\n### 1.9 \n\n```systemctl daemon-reload```\n```systemctl enable grafana-server --now```\n\n\n### 1.10 \n\n**, **\n\n\n##  docker \n\n### 2.1 \n\n``` docker pull grafana/grafana-enterprise ```\n\n### 2.2 docker-compose \n\n```vim grafana.yaml ```\n\n``` yaml\nversion: \"3\"\nservices:\n  grafana:\n    image: grafana/grafana-enterprise\n    container_name: grafana\n    restart: unless-stopped\n    user: \"0\"\n    ports:\n      - \"3000:3000\"\n    volumes:\n      - /var/lib/grafana:/var/lib/grafana\n```\n\n### 2.3  \n\n``` docker-compose -f grafana.yaml up -d ```","slug":"054.Grafana_Installation","published":1,"updated":"2023-10-11T01:07:45.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbgb0051yknr1mz789ed","content":"<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><ul>\n<li><ul>\n<li>rpm  (, )</li>\n<li></li>\n<li>docker </li>\n</ul>\n</li>\n</ul>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"1-1-\"><a href=\"#1-1-\" class=\"headerlink\" title=\"1.1 \"></a>1.1 </h3><p><a href=\"https://dl.grafana.com/enterprise/release/grafana-enterprise-10.1.2.linux-amd64.tar.gz\"></a></p>\n<h3 id=\"1-2-\"><a href=\"#1-2-\" class=\"headerlink\" title=\"1.2 \"></a>1.2 </h3><p><code> tar -zxvf grafana-enterprise-10.1.2.linux-amd64.tar.gz</code><br><code>cp -rf grafana-10.1.2/ /usr/local/grafana</code></p>\n<h3 id=\"1-3--\"><a href=\"#1-3--\" class=\"headerlink\" title=\"1.3 &#x2F;\"></a>1.3 &#x2F;</h3><p><code>groupadd grafana</code><br><code>useradd -g grafana grafana</code></p>\n<h3 id=\"1-4-\"><a href=\"#1-4-\" class=\"headerlink\" title=\"1.4 \"></a>1.4 </h3><p><code>mkdir -p /etc/grafana</code><br><code>mkdir -p /etc/grafana/provisioning</code><br><code>mkdir -p /var/log/grafana</code><br><code>mkdir -p /var/lib/grafana</code><br><code>mkdir -p /var/lib/grafana/plugins</code></p>\n<h3 id=\"1-5-\"><a href=\"#1-5-\" class=\"headerlink\" title=\"1.5 \"></a>1.5 </h3><p><code>chown -R grafana:grafana /usr/local/grafana/</code><br><code>chown -R grafana:grafana /etc/grafana/</code><br><code>chown -R grafana:grafana /var/lib/grafana/</code><br><code>chown -R grafana:grafana /var/log/grafana/</code></p>\n<h3 id=\"1-6--grafana-\"><a href=\"#1-6--grafana-\" class=\"headerlink\" title=\"1.6  grafana \"></a>1.6  grafana </h3><p><code>cp /usr/local/grafana/conf/sample.ini /etc/grafana/grafana.ini</code></p>\n<h3 id=\"1-7-\"><a href=\"#1-7-\" class=\"headerlink\" title=\"1.7 \"></a>1.7 </h3><p><code>vim /etc/sysconfig/grafana-server</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">GRAFANA_USER=grafana</span></span><br><span class=\"line\"><span class=\"string\">GRAFANA_GROUP=grafana</span></span><br><span class=\"line\"><span class=\"string\">GRAFANA_HOME=/usr/local/grafana</span></span><br><span class=\"line\"><span class=\"string\">LOG_DIR=/var/log/grafana</span></span><br><span class=\"line\"><span class=\"string\">DATA_DIR=/var/lib/grafana</span></span><br><span class=\"line\"><span class=\"string\">MAX_OPEN_FILES=10000</span></span><br><span class=\"line\"><span class=\"string\">CONF_DIR=/etc/grafana</span></span><br><span class=\"line\"><span class=\"string\">CONF_FILE=/etc/grafana/grafana.ini</span></span><br><span class=\"line\"><span class=\"string\">RESTART_ON_UPGRADE=true</span></span><br><span class=\"line\"><span class=\"string\">PLUGINS_DIR=/var/lib/grafana/plugins</span></span><br><span class=\"line\"><span class=\"string\">PROVISIONING_CFG_DIR=/etc/grafana/provisioning</span></span><br><span class=\"line\"><span class=\"comment\"># Only used on systemd systems</span></span><br><span class=\"line\"><span class=\"string\">PID_FILE_DIR=/var/run/grafana</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-8-systemd-\"><a href=\"#1-8-systemd-\" class=\"headerlink\" title=\"1.8 systemd \"></a>1.8 systemd </h3><p><code>vim /usr/lib/systemd/system/grafana-server.service</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># /usr/lib/systemd/system/grafana-server.service</span></span><br><span class=\"line\">[<span class=\"string\">Unit</span>]</span><br><span class=\"line\"><span class=\"string\">Description=Grafana</span> <span class=\"string\">instance</span></span><br><span class=\"line\"><span class=\"string\">Documentation=http://docs.grafana.org</span></span><br><span class=\"line\"><span class=\"string\">Wants=network-online.target</span></span><br><span class=\"line\"><span class=\"string\">After=network-online.target</span></span><br><span class=\"line\"><span class=\"string\">After=postgresql.service</span> <span class=\"string\">mariadb.service</span> <span class=\"string\">mysqld.service</span> <span class=\"string\">influxdb.service</span></span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"string\">Service</span>]</span><br><span class=\"line\"><span class=\"string\">EnvironmentFile=/etc/sysconfig/grafana-server</span></span><br><span class=\"line\"><span class=\"string\">User=grafana</span></span><br><span class=\"line\"><span class=\"string\">Group=grafana</span></span><br><span class=\"line\"><span class=\"string\">Type=notify</span></span><br><span class=\"line\"><span class=\"string\">Restart=on-failure</span></span><br><span class=\"line\"><span class=\"string\">WorkingDirectory=/usr/local/grafana</span></span><br><span class=\"line\"><span class=\"string\">RuntimeDirectory=grafana</span></span><br><span class=\"line\"><span class=\"string\">RuntimeDirectoryMode=0750</span></span><br><span class=\"line\"><span class=\"string\">ExecStart=/usr/local/grafana/bin/grafana</span> <span class=\"string\">server</span>                                     <span class=\"string\">\\</span></span><br><span class=\"line\">                            <span class=\"string\">--config=$&#123;CONF_FILE&#125;</span>                                   <span class=\"string\">\\</span></span><br><span class=\"line\">                            <span class=\"string\">--pidfile=$&#123;PID_FILE_DIR&#125;/grafana-server.pid</span>            <span class=\"string\">\\</span></span><br><span class=\"line\">                            <span class=\"string\">--packaging=rpm</span>                                         <span class=\"string\">\\</span></span><br><span class=\"line\">                            <span class=\"string\">cfg:default.paths.logs=$&#123;LOG_DIR&#125;</span>                       <span class=\"string\">\\</span></span><br><span class=\"line\">                            <span class=\"string\">cfg:default.paths.data=$&#123;DATA_DIR&#125;</span>                      <span class=\"string\">\\</span></span><br><span class=\"line\">                            <span class=\"string\">cfg:default.paths.plugins=$&#123;PLUGINS_DIR&#125;</span>                <span class=\"string\">\\</span></span><br><span class=\"line\">                            <span class=\"string\">cfg:default.paths.provisioning=$&#123;PROVISIONING_CFG_DIR&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">LimitNOFILE=10000</span></span><br><span class=\"line\"><span class=\"string\">TimeoutStopSec=20</span></span><br><span class=\"line\"><span class=\"string\">CapabilityBoundingSet=</span></span><br><span class=\"line\"><span class=\"string\">DeviceAllow=</span></span><br><span class=\"line\"><span class=\"string\">LockPersonality=true</span></span><br><span class=\"line\"><span class=\"string\">MemoryDenyWriteExecute=false</span></span><br><span class=\"line\"><span class=\"string\">NoNewPrivileges=true</span></span><br><span class=\"line\"><span class=\"string\">PrivateDevices=true</span></span><br><span class=\"line\"><span class=\"string\">PrivateTmp=true</span></span><br><span class=\"line\"><span class=\"string\">ProtectClock=true</span></span><br><span class=\"line\"><span class=\"string\">ProtectControlGroups=true</span></span><br><span class=\"line\"><span class=\"string\">ProtectHome=true</span></span><br><span class=\"line\"><span class=\"string\">ProtectHostname=true</span></span><br><span class=\"line\"><span class=\"string\">ProtectKernelLogs=true</span></span><br><span class=\"line\"><span class=\"string\">ProtectKernelModules=true</span></span><br><span class=\"line\"><span class=\"string\">ProtectKernelTunables=true</span></span><br><span class=\"line\"><span class=\"string\">ProtectProc=invisible</span></span><br><span class=\"line\"><span class=\"string\">ProtectSystem=full</span></span><br><span class=\"line\"><span class=\"string\">RemoveIPC=true</span></span><br><span class=\"line\"><span class=\"string\">RestrictAddressFamilies=AF_INET</span> <span class=\"string\">AF_INET6</span> <span class=\"string\">AF_UNIX</span></span><br><span class=\"line\"><span class=\"string\">RestrictNamespaces=true</span></span><br><span class=\"line\"><span class=\"string\">RestrictRealtime=true</span></span><br><span class=\"line\"><span class=\"string\">RestrictSUIDSGID=true</span></span><br><span class=\"line\"><span class=\"string\">SystemCallArchitectures=native</span></span><br><span class=\"line\"><span class=\"string\">UMask=0027</span></span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"string\">Install</span>]</span><br><span class=\"line\"><span class=\"string\">WantedBy=multi-user.target</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-9-\"><a href=\"#1-9-\" class=\"headerlink\" title=\"1.9 \"></a>1.9 </h3><p><code>systemctl daemon-reload</code><br><code>systemctl enable grafana-server --now</code></p>\n<h3 id=\"1-10-\"><a href=\"#1-10-\" class=\"headerlink\" title=\"1.10 \"></a>1.10 </h3><p><strong>, </strong></p>\n<h2 id=\"-docker-\"><a href=\"#-docker-\" class=\"headerlink\" title=\" docker \"></a> docker </h2><h3 id=\"2-1-\"><a href=\"#2-1-\" class=\"headerlink\" title=\"2.1 \"></a>2.1 </h3><p><code>docker pull grafana/grafana-enterprise</code></p>\n<h3 id=\"2-2-docker-compose\"><a href=\"#2-2-docker-compose\" class=\"headerlink\" title=\"2.2 docker-compose\"></a>2.2 docker-compose</h3><p><code>vim grafana.yaml </code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">grafana:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">grafana/grafana-enterprise</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">grafana</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">unless-stopped</span></span><br><span class=\"line\">    <span class=\"attr\">user:</span> <span class=\"string\">&quot;0&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;3000:3000&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/var/lib/grafana:/var/lib/grafana</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-3-\"><a href=\"#2-3-\" class=\"headerlink\" title=\"2.3 \"></a>2.3 </h3><p><code>docker-compose -f grafana.yaml up -d</code></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><ul>\n<li><ul>\n<li>rpm  (, )</li>\n<li></li>\n<li>docker </li>\n</ul>\n</li>\n</ul>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"1-1-\"><a href=\"#1-1-\" class=\"headerlink\" title=\"1.1 \"></a>1.1 </h3><p><a href=\"https://dl.grafana.com/enterprise/release/grafana-enterprise-10.1.2.linux-amd64.tar.gz\"></a></p>\n<h3 id=\"1-2-\"><a href=\"#1-2-\" class=\"headerlink\" title=\"1.2 \"></a>1.2 </h3><p><code> tar -zxvf grafana-enterprise-10.1.2.linux-amd64.tar.gz</code><br><code>cp -rf grafana-10.1.2/ /usr/local/grafana</code></p>\n<h3 id=\"1-3--\"><a href=\"#1-3--\" class=\"headerlink\" title=\"1.3 &#x2F;\"></a>1.3 &#x2F;</h3><p><code>groupadd grafana</code><br><code>useradd -g grafana grafana</code></p>\n<h3 id=\"1-4-\"><a href=\"#1-4-\" class=\"headerlink\" title=\"1.4 \"></a>1.4 </h3><p><code>mkdir -p /etc/grafana</code><br><code>mkdir -p /etc/grafana/provisioning</code><br><code>mkdir -p /var/log/grafana</code><br><code>mkdir -p /var/lib/grafana</code><br><code>mkdir -p /var/lib/grafana/plugins</code></p>\n<h3 id=\"1-5-\"><a href=\"#1-5-\" class=\"headerlink\" title=\"1.5 \"></a>1.5 </h3><p><code>chown -R grafana:grafana /usr/local/grafana/</code><br><code>chown -R grafana:grafana /etc/grafana/</code><br><code>chown -R grafana:grafana /var/lib/grafana/</code><br><code>chown -R grafana:grafana /var/log/grafana/</code></p>\n<h3 id=\"1-6--grafana-\"><a href=\"#1-6--grafana-\" class=\"headerlink\" title=\"1.6  grafana \"></a>1.6  grafana </h3><p><code>cp /usr/local/grafana/conf/sample.ini /etc/grafana/grafana.ini</code></p>\n<h3 id=\"1-7-\"><a href=\"#1-7-\" class=\"headerlink\" title=\"1.7 \"></a>1.7 </h3><p><code>vim /etc/sysconfig/grafana-server</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">GRAFANA_USER=grafana</span></span><br><span class=\"line\"><span class=\"string\">GRAFANA_GROUP=grafana</span></span><br><span class=\"line\"><span class=\"string\">GRAFANA_HOME=/usr/local/grafana</span></span><br><span class=\"line\"><span class=\"string\">LOG_DIR=/var/log/grafana</span></span><br><span class=\"line\"><span class=\"string\">DATA_DIR=/var/lib/grafana</span></span><br><span class=\"line\"><span class=\"string\">MAX_OPEN_FILES=10000</span></span><br><span class=\"line\"><span class=\"string\">CONF_DIR=/etc/grafana</span></span><br><span class=\"line\"><span class=\"string\">CONF_FILE=/etc/grafana/grafana.ini</span></span><br><span class=\"line\"><span class=\"string\">RESTART_ON_UPGRADE=true</span></span><br><span class=\"line\"><span class=\"string\">PLUGINS_DIR=/var/lib/grafana/plugins</span></span><br><span class=\"line\"><span class=\"string\">PROVISIONING_CFG_DIR=/etc/grafana/provisioning</span></span><br><span class=\"line\"><span class=\"comment\"># Only used on systemd systems</span></span><br><span class=\"line\"><span class=\"string\">PID_FILE_DIR=/var/run/grafana</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-8-systemd-\"><a href=\"#1-8-systemd-\" class=\"headerlink\" title=\"1.8 systemd \"></a>1.8 systemd </h3><p><code>vim /usr/lib/systemd/system/grafana-server.service</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># /usr/lib/systemd/system/grafana-server.service</span></span><br><span class=\"line\">[<span class=\"string\">Unit</span>]</span><br><span class=\"line\"><span class=\"string\">Description=Grafana</span> <span class=\"string\">instance</span></span><br><span class=\"line\"><span class=\"string\">Documentation=http://docs.grafana.org</span></span><br><span class=\"line\"><span class=\"string\">Wants=network-online.target</span></span><br><span class=\"line\"><span class=\"string\">After=network-online.target</span></span><br><span class=\"line\"><span class=\"string\">After=postgresql.service</span> <span class=\"string\">mariadb.service</span> <span class=\"string\">mysqld.service</span> <span class=\"string\">influxdb.service</span></span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"string\">Service</span>]</span><br><span class=\"line\"><span class=\"string\">EnvironmentFile=/etc/sysconfig/grafana-server</span></span><br><span class=\"line\"><span class=\"string\">User=grafana</span></span><br><span class=\"line\"><span class=\"string\">Group=grafana</span></span><br><span class=\"line\"><span class=\"string\">Type=notify</span></span><br><span class=\"line\"><span class=\"string\">Restart=on-failure</span></span><br><span class=\"line\"><span class=\"string\">WorkingDirectory=/usr/local/grafana</span></span><br><span class=\"line\"><span class=\"string\">RuntimeDirectory=grafana</span></span><br><span class=\"line\"><span class=\"string\">RuntimeDirectoryMode=0750</span></span><br><span class=\"line\"><span class=\"string\">ExecStart=/usr/local/grafana/bin/grafana</span> <span class=\"string\">server</span>                                     <span class=\"string\">\\</span></span><br><span class=\"line\">                            <span class=\"string\">--config=$&#123;CONF_FILE&#125;</span>                                   <span class=\"string\">\\</span></span><br><span class=\"line\">                            <span class=\"string\">--pidfile=$&#123;PID_FILE_DIR&#125;/grafana-server.pid</span>            <span class=\"string\">\\</span></span><br><span class=\"line\">                            <span class=\"string\">--packaging=rpm</span>                                         <span class=\"string\">\\</span></span><br><span class=\"line\">                            <span class=\"string\">cfg:default.paths.logs=$&#123;LOG_DIR&#125;</span>                       <span class=\"string\">\\</span></span><br><span class=\"line\">                            <span class=\"string\">cfg:default.paths.data=$&#123;DATA_DIR&#125;</span>                      <span class=\"string\">\\</span></span><br><span class=\"line\">                            <span class=\"string\">cfg:default.paths.plugins=$&#123;PLUGINS_DIR&#125;</span>                <span class=\"string\">\\</span></span><br><span class=\"line\">                            <span class=\"string\">cfg:default.paths.provisioning=$&#123;PROVISIONING_CFG_DIR&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">LimitNOFILE=10000</span></span><br><span class=\"line\"><span class=\"string\">TimeoutStopSec=20</span></span><br><span class=\"line\"><span class=\"string\">CapabilityBoundingSet=</span></span><br><span class=\"line\"><span class=\"string\">DeviceAllow=</span></span><br><span class=\"line\"><span class=\"string\">LockPersonality=true</span></span><br><span class=\"line\"><span class=\"string\">MemoryDenyWriteExecute=false</span></span><br><span class=\"line\"><span class=\"string\">NoNewPrivileges=true</span></span><br><span class=\"line\"><span class=\"string\">PrivateDevices=true</span></span><br><span class=\"line\"><span class=\"string\">PrivateTmp=true</span></span><br><span class=\"line\"><span class=\"string\">ProtectClock=true</span></span><br><span class=\"line\"><span class=\"string\">ProtectControlGroups=true</span></span><br><span class=\"line\"><span class=\"string\">ProtectHome=true</span></span><br><span class=\"line\"><span class=\"string\">ProtectHostname=true</span></span><br><span class=\"line\"><span class=\"string\">ProtectKernelLogs=true</span></span><br><span class=\"line\"><span class=\"string\">ProtectKernelModules=true</span></span><br><span class=\"line\"><span class=\"string\">ProtectKernelTunables=true</span></span><br><span class=\"line\"><span class=\"string\">ProtectProc=invisible</span></span><br><span class=\"line\"><span class=\"string\">ProtectSystem=full</span></span><br><span class=\"line\"><span class=\"string\">RemoveIPC=true</span></span><br><span class=\"line\"><span class=\"string\">RestrictAddressFamilies=AF_INET</span> <span class=\"string\">AF_INET6</span> <span class=\"string\">AF_UNIX</span></span><br><span class=\"line\"><span class=\"string\">RestrictNamespaces=true</span></span><br><span class=\"line\"><span class=\"string\">RestrictRealtime=true</span></span><br><span class=\"line\"><span class=\"string\">RestrictSUIDSGID=true</span></span><br><span class=\"line\"><span class=\"string\">SystemCallArchitectures=native</span></span><br><span class=\"line\"><span class=\"string\">UMask=0027</span></span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"string\">Install</span>]</span><br><span class=\"line\"><span class=\"string\">WantedBy=multi-user.target</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-9-\"><a href=\"#1-9-\" class=\"headerlink\" title=\"1.9 \"></a>1.9 </h3><p><code>systemctl daemon-reload</code><br><code>systemctl enable grafana-server --now</code></p>\n<h3 id=\"1-10-\"><a href=\"#1-10-\" class=\"headerlink\" title=\"1.10 \"></a>1.10 </h3><p><strong>, </strong></p>\n<h2 id=\"-docker-\"><a href=\"#-docker-\" class=\"headerlink\" title=\" docker \"></a> docker </h2><h3 id=\"2-1-\"><a href=\"#2-1-\" class=\"headerlink\" title=\"2.1 \"></a>2.1 </h3><p><code>docker pull grafana/grafana-enterprise</code></p>\n<h3 id=\"2-2-docker-compose\"><a href=\"#2-2-docker-compose\" class=\"headerlink\" title=\"2.2 docker-compose\"></a>2.2 docker-compose</h3><p><code>vim grafana.yaml </code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">grafana:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">grafana/grafana-enterprise</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">grafana</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">unless-stopped</span></span><br><span class=\"line\">    <span class=\"attr\">user:</span> <span class=\"string\">&quot;0&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;3000:3000&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/var/lib/grafana:/var/lib/grafana</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-3-\"><a href=\"#2-3-\" class=\"headerlink\" title=\"2.3 \"></a>2.3 </h3><p><code>docker-compose -f grafana.yaml up -d</code></p>\n"},{"title":"Gitlab ","date":"2023-10-11T03:20:47.000Z","_content":"\n##  ENV\n\n- OS: CentOS 7.9\n- HW: 4c4g\n- platform: KVM\n- version: GitLab Community Edition 12.10.6\n- ip: 192.168.128.100\n\n##  \n\n### 1.1  CE yum\n\n``` curl -s https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.deb.sh | sudo bash ```\n\n### 1.2 \n\n``` yum install gitlab-ce-12.10.6 ```\n\n##  \n\n### 2.1 gitlab \n\n``` vim /etc/gitlab/gitlab.rb ```\n\n- line29: http://192.168.128.100\n\n### 2.2 \n\n``` gitlab-ctl reconfigure ```\n\n### 2.3  gitlab\n\n``` gitlab start ```\n\n\n##  GitLab\n\n> GitLab, .\n\n> . \n\n<img src=\"/images/055.Gitlab_Installation.md.01.png\" width=100% height=100% />\n\n\n\n### 3.1 \n\nhttps://gitlab-com.gitlab.io/support/toolbox/upgrade-path/\n\n<img src=\"/images/055.Gitlab_Installation.md.02.png\" width=100% height=100% />\n\n### \n\n1.  ```yum install + - ```\n2.  rpm  ``` rpm -uvh + xxx.rpm ```\n\n/.\n\n<img src=\"/images/055.Gitlab_Installation.md.03.png\" width=100% height=100% />\n\n","source":"_posts/055.Gitlab_Installation.md","raw":"---\ntitle: Gitlab \ndate: 2023-10-11 11:20:47\ncategories: \n- [CI/CD]\ntags: \n- gitlab\n---\n\n##  ENV\n\n- OS: CentOS 7.9\n- HW: 4c4g\n- platform: KVM\n- version: GitLab Community Edition 12.10.6\n- ip: 192.168.128.100\n\n##  \n\n### 1.1  CE yum\n\n``` curl -s https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.deb.sh | sudo bash ```\n\n### 1.2 \n\n``` yum install gitlab-ce-12.10.6 ```\n\n##  \n\n### 2.1 gitlab \n\n``` vim /etc/gitlab/gitlab.rb ```\n\n- line29: http://192.168.128.100\n\n### 2.2 \n\n``` gitlab-ctl reconfigure ```\n\n### 2.3  gitlab\n\n``` gitlab start ```\n\n\n##  GitLab\n\n> GitLab, .\n\n> . \n\n<img src=\"/images/055.Gitlab_Installation.md.01.png\" width=100% height=100% />\n\n\n\n### 3.1 \n\nhttps://gitlab-com.gitlab.io/support/toolbox/upgrade-path/\n\n<img src=\"/images/055.Gitlab_Installation.md.02.png\" width=100% height=100% />\n\n### \n\n1.  ```yum install + - ```\n2.  rpm  ``` rpm -uvh + xxx.rpm ```\n\n/.\n\n<img src=\"/images/055.Gitlab_Installation.md.03.png\" width=100% height=100% />\n\n","slug":"055.Gitlab_Installation","published":1,"updated":"2023-10-11T08:44:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbgc0054yknr8l68fulp","content":"<h2 id=\"-ENV\"><a href=\"#-ENV\" class=\"headerlink\" title=\" ENV\"></a> ENV</h2><ul>\n<li>OS: CentOS 7.9</li>\n<li>HW: 4c4g</li>\n<li>platform: KVM</li>\n<li>version: GitLab Community Edition 12.10.6</li>\n<li>ip: 192.168.128.100</li>\n</ul>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"1-1--CE-yum\"><a href=\"#1-1--CE-yum\" class=\"headerlink\" title=\"1.1  CE yum\"></a>1.1  CE yum</h3><p><code>curl -s https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.deb.sh | sudo bash</code></p>\n<h3 id=\"1-2-\"><a href=\"#1-2-\" class=\"headerlink\" title=\"1.2 \"></a>1.2 </h3><p><code>yum install gitlab-ce-12.10.6</code></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"2-1-gitlab\"><a href=\"#2-1-gitlab\" class=\"headerlink\" title=\"2.1 gitlab\"></a>2.1 gitlab</h3><p><code>vim /etc/gitlab/gitlab.rb</code></p>\n<ul>\n<li>line29: <a href=\"http://192.168.128.100/\">http://192.168.128.100</a></li>\n</ul>\n<h3 id=\"2-2-\"><a href=\"#2-2-\" class=\"headerlink\" title=\"2.2 \"></a>2.2 </h3><p><code>gitlab-ctl reconfigure</code></p>\n<h3 id=\"2-3--gitlab\"><a href=\"#2-3--gitlab\" class=\"headerlink\" title=\"2.3  gitlab\"></a>2.3  gitlab</h3><p><code>gitlab start</code></p>\n<h2 id=\"-GitLab\"><a href=\"#-GitLab\" class=\"headerlink\" title=\" GitLab\"></a> GitLab</h2><blockquote>\n<p>GitLab, .</p>\n</blockquote>\n<blockquote>\n<p>. </p>\n</blockquote>\n<img src=\"/images/055.Gitlab_Installation.md.01.png\" width=100% height=100% />\n\n\n\n<h3 id=\"3-1-\"><a href=\"#3-1-\" class=\"headerlink\" title=\"3.1 \"></a>3.1 </h3><p><a href=\"https://gitlab-com.gitlab.io/support/toolbox/upgrade-path/\">https://gitlab-com.gitlab.io/support/toolbox/upgrade-path/</a></p>\n<img src=\"/images/055.Gitlab_Installation.md.02.png\" width=100% height=100% />\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol>\n<li> <code>yum install + - </code></li>\n<li> rpm  <code>rpm -uvh + xxx.rpm</code></li>\n</ol>\n<p>&#x2F;.</p>\n<img src=\"/images/055.Gitlab_Installation.md.03.png\" width=100% height=100% />\n\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"-ENV\"><a href=\"#-ENV\" class=\"headerlink\" title=\" ENV\"></a> ENV</h2><ul>\n<li>OS: CentOS 7.9</li>\n<li>HW: 4c4g</li>\n<li>platform: KVM</li>\n<li>version: GitLab Community Edition 12.10.6</li>\n<li>ip: 192.168.128.100</li>\n</ul>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"1-1--CE-yum\"><a href=\"#1-1--CE-yum\" class=\"headerlink\" title=\"1.1  CE yum\"></a>1.1  CE yum</h3><p><code>curl -s https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.deb.sh | sudo bash</code></p>\n<h3 id=\"1-2-\"><a href=\"#1-2-\" class=\"headerlink\" title=\"1.2 \"></a>1.2 </h3><p><code>yum install gitlab-ce-12.10.6</code></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"2-1-gitlab\"><a href=\"#2-1-gitlab\" class=\"headerlink\" title=\"2.1 gitlab\"></a>2.1 gitlab</h3><p><code>vim /etc/gitlab/gitlab.rb</code></p>\n<ul>\n<li>line29: <a href=\"http://192.168.128.100/\">http://192.168.128.100</a></li>\n</ul>\n<h3 id=\"2-2-\"><a href=\"#2-2-\" class=\"headerlink\" title=\"2.2 \"></a>2.2 </h3><p><code>gitlab-ctl reconfigure</code></p>\n<h3 id=\"2-3--gitlab\"><a href=\"#2-3--gitlab\" class=\"headerlink\" title=\"2.3  gitlab\"></a>2.3  gitlab</h3><p><code>gitlab start</code></p>\n<h2 id=\"-GitLab\"><a href=\"#-GitLab\" class=\"headerlink\" title=\" GitLab\"></a> GitLab</h2><blockquote>\n<p>GitLab, .</p>\n</blockquote>\n<blockquote>\n<p>. </p>\n</blockquote>\n<img src=\"/images/055.Gitlab_Installation.md.01.png\" width=100% height=100% />\n\n\n\n<h3 id=\"3-1-\"><a href=\"#3-1-\" class=\"headerlink\" title=\"3.1 \"></a>3.1 </h3><p><a href=\"https://gitlab-com.gitlab.io/support/toolbox/upgrade-path/\">https://gitlab-com.gitlab.io/support/toolbox/upgrade-path/</a></p>\n<img src=\"/images/055.Gitlab_Installation.md.02.png\" width=100% height=100% />\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol>\n<li> <code>yum install + - </code></li>\n<li> rpm  <code>rpm -uvh + xxx.rpm</code></li>\n</ol>\n<p>&#x2F;.</p>\n<img src=\"/images/055.Gitlab_Installation.md.03.png\" width=100% height=100% />\n\n"},{"title":"Harbor ","date":"2023-10-12T08:20:47.000Z","_content":"\n\n##  \n\n### 1.1 \n[Github Release](https://github.com/goharbor/harbor/releases)\n\n### 1.2 \n\n```tar -xzvf harbor-offline-installer-v2.7.3.tgz -C /usr/local```\n\n### 1.3 \n\n```docker load -i /usr/local/harbor/harbor.v2.7.3.tar.gz```\n\n### 1.4 \n\n``` mkdir /data/harbor /var/log/harbor -p```\n\n### 1.5 \n\n```cp /usr/local/harbor/harbor.yml.tmpl /usr/local/harbor/harbor.yml```\n\n```vim /usr/local/harbor/harbor.yml```\n<img src=\"/images/056.Harbor_Installation.md.01.png\" width=100% height=100% />\n\n,, .\n\n### 1.6 \n\n```./prepare```\n```./install```\n<img src=\"/images/056.Harbor_Installation.md.02.png\" width=100% height=100% />\n\n##  \n\nharborregistry, registry()","source":"_posts/056.Harbor_Installation.md","raw":"---\ntitle: Harbor \ndate: 2023-10-12 16:20:47\ncategories: \n- [Docker]\ntags: \n- harbor\n---\n\n\n##  \n\n### 1.1 \n[Github Release](https://github.com/goharbor/harbor/releases)\n\n### 1.2 \n\n```tar -xzvf harbor-offline-installer-v2.7.3.tgz -C /usr/local```\n\n### 1.3 \n\n```docker load -i /usr/local/harbor/harbor.v2.7.3.tar.gz```\n\n### 1.4 \n\n``` mkdir /data/harbor /var/log/harbor -p```\n\n### 1.5 \n\n```cp /usr/local/harbor/harbor.yml.tmpl /usr/local/harbor/harbor.yml```\n\n```vim /usr/local/harbor/harbor.yml```\n<img src=\"/images/056.Harbor_Installation.md.01.png\" width=100% height=100% />\n\n,, .\n\n### 1.6 \n\n```./prepare```\n```./install```\n<img src=\"/images/056.Harbor_Installation.md.02.png\" width=100% height=100% />\n\n##  \n\nharborregistry, registry()","slug":"056.Harbor_Installation","published":1,"updated":"2023-10-17T01:02:14.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbge0058yknrdfom9ktu","content":"<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"1-1-\"><a href=\"#1-1-\" class=\"headerlink\" title=\"1.1 \"></a>1.1 </h3><p><a href=\"https://github.com/goharbor/harbor/releases\">Github Release</a></p>\n<h3 id=\"1-2-\"><a href=\"#1-2-\" class=\"headerlink\" title=\"1.2 \"></a>1.2 </h3><p><code>tar -xzvf harbor-offline-installer-v2.7.3.tgz -C /usr/local</code></p>\n<h3 id=\"1-3-\"><a href=\"#1-3-\" class=\"headerlink\" title=\"1.3 \"></a>1.3 </h3><p><code>docker load -i /usr/local/harbor/harbor.v2.7.3.tar.gz</code></p>\n<h3 id=\"1-4-\"><a href=\"#1-4-\" class=\"headerlink\" title=\"1.4 \"></a>1.4 </h3><p><code> mkdir /data/harbor /var/log/harbor -p</code></p>\n<h3 id=\"1-5-\"><a href=\"#1-5-\" class=\"headerlink\" title=\"1.5 \"></a>1.5 </h3><p><code>cp /usr/local/harbor/harbor.yml.tmpl /usr/local/harbor/harbor.yml</code></p>\n<p><code>vim /usr/local/harbor/harbor.yml</code><br><img src=\"/images/056.Harbor_Installation.md.01.png\" width=100% height=100% /></p>\n<p>,, .</p>\n<h3 id=\"1-6-\"><a href=\"#1-6-\" class=\"headerlink\" title=\"1.6 \"></a>1.6 </h3><p><code>./prepare</code><br><code>./install</code><br><img src=\"/images/056.Harbor_Installation.md.02.png\" width=100% height=100% /></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p>harborregistry, registry()</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"1-1-\"><a href=\"#1-1-\" class=\"headerlink\" title=\"1.1 \"></a>1.1 </h3><p><a href=\"https://github.com/goharbor/harbor/releases\">Github Release</a></p>\n<h3 id=\"1-2-\"><a href=\"#1-2-\" class=\"headerlink\" title=\"1.2 \"></a>1.2 </h3><p><code>tar -xzvf harbor-offline-installer-v2.7.3.tgz -C /usr/local</code></p>\n<h3 id=\"1-3-\"><a href=\"#1-3-\" class=\"headerlink\" title=\"1.3 \"></a>1.3 </h3><p><code>docker load -i /usr/local/harbor/harbor.v2.7.3.tar.gz</code></p>\n<h3 id=\"1-4-\"><a href=\"#1-4-\" class=\"headerlink\" title=\"1.4 \"></a>1.4 </h3><p><code> mkdir /data/harbor /var/log/harbor -p</code></p>\n<h3 id=\"1-5-\"><a href=\"#1-5-\" class=\"headerlink\" title=\"1.5 \"></a>1.5 </h3><p><code>cp /usr/local/harbor/harbor.yml.tmpl /usr/local/harbor/harbor.yml</code></p>\n<p><code>vim /usr/local/harbor/harbor.yml</code><br><img src=\"/images/056.Harbor_Installation.md.01.png\" width=100% height=100% /></p>\n<p>,, .</p>\n<h3 id=\"1-6-\"><a href=\"#1-6-\" class=\"headerlink\" title=\"1.6 \"></a>1.6 </h3><p><code>./prepare</code><br><code>./install</code><br><img src=\"/images/056.Harbor_Installation.md.02.png\" width=100% height=100% /></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p>harborregistry, registry()</p>\n"},{"title":"--Linux","date":"2023-11-02T07:45:20.000Z","_content":"\n\n##  \n\n>  CentOS7 , RHEL\n\n##  \n\n\n\nLinux```pam_passwdqc```  ```pam_pwquality``` \n: ```pam_passwdqc```  ```/etc/login.defs``` \n: ```pam_pwquality```  ```/etc/security/pwquality.conf```\n\n\n### 2.1 \n**: ,root**\n```enforce_for_root```root\n\n: \n```/etc/pam.d/system-auth-ac```\n- line16:``` password    requisite     pam_pwquality.so try_first_pass local_users_only enforce_for_root minlen=15 dcredit=-1 ucredit=-1 lcredit=-1 ocredit=-1 maxrepeat=5 retry=3 difok=3 ```\n- line17:```password    sufficient    pam_unix.so sha512 shadow nullok try_first_pass use_authtok remember=24```\n\n<img src=\"/images/057.Linux_Security_Policy.md.01.png\" width=100% height=100% />\n\n: \n- ```retry=3```:           / \n- ```minlen=8```:          8 \n- ```lcredit=-1```:       \n- ```ucredit=-1```:       \n- ```dcredit=-1```:       \n- ```ocredit=-1```:        @! $\n- ```enforce_for_root```:  root \n\n: ```remember=3```  ``` pam_unix.so ```\n``` password    sufficient    pam_unix.so sha512 shadow nullok try_first_pass use_authtok remember=3```\n\n: ``` /var/log/secure ```\n<img src=\"/images/057.Linux_Security_Policy.md.02.png\" width=100% height=100% />\n\n### 2.2 \n\n: ``` /etc/login.defs ```\n\n: \n```PASS_MAX_DAYS 90```\n```PASS_MIN_LEN 12```\n```PASS_MIN_DAYS 7```\n```PASS_WARN_AGE 30```\n```UMASK 077```\n\n\n|     |   |   |\n|  ----  | ----  | ---- | \n|```MAIL_DIR```        | ```/var/spool/mail```| \t /var/spool/mail  lamp  /var/spool/mail/lamp|\n|```PASS_MAX_DAYS```   | ```99999```|\t            99999  1970  1  1  273 |\n|```PASS_MIN_DAYS```   | ```0```|\t                 0|\n|```PASS_MIN_LEN```    |```5```|\t                 5  PAM |\n|```PASS_WARN_AGE```   |```7```|\t                 7 |\n|```UID_MIN```         |```500```| \t             UID  500 UID  500  UID  550 UID 551  500~549  UID |\n|```UID_MAX```         |```60000```|\t             UID  60000|\n|```GID_MIN```         |```500```|\t             GID  500 GID  500 |\n|```GID_MAX```         |```60000```|\t             GID  60000|\n|```CREATE_HOME```     |```yes```|\t            yes no  yes|\n|```UMASK```           |```077```|\t             077|\n|```USERGROUPS_ENAB``` |```yes```|\t             yes|\n|```ENCRYPT_METHOD```  |```SHA512```|\t             SHA512 Linux  DES  MD5 |\n\n","source":"_posts/057.Linux_Security_Policy.md","raw":"---\ntitle: --Linux\ndate: 2023-11-02 15:45:20\ncategories: \n- [Linux]\ntags: \n- security\n---\n\n\n##  \n\n>  CentOS7 , RHEL\n\n##  \n\n\n\nLinux```pam_passwdqc```  ```pam_pwquality``` \n: ```pam_passwdqc```  ```/etc/login.defs``` \n: ```pam_pwquality```  ```/etc/security/pwquality.conf```\n\n\n### 2.1 \n**: ,root**\n```enforce_for_root```root\n\n: \n```/etc/pam.d/system-auth-ac```\n- line16:``` password    requisite     pam_pwquality.so try_first_pass local_users_only enforce_for_root minlen=15 dcredit=-1 ucredit=-1 lcredit=-1 ocredit=-1 maxrepeat=5 retry=3 difok=3 ```\n- line17:```password    sufficient    pam_unix.so sha512 shadow nullok try_first_pass use_authtok remember=24```\n\n<img src=\"/images/057.Linux_Security_Policy.md.01.png\" width=100% height=100% />\n\n: \n- ```retry=3```:           / \n- ```minlen=8```:          8 \n- ```lcredit=-1```:       \n- ```ucredit=-1```:       \n- ```dcredit=-1```:       \n- ```ocredit=-1```:        @! $\n- ```enforce_for_root```:  root \n\n: ```remember=3```  ``` pam_unix.so ```\n``` password    sufficient    pam_unix.so sha512 shadow nullok try_first_pass use_authtok remember=3```\n\n: ``` /var/log/secure ```\n<img src=\"/images/057.Linux_Security_Policy.md.02.png\" width=100% height=100% />\n\n### 2.2 \n\n: ``` /etc/login.defs ```\n\n: \n```PASS_MAX_DAYS 90```\n```PASS_MIN_LEN 12```\n```PASS_MIN_DAYS 7```\n```PASS_WARN_AGE 30```\n```UMASK 077```\n\n\n|     |   |   |\n|  ----  | ----  | ---- | \n|```MAIL_DIR```        | ```/var/spool/mail```| \t /var/spool/mail  lamp  /var/spool/mail/lamp|\n|```PASS_MAX_DAYS```   | ```99999```|\t            99999  1970  1  1  273 |\n|```PASS_MIN_DAYS```   | ```0```|\t                 0|\n|```PASS_MIN_LEN```    |```5```|\t                 5  PAM |\n|```PASS_WARN_AGE```   |```7```|\t                 7 |\n|```UID_MIN```         |```500```| \t             UID  500 UID  500  UID  550 UID 551  500~549  UID |\n|```UID_MAX```         |```60000```|\t             UID  60000|\n|```GID_MIN```         |```500```|\t             GID  500 GID  500 |\n|```GID_MAX```         |```60000```|\t             GID  60000|\n|```CREATE_HOME```     |```yes```|\t            yes no  yes|\n|```UMASK```           |```077```|\t             077|\n|```USERGROUPS_ENAB``` |```yes```|\t             yes|\n|```ENCRYPT_METHOD```  |```SHA512```|\t             SHA512 Linux  DES  MD5 |\n\n","slug":"057.Linux_Security_Policy","published":1,"updated":"2023-11-06T11:48:30.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbgj005byknr4jqm0r01","content":"<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><blockquote>\n<p> CentOS7 , RHEL</p>\n</blockquote>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p>Linux<code>pam_passwdqc</code>  <code>pam_pwquality</code><br>: <code>pam_passwdqc</code>  <code>/etc/login.defs</code><br>: <code>pam_pwquality</code>  <code>/etc/security/pwquality.conf</code></p>\n<h3 id=\"2-1-\"><a href=\"#2-1-\" class=\"headerlink\" title=\"2.1 \"></a>2.1 </h3><p><strong>: ,root</strong><br><code>enforce_for_root</code>root</p>\n<p>:<br><code>/etc/pam.d/system-auth-ac</code></p>\n<ul>\n<li>line16:<code>password    requisite     pam_pwquality.so try_first_pass local_users_only enforce_for_root minlen=15 dcredit=-1 ucredit=-1 lcredit=-1 ocredit=-1 maxrepeat=5 retry=3 difok=3</code></li>\n<li>line17:<code>password    sufficient    pam_unix.so sha512 shadow nullok try_first_pass use_authtok remember=24</code></li>\n</ul>\n<img src=\"/images/057.Linux_Security_Policy.md.01.png\" width=100% height=100% />\n\n<p>: </p>\n<ul>\n<li><code>retry=3</code>:           &#x2F; </li>\n<li><code>minlen=8</code>:          8 </li>\n<li><code>lcredit=-1</code>:       </li>\n<li><code>ucredit=-1</code>:       </li>\n<li><code>dcredit=-1</code>:       </li>\n<li><code>ocredit=-1</code>:        @! $</li>\n<li><code>enforce_for_root</code>:  root </li>\n</ul>\n<p>: <code>remember=3</code>  <code>pam_unix.so</code><br><code> password    sufficient    pam_unix.so sha512 shadow nullok try_first_pass use_authtok remember=3</code></p>\n<p>: <code>/var/log/secure</code><br><img src=\"/images/057.Linux_Security_Policy.md.02.png\" width=100% height=100% /></p>\n<h3 id=\"2-2-\"><a href=\"#2-2-\" class=\"headerlink\" title=\"2.2 \"></a>2.2 </h3><p>: <code>/etc/login.defs</code></p>\n<p>:<br><code>PASS_MAX_DAYS 90</code><br><code>PASS_MIN_LEN 12</code><br><code>PASS_MIN_DAYS 7</code><br><code>PASS_WARN_AGE 30</code><br><code>UMASK 077</code></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>MAIL_DIR</code></td>\n<td><code>/var/spool/mail</code></td>\n<td> &#x2F;var&#x2F;spool&#x2F;mail  lamp  &#x2F;var&#x2F;spool&#x2F;mail&#x2F;lamp</td>\n</tr>\n<tr>\n<td><code>PASS_MAX_DAYS</code></td>\n<td><code>99999</code></td>\n<td>99999  1970  1  1  273 </td>\n</tr>\n<tr>\n<td><code>PASS_MIN_DAYS</code></td>\n<td><code>0</code></td>\n<td> 0</td>\n</tr>\n<tr>\n<td><code>PASS_MIN_LEN</code></td>\n<td><code>5</code></td>\n<td> 5  PAM </td>\n</tr>\n<tr>\n<td><code>PASS_WARN_AGE</code></td>\n<td><code>7</code></td>\n<td> 7 </td>\n</tr>\n<tr>\n<td><code>UID_MIN</code></td>\n<td><code>500</code></td>\n<td> UID  500 UID  500  UID  550 UID 551  500~549  UID </td>\n</tr>\n<tr>\n<td><code>UID_MAX</code></td>\n<td><code>60000</code></td>\n<td> UID  60000</td>\n</tr>\n<tr>\n<td><code>GID_MIN</code></td>\n<td><code>500</code></td>\n<td> GID  500 GID  500 </td>\n</tr>\n<tr>\n<td><code>GID_MAX</code></td>\n<td><code>60000</code></td>\n<td> GID  60000</td>\n</tr>\n<tr>\n<td><code>CREATE_HOME</code></td>\n<td><code>yes</code></td>\n<td>yes no  yes</td>\n</tr>\n<tr>\n<td><code>UMASK</code></td>\n<td><code>077</code></td>\n<td> 077</td>\n</tr>\n<tr>\n<td><code>USERGROUPS_ENAB</code></td>\n<td><code>yes</code></td>\n<td> yes</td>\n</tr>\n<tr>\n<td><code>ENCRYPT_METHOD</code></td>\n<td><code>SHA512</code></td>\n<td> SHA512 Linux  DES  MD5 </td>\n</tr>\n</tbody></table>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><blockquote>\n<p> CentOS7 , RHEL</p>\n</blockquote>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p>Linux<code>pam_passwdqc</code>  <code>pam_pwquality</code><br>: <code>pam_passwdqc</code>  <code>/etc/login.defs</code><br>: <code>pam_pwquality</code>  <code>/etc/security/pwquality.conf</code></p>\n<h3 id=\"2-1-\"><a href=\"#2-1-\" class=\"headerlink\" title=\"2.1 \"></a>2.1 </h3><p><strong>: ,root</strong><br><code>enforce_for_root</code>root</p>\n<p>:<br><code>/etc/pam.d/system-auth-ac</code></p>\n<ul>\n<li>line16:<code>password    requisite     pam_pwquality.so try_first_pass local_users_only enforce_for_root minlen=15 dcredit=-1 ucredit=-1 lcredit=-1 ocredit=-1 maxrepeat=5 retry=3 difok=3</code></li>\n<li>line17:<code>password    sufficient    pam_unix.so sha512 shadow nullok try_first_pass use_authtok remember=24</code></li>\n</ul>\n<img src=\"/images/057.Linux_Security_Policy.md.01.png\" width=100% height=100% />\n\n<p>: </p>\n<ul>\n<li><code>retry=3</code>:           &#x2F; </li>\n<li><code>minlen=8</code>:          8 </li>\n<li><code>lcredit=-1</code>:       </li>\n<li><code>ucredit=-1</code>:       </li>\n<li><code>dcredit=-1</code>:       </li>\n<li><code>ocredit=-1</code>:        @! $</li>\n<li><code>enforce_for_root</code>:  root </li>\n</ul>\n<p>: <code>remember=3</code>  <code>pam_unix.so</code><br><code> password    sufficient    pam_unix.so sha512 shadow nullok try_first_pass use_authtok remember=3</code></p>\n<p>: <code>/var/log/secure</code><br><img src=\"/images/057.Linux_Security_Policy.md.02.png\" width=100% height=100% /></p>\n<h3 id=\"2-2-\"><a href=\"#2-2-\" class=\"headerlink\" title=\"2.2 \"></a>2.2 </h3><p>: <code>/etc/login.defs</code></p>\n<p>:<br><code>PASS_MAX_DAYS 90</code><br><code>PASS_MIN_LEN 12</code><br><code>PASS_MIN_DAYS 7</code><br><code>PASS_WARN_AGE 30</code><br><code>UMASK 077</code></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>MAIL_DIR</code></td>\n<td><code>/var/spool/mail</code></td>\n<td> &#x2F;var&#x2F;spool&#x2F;mail  lamp  &#x2F;var&#x2F;spool&#x2F;mail&#x2F;lamp</td>\n</tr>\n<tr>\n<td><code>PASS_MAX_DAYS</code></td>\n<td><code>99999</code></td>\n<td>99999  1970  1  1  273 </td>\n</tr>\n<tr>\n<td><code>PASS_MIN_DAYS</code></td>\n<td><code>0</code></td>\n<td> 0</td>\n</tr>\n<tr>\n<td><code>PASS_MIN_LEN</code></td>\n<td><code>5</code></td>\n<td> 5  PAM </td>\n</tr>\n<tr>\n<td><code>PASS_WARN_AGE</code></td>\n<td><code>7</code></td>\n<td> 7 </td>\n</tr>\n<tr>\n<td><code>UID_MIN</code></td>\n<td><code>500</code></td>\n<td> UID  500 UID  500  UID  550 UID 551  500~549  UID </td>\n</tr>\n<tr>\n<td><code>UID_MAX</code></td>\n<td><code>60000</code></td>\n<td> UID  60000</td>\n</tr>\n<tr>\n<td><code>GID_MIN</code></td>\n<td><code>500</code></td>\n<td> GID  500 GID  500 </td>\n</tr>\n<tr>\n<td><code>GID_MAX</code></td>\n<td><code>60000</code></td>\n<td> GID  60000</td>\n</tr>\n<tr>\n<td><code>CREATE_HOME</code></td>\n<td><code>yes</code></td>\n<td>yes no  yes</td>\n</tr>\n<tr>\n<td><code>UMASK</code></td>\n<td><code>077</code></td>\n<td> 077</td>\n</tr>\n<tr>\n<td><code>USERGROUPS_ENAB</code></td>\n<td><code>yes</code></td>\n<td> yes</td>\n</tr>\n<tr>\n<td><code>ENCRYPT_METHOD</code></td>\n<td><code>SHA512</code></td>\n<td> SHA512 Linux  DES  MD5 </td>\n</tr>\n</tbody></table>\n"},{"title":"--MySQL","date":"2023-11-06T07:45:20.000Z","_content":"\n\n##  \n\n### 1.1 \n\n``` MySQL> SHOW VARIABLES LIKE 'validate_password%'; ```\n\n### 1.2 \n\n``` MySQL> install plugin validate_password soname 'validate_password.so'; ```\n\n\n### 1.3 my.cnf \n\n``` vim /etc/my.cnf ```\n\n``` shell\n[mysqld]\nplugin-load-add=validate_password.so\nvalidate-password=ON\nvalidate_password_policy = 1\nvalidate_password_length = 8\nvalidate_password_mixed_case_count = 1\nvalidate_password_number_count = 2\nvalidate_password_special_char_count = 1\n```\n\n\n##  \n\n### 2.1 \n\n``` MySQL> show variables like '%connection_control%'; ```\n\n\n### 2.2 \n\n``` MySQL> install plugin CONNECTION_CONTROL soname 'connection_control.so'; ```\n``` MySQL> install plugin CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS soname 'connection_control.so'; ```\n\n\n###  2.3 my.cnf\n\n``` vim /etc/my.cnf ```\n\n``` shell\n[mysqld]\nplugin-load-add=connection_control.so\nconnection-control-failed-connections-threshold=5 \nconnection-control-min-connection-delay=300000\n```\n\n\n\n\n##  \n\n### 3.1 \n\n``` shell\n[mysqld]\nskip_ssl\nskip-name-resolve\ndefault_password_lifetime=0\nuser = mysql\nbasedir = /usr/local/mysql\ndatadir = /data/mysql/data\nport = 3306\nserver_id = 1\nsocket = /usr/local/mysql/mysql.sock\npid-file = /usr/local/mysql/mysql.pid\nlog-error = /data/mysql/data/mysql.err\nlog-bin = /data/mysql/data/binlog/mysql-bin\nsql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES\nlower_case_table_names=1\ncharacter-set-server = utf8mb4\nlog_bin_trust_function_creators=1\nexplicit_defaults_for_timestamp=true\ndefault_time_zone = \"+8:00\"\nlog_timestamps = SYSTEM\nexplicit_defaults_for_timestamp = 1\n\ntable_open_cache = 500\ntable_definition_cache = 1000\ntable_open_cache_instances = 64\nthread_stack = 512K\nthread_cache_size = 700\nmax_allowed_packet = 256M\njoin_buffer_size = 4M\nkey_buffer_size = 32M\nread_buffer_size = 8M\nread_rnd_buffer_size = 8M\nsort_buffer_size = 2M\nmax_connections = 3000\nmax_connect_errors = 2000\n\ninnodb_log_buffer_size = 32M\ninnodb_log_file_size = 2G\ninnodb_log_files_in_group = 2\ninnodb_buffer_pool_size = 48G #80%\ninnodb_buffer_pool_instances = 8\ninnodb_io_capacity=1200\ninnodb_page_cleaners=8\n\nlog_bin_trust_function_creators=1\nbinlog_cache_size = 1M\nexpire_logs_days = 7\nbinlog_format = row\n\n####mysql master\ngtid-mode = ON\nenforce-gtid-consistency = ON\n\nslow_query_log = 1\nslow_query_log_file = /data/mysql/data/slow_query.log\nlong_query_time= 60\nlog_queries_not_using_indexes = 1\n\n[mysqldump]\nquick\nmax_allowed_packet = 256M\n\n[client]\nport = 3306\nsocket = /usr/local/mysql/mysql.sock\n#default-character-set = utf8mb4\n```\n","source":"_posts/058.MySQL_Security_Policy.md","raw":"---\ntitle: --MySQL\ndate: 2023-11-06 15:45:20\ncategories: \n- [Linux]\ntags: \n- mysql\n---\n\n\n##  \n\n### 1.1 \n\n``` MySQL> SHOW VARIABLES LIKE 'validate_password%'; ```\n\n### 1.2 \n\n``` MySQL> install plugin validate_password soname 'validate_password.so'; ```\n\n\n### 1.3 my.cnf \n\n``` vim /etc/my.cnf ```\n\n``` shell\n[mysqld]\nplugin-load-add=validate_password.so\nvalidate-password=ON\nvalidate_password_policy = 1\nvalidate_password_length = 8\nvalidate_password_mixed_case_count = 1\nvalidate_password_number_count = 2\nvalidate_password_special_char_count = 1\n```\n\n\n##  \n\n### 2.1 \n\n``` MySQL> show variables like '%connection_control%'; ```\n\n\n### 2.2 \n\n``` MySQL> install plugin CONNECTION_CONTROL soname 'connection_control.so'; ```\n``` MySQL> install plugin CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS soname 'connection_control.so'; ```\n\n\n###  2.3 my.cnf\n\n``` vim /etc/my.cnf ```\n\n``` shell\n[mysqld]\nplugin-load-add=connection_control.so\nconnection-control-failed-connections-threshold=5 \nconnection-control-min-connection-delay=300000\n```\n\n\n\n\n##  \n\n### 3.1 \n\n``` shell\n[mysqld]\nskip_ssl\nskip-name-resolve\ndefault_password_lifetime=0\nuser = mysql\nbasedir = /usr/local/mysql\ndatadir = /data/mysql/data\nport = 3306\nserver_id = 1\nsocket = /usr/local/mysql/mysql.sock\npid-file = /usr/local/mysql/mysql.pid\nlog-error = /data/mysql/data/mysql.err\nlog-bin = /data/mysql/data/binlog/mysql-bin\nsql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES\nlower_case_table_names=1\ncharacter-set-server = utf8mb4\nlog_bin_trust_function_creators=1\nexplicit_defaults_for_timestamp=true\ndefault_time_zone = \"+8:00\"\nlog_timestamps = SYSTEM\nexplicit_defaults_for_timestamp = 1\n\ntable_open_cache = 500\ntable_definition_cache = 1000\ntable_open_cache_instances = 64\nthread_stack = 512K\nthread_cache_size = 700\nmax_allowed_packet = 256M\njoin_buffer_size = 4M\nkey_buffer_size = 32M\nread_buffer_size = 8M\nread_rnd_buffer_size = 8M\nsort_buffer_size = 2M\nmax_connections = 3000\nmax_connect_errors = 2000\n\ninnodb_log_buffer_size = 32M\ninnodb_log_file_size = 2G\ninnodb_log_files_in_group = 2\ninnodb_buffer_pool_size = 48G #80%\ninnodb_buffer_pool_instances = 8\ninnodb_io_capacity=1200\ninnodb_page_cleaners=8\n\nlog_bin_trust_function_creators=1\nbinlog_cache_size = 1M\nexpire_logs_days = 7\nbinlog_format = row\n\n####mysql master\ngtid-mode = ON\nenforce-gtid-consistency = ON\n\nslow_query_log = 1\nslow_query_log_file = /data/mysql/data/slow_query.log\nlong_query_time= 60\nlog_queries_not_using_indexes = 1\n\n[mysqldump]\nquick\nmax_allowed_packet = 256M\n\n[client]\nport = 3306\nsocket = /usr/local/mysql/mysql.sock\n#default-character-set = utf8mb4\n```\n","slug":"058.MySQL_Security_Policy","published":1,"updated":"2023-11-23T06:12:03.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbgq005fyknr2nu9bpnb","content":"<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"1-1-\"><a href=\"#1-1-\" class=\"headerlink\" title=\"1.1 \"></a>1.1 </h3><p><code>MySQL&gt; SHOW VARIABLES LIKE &#39;validate_password%&#39;;</code></p>\n<h3 id=\"1-2-\"><a href=\"#1-2-\" class=\"headerlink\" title=\"1.2 \"></a>1.2 </h3><p><code>MySQL&gt; install plugin validate_password soname &#39;validate_password.so&#39;;</code></p>\n<h3 id=\"1-3-my-cnf-\"><a href=\"#1-3-my-cnf-\" class=\"headerlink\" title=\"1.3 my.cnf \"></a>1.3 my.cnf </h3><p><code>vim /etc/my.cnf</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">[mysqld]</span><br><span class=\"line\">plugin-load-add=validate_password.so</span><br><span class=\"line\">validate-password=ON</span><br><span class=\"line\">validate_password_policy = 1</span><br><span class=\"line\">validate_password_length = 8</span><br><span class=\"line\">validate_password_mixed_case_count = 1</span><br><span class=\"line\">validate_password_number_count = 2</span><br><span class=\"line\">validate_password_special_char_count = 1</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"2-1-\"><a href=\"#2-1-\" class=\"headerlink\" title=\"2.1 \"></a>2.1 </h3><p><code>MySQL&gt; show variables like &#39;%connection_control%&#39;;</code></p>\n<h3 id=\"2-2-\"><a href=\"#2-2-\" class=\"headerlink\" title=\"2.2 \"></a>2.2 </h3><p><code>MySQL&gt; install plugin CONNECTION_CONTROL soname &#39;connection_control.so&#39;;</code><br><code>MySQL&gt; install plugin CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS soname &#39;connection_control.so&#39;;</code></p>\n<h3 id=\"2-3-my-cnf\"><a href=\"#2-3-my-cnf\" class=\"headerlink\" title=\"2.3 my.cnf\"></a>2.3 my.cnf</h3><p><code>vim /etc/my.cnf</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">[mysqld]</span><br><span class=\"line\">plugin-load-add=connection_control.so</span><br><span class=\"line\">connection-control-failed-connections-threshold=5 </span><br><span class=\"line\">connection-control-min-connection-delay=300000</span><br></pre></td></tr></table></figure>\n\n\n\n\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"3-1-\"><a href=\"#3-1-\" class=\"headerlink\" title=\"3.1 \"></a>3.1 </h3><figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">[mysqld]</span><br><span class=\"line\">skip_ssl</span><br><span class=\"line\">skip-name-resolve</span><br><span class=\"line\">default_password_lifetime=0</span><br><span class=\"line\">user = mysql</span><br><span class=\"line\">basedir = /usr/local/mysql</span><br><span class=\"line\">datadir = /data/mysql/data</span><br><span class=\"line\">port = 3306</span><br><span class=\"line\">server_id = 1</span><br><span class=\"line\">socket = /usr/local/mysql/mysql.sock</span><br><span class=\"line\">pid-file = /usr/local/mysql/mysql.pid</span><br><span class=\"line\">log-error = /data/mysql/data/mysql.err</span><br><span class=\"line\">log-bin = /data/mysql/data/binlog/mysql-bin</span><br><span class=\"line\">sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</span><br><span class=\"line\">lower_case_table_names=1</span><br><span class=\"line\">character-set-server = utf8mb4</span><br><span class=\"line\">log_bin_trust_function_creators=1</span><br><span class=\"line\">explicit_defaults_for_timestamp=true</span><br><span class=\"line\">default_time_zone = &quot;+8:00&quot;</span><br><span class=\"line\">log_timestamps = SYSTEM</span><br><span class=\"line\">explicit_defaults_for_timestamp = 1</span><br><span class=\"line\"></span><br><span class=\"line\">table_open_cache = 500</span><br><span class=\"line\">table_definition_cache = 1000</span><br><span class=\"line\">table_open_cache_instances = 64</span><br><span class=\"line\">thread_stack = 512K</span><br><span class=\"line\">thread_cache_size = 700</span><br><span class=\"line\">max_allowed_packet = 256M</span><br><span class=\"line\">join_buffer_size = 4M</span><br><span class=\"line\">key_buffer_size = 32M</span><br><span class=\"line\">read_buffer_size = 8M</span><br><span class=\"line\">read_rnd_buffer_size = 8M</span><br><span class=\"line\">sort_buffer_size = 2M</span><br><span class=\"line\">max_connections = 3000</span><br><span class=\"line\">max_connect_errors = 2000</span><br><span class=\"line\"></span><br><span class=\"line\">innodb_log_buffer_size = 32M</span><br><span class=\"line\">innodb_log_file_size = 2G</span><br><span class=\"line\">innodb_log_files_in_group = 2</span><br><span class=\"line\">innodb_buffer_pool_size = 48G #80%</span><br><span class=\"line\">innodb_buffer_pool_instances = 8</span><br><span class=\"line\">innodb_io_capacity=1200</span><br><span class=\"line\">innodb_page_cleaners=8</span><br><span class=\"line\"></span><br><span class=\"line\">log_bin_trust_function_creators=1</span><br><span class=\"line\">binlog_cache_size = 1M</span><br><span class=\"line\">expire_logs_days = 7</span><br><span class=\"line\">binlog_format = row</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\">###mysql master</span></span></span><br><span class=\"line\">gtid-mode = ON</span><br><span class=\"line\">enforce-gtid-consistency = ON</span><br><span class=\"line\"></span><br><span class=\"line\">slow_query_log = 1</span><br><span class=\"line\">slow_query_log_file = /data/mysql/data/slow_query.log</span><br><span class=\"line\">long_query_time= 60</span><br><span class=\"line\">log_queries_not_using_indexes = 1</span><br><span class=\"line\"></span><br><span class=\"line\">[mysqldump]</span><br><span class=\"line\">quick</span><br><span class=\"line\">max_allowed_packet = 256M</span><br><span class=\"line\"></span><br><span class=\"line\">[client]</span><br><span class=\"line\">port = 3306</span><br><span class=\"line\">socket = /usr/local/mysql/mysql.sock</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">default-character-set = utf8mb4</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"1-1-\"><a href=\"#1-1-\" class=\"headerlink\" title=\"1.1 \"></a>1.1 </h3><p><code>MySQL&gt; SHOW VARIABLES LIKE &#39;validate_password%&#39;;</code></p>\n<h3 id=\"1-2-\"><a href=\"#1-2-\" class=\"headerlink\" title=\"1.2 \"></a>1.2 </h3><p><code>MySQL&gt; install plugin validate_password soname &#39;validate_password.so&#39;;</code></p>\n<h3 id=\"1-3-my-cnf-\"><a href=\"#1-3-my-cnf-\" class=\"headerlink\" title=\"1.3 my.cnf \"></a>1.3 my.cnf </h3><p><code>vim /etc/my.cnf</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">[mysqld]</span><br><span class=\"line\">plugin-load-add=validate_password.so</span><br><span class=\"line\">validate-password=ON</span><br><span class=\"line\">validate_password_policy = 1</span><br><span class=\"line\">validate_password_length = 8</span><br><span class=\"line\">validate_password_mixed_case_count = 1</span><br><span class=\"line\">validate_password_number_count = 2</span><br><span class=\"line\">validate_password_special_char_count = 1</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"2-1-\"><a href=\"#2-1-\" class=\"headerlink\" title=\"2.1 \"></a>2.1 </h3><p><code>MySQL&gt; show variables like &#39;%connection_control%&#39;;</code></p>\n<h3 id=\"2-2-\"><a href=\"#2-2-\" class=\"headerlink\" title=\"2.2 \"></a>2.2 </h3><p><code>MySQL&gt; install plugin CONNECTION_CONTROL soname &#39;connection_control.so&#39;;</code><br><code>MySQL&gt; install plugin CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS soname &#39;connection_control.so&#39;;</code></p>\n<h3 id=\"2-3-my-cnf\"><a href=\"#2-3-my-cnf\" class=\"headerlink\" title=\"2.3 my.cnf\"></a>2.3 my.cnf</h3><p><code>vim /etc/my.cnf</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">[mysqld]</span><br><span class=\"line\">plugin-load-add=connection_control.so</span><br><span class=\"line\">connection-control-failed-connections-threshold=5 </span><br><span class=\"line\">connection-control-min-connection-delay=300000</span><br></pre></td></tr></table></figure>\n\n\n\n\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"3-1-\"><a href=\"#3-1-\" class=\"headerlink\" title=\"3.1 \"></a>3.1 </h3><figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">[mysqld]</span><br><span class=\"line\">skip_ssl</span><br><span class=\"line\">skip-name-resolve</span><br><span class=\"line\">default_password_lifetime=0</span><br><span class=\"line\">user = mysql</span><br><span class=\"line\">basedir = /usr/local/mysql</span><br><span class=\"line\">datadir = /data/mysql/data</span><br><span class=\"line\">port = 3306</span><br><span class=\"line\">server_id = 1</span><br><span class=\"line\">socket = /usr/local/mysql/mysql.sock</span><br><span class=\"line\">pid-file = /usr/local/mysql/mysql.pid</span><br><span class=\"line\">log-error = /data/mysql/data/mysql.err</span><br><span class=\"line\">log-bin = /data/mysql/data/binlog/mysql-bin</span><br><span class=\"line\">sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</span><br><span class=\"line\">lower_case_table_names=1</span><br><span class=\"line\">character-set-server = utf8mb4</span><br><span class=\"line\">log_bin_trust_function_creators=1</span><br><span class=\"line\">explicit_defaults_for_timestamp=true</span><br><span class=\"line\">default_time_zone = &quot;+8:00&quot;</span><br><span class=\"line\">log_timestamps = SYSTEM</span><br><span class=\"line\">explicit_defaults_for_timestamp = 1</span><br><span class=\"line\"></span><br><span class=\"line\">table_open_cache = 500</span><br><span class=\"line\">table_definition_cache = 1000</span><br><span class=\"line\">table_open_cache_instances = 64</span><br><span class=\"line\">thread_stack = 512K</span><br><span class=\"line\">thread_cache_size = 700</span><br><span class=\"line\">max_allowed_packet = 256M</span><br><span class=\"line\">join_buffer_size = 4M</span><br><span class=\"line\">key_buffer_size = 32M</span><br><span class=\"line\">read_buffer_size = 8M</span><br><span class=\"line\">read_rnd_buffer_size = 8M</span><br><span class=\"line\">sort_buffer_size = 2M</span><br><span class=\"line\">max_connections = 3000</span><br><span class=\"line\">max_connect_errors = 2000</span><br><span class=\"line\"></span><br><span class=\"line\">innodb_log_buffer_size = 32M</span><br><span class=\"line\">innodb_log_file_size = 2G</span><br><span class=\"line\">innodb_log_files_in_group = 2</span><br><span class=\"line\">innodb_buffer_pool_size = 48G #80%</span><br><span class=\"line\">innodb_buffer_pool_instances = 8</span><br><span class=\"line\">innodb_io_capacity=1200</span><br><span class=\"line\">innodb_page_cleaners=8</span><br><span class=\"line\"></span><br><span class=\"line\">log_bin_trust_function_creators=1</span><br><span class=\"line\">binlog_cache_size = 1M</span><br><span class=\"line\">expire_logs_days = 7</span><br><span class=\"line\">binlog_format = row</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\">###mysql master</span></span></span><br><span class=\"line\">gtid-mode = ON</span><br><span class=\"line\">enforce-gtid-consistency = ON</span><br><span class=\"line\"></span><br><span class=\"line\">slow_query_log = 1</span><br><span class=\"line\">slow_query_log_file = /data/mysql/data/slow_query.log</span><br><span class=\"line\">long_query_time= 60</span><br><span class=\"line\">log_queries_not_using_indexes = 1</span><br><span class=\"line\"></span><br><span class=\"line\">[mysqldump]</span><br><span class=\"line\">quick</span><br><span class=\"line\">max_allowed_packet = 256M</span><br><span class=\"line\"></span><br><span class=\"line\">[client]</span><br><span class=\"line\">port = 3306</span><br><span class=\"line\">socket = /usr/local/mysql/mysql.sock</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">default-character-set = utf8mb4</span></span><br></pre></td></tr></table></figure>\n"},{"title":"samba ","date":"2023-11-23T06:15:03.000Z","_content":"\n\n##  samba \n\n### 1.1 samba \n\n``` yum install samba*```\n\n###  1.2 samba \n\n``` systemctl enable smb --now ```\n``` systemctl status smb ```\n<img src=\"/images/059.samba.md.01.png\" width=100% height=100% />\n\n### 1.3  smb\n\n\n``` shell\n[share]\n    path = /samba/share\n    browsable = Yes\n    writable = Yes\n    guest ok = Yes\n    read only = N\n```\n\n\n``` useradd smb ```\n``` smbpasswd smb ```\n\nWindows ```\\\\192.168.1.201``` , .\n\n##   samba \n\n>>  , \n \n### 2.1 \n\n [globle]  ```smb port = 9445```\n smb \n\n```vim /etc/samba/smb.conf```\n<img src=\"/images/059.samba.md.02.png\" width=100% height=100% />\n\n<img src=\"/images/059.samba.md.03.png\" width=100% height=100% />\n\n\n##  smb\n\n### 3.1 Linuxsmb\n\n``` sudo apt install smbclient ```\n\n### 3.2  9445 smb\n\n```sudo smbclient -L 192.168.1.201 -p 9445 -U smb ```\n```  sudo smbclient //192.168.1.201/smb -p 9445 -U smb ```\n\n<img src=\"/images/059.samba.md.04.png\" width=100% height=100% />\n\n### 3.3 Windows smb\n\n> smbWindows, , \n> , ```192.168.1.201:9445```  ```127.0.0.1:445```\n>  ```\\\\127.0.0.1```\n\n#### 3.3.1 Windowssmb\n\n[]-->[server]-->[]-->[Windows]\n\n#### 3.3.2 \n\ncmd:\n``` netsh interface portproxy add v4tov4 listenport=445 listenaddress=127.0.0.1 connectport=9445 connectaddress= 192.168.1.201 ```\n\n:\n\n``` netsh interface portproxy show all ```\n\n<img src=\"/images/059.samba.md.05.png\" width=100% height=100% />\n<img src=\"/images/059.samba.md.06.png\" width=100% height=100% />","source":"_posts/059.samba.md","raw":"---\ntitle: samba \ndate: 2023-11-23 14:15:03\ncategories: \n- [Linux]\ntags: \n- samba\n---\n\n\n##  samba \n\n### 1.1 samba \n\n``` yum install samba*```\n\n###  1.2 samba \n\n``` systemctl enable smb --now ```\n``` systemctl status smb ```\n<img src=\"/images/059.samba.md.01.png\" width=100% height=100% />\n\n### 1.3  smb\n\n\n``` shell\n[share]\n    path = /samba/share\n    browsable = Yes\n    writable = Yes\n    guest ok = Yes\n    read only = N\n```\n\n\n``` useradd smb ```\n``` smbpasswd smb ```\n\nWindows ```\\\\192.168.1.201``` , .\n\n##   samba \n\n>>  , \n \n### 2.1 \n\n [globle]  ```smb port = 9445```\n smb \n\n```vim /etc/samba/smb.conf```\n<img src=\"/images/059.samba.md.02.png\" width=100% height=100% />\n\n<img src=\"/images/059.samba.md.03.png\" width=100% height=100% />\n\n\n##  smb\n\n### 3.1 Linuxsmb\n\n``` sudo apt install smbclient ```\n\n### 3.2  9445 smb\n\n```sudo smbclient -L 192.168.1.201 -p 9445 -U smb ```\n```  sudo smbclient //192.168.1.201/smb -p 9445 -U smb ```\n\n<img src=\"/images/059.samba.md.04.png\" width=100% height=100% />\n\n### 3.3 Windows smb\n\n> smbWindows, , \n> , ```192.168.1.201:9445```  ```127.0.0.1:445```\n>  ```\\\\127.0.0.1```\n\n#### 3.3.1 Windowssmb\n\n[]-->[server]-->[]-->[Windows]\n\n#### 3.3.2 \n\ncmd:\n``` netsh interface portproxy add v4tov4 listenport=445 listenaddress=127.0.0.1 connectport=9445 connectaddress= 192.168.1.201 ```\n\n:\n\n``` netsh interface portproxy show all ```\n\n<img src=\"/images/059.samba.md.05.png\" width=100% height=100% />\n<img src=\"/images/059.samba.md.06.png\" width=100% height=100% />","slug":"059.samba","published":1,"updated":"2023-11-23T07:11:57.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbgt005iyknr6vxz1kgx","content":"<h2 id=\"-samba-\"><a href=\"#-samba-\" class=\"headerlink\" title=\" samba \"></a> samba </h2><h3 id=\"1-1-samba-\"><a href=\"#1-1-samba-\" class=\"headerlink\" title=\"1.1 samba \"></a>1.1 samba </h3><p><code> yum install samba*</code></p>\n<h3 id=\"1-2-samba-\"><a href=\"#1-2-samba-\" class=\"headerlink\" title=\"1.2 samba \"></a>1.2 samba </h3><p><code>systemctl enable smb --now</code><br><code>systemctl status smb</code><br><img src=\"/images/059.samba.md.01.png\" width=100% height=100% /></p>\n<h3 id=\"1-3--smb\"><a href=\"#1-3--smb\" class=\"headerlink\" title=\"1.3  smb\"></a>1.3  smb</h3><p></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">[share]</span><br><span class=\"line\">    path = /samba/share</span><br><span class=\"line\">    browsable = Yes</span><br><span class=\"line\">    writable = Yes</span><br><span class=\"line\">    guest ok = Yes</span><br><span class=\"line\">    read only = N</span><br></pre></td></tr></table></figure>\n\n<p><br><code>useradd smb</code><br><code>smbpasswd smb</code></p>\n<p>Windows <code>\\\\192.168.1.201</code> , .</p>\n<h2 id=\"--samba-\"><a href=\"#--samba-\" class=\"headerlink\" title=\"  samba \"></a>  samba </h2><blockquote>\n<blockquote>\n<p> , </p>\n</blockquote>\n</blockquote>\n<h3 id=\"2-1-\"><a href=\"#2-1-\" class=\"headerlink\" title=\"2.1 \"></a>2.1 </h3><p> [globle]  <code>smb port = 9445</code><br> smb </p>\n<p><code>vim /etc/samba/smb.conf</code><br><img src=\"/images/059.samba.md.02.png\" width=100% height=100% /></p>\n<img src=\"/images/059.samba.md.03.png\" width=100% height=100% />\n\n\n<h2 id=\"-smb\"><a href=\"#-smb\" class=\"headerlink\" title=\" smb\"></a> smb</h2><h3 id=\"3-1-Linuxsmb\"><a href=\"#3-1-Linuxsmb\" class=\"headerlink\" title=\"3.1 Linuxsmb\"></a>3.1 Linuxsmb</h3><p><code>sudo apt install smbclient</code></p>\n<h3 id=\"3-2--9445-smb\"><a href=\"#3-2--9445-smb\" class=\"headerlink\" title=\"3.2  9445 smb\"></a>3.2  9445 smb</h3><p><code>sudo smbclient -L 192.168.1.201 -p 9445 -U smb </code><br><code> sudo smbclient //192.168.1.201/smb -p 9445 -U smb</code></p>\n<img src=\"/images/059.samba.md.04.png\" width=100% height=100% />\n\n<h3 id=\"3-3-Windows-smb\"><a href=\"#3-3-Windows-smb\" class=\"headerlink\" title=\"3.3 Windows smb\"></a>3.3 Windows smb</h3><blockquote>\n<p>smbWindows, , <br>, <code>192.168.1.201:9445</code>  <code>127.0.0.1:445</code><br> <code>\\\\127.0.0.1</code></p>\n</blockquote>\n<h4 id=\"3-3-1-Windowssmb\"><a href=\"#3-3-1-Windowssmb\" class=\"headerlink\" title=\"3.3.1 Windowssmb\"></a>3.3.1 Windowssmb</h4><p>[]&gt;[server]&gt;[]&gt;[Windows]</p>\n<h4 id=\"3-3-2-\"><a href=\"#3-3-2-\" class=\"headerlink\" title=\"3.3.2 \"></a>3.3.2 </h4><p>cmd:<br><code>netsh interface portproxy add v4tov4 listenport=445 listenaddress=127.0.0.1 connectport=9445 connectaddress= 192.168.1.201</code></p>\n<p>:</p>\n<p><code>netsh interface portproxy show all</code></p>\n<img src=\"/images/059.samba.md.05.png\" width=100% height=100% />\n<img src=\"/images/059.samba.md.06.png\" width=100% height=100% />","site":{"data":{}},"excerpt":"","more":"<h2 id=\"-samba-\"><a href=\"#-samba-\" class=\"headerlink\" title=\" samba \"></a> samba </h2><h3 id=\"1-1-samba-\"><a href=\"#1-1-samba-\" class=\"headerlink\" title=\"1.1 samba \"></a>1.1 samba </h3><p><code> yum install samba*</code></p>\n<h3 id=\"1-2-samba-\"><a href=\"#1-2-samba-\" class=\"headerlink\" title=\"1.2 samba \"></a>1.2 samba </h3><p><code>systemctl enable smb --now</code><br><code>systemctl status smb</code><br><img src=\"/images/059.samba.md.01.png\" width=100% height=100% /></p>\n<h3 id=\"1-3--smb\"><a href=\"#1-3--smb\" class=\"headerlink\" title=\"1.3  smb\"></a>1.3  smb</h3><p></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">[share]</span><br><span class=\"line\">    path = /samba/share</span><br><span class=\"line\">    browsable = Yes</span><br><span class=\"line\">    writable = Yes</span><br><span class=\"line\">    guest ok = Yes</span><br><span class=\"line\">    read only = N</span><br></pre></td></tr></table></figure>\n\n<p><br><code>useradd smb</code><br><code>smbpasswd smb</code></p>\n<p>Windows <code>\\\\192.168.1.201</code> , .</p>\n<h2 id=\"--samba-\"><a href=\"#--samba-\" class=\"headerlink\" title=\"  samba \"></a>  samba </h2><blockquote>\n<blockquote>\n<p> , </p>\n</blockquote>\n</blockquote>\n<h3 id=\"2-1-\"><a href=\"#2-1-\" class=\"headerlink\" title=\"2.1 \"></a>2.1 </h3><p> [globle]  <code>smb port = 9445</code><br> smb </p>\n<p><code>vim /etc/samba/smb.conf</code><br><img src=\"/images/059.samba.md.02.png\" width=100% height=100% /></p>\n<img src=\"/images/059.samba.md.03.png\" width=100% height=100% />\n\n\n<h2 id=\"-smb\"><a href=\"#-smb\" class=\"headerlink\" title=\" smb\"></a> smb</h2><h3 id=\"3-1-Linuxsmb\"><a href=\"#3-1-Linuxsmb\" class=\"headerlink\" title=\"3.1 Linuxsmb\"></a>3.1 Linuxsmb</h3><p><code>sudo apt install smbclient</code></p>\n<h3 id=\"3-2--9445-smb\"><a href=\"#3-2--9445-smb\" class=\"headerlink\" title=\"3.2  9445 smb\"></a>3.2  9445 smb</h3><p><code>sudo smbclient -L 192.168.1.201 -p 9445 -U smb </code><br><code> sudo smbclient //192.168.1.201/smb -p 9445 -U smb</code></p>\n<img src=\"/images/059.samba.md.04.png\" width=100% height=100% />\n\n<h3 id=\"3-3-Windows-smb\"><a href=\"#3-3-Windows-smb\" class=\"headerlink\" title=\"3.3 Windows smb\"></a>3.3 Windows smb</h3><blockquote>\n<p>smbWindows, , <br>, <code>192.168.1.201:9445</code>  <code>127.0.0.1:445</code><br> <code>\\\\127.0.0.1</code></p>\n</blockquote>\n<h4 id=\"3-3-1-Windowssmb\"><a href=\"#3-3-1-Windowssmb\" class=\"headerlink\" title=\"3.3.1 Windowssmb\"></a>3.3.1 Windowssmb</h4><p>[]&gt;[server]&gt;[]&gt;[Windows]</p>\n<h4 id=\"3-3-2-\"><a href=\"#3-3-2-\" class=\"headerlink\" title=\"3.3.2 \"></a>3.3.2 </h4><p>cmd:<br><code>netsh interface portproxy add v4tov4 listenport=445 listenaddress=127.0.0.1 connectport=9445 connectaddress= 192.168.1.201</code></p>\n<p>:</p>\n<p><code>netsh interface portproxy show all</code></p>\n<img src=\"/images/059.samba.md.05.png\" width=100% height=100% />\n<img src=\"/images/059.samba.md.06.png\" width=100% height=100% />"},{"title":"SecureCRT ","date":"2023-11-23T08:15:03.000Z","_content":"\n\n> \n\n> secureCRT, xshell\n\n>  secureCRT \n\n\n##  secureCRT shell \n\n### ipv4\n\n``` \n([0-9]{1,3})\\.([0-9]{1,3})\\.([0-9]{1,3})\\.([0-9]{1,3})\n```\n\n### stop end disable close \n\n```\n(\\bstop(ped)?\\b)|(\\bend\\b)|(\\bfinish(ed)?\\b)|(\\bdisable(d)?\\b)|(\\bdelete(d)?\\b)|(\\bclose(d)?\\b)\n```\n\n### error fail flase down dead failure\n\n```\n(\\berror(s)?\\b)|(\\bfail(ed)?\\b)|(\\bfalse\\b)|(\\bdown\\b)|(\\bdead\\b)|(\\bfailure\\b)\n```\n\n### active success true ok up enable\n\n```\n(\\bactive(d)?\\b)|(\\bsuccess(ful(ly)?)?\\b)|(\\btrue\\b)|(\\bok\\b)|(\\bup\\b)|(\\benable(d)\\b)\n```\n\n### username@hostname\n\n```\n[a-z0-9-]*@[a-z0-9-]*\n```\n\n: xshellsecureCRT, , htop.\n\n\n:\n\n<img src=\"/images/060.highlight.md.01.png\" width=100% height=100% />\n\n\n\n**SecureCRT**\n\n``` Options-->Configure-->Default Session-->keyword Highlighting ``` \n\n**Xshell**\n\n``` -->```","source":"_posts/060.highlight.md","raw":"---\ntitle: SecureCRT \ndate: 2023-11-23 16:15:03\ncategories: \n- [Linux]\ntags: \n- SecureCRT\n- xshell\n---\n\n\n> \n\n> secureCRT, xshell\n\n>  secureCRT \n\n\n##  secureCRT shell \n\n### ipv4\n\n``` \n([0-9]{1,3})\\.([0-9]{1,3})\\.([0-9]{1,3})\\.([0-9]{1,3})\n```\n\n### stop end disable close \n\n```\n(\\bstop(ped)?\\b)|(\\bend\\b)|(\\bfinish(ed)?\\b)|(\\bdisable(d)?\\b)|(\\bdelete(d)?\\b)|(\\bclose(d)?\\b)\n```\n\n### error fail flase down dead failure\n\n```\n(\\berror(s)?\\b)|(\\bfail(ed)?\\b)|(\\bfalse\\b)|(\\bdown\\b)|(\\bdead\\b)|(\\bfailure\\b)\n```\n\n### active success true ok up enable\n\n```\n(\\bactive(d)?\\b)|(\\bsuccess(ful(ly)?)?\\b)|(\\btrue\\b)|(\\bok\\b)|(\\bup\\b)|(\\benable(d)\\b)\n```\n\n### username@hostname\n\n```\n[a-z0-9-]*@[a-z0-9-]*\n```\n\n: xshellsecureCRT, , htop.\n\n\n:\n\n<img src=\"/images/060.highlight.md.01.png\" width=100% height=100% />\n\n\n\n**SecureCRT**\n\n``` Options-->Configure-->Default Session-->keyword Highlighting ``` \n\n**Xshell**\n\n``` -->```","slug":"060.highlight","published":1,"updated":"2023-11-23T09:34:53.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbgv005myknreeoj1l1n","content":"<blockquote>\n<p></p>\n</blockquote>\n<blockquote>\n<p>secureCRT, xshell</p>\n</blockquote>\n<blockquote>\n<p> secureCRT </p>\n</blockquote>\n<h2 id=\"-secureCRT-shell-\"><a href=\"#-secureCRT-shell-\" class=\"headerlink\" title=\" secureCRT shell \"></a> secureCRT shell </h2><h3 id=\"ipv4\"><a href=\"#ipv4\" class=\"headerlink\" title=\"ipv4\"></a>ipv4</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">([0-9]&#123;1,3&#125;)\\.([0-9]&#123;1,3&#125;)\\.([0-9]&#123;1,3&#125;)\\.([0-9]&#123;1,3&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"stop-end-disable-close\"><a href=\"#stop-end-disable-close\" class=\"headerlink\" title=\"stop end disable close\"></a>stop end disable close</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">(\\bstop(ped)?\\b)|(\\bend\\b)|(\\bfinish(ed)?\\b)|(\\bdisable(d)?\\b)|(\\bdelete(d)?\\b)|(\\bclose(d)?\\b)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"error-fail-flase-down-dead-failure\"><a href=\"#error-fail-flase-down-dead-failure\" class=\"headerlink\" title=\"error fail flase down dead failure\"></a>error fail flase down dead failure</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">(\\berror(s)?\\b)|(\\bfail(ed)?\\b)|(\\bfalse\\b)|(\\bdown\\b)|(\\bdead\\b)|(\\bfailure\\b)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"active-success-true-ok-up-enable\"><a href=\"#active-success-true-ok-up-enable\" class=\"headerlink\" title=\"active success true ok up enable\"></a>active success true ok up enable</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">(\\bactive(d)?\\b)|(\\bsuccess(ful(ly)?)?\\b)|(\\btrue\\b)|(\\bok\\b)|(\\bup\\b)|(\\benable(d)\\b)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"username-hostname\"><a href=\"#username-hostname\" class=\"headerlink\" title=\"username@hostname\"></a>username@hostname</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">[a-z0-9-]*@[a-z0-9-]*</span><br></pre></td></tr></table></figure>\n\n<p>: xshellsecureCRT, , htop.</p>\n<p>:</p>\n<img src=\"/images/060.highlight.md.01.png\" width=100% height=100% />\n\n\n\n<p><strong>SecureCRT</strong></p>\n<p><code>Options--&gt;Configure--&gt;Default Session--&gt;keyword Highlighting</code> </p>\n<p><strong>Xshell</strong></p>\n<p><code> --&gt;</code></p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p></p>\n</blockquote>\n<blockquote>\n<p>secureCRT, xshell</p>\n</blockquote>\n<blockquote>\n<p> secureCRT </p>\n</blockquote>\n<h2 id=\"-secureCRT-shell-\"><a href=\"#-secureCRT-shell-\" class=\"headerlink\" title=\" secureCRT shell \"></a> secureCRT shell </h2><h3 id=\"ipv4\"><a href=\"#ipv4\" class=\"headerlink\" title=\"ipv4\"></a>ipv4</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">([0-9]&#123;1,3&#125;)\\.([0-9]&#123;1,3&#125;)\\.([0-9]&#123;1,3&#125;)\\.([0-9]&#123;1,3&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"stop-end-disable-close\"><a href=\"#stop-end-disable-close\" class=\"headerlink\" title=\"stop end disable close\"></a>stop end disable close</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">(\\bstop(ped)?\\b)|(\\bend\\b)|(\\bfinish(ed)?\\b)|(\\bdisable(d)?\\b)|(\\bdelete(d)?\\b)|(\\bclose(d)?\\b)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"error-fail-flase-down-dead-failure\"><a href=\"#error-fail-flase-down-dead-failure\" class=\"headerlink\" title=\"error fail flase down dead failure\"></a>error fail flase down dead failure</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">(\\berror(s)?\\b)|(\\bfail(ed)?\\b)|(\\bfalse\\b)|(\\bdown\\b)|(\\bdead\\b)|(\\bfailure\\b)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"active-success-true-ok-up-enable\"><a href=\"#active-success-true-ok-up-enable\" class=\"headerlink\" title=\"active success true ok up enable\"></a>active success true ok up enable</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">(\\bactive(d)?\\b)|(\\bsuccess(ful(ly)?)?\\b)|(\\btrue\\b)|(\\bok\\b)|(\\bup\\b)|(\\benable(d)\\b)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"username-hostname\"><a href=\"#username-hostname\" class=\"headerlink\" title=\"username@hostname\"></a>username@hostname</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">[a-z0-9-]*@[a-z0-9-]*</span><br></pre></td></tr></table></figure>\n\n<p>: xshellsecureCRT, , htop.</p>\n<p>:</p>\n<img src=\"/images/060.highlight.md.01.png\" width=100% height=100% />\n\n\n\n<p><strong>SecureCRT</strong></p>\n<p><code>Options--&gt;Configure--&gt;Default Session--&gt;keyword Highlighting</code> </p>\n<p><strong>Xshell</strong></p>\n<p><code> --&gt;</code></p>\n"},{"title":"hexo ","date":"2023-11-30T06:54:40.000Z","_content":"\nENV:\n\nHW: kvm\nArch: x86_64\nOS: CentOS7.9\n\n\n##   nodejs\n\n### 1.1 yum \n``` yum install nodejs ```\n\n### 1.2 \nhttps://nodejs.org/download/release/v16.20.2/\n\n, yumnodeopenssl\n,  /usr/local; \n\n``` tar -xzvf node-v12.22.12-linux-x64.tar.gz ```\n``` mv node-v12.22.12-linux-x64 /usr/local/ ```\n``` ln -s /usr/local/node-v12.22.12-linux-x64/ /usr/local/nodejs ```\n``` ln -s /usr/local/nodejs/bin/node /usr/bin/node ```\n``` ln -s /usr/local/nodejs/bin/npm /usr/bin/npm ```\n\n##   hexo\n\n### 2.1 \n\n****\n``` mkdir /mdzz ```\n``` npm install hexo ```\n\n### 2.2 \n\n``` ln -s /mdzz/node_modules/hexo/bin/hexo /usr/bin/hexo ```\n\n### 2.3 \n\n``` hexo init blog ```\n``` cd  blog ```\n``` npm install ```\n\n### 2.4 \n\n``` hexo s ```\n\n\n\n\n\n\n","source":"_posts/061.hexo.md","raw":"---\ntitle: hexo \ndate: 2023-11-30 14:54:40\ncategories: \n- [Linux]\ntags: \n- hexo\n---\n\nENV:\n\nHW: kvm\nArch: x86_64\nOS: CentOS7.9\n\n\n##   nodejs\n\n### 1.1 yum \n``` yum install nodejs ```\n\n### 1.2 \nhttps://nodejs.org/download/release/v16.20.2/\n\n, yumnodeopenssl\n,  /usr/local; \n\n``` tar -xzvf node-v12.22.12-linux-x64.tar.gz ```\n``` mv node-v12.22.12-linux-x64 /usr/local/ ```\n``` ln -s /usr/local/node-v12.22.12-linux-x64/ /usr/local/nodejs ```\n``` ln -s /usr/local/nodejs/bin/node /usr/bin/node ```\n``` ln -s /usr/local/nodejs/bin/npm /usr/bin/npm ```\n\n##   hexo\n\n### 2.1 \n\n****\n``` mkdir /mdzz ```\n``` npm install hexo ```\n\n### 2.2 \n\n``` ln -s /mdzz/node_modules/hexo/bin/hexo /usr/bin/hexo ```\n\n### 2.3 \n\n``` hexo init blog ```\n``` cd  blog ```\n``` npm install ```\n\n### 2.4 \n\n``` hexo s ```\n\n\n\n\n\n\n","slug":"061.hexo","published":1,"updated":"2023-12-04T07:48:06.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbgy005oyknr75dt9v0j","content":"<p>ENV:</p>\n<p>HW: kvm<br>Arch: x86_64<br>OS: CentOS7.9</p>\n<h2 id=\"--nodejs\"><a href=\"#--nodejs\" class=\"headerlink\" title=\"  nodejs\"></a>  nodejs</h2><h3 id=\"1-1-yum-\"><a href=\"#1-1-yum-\" class=\"headerlink\" title=\"1.1 yum \"></a>1.1 yum </h3><p><code>yum install nodejs</code></p>\n<h3 id=\"1-2-\"><a href=\"#1-2-\" class=\"headerlink\" title=\"1.2 \"></a>1.2 </h3><p><a href=\"https://nodejs.org/download/release/v16.20.2/\">https://nodejs.org/download/release/v16.20.2/</a></p>\n<p>, yumnodeopenssl<br>,  &#x2F;usr&#x2F;local; </p>\n<p><code>tar -xzvf node-v12.22.12-linux-x64.tar.gz</code><br><code>mv node-v12.22.12-linux-x64 /usr/local/</code><br><code>ln -s /usr/local/node-v12.22.12-linux-x64/ /usr/local/nodejs</code><br><code>ln -s /usr/local/nodejs/bin/node /usr/bin/node</code><br><code>ln -s /usr/local/nodejs/bin/npm /usr/bin/npm</code></p>\n<h2 id=\"--hexo\"><a href=\"#--hexo\" class=\"headerlink\" title=\"  hexo\"></a>  hexo</h2><h3 id=\"2-1-\"><a href=\"#2-1-\" class=\"headerlink\" title=\"2.1 \"></a>2.1 </h3><p><strong></strong><br><code>mkdir /mdzz</code><br><code>npm install hexo</code></p>\n<h3 id=\"2-2-\"><a href=\"#2-2-\" class=\"headerlink\" title=\"2.2 \"></a>2.2 </h3><p><code>ln -s /mdzz/node_modules/hexo/bin/hexo /usr/bin/hexo</code></p>\n<h3 id=\"2-3-\"><a href=\"#2-3-\" class=\"headerlink\" title=\"2.3 \"></a>2.3 </h3><p><code>hexo init blog</code><br><code>cd  blog</code><br><code>npm install</code></p>\n<h3 id=\"2-4-\"><a href=\"#2-4-\" class=\"headerlink\" title=\"2.4 \"></a>2.4 </h3><p><code>hexo s</code></p>\n","site":{"data":{}},"excerpt":"","more":"<p>ENV:</p>\n<p>HW: kvm<br>Arch: x86_64<br>OS: CentOS7.9</p>\n<h2 id=\"--nodejs\"><a href=\"#--nodejs\" class=\"headerlink\" title=\"  nodejs\"></a>  nodejs</h2><h3 id=\"1-1-yum-\"><a href=\"#1-1-yum-\" class=\"headerlink\" title=\"1.1 yum \"></a>1.1 yum </h3><p><code>yum install nodejs</code></p>\n<h3 id=\"1-2-\"><a href=\"#1-2-\" class=\"headerlink\" title=\"1.2 \"></a>1.2 </h3><p><a href=\"https://nodejs.org/download/release/v16.20.2/\">https://nodejs.org/download/release/v16.20.2/</a></p>\n<p>, yumnodeopenssl<br>,  &#x2F;usr&#x2F;local; </p>\n<p><code>tar -xzvf node-v12.22.12-linux-x64.tar.gz</code><br><code>mv node-v12.22.12-linux-x64 /usr/local/</code><br><code>ln -s /usr/local/node-v12.22.12-linux-x64/ /usr/local/nodejs</code><br><code>ln -s /usr/local/nodejs/bin/node /usr/bin/node</code><br><code>ln -s /usr/local/nodejs/bin/npm /usr/bin/npm</code></p>\n<h2 id=\"--hexo\"><a href=\"#--hexo\" class=\"headerlink\" title=\"  hexo\"></a>  hexo</h2><h3 id=\"2-1-\"><a href=\"#2-1-\" class=\"headerlink\" title=\"2.1 \"></a>2.1 </h3><p><strong></strong><br><code>mkdir /mdzz</code><br><code>npm install hexo</code></p>\n<h3 id=\"2-2-\"><a href=\"#2-2-\" class=\"headerlink\" title=\"2.2 \"></a>2.2 </h3><p><code>ln -s /mdzz/node_modules/hexo/bin/hexo /usr/bin/hexo</code></p>\n<h3 id=\"2-3-\"><a href=\"#2-3-\" class=\"headerlink\" title=\"2.3 \"></a>2.3 </h3><p><code>hexo init blog</code><br><code>cd  blog</code><br><code>npm install</code></p>\n<h3 id=\"2-4-\"><a href=\"#2-4-\" class=\"headerlink\" title=\"2.4 \"></a>2.4 </h3><p><code>hexo s</code></p>\n"},{"title":"Tips on Linux","date":"2022-05-18T07:48:13.000Z","_content":"\n\n### \n``` cp /etc/sysconfig/iptables{,.back} ```\n\n### \n``` mv /etc/sysconfig/iptables{,.back} ```\n\n### \n``` echo \"123\"  >> /path/file ```\n\n### \n``` du -h --max-depth=1 ```\n\n### \n``` yum repo-pkgs REPO list```\n``` yum repo-pkgs epel list | grep nginx```\n\tANOTHER WAY TO\n``` yum --disablerepo \"*\" --enablerepo REPO list ```\n``` yum --disablerepo \"*\" --enablerepo REPO list | grep nginx ```\n\n### MySQL 5.7.37 \n``` password ``` ---> ``` authentication_string```\n\n### \n``` fdisk /dev/vdb1```\n``` {n, p, size, type, w} ```\n```mkfs.ext4 /dev/vdb1 ```\n```mount /dev/vdb1 /data```\n\n### \n```curl -socks5 127.0.0.1:10808 https://www.google.com```\n```wget -e http_proxy=127.0.0.1:10808 http://www/google.com```\n```wget -e https_proxy=127.0.0.1:10808 https://www/google.com```\n\n\n```curl cip.cc```\n\n### \n\n``` bash\n export  http_proxy=\"http://username:password@proxyServer:port/\"\n export  https_proxy=\"http://username:password@proxyServer:port/\"\n export ftp_proxy=\"http://username:password@proxyServer:port/\"\n export no_proxy=\"127.0.0.1,192.168.124.0/16,*.example.com\"\n```\n\n\n\n``` bash\n unset  http_proxy\n unset https_proxy\n unset  ftp_proxy\n unset  no_proxy\n```\n\n9) \n\n``` bash\ncat   >>  /etc/profile   << EOF\nexport  http_proxy=\"http://username:password@proxyServer:port/\"\nexport  https_proxy=\"http://username:password@proxyServer:port/\"\nexport ftp_proxy=\"http://username:password@proxyServer:port/\"\nexport no_proxy=\"127.0.0.1,192.168.124.0/16,*.example.com\"\nEOF\n```\n ```source  /etc/profile```\n\n\n### \n\n``` /usr/bin/cp /dev/null /path2yourFILE```\n**cp, cp**\n**,rm -rf , .**\n\n\n### ip\n\n``` nmtui ```\n>> nmtui  NetworkManager  NetworkManager-tui \n\n\n### \n\n xx.txt \n\n``` rm -rf /pathtoyourdir/(!xx.txt)  ```\n\n### \n\n``` for i in 0 1 2; do echo \"- - -\" > /sys/class/scsi_host/host$i/scan; done ```\n","source":"_posts/999.Tips-linux.md","raw":"---\ntitle: Tips on Linux\ndate: 2022-5-18 15:48:13\ncategories: \n- [Linux]\ntags: \n- Tips\n---\n\n\n### \n``` cp /etc/sysconfig/iptables{,.back} ```\n\n### \n``` mv /etc/sysconfig/iptables{,.back} ```\n\n### \n``` echo \"123\"  >> /path/file ```\n\n### \n``` du -h --max-depth=1 ```\n\n### \n``` yum repo-pkgs REPO list```\n``` yum repo-pkgs epel list | grep nginx```\n\tANOTHER WAY TO\n``` yum --disablerepo \"*\" --enablerepo REPO list ```\n``` yum --disablerepo \"*\" --enablerepo REPO list | grep nginx ```\n\n### MySQL 5.7.37 \n``` password ``` ---> ``` authentication_string```\n\n### \n``` fdisk /dev/vdb1```\n``` {n, p, size, type, w} ```\n```mkfs.ext4 /dev/vdb1 ```\n```mount /dev/vdb1 /data```\n\n### \n```curl -socks5 127.0.0.1:10808 https://www.google.com```\n```wget -e http_proxy=127.0.0.1:10808 http://www/google.com```\n```wget -e https_proxy=127.0.0.1:10808 https://www/google.com```\n\n\n```curl cip.cc```\n\n### \n\n``` bash\n export  http_proxy=\"http://username:password@proxyServer:port/\"\n export  https_proxy=\"http://username:password@proxyServer:port/\"\n export ftp_proxy=\"http://username:password@proxyServer:port/\"\n export no_proxy=\"127.0.0.1,192.168.124.0/16,*.example.com\"\n```\n\n\n\n``` bash\n unset  http_proxy\n unset https_proxy\n unset  ftp_proxy\n unset  no_proxy\n```\n\n9) \n\n``` bash\ncat   >>  /etc/profile   << EOF\nexport  http_proxy=\"http://username:password@proxyServer:port/\"\nexport  https_proxy=\"http://username:password@proxyServer:port/\"\nexport ftp_proxy=\"http://username:password@proxyServer:port/\"\nexport no_proxy=\"127.0.0.1,192.168.124.0/16,*.example.com\"\nEOF\n```\n ```source  /etc/profile```\n\n\n### \n\n``` /usr/bin/cp /dev/null /path2yourFILE```\n**cp, cp**\n**,rm -rf , .**\n\n\n### ip\n\n``` nmtui ```\n>> nmtui  NetworkManager  NetworkManager-tui \n\n\n### \n\n xx.txt \n\n``` rm -rf /pathtoyourdir/(!xx.txt)  ```\n\n### \n\n``` for i in 0 1 2; do echo \"- - -\" > /sys/class/scsi_host/host$i/scan; done ```\n","slug":"999.Tips-linux","published":1,"updated":"2023-09-26T02:56:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clpqpjbh1005syknrcxju4p4x","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>cp /etc/sysconfig/iptables&#123;,.back&#125;</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>mv /etc/sysconfig/iptables&#123;,.back&#125;</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>echo &quot;123&quot;  &gt;&gt; /path/file</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>du -h --max-depth=1</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code> yum repo-pkgs REPO list</code><br><code> yum repo-pkgs epel list | grep nginx</code><br>    ANOTHER WAY TO<br><code>yum --disablerepo &quot;*&quot; --enablerepo REPO list</code><br><code>yum --disablerepo &quot;*&quot; --enablerepo REPO list | grep nginx</code></p>\n<h3 id=\"MySQL-5-7-37\"><a href=\"#MySQL-5-7-37\" class=\"headerlink\" title=\"MySQL 5.7.37\"></a>MySQL 5.7.37</h3><p><code>password</code> &gt; <code> authentication_string</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code> fdisk /dev/vdb1</code><br><code>&#123;n, p, size, type, w&#125;</code><br><code>mkfs.ext4 /dev/vdb1 </code><br><code>mount /dev/vdb1 /data</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>curl -socks5 127.0.0.1:10808 https://www.google.com</code><br><code>wget -e http_proxy=127.0.0.1:10808 http://www/google.com</code><br><code>wget -e https_proxy=127.0.0.1:10808 https://www/google.com</code></p>\n<p><br><code>curl cip.cc</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span>  http_proxy=<span class=\"string\">&quot;http://username:password@proxyServer:port/&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">export</span>  https_proxy=<span class=\"string\">&quot;http://username:password@proxyServer:port/&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> ftp_proxy=<span class=\"string\">&quot;http://username:password@proxyServer:port/&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> no_proxy=<span class=\"string\">&quot;127.0.0.1,192.168.124.0/16,*.example.com&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">unset</span>  http_proxy</span><br><span class=\"line\"><span class=\"built_in\">unset</span> https_proxy</span><br><span class=\"line\"><span class=\"built_in\">unset</span>  ftp_proxy</span><br><span class=\"line\"><span class=\"built_in\">unset</span>  no_proxy</span><br></pre></td></tr></table></figure>\n\n<ol start=\"9\">\n<li></li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cat</span>   &gt;&gt;  /etc/profile   &lt;&lt; <span class=\"string\">EOF</span></span><br><span class=\"line\"><span class=\"string\">export  http_proxy=&quot;http://username:password@proxyServer:port/&quot;</span></span><br><span class=\"line\"><span class=\"string\">export  https_proxy=&quot;http://username:password@proxyServer:port/&quot;</span></span><br><span class=\"line\"><span class=\"string\">export ftp_proxy=&quot;http://username:password@proxyServer:port/&quot;</span></span><br><span class=\"line\"><span class=\"string\">export no_proxy=&quot;127.0.0.1,192.168.124.0/16,*.example.com&quot;</span></span><br><span class=\"line\"><span class=\"string\">EOF</span></span><br></pre></td></tr></table></figure>\n<p> <code>source  /etc/profile</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code> /usr/bin/cp /dev/null /path2yourFILE</code><br><strong>cp, cp</strong><br><strong>,rm -rf , .</strong></p>\n<h3 id=\"ip\"><a href=\"#ip\" class=\"headerlink\" title=\"ip\"></a>ip</h3><p><code>nmtui</code></p>\n<blockquote>\n<blockquote>\n<p>nmtui  NetworkManager  NetworkManager-tui </p>\n</blockquote>\n</blockquote>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> xx.txt </p>\n<p><code>rm -rf /pathtoyourdir/(!xx.txt) </code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>for i in 0 1 2; do echo &quot;- - -&quot; &gt; /sys/class/scsi_host/host$i/scan; done</code></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>cp /etc/sysconfig/iptables&#123;,.back&#125;</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>mv /etc/sysconfig/iptables&#123;,.back&#125;</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>echo &quot;123&quot;  &gt;&gt; /path/file</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>du -h --max-depth=1</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code> yum repo-pkgs REPO list</code><br><code> yum repo-pkgs epel list | grep nginx</code><br>    ANOTHER WAY TO<br><code>yum --disablerepo &quot;*&quot; --enablerepo REPO list</code><br><code>yum --disablerepo &quot;*&quot; --enablerepo REPO list | grep nginx</code></p>\n<h3 id=\"MySQL-5-7-37\"><a href=\"#MySQL-5-7-37\" class=\"headerlink\" title=\"MySQL 5.7.37\"></a>MySQL 5.7.37</h3><p><code>password</code> &gt; <code> authentication_string</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code> fdisk /dev/vdb1</code><br><code>&#123;n, p, size, type, w&#125;</code><br><code>mkfs.ext4 /dev/vdb1 </code><br><code>mount /dev/vdb1 /data</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>curl -socks5 127.0.0.1:10808 https://www.google.com</code><br><code>wget -e http_proxy=127.0.0.1:10808 http://www/google.com</code><br><code>wget -e https_proxy=127.0.0.1:10808 https://www/google.com</code></p>\n<p><br><code>curl cip.cc</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span>  http_proxy=<span class=\"string\">&quot;http://username:password@proxyServer:port/&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">export</span>  https_proxy=<span class=\"string\">&quot;http://username:password@proxyServer:port/&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> ftp_proxy=<span class=\"string\">&quot;http://username:password@proxyServer:port/&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> no_proxy=<span class=\"string\">&quot;127.0.0.1,192.168.124.0/16,*.example.com&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">unset</span>  http_proxy</span><br><span class=\"line\"><span class=\"built_in\">unset</span> https_proxy</span><br><span class=\"line\"><span class=\"built_in\">unset</span>  ftp_proxy</span><br><span class=\"line\"><span class=\"built_in\">unset</span>  no_proxy</span><br></pre></td></tr></table></figure>\n\n<ol start=\"9\">\n<li></li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cat</span>   &gt;&gt;  /etc/profile   &lt;&lt; <span class=\"string\">EOF</span></span><br><span class=\"line\"><span class=\"string\">export  http_proxy=&quot;http://username:password@proxyServer:port/&quot;</span></span><br><span class=\"line\"><span class=\"string\">export  https_proxy=&quot;http://username:password@proxyServer:port/&quot;</span></span><br><span class=\"line\"><span class=\"string\">export ftp_proxy=&quot;http://username:password@proxyServer:port/&quot;</span></span><br><span class=\"line\"><span class=\"string\">export no_proxy=&quot;127.0.0.1,192.168.124.0/16,*.example.com&quot;</span></span><br><span class=\"line\"><span class=\"string\">EOF</span></span><br></pre></td></tr></table></figure>\n<p> <code>source  /etc/profile</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code> /usr/bin/cp /dev/null /path2yourFILE</code><br><strong>cp, cp</strong><br><strong>,rm -rf , .</strong></p>\n<h3 id=\"ip\"><a href=\"#ip\" class=\"headerlink\" title=\"ip\"></a>ip</h3><p><code>nmtui</code></p>\n<blockquote>\n<blockquote>\n<p>nmtui  NetworkManager  NetworkManager-tui </p>\n</blockquote>\n</blockquote>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> xx.txt </p>\n<p><code>rm -rf /pathtoyourdir/(!xx.txt) </code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>for i in 0 1 2; do echo &quot;- - -&quot; &gt; /sys/class/scsi_host/host$i/scan; done</code></p>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"clpqpjbcc0001yknr1bv21aap","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbdc000kyknrfi4rcskm"},{"post_id":"clpqpjbcl0003yknrh2hx7uko","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbdk000ryknr3xuq8lzm"},{"post_id":"clpqpjbcu0007yknrgcij6da8","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbdr0013yknr4xokaueb"},{"post_id":"clpqpjbcu0007yknrgcij6da8","category_id":"clpqpjbdc000jyknr4u7rhjxy","_id":"clpqpjbds0017yknr1uj106vo"},{"post_id":"clpqpjbdi000qyknraxsyfw6y","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbdu001byknr5xqa6igm"},{"post_id":"clpqpjbdl000vyknr15ufef6d","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbe1001gyknrgfr5g9uz"},{"post_id":"clpqpjbdl000vyknr15ufef6d","category_id":"clpqpjbdc000jyknr4u7rhjxy","_id":"clpqpjbe5001kyknr066375cl"},{"post_id":"clpqpjbcx000byknr9rf4hoqn","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbe7001oyknrdhm3c8jr"},{"post_id":"clpqpjbcx000byknr9rf4hoqn","category_id":"clpqpjbdc000jyknr4u7rhjxy","_id":"clpqpjbe9001syknr2xd7gilx"},{"post_id":"clpqpjbdu001ayknr0jqph674","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbeb001wyknr5zyf8s2w"},{"post_id":"clpqpjbds0016yknrgph2ci1e","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbed0020yknr0ppud0s2"},{"post_id":"clpqpjbds0016yknrgph2ci1e","category_id":"clpqpjbdc000jyknr4u7rhjxy","_id":"clpqpjbeg0024yknrapiub66f"},{"post_id":"clpqpjbd3000gyknrhlg0gv9r","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbei0028yknr6228cj4r"},{"post_id":"clpqpjbd3000gyknrhlg0gv9r","category_id":"clpqpjbdt0018yknr94jdenla","_id":"clpqpjben002byknr4o6s48ri"},{"post_id":"clpqpjbdw001fyknr77xmd6ql","category_id":"clpqpjbdt0018yknr94jdenla","_id":"clpqpjbeq002fyknr3wzb5wbo"},{"post_id":"clpqpjbda000iyknr400n5nm3","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbes002hyknr15l0dh9l"},{"post_id":"clpqpjbda000iyknr400n5nm3","category_id":"clpqpjbdc000jyknr4u7rhjxy","_id":"clpqpjbeu002kyknrgb2a8r3z"},{"post_id":"clpqpjbda000iyknr400n5nm3","category_id":"clpqpjbe1001hyknr8a1welcu","_id":"clpqpjbex002nyknr5ozk77ga"},{"post_id":"clpqpjbde000nyknrg4t17tsl","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbf0002qyknrb1xacbc7"},{"post_id":"clpqpjbde000nyknrg4t17tsl","category_id":"clpqpjbdc000jyknr4u7rhjxy","_id":"clpqpjbf2002uyknrhbjdeqok"},{"post_id":"clpqpjbde000nyknrg4t17tsl","category_id":"clpqpjbe1001hyknr8a1welcu","_id":"clpqpjbf9002yyknrg10n6im5"},{"post_id":"clpqpjbea001vyknreo00hx9t","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbfb0032yknr95vd2f9r"},{"post_id":"clpqpjbea001vyknreo00hx9t","category_id":"clpqpjbdc000jyknr4u7rhjxy","_id":"clpqpjbfd0035yknr8znv6y1o"},{"post_id":"clpqpjbdn000yyknr2v383tcg","category_id":"clpqpjbec001yyknrc1ee0e2e","_id":"clpqpjbff0038yknr48s3h0x3"},{"post_id":"clpqpjbec001zyknr2g1mgxw7","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbfg003ayknravqtauvn"},{"post_id":"clpqpjbec001zyknr2g1mgxw7","category_id":"clpqpjbdc000jyknr4u7rhjxy","_id":"clpqpjbfi003fyknr7sk8db6l"},{"post_id":"clpqpjbeh0026yknra8y08i63","category_id":"clpqpjbec001yyknrc1ee0e2e","_id":"clpqpjbfj003iyknrfp34cv1t"},{"post_id":"clpqpjbef0023yknr976e6acm","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbfm003nyknrg5hsem7v"},{"post_id":"clpqpjbef0023yknr976e6acm","category_id":"clpqpjbdc000jyknr4u7rhjxy","_id":"clpqpjbfn003pyknrdws7a3c5"},{"post_id":"clpqpjbcw0009yknr87ybcoog","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbfp003tyknr1h2l7fq5"},{"post_id":"clpqpjbcw0009yknr87ybcoog","category_id":"clpqpjbdc000jyknr4u7rhjxy","_id":"clpqpjbfq003vyknr197t48nw"},{"post_id":"clpqpjbcw0009yknr87ybcoog","category_id":"clpqpjbe1001hyknr8a1welcu","_id":"clpqpjbfs003zyknr16cd2br2"},{"post_id":"clpqpjbej0029yknr5w5k1dj9","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbft0041yknr2ki8h2kb"},{"post_id":"clpqpjbeo002dyknr5dmweaep","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbfu0044yknr1v4q3z8p"},{"post_id":"clpqpjbeq002gyknre4nt82v6","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbfx0048yknr8c2jba0i"},{"post_id":"clpqpjbdr0012yknr9dbx0mem","category_id":"clpqpjbep002eyknraf6jgdke","_id":"clpqpjbfy004byknr08gdc4uq"},{"post_id":"clpqpjbet002jyknrcbjt7eiy","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbg0004fyknre824e9tn"},{"post_id":"clpqpjbew002myknre9ojh4bi","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbg2004hyknr01k2d3fe"},{"post_id":"clpqpjbe3001jyknr5kr53htc","category_id":"clpqpjbev002lyknrf2c43neq","_id":"clpqpjbg4004kyknrbvhpence"},{"post_id":"clpqpjbey002pyknr9h6ad2b4","category_id":"clpqpjbep002eyknraf6jgdke","_id":"clpqpjbg5004nyknr5awa7yh3"},{"post_id":"clpqpjbf2002tyknr5vqxg13e","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbg7004ryknr47y940wy"},{"post_id":"clpqpjbe6001nyknr7zel30mt","category_id":"clpqpjbec001yyknrc1ee0e2e","_id":"clpqpjbg8004tyknr05uaf9pq"},{"post_id":"clpqpjbe8001ryknr4p14fr2x","category_id":"clpqpjbec001yyknrc1ee0e2e","_id":"clpqpjbga004wyknrcm8ua38u"},{"post_id":"clpqpjbfe0037yknr67ij0lf8","category_id":"clpqpjbfd0036yknr4aiv75kr","_id":"clpqpjbgb004zyknr0caba3c4"},{"post_id":"clpqpjbf7002xyknrhvp75ksg","category_id":"clpqpjbfd0036yknr4aiv75kr","_id":"clpqpjbgc0052yknr6lkkgxlo"},{"post_id":"clpqpjbff0039yknr8i4v19jx","category_id":"clpqpjbfd0036yknr4aiv75kr","_id":"clpqpjbgd0057yknrcuafcg3a"},{"post_id":"clpqpjbfh003dyknr5eu09wap","category_id":"clpqpjbfd0036yknr4aiv75kr","_id":"clpqpjbgg0059yknrfm2k9tzu"},{"post_id":"clpqpjbfa0031yknrd6z335ut","category_id":"clpqpjbfd0036yknr4aiv75kr","_id":"clpqpjbgl005dyknr2e6b5wof"},{"post_id":"clpqpjbfa0031yknrd6z335ut","category_id":"clpqpjbdc000jyknr4u7rhjxy","_id":"clpqpjbgs005gyknr99wtbohk"},{"post_id":"clpqpjbfc0033yknraw1udtnt","category_id":"clpqpjbfd0036yknr4aiv75kr","_id":"clpqpjbgu005kyknrgwh57yce"},{"post_id":"clpqpjbfp003syknrayts8oe7","category_id":"clpqpjbfo003ryknrc5twdot0","_id":"clpqpjbgw005nyknrab6n17v6"},{"post_id":"clpqpjbfi003gyknrdjk209bx","category_id":"clpqpjbfo003ryknrc5twdot0","_id":"clpqpjbh0005qyknr2iyag634"},{"post_id":"clpqpjbfp003uyknraubl87gm","category_id":"clpqpjbfo003ryknrc5twdot0","_id":"clpqpjbh3005tyknrayeva0s7"},{"post_id":"clpqpjbfr003xyknr91avfmys","category_id":"clpqpjbfo003ryknrc5twdot0","_id":"clpqpjbh3005uyknr5ox9asj7"},{"post_id":"clpqpjbfs0040yknrabaf9nnm","category_id":"clpqpjbfd0036yknr4aiv75kr","_id":"clpqpjbh4005wyknr8r3c8r00"},{"post_id":"clpqpjbfl003lyknrgkx220aj","category_id":"clpqpjbfr003yyknreuca9kef","_id":"clpqpjbh4005xyknrfct4g0hq"},{"post_id":"clpqpjbft0042yknr8assf0m7","category_id":"clpqpjbfd0036yknr4aiv75kr","_id":"clpqpjbh5005zyknr69erhjmo"},{"post_id":"clpqpjbfm003oyknra9u56yo8","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbh50061yknr9wls0rte"},{"post_id":"clpqpjbfm003oyknra9u56yo8","category_id":"clpqpjbfv0045yknrhahx2pp1","_id":"clpqpjbh60064yknrdke727dy"},{"post_id":"clpqpjbfv0047yknr36ie4rui","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbh60065yknrclsq6y1s"},{"post_id":"clpqpjbfv0047yknr36ie4rui","category_id":"clpqpjbfd0036yknr4aiv75kr","_id":"clpqpjbh70067yknr23zfh1h5"},{"post_id":"clpqpjbfx004ayknr3f5m2ygx","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbh70069yknrbizr1xj7"},{"post_id":"clpqpjbfx004ayknr3f5m2ygx","category_id":"clpqpjbfd0036yknr4aiv75kr","_id":"clpqpjbh8006cyknra3vq2hwm"},{"post_id":"clpqpjbfz004eyknr5v0nfvtt","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbh8006dyknr29f814ba"},{"post_id":"clpqpjbfz004eyknr5v0nfvtt","category_id":"clpqpjbep002eyknraf6jgdke","_id":"clpqpjbh8006eyknrcz8l53gb"},{"post_id":"clpqpjbg1004gyknrhrwm6b8o","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbh9006hyknr8k4ebhtj"},{"post_id":"clpqpjbg1004gyknrhrwm6b8o","category_id":"clpqpjbep002eyknraf6jgdke","_id":"clpqpjbh9006jyknr9ujx3emm"},{"post_id":"clpqpjbg4004myknrcvdu7uhc","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbh9006lyknrg6m6a14i"},{"post_id":"clpqpjbg3004jyknr1v9eb8uc","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbha006nyknrg8tbdxjq"},{"post_id":"clpqpjbg3004jyknr1v9eb8uc","category_id":"clpqpjbep002eyknraf6jgdke","_id":"clpqpjbha006pyknrhn7ngl8r"},{"post_id":"clpqpjbg6004qyknr3zepa8q7","category_id":"clpqpjbep002eyknraf6jgdke","_id":"clpqpjbha006qyknrhk691kln"},{"post_id":"clpqpjbg8004syknr2g4899g5","category_id":"clpqpjbec001yyknrc1ee0e2e","_id":"clpqpjbha006syknr3btcajod"},{"post_id":"clpqpjbg9004uyknr653se7su","category_id":"clpqpjbec001yyknrc1ee0e2e","_id":"clpqpjbha006tyknr9xxh9rn4"},{"post_id":"clpqpjbge0058yknrdfom9ktu","category_id":"clpqpjbep002eyknraf6jgdke","_id":"clpqpjbhb006vyknr4q9p33v6"},{"post_id":"clpqpjbgb004yyknrcbpx10p7","category_id":"clpqpjbgd0055yknrckvq9odz","_id":"clpqpjbhb006xyknr084xcona"},{"post_id":"clpqpjbgj005byknr4jqm0r01","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbhb006zyknr3qvzd1b3"},{"post_id":"clpqpjbgq005fyknr2nu9bpnb","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbhc0072yknr931yfvkk"},{"post_id":"clpqpjbgb0051yknr1mz789ed","category_id":"clpqpjbgd0055yknrckvq9odz","_id":"clpqpjbhc0073yknre2blgp8u"},{"post_id":"clpqpjbgt005iyknr6vxz1kgx","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbhc0075yknr8p768d86"},{"post_id":"clpqpjbgv005myknreeoj1l1n","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbhc0076yknrc1ps2jgq"},{"post_id":"clpqpjbgc0054yknr8l68fulp","category_id":"clpqpjbgu005jyknr14ilam3s","_id":"clpqpjbhe0078yknr15klbhfw"},{"post_id":"clpqpjbgy005oyknr75dt9v0j","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbhe007ayknr432ocq2e"},{"post_id":"clpqpjbh1005syknrcxju4p4x","category_id":"clpqpjbco0004yknrfdux58om","_id":"clpqpjbhf007dyknr55nm6kkf"}],"PostTag":[{"post_id":"clpqpjbcc0001yknr1bv21aap","tag_id":"clpqpjbcs0005yknr5ehydctu","_id":"clpqpjbd2000eyknra9ogbumd"},{"post_id":"clpqpjbcl0003yknrh2hx7uko","tag_id":"clpqpjbcz000dyknr7vovfo74","_id":"clpqpjbdh000oyknrdcrg4tcd"},{"post_id":"clpqpjbcu0007yknrgcij6da8","tag_id":"clpqpjbdd000lyknr78z2ceex","_id":"clpqpjbdm000wyknrhmq592y2"},{"post_id":"clpqpjbcw0009yknr87ybcoog","tag_id":"clpqpjbdk000tyknr9abie3n3","_id":"clpqpjbdr0014yknr9k8mg7ff"},{"post_id":"clpqpjbcx000byknr9rf4hoqn","tag_id":"clpqpjbdp0010yknre4se6vov","_id":"clpqpjbdv001dyknr7mvghvjk"},{"post_id":"clpqpjbd3000gyknrhlg0gv9r","tag_id":"clpqpjbdv001cyknr8x6qeefv","_id":"clpqpjbeb001xyknrdbldhhwd"},{"post_id":"clpqpjbd3000gyknrhlg0gv9r","tag_id":"clpqpjbe5001lyknr420j0chz","_id":"clpqpjbed0021yknr5s4bdvpe"},{"post_id":"clpqpjbda000iyknr400n5nm3","tag_id":"clpqpjbe9001tyknr99t6dfg1","_id":"clpqpjbeg0025yknrcas5bu99"},{"post_id":"clpqpjbde000nyknrg4t17tsl","tag_id":"clpqpjbee0022yknrfvp6fust","_id":"clpqpjben002cyknr9swo02mp"},{"post_id":"clpqpjbdi000qyknraxsyfw6y","tag_id":"clpqpjbek002ayknrb39n7nea","_id":"clpqpjbf0002ryknr0ahgcyv1"},{"post_id":"clpqpjbdi000qyknraxsyfw6y","tag_id":"clpqpjbes002iyknrdcvg46nw","_id":"clpqpjbf3002vyknr34td6epk"},{"post_id":"clpqpjbdl000vyknr15ufef6d","tag_id":"clpqpjbey002oyknr7dx47acy","_id":"clpqpjbfa0030yknr1cfs98v1"},{"post_id":"clpqpjbdn000yyknr2v383tcg","tag_id":"clpqpjbf7002wyknr3doj8eoy","_id":"clpqpjbfi003eyknrgwpu7f8a"},{"post_id":"clpqpjbdn000yyknr2v383tcg","tag_id":"clpqpjbfd0034yknrat9q5o3w","_id":"clpqpjbfj003hyknradny2ang"},{"post_id":"clpqpjbdr0012yknr9dbx0mem","tag_id":"clpqpjbfd0034yknrat9q5o3w","_id":"clpqpjbfm003myknr6byvebrl"},{"post_id":"clpqpjbds0016yknrgph2ci1e","tag_id":"clpqpjbfk003jyknrf2nb8cgw","_id":"clpqpjbfv0046yknrhkyx8n9c"},{"post_id":"clpqpjbds0016yknrgph2ci1e","tag_id":"clpqpjbfo003qyknrha9p7k6f","_id":"clpqpjbfx0049yknrekppeuta"},{"post_id":"clpqpjbds0016yknrgph2ci1e","tag_id":"clpqpjbfq003wyknrd8tddg2j","_id":"clpqpjbfz004dyknr9l3b6w7k"},{"post_id":"clpqpjbdu001ayknr0jqph674","tag_id":"clpqpjbfu0043yknr04pfek4p","_id":"clpqpjbg4004lyknr57dyhuiy"},{"post_id":"clpqpjbdu001ayknr0jqph674","tag_id":"clpqpjbfy004cyknr181maecv","_id":"clpqpjbg5004oyknr5knsci9o"},{"post_id":"clpqpjbdw001fyknr77xmd6ql","tag_id":"clpqpjbg2004iyknr7wxffx27","_id":"clpqpjbga004xyknrd4zt60f1"},{"post_id":"clpqpjbdw001fyknr77xmd6ql","tag_id":"clpqpjbg6004pyknr34ebgg24","_id":"clpqpjbgb0050yknrg1pm5b2n"},{"post_id":"clpqpjbe3001jyknr5kr53htc","tag_id":"clpqpjbga004vyknrag5zgpv7","_id":"clpqpjbgd0056yknrd6066t7u"},{"post_id":"clpqpjbe6001nyknr7zel30mt","tag_id":"clpqpjbgc0053yknr28z9595r","_id":"clpqpjbgp005eyknrgrbl81p5"},{"post_id":"clpqpjbe8001ryknr4p14fr2x","tag_id":"clpqpjbgg005ayknreo4mdkgj","_id":"clpqpjbgu005lyknr16csbbiq"},{"post_id":"clpqpjbea001vyknreo00hx9t","tag_id":"clpqpjbgt005hyknrde0d2nhm","_id":"clpqpjbh1005ryknr8tkib9rk"},{"post_id":"clpqpjbec001zyknr2g1mgxw7","tag_id":"clpqpjbh0005pyknr1wud9the","_id":"clpqpjbh50060yknr1qnobyei"},{"post_id":"clpqpjbec001zyknr2g1mgxw7","tag_id":"clpqpjbh3005vyknr97kdcr7i","_id":"clpqpjbh60062yknr8p722pil"},{"post_id":"clpqpjbef0023yknr976e6acm","tag_id":"clpqpjbh5005yyknr01n76v1a","_id":"clpqpjbh70068yknrdp1sev96"},{"post_id":"clpqpjbef0023yknr976e6acm","tag_id":"clpqpjbh60063yknr14cqfvqo","_id":"clpqpjbh7006ayknr3tz0casr"},{"post_id":"clpqpjbeh0026yknra8y08i63","tag_id":"clpqpjbgg005ayknreo4mdkgj","_id":"clpqpjbh8006gyknrfgy5bkl2"},{"post_id":"clpqpjbeh0026yknra8y08i63","tag_id":"clpqpjbh7006byknr1u5a90s4","_id":"clpqpjbh9006iyknr1i8h5a1s"},{"post_id":"clpqpjbej0029yknr5w5k1dj9","tag_id":"clpqpjbh8006fyknrcp4dbh8m","_id":"clpqpjbh9006myknr81h6gdkq"},{"post_id":"clpqpjbeo002dyknr5dmweaep","tag_id":"clpqpjbh9006kyknrh0irgrmj","_id":"clpqpjbhb006wyknrh0pl0hc6"},{"post_id":"clpqpjbeo002dyknr5dmweaep","tag_id":"clpqpjbh3005vyknr97kdcr7i","_id":"clpqpjbhb006yyknr3r8d1v95"},{"post_id":"clpqpjbeo002dyknr5dmweaep","tag_id":"clpqpjbha006ryknrdfyz7zc2","_id":"clpqpjbhc0071yknr7enzefy5"},{"post_id":"clpqpjbeq002gyknre4nt82v6","tag_id":"clpqpjbhb006uyknr0mixdehe","_id":"clpqpjbhe0079yknr09qvep8p"},{"post_id":"clpqpjbeq002gyknre4nt82v6","tag_id":"clpqpjbhb0070yknr45mj4nnc","_id":"clpqpjbhe007byknra2tr2okk"},{"post_id":"clpqpjbeq002gyknre4nt82v6","tag_id":"clpqpjbhc0074yknra01l7lxd","_id":"clpqpjbhf007eyknr2ymm89aw"},{"post_id":"clpqpjbet002jyknrcbjt7eiy","tag_id":"clpqpjbhc0077yknr0zpc89as","_id":"clpqpjbhg007gyknrgi8r002c"},{"post_id":"clpqpjbet002jyknrcbjt7eiy","tag_id":"clpqpjbhe007cyknr59k2aul6","_id":"clpqpjbhg007hyknrg4q1d4y7"},{"post_id":"clpqpjbew002myknre9ojh4bi","tag_id":"clpqpjbhf007fyknr85ggguvb","_id":"clpqpjbhh007kyknr745t4ecg"},{"post_id":"clpqpjbew002myknre9ojh4bi","tag_id":"clpqpjbhg007iyknra1ipd05z","_id":"clpqpjbhh007lyknr8g1b7kax"},{"post_id":"clpqpjbey002pyknr9h6ad2b4","tag_id":"clpqpjbfd0034yknrat9q5o3w","_id":"clpqpjbhi007oyknr7pmaama1"},{"post_id":"clpqpjbey002pyknr9h6ad2b4","tag_id":"clpqpjbhh007myknr8vdoc4th","_id":"clpqpjbhi007pyknrh7975rru"},{"post_id":"clpqpjbf2002tyknr5vqxg13e","tag_id":"clpqpjbhi007nyknretvxb8hr","_id":"clpqpjbhj007ryknrckn41uvr"},{"post_id":"clpqpjbf7002xyknrhvp75ksg","tag_id":"clpqpjbhi007qyknr0j4l2i8p","_id":"clpqpjbhj007tyknrfj9b7l7i"},{"post_id":"clpqpjbfa0031yknrd6z335ut","tag_id":"clpqpjbhj007syknrdjgcgvyt","_id":"clpqpjbhk007wyknrey849h5u"},{"post_id":"clpqpjbfa0031yknrd6z335ut","tag_id":"clpqpjbek002ayknrb39n7nea","_id":"clpqpjbhk007xyknrh5t0af9i"},{"post_id":"clpqpjbfa0031yknrd6z335ut","tag_id":"clpqpjbhj007uyknraagw5uew","_id":"clpqpjbhl007zyknr4zacg43g"},{"post_id":"clpqpjbfc0033yknraw1udtnt","tag_id":"clpqpjbhk007vyknrh0815mmy","_id":"clpqpjbhm0082yknr0pgmasq3"},{"post_id":"clpqpjbfc0033yknraw1udtnt","tag_id":"clpqpjbhj007uyknraagw5uew","_id":"clpqpjbhm0083yknr8g0k7cod"},{"post_id":"clpqpjbfc0033yknraw1udtnt","tag_id":"clpqpjbhl0080yknr2ql9gffh","_id":"clpqpjbhm0085yknrfx0c840a"},{"post_id":"clpqpjbfe0037yknr67ij0lf8","tag_id":"clpqpjbhm0081yknr7va36aea","_id":"clpqpjbhn0088yknr48dceyym"},{"post_id":"clpqpjbfe0037yknr67ij0lf8","tag_id":"clpqpjbhm0084yknr0f4l148z","_id":"clpqpjbhn0089yknra3o0hqqg"},{"post_id":"clpqpjbfe0037yknr67ij0lf8","tag_id":"clpqpjbhn0086yknr6xqe74sr","_id":"clpqpjbho008byknr4cjj2905"},{"post_id":"clpqpjbff0039yknr8i4v19jx","tag_id":"clpqpjbhn0087yknr3i5bdbqb","_id":"clpqpjbho008cyknr8lef18ed"},{"post_id":"clpqpjbfh003dyknr5eu09wap","tag_id":"clpqpjbhn008ayknre6ax83xm","_id":"clpqpjbho008eyknr9is0hx1z"},{"post_id":"clpqpjbfi003gyknrdjk209bx","tag_id":"clpqpjbho008dyknrcxvs9utp","_id":"clpqpjbhp008gyknrcj6z61jj"},{"post_id":"clpqpjbfl003lyknrgkx220aj","tag_id":"clpqpjbhp008fyknrgxl6e30m","_id":"clpqpjbhq008jyknr6zmv44v1"},{"post_id":"clpqpjbfl003lyknrgkx220aj","tag_id":"clpqpjbhp008hyknr9lgu7y0g","_id":"clpqpjbhq008kyknrar7qa9en"},{"post_id":"clpqpjbfm003oyknra9u56yo8","tag_id":"clpqpjbhp008iyknrf9s1g1pf","_id":"clpqpjbhr008nyknrdd6yhaf5"},{"post_id":"clpqpjbfm003oyknra9u56yo8","tag_id":"clpqpjbhq008lyknr94q2gn0s","_id":"clpqpjbhr008oyknr7db5gj65"},{"post_id":"clpqpjbfp003syknrayts8oe7","tag_id":"clpqpjbho008dyknrcxvs9utp","_id":"clpqpjbhs008ryknr1dvm6x52"},{"post_id":"clpqpjbfp003syknrayts8oe7","tag_id":"clpqpjbhr008pyknr7fn03iut","_id":"clpqpjbhs008syknrdj94dw5o"},{"post_id":"clpqpjbfp003uyknraubl87gm","tag_id":"clpqpjbho008dyknrcxvs9utp","_id":"clpqpjbht008uyknreh1u4yad"},{"post_id":"clpqpjbfr003xyknr91avfmys","tag_id":"clpqpjbho008dyknrcxvs9utp","_id":"clpqpjbhu008xyknr42suge94"},{"post_id":"clpqpjbfr003xyknr91avfmys","tag_id":"clpqpjbht008vyknr3xyae4ea","_id":"clpqpjbhu008yyknr5l4u5mvt"},{"post_id":"clpqpjbfs0040yknrabaf9nnm","tag_id":"clpqpjbht008wyknrblz65fbd","_id":"clpqpjbhu0090yknr64em8k2q"},{"post_id":"clpqpjbft0042yknr8assf0m7","tag_id":"clpqpjbhu008zyknr31qp4zjo","_id":"clpqpjbhw0094yknr6mh944bv"},{"post_id":"clpqpjbft0042yknr8assf0m7","tag_id":"clpqpjbhu0091yknrf4ped6l0","_id":"clpqpjbhw0095yknrd1jc0hhm"},{"post_id":"clpqpjbft0042yknr8assf0m7","tag_id":"clpqpjbhv0092yknr6b7u1kzv","_id":"clpqpjbhw0097yknr1nswak52"},{"post_id":"clpqpjbfv0047yknr36ie4rui","tag_id":"clpqpjbhv0093yknr46pk674x","_id":"clpqpjbhx0099yknrcp3fhmi5"},{"post_id":"clpqpjbfv0047yknr36ie4rui","tag_id":"clpqpjbhw0096yknr8dge9xd8","_id":"clpqpjbhx009ayknrdvd77hot"},{"post_id":"clpqpjbfx004ayknr3f5m2ygx","tag_id":"clpqpjbhw0098yknr3880du3c","_id":"clpqpjbhy009eyknr6edageac"},{"post_id":"clpqpjbfx004ayknr3f5m2ygx","tag_id":"clpqpjbhx009byknrgp0jex8s","_id":"clpqpjbhy009fyknr5j756479"},{"post_id":"clpqpjbfx004ayknr3f5m2ygx","tag_id":"clpqpjbhx009cyknradts263j","_id":"clpqpjbhy009hyknr61b3esuo"},{"post_id":"clpqpjbfz004eyknr5v0nfvtt","tag_id":"clpqpjbfd0034yknrat9q5o3w","_id":"clpqpjbhy009iyknr3zuc3k7j"},{"post_id":"clpqpjbfz004eyknr5v0nfvtt","tag_id":"clpqpjbhx009dyknr2rxi3h48","_id":"clpqpjbhz009kyknr1bryefyd"},{"post_id":"clpqpjbg1004gyknrhrwm6b8o","tag_id":"clpqpjbfd0034yknrat9q5o3w","_id":"clpqpjbi0009myknrbxou8s5n"},{"post_id":"clpqpjbg1004gyknrhrwm6b8o","tag_id":"clpqpjbhy009gyknrbwn78hdp","_id":"clpqpjbi0009nyknrb3i8bh6v"},{"post_id":"clpqpjbg1004gyknrhrwm6b8o","tag_id":"clpqpjbhh007myknr8vdoc4th","_id":"clpqpjbi2009pyknr86ipggtv"},{"post_id":"clpqpjbg3004jyknr1v9eb8uc","tag_id":"clpqpjbfd0034yknrat9q5o3w","_id":"clpqpjbi2009qyknr8bzme8ms"},{"post_id":"clpqpjbg3004jyknr1v9eb8uc","tag_id":"clpqpjbhz009lyknr2awohxfh","_id":"clpqpjbi2009syknrgu0i6ylh"},{"post_id":"clpqpjbg4004myknrcvdu7uhc","tag_id":"clpqpjbi0009oyknrciw8cctc","_id":"clpqpjbi3009uyknrezcm4b4w"},{"post_id":"clpqpjbg4004myknrcvdu7uhc","tag_id":"clpqpjbi2009ryknreu8v7uuk","_id":"clpqpjbi4009vyknr8vd14bl5"},{"post_id":"clpqpjbg6004qyknr3zepa8q7","tag_id":"clpqpjbfd0034yknrat9q5o3w","_id":"clpqpjbi5009xyknrbozwg3sm"},{"post_id":"clpqpjbg6004qyknr3zepa8q7","tag_id":"clpqpjbi3009tyknrhqgj48sa","_id":"clpqpjbi5009yyknr8f8c1tyr"},{"post_id":"clpqpjbg8004syknr2g4899g5","tag_id":"clpqpjbgg005ayknreo4mdkgj","_id":"clpqpjbi600a0yknraicbfaa1"},{"post_id":"clpqpjbg9004uyknr653se7su","tag_id":"clpqpjbgg005ayknreo4mdkgj","_id":"clpqpjbi700a2yknr4zawcghi"},{"post_id":"clpqpjbgb004yyknrcbpx10p7","tag_id":"clpqpjbi600a1yknr358t8xsr","_id":"clpqpjbi700a4yknr95p6142o"},{"post_id":"clpqpjbgb0051yknr1mz789ed","tag_id":"clpqpjbi700a3yknrdkqbfjyk","_id":"clpqpjbi800a6yknrf3sk8xei"},{"post_id":"clpqpjbgc0054yknr8l68fulp","tag_id":"clpqpjbi800a5yknr7eqo1acu","_id":"clpqpjbi900a8yknr1tfw2ij9"},{"post_id":"clpqpjbge0058yknrdfom9ktu","tag_id":"clpqpjbi800a7yknreaq10ugb","_id":"clpqpjbi900aayknr36gd39xd"},{"post_id":"clpqpjbgj005byknr4jqm0r01","tag_id":"clpqpjbi900a9yknrdxk45ef9","_id":"clpqpjbia00acyknr0wx9en4q"},{"post_id":"clpqpjbgq005fyknr2nu9bpnb","tag_id":"clpqpjbi900abyknr291i6m63","_id":"clpqpjbia00aeyknr5g0sdw6h"},{"post_id":"clpqpjbgt005iyknr6vxz1kgx","tag_id":"clpqpjbia00adyknr7zp34xar","_id":"clpqpjbib00agyknrbtpl1jp6"},{"post_id":"clpqpjbgv005myknreeoj1l1n","tag_id":"clpqpjbia00afyknrbrsxcfc2","_id":"clpqpjbic00ajyknra4xn8av6"},{"post_id":"clpqpjbgv005myknreeoj1l1n","tag_id":"clpqpjbib00ahyknr38kg5t8r","_id":"clpqpjbic00akyknr91lk3ia4"},{"post_id":"clpqpjbgy005oyknr75dt9v0j","tag_id":"clpqpjbib00aiyknr1xfnbsqp","_id":"clpqpjbid00amyknr4t5cfqn1"},{"post_id":"clpqpjbh1005syknrcxju4p4x","tag_id":"clpqpjbic00alyknra743ei90","_id":"clpqpjbid00anyknrgm4g1e7x"}],"Tag":[{"name":"frp ","_id":"clpqpjbcs0005yknr5ehydctu"},{"name":"Linux ","_id":"clpqpjbcz000dyknr7vovfo74"},{"name":"Clamav","_id":"clpqpjbdd000lyknr78z2ceex"},{"name":"LVM","_id":"clpqpjbdk000tyknr9abie3n3"},{"name":"elasticsearch","_id":"clpqpjbdp0010yknre4se6vov"},{"name":"iptables","_id":"clpqpjbdv001cyknr8x6qeefv"},{"name":"firewalls","_id":"clpqpjbe5001lyknr420j0chz"},{"name":"monitor","_id":"clpqpjbe9001tyknr99t6dfg1"},{"name":"password","_id":"clpqpjbee0022yknrfvp6fust"},{"name":"openssl","_id":"clpqpjbek002ayknrb39n7nea"},{"name":"openssh","_id":"clpqpjbes002iyknrdcvg46nw"},{"name":"gcc","_id":"clpqpjbey002oyknr7dx47acy"},{"name":"apache-doris","_id":"clpqpjbf7002wyknr3doj8eoy"},{"name":"docker","_id":"clpqpjbfd0034yknrat9q5o3w"},{"name":"nginx","_id":"clpqpjbfk003jyknrf2nb8cgw"},{"name":"keepalived","_id":"clpqpjbfo003qyknrha9p7k6f"},{"name":"HA","_id":"clpqpjbfq003wyknrd8tddg2j"},{"name":"shell","_id":"clpqpjbfu0043yknr04pfek4p"},{"name":"","_id":"clpqpjbfy004cyknr181maecv"},{"name":"","_id":"clpqpjbg2004iyknr7wxffx27"},{"name":"windows","_id":"clpqpjbg6004pyknr34ebgg24"},{"name":"ownership","_id":"clpqpjbga004vyknrag5zgpv7"},{"name":"Oracle","_id":"clpqpjbgc0053yknr28z9595r"},{"name":"MySQL","_id":"clpqpjbgg005ayknreo4mdkgj"},{"name":"sudo","_id":"clpqpjbgt005hyknrde0d2nhm"},{"name":"mkfs.ext4","_id":"clpqpjbh0005pyknr1wud9the"},{"name":"mount","_id":"clpqpjbh3005vyknr97kdcr7i"},{"name":"repo","_id":"clpqpjbh5005yyknr01n76v1a"},{"name":"yum","_id":"clpqpjbh60063yknr14cqfvqo"},{"name":"backup","_id":"clpqpjbh7006byknr1u5a90s4"},{"name":"access","_id":"clpqpjbh8006fyknrcp4dbh8m"},{"name":"fstab","_id":"clpqpjbh9006kyknrh0irgrmj"},{"name":"umount","_id":"clpqpjbha006ryknrdfyz7zc2"},{"name":"ssh","_id":"clpqpjbhb006uyknr0mixdehe"},{"name":"","_id":"clpqpjbhb0070yknr45mj4nnc"},{"name":"ssh","_id":"clpqpjbhc0074yknra01l7lxd"},{"name":"xserver","_id":"clpqpjbhc0077yknr0zpc89as"},{"name":"","_id":"clpqpjbhe007cyknr59k2aul6"},{"name":"telnet","_id":"clpqpjbhf007fyknr85ggguvb"},{"name":"xinetd","_id":"clpqpjbhg007iyknra1ipd05z"},{"name":"","_id":"clpqpjbhh007myknr8vdoc4th"},{"name":"php","_id":"clpqpjbhi007nyknretvxb8hr"},{"name":"nextcloud","_id":"clpqpjbhi007qyknr0j4l2i8p"},{"name":"CA","_id":"clpqpjbhj007syknrdjgcgvyt"},{"name":"https","_id":"clpqpjbhj007uyknraagw5uew"},{"name":"ca","_id":"clpqpjbhk007vyknrh0815mmy"},{"name":"acme.sh","_id":"clpqpjbhl0080yknr2ql9gffh"},{"name":"tcpdump","_id":"clpqpjbhm0081yknr7va36aea"},{"name":"wireshark","_id":"clpqpjbhm0084yknr0f4l148z"},{"name":"","_id":"clpqpjbhn0086yknr6xqe74sr"},{"name":"redis","_id":"clpqpjbhn0087yknr3i5bdbqb"},{"name":"SSH","_id":"clpqpjbhn008ayknre6ax83xm"},{"name":"OpenWrt","_id":"clpqpjbho008dyknrcxvs9utp"},{"name":"kvm","_id":"clpqpjbhp008fyknrgxl6e30m"},{"name":"qemu","_id":"clpqpjbhp008hyknr9lgu7y0g"},{"name":"Ubuntu","_id":"clpqpjbhp008iyknrf9s1g1pf"},{"name":"network","_id":"clpqpjbhq008lyknr94q2gn0s"},{"name":"passwall","_id":"clpqpjbhr008pyknr7fn03iut"},{"name":"frpc","_id":"clpqpjbht008vyknr3xyae4ea"},{"name":"DevOps","_id":"clpqpjbht008wyknrblz65fbd"},{"name":"","_id":"clpqpjbhu008zyknr31qp4zjo"},{"name":"xmrig","_id":"clpqpjbhu0091yknrf4ped6l0"},{"name":"Cryptocurrency-Mining-Malware","_id":"clpqpjbhv0092yknr6b7u1kzv"},{"name":"pid","_id":"clpqpjbhv0093yknr46pk674x"},{"name":"progress","_id":"clpqpjbhw0096yknr8dge9xd8"},{"name":"v2ray","_id":"clpqpjbhw0098yknr3880du3c"},{"name":"xray","_id":"clpqpjbhx009byknrgp0jex8s"},{"name":"v2rayA","_id":"clpqpjbhx009cyknradts263j"},{"name":"systemd","_id":"clpqpjbhx009dyknr2rxi3h48"},{"name":"Dockerfile","_id":"clpqpjbhy009gyknrbwn78hdp"},{"name":"docker-compose","_id":"clpqpjbhz009lyknr2awohxfh"},{"name":"centos","_id":"clpqpjbi0009oyknrciw8cctc"},{"name":"downgrade","_id":"clpqpjbi2009ryknreu8v7uuk"},{"name":"registry","_id":"clpqpjbi3009tyknrhqgj48sa"},{"name":"Prometheus","_id":"clpqpjbi600a1yknr358t8xsr"},{"name":"Grafana","_id":"clpqpjbi700a3yknrdkqbfjyk"},{"name":"gitlab","_id":"clpqpjbi800a5yknr7eqo1acu"},{"name":"harbor","_id":"clpqpjbi800a7yknreaq10ugb"},{"name":"security","_id":"clpqpjbi900a9yknrdxk45ef9"},{"name":"mysql","_id":"clpqpjbi900abyknr291i6m63"},{"name":"samba","_id":"clpqpjbia00adyknr7zp34xar"},{"name":"SecureCRT","_id":"clpqpjbia00afyknrbrsxcfc2"},{"name":"xshell","_id":"clpqpjbib00ahyknr38kg5t8r"},{"name":"hexo","_id":"clpqpjbib00aiyknr1xfnbsqp"},{"name":"Tips","_id":"clpqpjbic00alyknra743ei90"}]}}